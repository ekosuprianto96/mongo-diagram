(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function sl(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Le={},oo=[],Vt=()=>{},Pu=()=>!1,gr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),rl=e=>e.startsWith("onUpdate:"),Xe=Object.assign,il=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Vf=Object.prototype.hasOwnProperty,De=(e,t)=>Vf.call(e,t),me=Array.isArray,so=e=>ds(e)==="[object Map]",mr=e=>ds(e)==="[object Set]",Rl=e=>ds(e)==="[object Date]",we=e=>typeof e=="function",je=e=>typeof e=="string",St=e=>typeof e=="symbol",Oe=e=>e!==null&&typeof e=="object",Lu=e=>(Oe(e)||we(e))&&we(e.then)&&we(e.catch),Ru=Object.prototype.toString,ds=e=>Ru.call(e),Hf=e=>ds(e).slice(8,-1),Bu=e=>ds(e)==="[object Object]",vr=e=>je(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Bo=sl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yr=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},Uf=/-\w/g,yt=yr(e=>e.replace(Uf,t=>t.slice(1).toUpperCase())),jf=/\B([A-Z])/g,Cn=yr(e=>e.replace(jf,"-$1").toLowerCase()),br=yr(e=>e.charAt(0).toUpperCase()+e.slice(1)),Wr=yr(e=>e?`on${br(e)}`:""),nn=(e,t)=>!Object.is(e,t),Rs=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Fu=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},xr=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Gf=e=>{const t=je(e)?Number(e):NaN;return isNaN(t)?e:t};let Bl;const wr=()=>Bl||(Bl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ze(e){if(me(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],s=je(o)?Xf(o):Ze(o);if(s)for(const r in s)t[r]=s[r]}return t}else if(je(e)||Oe(e))return e}const Yf=/;(?![^(]*\))/g,Kf=/:([^]+)/,Wf=/\/\*[^]*?\*\//g;function Xf(e){const t={};return e.replace(Wf,"").split(Yf).forEach(n=>{if(n){const o=n.split(Kf);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function ge(e){let t="";if(je(e))t=e;else if(me(e))for(let n=0;n<e.length;n++){const o=ge(e[n]);o&&(t+=o+" ")}else if(Oe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const qf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Zf=sl(qf);function zu(e){return!!e||e===""}function Jf(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=Fn(e[o],t[o]);return n}function Fn(e,t){if(e===t)return!0;let n=Rl(e),o=Rl(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=St(e),o=St(t),n||o)return e===t;if(n=me(e),o=me(t),n||o)return n&&o?Jf(e,t):!1;if(n=Oe(e),o=Oe(t),n||o){if(!n||!o)return!1;const s=Object.keys(e).length,r=Object.keys(t).length;if(s!==r)return!1;for(const i in e){const l=e.hasOwnProperty(i),a=t.hasOwnProperty(i);if(l&&!a||!l&&a||!Fn(e[i],t[i]))return!1}}return String(e)===String(t)}function Qf(e,t){return e.findIndex(n=>Fn(n,t))}const Vu=e=>!!(e&&e.__v_isRef===!0),de=e=>je(e)?e:e==null?"":me(e)||Oe(e)&&(e.toString===Ru||!we(e.toString))?Vu(e)?de(e.value):JSON.stringify(e,Hu,2):String(e),Hu=(e,t)=>Vu(t)?Hu(e,t.value):so(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,s],r)=>(n[Xr(o,r)+" =>"]=s,n),{})}:mr(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Xr(n))}:St(t)?Xr(t):Oe(t)&&!me(t)&&!Bu(t)?String(t):t,Xr=(e,t="")=>{var n;return St(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let nt;class Uu{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.__v_skip=!0,this.parent=nt,!t&&nt&&(this.index=(nt.scopes||(nt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=nt;try{return nt=this,t()}finally{nt=n}}}on(){++this._on===1&&(this.prevScope=nt,nt=this)}off(){this._on>0&&--this._on===0&&(nt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function _r(e){return new Uu(e)}function fs(){return nt}function ro(e,t=!1){nt&&nt.cleanups.push(e)}let Fe;const qr=new WeakSet;class ju{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,nt&&nt.active&&nt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,qr.has(this)&&(qr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Yu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Fl(this),Ku(this);const t=Fe,n=wt;Fe=this,wt=!0;try{return this.fn()}finally{Wu(this),Fe=t,wt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ul(t);this.deps=this.depsTail=void 0,Fl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?qr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Si(this)&&this.run()}get dirty(){return Si(this)}}let Gu=0,Fo,zo;function Yu(e,t=!1){if(e.flags|=8,t){e.next=zo,zo=e;return}e.next=Fo,Fo=e}function ll(){Gu++}function al(){if(--Gu>0)return;if(zo){let t=zo;for(zo=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Fo;){let t=Fo;for(Fo=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function Ku(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Wu(e){let t,n=e.depsTail,o=n;for(;o;){const s=o.prevDep;o.version===-1?(o===n&&(n=s),ul(o),ep(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=s}e.deps=t,e.depsTail=n}function Si(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Xu(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Xu(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===qo)||(e.globalVersion=qo,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Si(e))))return;e.flags|=2;const t=e.dep,n=Fe,o=wt;Fe=e,wt=!0;try{Ku(e);const s=e.fn(e._value);(t.version===0||nn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Fe=n,wt=o,Wu(e),e.flags&=-3}}function ul(e,t=!1){const{dep:n,prevSub:o,nextSub:s}=e;if(o&&(o.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)ul(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function ep(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let wt=!0;const qu=[];function rn(){qu.push(wt),wt=!1}function ln(){const e=qu.pop();wt=e===void 0?!0:e}function Fl(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Fe;Fe=void 0;try{t()}finally{Fe=n}}}let qo=0;class tp{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Sr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Fe||!wt||Fe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Fe)n=this.activeLink=new tp(Fe,this),Fe.deps?(n.prevDep=Fe.depsTail,Fe.depsTail.nextDep=n,Fe.depsTail=n):Fe.deps=Fe.depsTail=n,Zu(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=Fe.depsTail,n.nextDep=void 0,Fe.depsTail.nextDep=n,Fe.depsTail=n,Fe.deps===n&&(Fe.deps=o)}return n}trigger(t){this.version++,qo++,this.notify(t)}notify(t){ll();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{al()}}}function Zu(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Zu(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Ws=new WeakMap,Dn=Symbol(""),Ei=Symbol(""),Zo=Symbol("");function ot(e,t,n){if(wt&&Fe){let o=Ws.get(e);o||Ws.set(e,o=new Map);let s=o.get(n);s||(o.set(n,s=new Sr),s.map=o,s.key=n),s.track()}}function Zt(e,t,n,o,s,r){const i=Ws.get(e);if(!i){qo++;return}const l=a=>{a&&a.trigger()};if(ll(),t==="clear")i.forEach(l);else{const a=me(e),c=a&&vr(n);if(a&&n==="length"){const u=Number(o);i.forEach((f,g)=>{(g==="length"||g===Zo||!St(g)&&g>=u)&&l(f)})}else switch((n!==void 0||i.has(void 0))&&l(i.get(n)),c&&l(i.get(Zo)),t){case"add":a?c&&l(i.get("length")):(l(i.get(Dn)),so(e)&&l(i.get(Ei)));break;case"delete":a||(l(i.get(Dn)),so(e)&&l(i.get(Ei)));break;case"set":so(e)&&l(i.get(Dn));break}}al()}function np(e,t){const n=Ws.get(e);return n&&n.get(t)}function Wn(e){const t=Te(e);return t===e?t:(ot(t,"iterate",Zo),gt(e)?t:t.map(Et))}function Er(e){return ot(e=Te(e),"iterate",Zo),e}function vn(e,t){return an(e)?po(on(e)?Et(t):t):Et(t)}const op={__proto__:null,[Symbol.iterator](){return Zr(this,Symbol.iterator,e=>vn(this,e))},concat(...e){return Wn(this).concat(...e.map(t=>me(t)?Wn(t):t))},entries(){return Zr(this,"entries",e=>(e[1]=vn(this,e[1]),e))},every(e,t){return Gt(this,"every",e,t,void 0,arguments)},filter(e,t){return Gt(this,"filter",e,t,n=>n.map(o=>vn(this,o)),arguments)},find(e,t){return Gt(this,"find",e,t,n=>vn(this,n),arguments)},findIndex(e,t){return Gt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Gt(this,"findLast",e,t,n=>vn(this,n),arguments)},findLastIndex(e,t){return Gt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Gt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Jr(this,"includes",e)},indexOf(...e){return Jr(this,"indexOf",e)},join(e){return Wn(this).join(e)},lastIndexOf(...e){return Jr(this,"lastIndexOf",e)},map(e,t){return Gt(this,"map",e,t,void 0,arguments)},pop(){return So(this,"pop")},push(...e){return So(this,"push",e)},reduce(e,...t){return zl(this,"reduce",e,t)},reduceRight(e,...t){return zl(this,"reduceRight",e,t)},shift(){return So(this,"shift")},some(e,t){return Gt(this,"some",e,t,void 0,arguments)},splice(...e){return So(this,"splice",e)},toReversed(){return Wn(this).toReversed()},toSorted(e){return Wn(this).toSorted(e)},toSpliced(...e){return Wn(this).toSpliced(...e)},unshift(...e){return So(this,"unshift",e)},values(){return Zr(this,"values",e=>vn(this,e))}};function Zr(e,t,n){const o=Er(e),s=o[t]();return o!==e&&!gt(e)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.done||(r.value=n(r.value)),r}),s}const sp=Array.prototype;function Gt(e,t,n,o,s,r){const i=Er(e),l=i!==e&&!gt(e),a=i[t];if(a!==sp[t]){const f=a.apply(e,r);return l?Et(f):f}let c=n;i!==e&&(l?c=function(f,g){return n.call(this,vn(e,f),g,e)}:n.length>2&&(c=function(f,g){return n.call(this,f,g,e)}));const u=a.call(i,c,o);return l&&s?s(u):u}function zl(e,t,n,o){const s=Er(e);let r=n;return s!==e&&(gt(e)?n.length>3&&(r=function(i,l,a){return n.call(this,i,l,a,e)}):r=function(i,l,a){return n.call(this,i,vn(e,l),a,e)}),s[t](r,...o)}function Jr(e,t,n){const o=Te(e);ot(o,"iterate",Zo);const s=o[t](...n);return(s===-1||s===!1)&&Nr(n[0])?(n[0]=Te(n[0]),o[t](...n)):s}function So(e,t,n=[]){rn(),ll();const o=Te(e)[t].apply(e,n);return al(),ln(),o}const rp=sl("__proto__,__v_isRef,__isVue"),Ju=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(St));function ip(e){St(e)||(e=String(e));const t=Te(this);return ot(t,"has",e),t.hasOwnProperty(e)}class Qu{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return o===(s?r?rc:sc:r?oc:nc).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const i=me(t);if(!s){let a;if(i&&(a=op[n]))return a;if(n==="hasOwnProperty")return ip}const l=Reflect.get(t,n,Re(t)?t:o);if((St(n)?Ju.has(n):rp(n))||(s||ot(t,"get",n),r))return l;if(Re(l)){const a=i&&vr(n)?l:l.value;return s&&Oe(a)?fo(a):a}return Oe(l)?s?fo(l):ps(l):l}}class ec extends Qu{constructor(t=!1){super(!1,t)}set(t,n,o,s){let r=t[n];const i=me(t)&&vr(n);if(!this._isShallow){const c=an(r);if(!gt(o)&&!an(o)&&(r=Te(r),o=Te(o)),!i&&Re(r)&&!Re(o))return c||(r.value=o),!0}const l=i?Number(n)<t.length:De(t,n),a=Reflect.set(t,n,o,Re(t)?t:s);return t===Te(s)&&(l?nn(o,r)&&Zt(t,"set",n,o):Zt(t,"add",n,o)),a}deleteProperty(t,n){const o=De(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&o&&Zt(t,"delete",n,void 0),s}has(t,n){const o=Reflect.has(t,n);return(!St(n)||!Ju.has(n))&&ot(t,"has",n),o}ownKeys(t){return ot(t,"iterate",me(t)?"length":Dn),Reflect.ownKeys(t)}}class tc extends Qu{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const lp=new ec,ap=new tc,up=new ec(!0),cp=new tc(!0),Ci=e=>e,xs=e=>Reflect.getPrototypeOf(e);function dp(e,t,n){return function(...o){const s=this.__v_raw,r=Te(s),i=so(r),l=e==="entries"||e===Symbol.iterator&&i,a=e==="keys"&&i,c=s[e](...o),u=n?Ci:t?po:Et;return!t&&ot(r,"iterate",a?Ei:Dn),Xe(Object.create(c),{next(){const{value:f,done:g}=c.next();return g?{value:f,done:g}:{value:l?[u(f[0]),u(f[1])]:u(f),done:g}}})}}function ws(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function fp(e,t){const n={get(s){const r=this.__v_raw,i=Te(r),l=Te(s);e||(nn(s,l)&&ot(i,"get",s),ot(i,"get",l));const{has:a}=xs(i),c=t?Ci:e?po:Et;if(a.call(i,s))return c(r.get(s));if(a.call(i,l))return c(r.get(l));r!==i&&r.get(s)},get size(){const s=this.__v_raw;return!e&&ot(Te(s),"iterate",Dn),s.size},has(s){const r=this.__v_raw,i=Te(r),l=Te(s);return e||(nn(s,l)&&ot(i,"has",s),ot(i,"has",l)),s===l?r.has(s):r.has(s)||r.has(l)},forEach(s,r){const i=this,l=i.__v_raw,a=Te(l),c=t?Ci:e?po:Et;return!e&&ot(a,"iterate",Dn),l.forEach((u,f)=>s.call(r,c(u),c(f),i))}};return Xe(n,e?{add:ws("add"),set:ws("set"),delete:ws("delete"),clear:ws("clear")}:{add(s){!t&&!gt(s)&&!an(s)&&(s=Te(s));const r=Te(this);return xs(r).has.call(r,s)||(r.add(s),Zt(r,"add",s,s)),this},set(s,r){!t&&!gt(r)&&!an(r)&&(r=Te(r));const i=Te(this),{has:l,get:a}=xs(i);let c=l.call(i,s);c||(s=Te(s),c=l.call(i,s));const u=a.call(i,s);return i.set(s,r),c?nn(r,u)&&Zt(i,"set",s,r):Zt(i,"add",s,r),this},delete(s){const r=Te(this),{has:i,get:l}=xs(r);let a=i.call(r,s);a||(s=Te(s),a=i.call(r,s)),l&&l.call(r,s);const c=r.delete(s);return a&&Zt(r,"delete",s,void 0),c},clear(){const s=Te(this),r=s.size!==0,i=s.clear();return r&&Zt(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=dp(s,e,t)}),n}function Cr(e,t){const n=fp(e,t);return(o,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?o:Reflect.get(De(n,s)&&s in o?n:o,s,r)}const pp={get:Cr(!1,!1)},hp={get:Cr(!1,!0)},gp={get:Cr(!0,!1)},mp={get:Cr(!0,!0)},nc=new WeakMap,oc=new WeakMap,sc=new WeakMap,rc=new WeakMap;function vp(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function yp(e){return e.__v_skip||!Object.isExtensible(e)?0:vp(Hf(e))}function ps(e){return an(e)?e:Ir(e,!1,lp,pp,nc)}function bp(e){return Ir(e,!1,up,hp,oc)}function fo(e){return Ir(e,!0,ap,gp,sc)}function xp(e){return Ir(e,!0,cp,mp,rc)}function Ir(e,t,n,o,s){if(!Oe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=yp(e);if(r===0)return e;const i=s.get(e);if(i)return i;const l=new Proxy(e,r===2?o:n);return s.set(e,l),l}function on(e){return an(e)?on(e.__v_raw):!!(e&&e.__v_isReactive)}function an(e){return!!(e&&e.__v_isReadonly)}function gt(e){return!!(e&&e.__v_isShallow)}function Nr(e){return e?!!e.__v_raw:!1}function Te(e){const t=e&&e.__v_raw;return t?Te(t):e}function _n(e){return!De(e,"__v_skip")&&Object.isExtensible(e)&&Fu(e,"__v_skip",!0),e}const Et=e=>Oe(e)?ps(e):e,po=e=>Oe(e)?fo(e):e;function Re(e){return e?e.__v_isRef===!0:!1}function ye(e){return ic(e,!1)}function Ft(e){return ic(e,!0)}function ic(e,t){return Re(e)?e:new wp(e,t)}class wp{constructor(t,n){this.dep=new Sr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Te(t),this._value=n?t:Et(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||gt(t)||an(t);t=o?t:Te(t),nn(t,n)&&(this._rawValue=t,this._value=o?t:Et(t),this.dep.trigger())}}function U(e){return Re(e)?e.value:e}function xe(e){return we(e)?e():U(e)}const _p={get:(e,t,n)=>t==="__v_raw"?e:U(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const s=e[t];return Re(s)&&!Re(n)?(s.value=n,!0):Reflect.set(e,t,n,o)}};function lc(e){return on(e)?e:new Proxy(e,_p)}class Sp{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Sr,{get:o,set:s}=t(n.track.bind(n),n.trigger.bind(n));this._get=o,this._set=s}get value(){return this._value=this._get()}set value(t){this._set(t)}}function ac(e){return new Sp(e)}function uc(e){const t=me(e)?new Array(e.length):{};for(const n in e)t[n]=cc(e,n);return t}class Ep{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0,this._raw=Te(t);let s=!0,r=t;if(!me(t)||!vr(String(n)))do s=!Nr(r)||gt(r);while(s&&(r=r.__v_raw));this._shallow=s}get value(){let t=this._object[this._key];return this._shallow&&(t=U(t)),this._value=t===void 0?this._defaultValue:t}set value(t){if(this._shallow&&Re(this._raw[this._key])){const n=this._object[this._key];if(Re(n)){n.value=t;return}}this._object[this._key]=t}get dep(){return np(this._raw,this._key)}}class Cp{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Pe(e,t,n){return Re(e)?e:we(e)?new Cp(e):Oe(e)&&arguments.length>1?cc(e,t,n):ye(e)}function cc(e,t,n){return new Ep(e,t,n)}class Ip{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Sr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=qo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Fe!==this)return Yu(this,!0),!0}get value(){const t=this.dep.track();return Xu(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Np(e,t,n=!1){let o,s;return we(e)?o=e:(o=e.get,s=e.set),new Ip(o,s,n)}const _s={},Xs=new WeakMap;let An;function Tp(e,t=!1,n=An){if(n){let o=Xs.get(n);o||Xs.set(n,o=[]),o.push(e)}}function $p(e,t,n=Le){const{immediate:o,deep:s,once:r,scheduler:i,augmentJob:l,call:a}=n,c=w=>s?w:gt(w)||s===!1||s===0?Jt(w,1):Jt(w);let u,f,g,v,S=!1,x=!1;if(Re(e)?(f=()=>e.value,S=gt(e)):on(e)?(f=()=>c(e),S=!0):me(e)?(x=!0,S=e.some(w=>on(w)||gt(w)),f=()=>e.map(w=>{if(Re(w))return w.value;if(on(w))return c(w);if(we(w))return a?a(w,2):w()})):we(e)?t?f=a?()=>a(e,2):e:f=()=>{if(g){rn();try{g()}finally{ln()}}const w=An;An=u;try{return a?a(e,3,[v]):e(v)}finally{An=w}}:f=Vt,t&&s){const w=f,I=s===!0?1/0:s;f=()=>Jt(w(),I)}const N=fs(),C=()=>{u.stop(),N&&N.active&&il(N.effects,u)};if(r&&t){const w=t;t=(...I)=>{w(...I),C()}}let A=x?new Array(e.length).fill(_s):_s;const m=w=>{if(!(!(u.flags&1)||!u.dirty&&!w))if(t){const I=u.run();if(s||S||(x?I.some((H,X)=>nn(H,A[X])):nn(I,A))){g&&g();const H=An;An=u;try{const X=[I,A===_s?void 0:x&&A[0]===_s?[]:A,v];A=I,a?a(t,3,X):t(...X)}finally{An=H}}}else u.run()};return l&&l(m),u=new ju(f),u.scheduler=i?()=>i(m,!1):m,v=w=>Tp(w,!1,u),g=u.onStop=()=>{const w=Xs.get(u);if(w){if(a)a(w,4);else for(const I of w)I();Xs.delete(u)}},t?o?m(!0):A=u.run():i?i(m.bind(null,!0),!0):u.run(),C.pause=u.pause.bind(u),C.resume=u.resume.bind(u),C.stop=C,C}function Jt(e,t=1/0,n){if(t<=0||!Oe(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Re(e))Jt(e.value,t,n);else if(me(e))for(let o=0;o<e.length;o++)Jt(e[o],t,n);else if(mr(e)||so(e))e.forEach(o=>{Jt(o,t,n)});else if(Bu(e)){for(const o in e)Jt(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&Jt(e[o],t,n)}return e}function hs(e,t,n,o){try{return o?e(...o):e()}catch(s){Tr(s,t,n)}}function Ct(e,t,n,o){if(we(e)){const s=hs(e,t,n,o);return s&&Lu(s)&&s.catch(r=>{Tr(r,t,n)}),s}if(me(e)){const s=[];for(let r=0;r<e.length;r++)s.push(Ct(e[r],t,n,o));return s}}function Tr(e,t,n,o=!0){const s=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||Le;if(t){let l=t.parent;const a=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const u=l.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,a,c)===!1)return}l=l.parent}if(r){rn(),hs(r,null,10,[e,a,c]),ln();return}}Mp(e,n,s,o,i)}function Mp(e,t,n,o=!0,s=!1){if(s)throw e;console.error(e)}const lt=[];let Dt=-1;const io=[];let yn=null,Qn=0;const dc=Promise.resolve();let qs=null;function ut(e){const t=qs||dc;return e?t.then(this?e.bind(this):e):t}function Ap(e){let t=Dt+1,n=lt.length;for(;t<n;){const o=t+n>>>1,s=lt[o],r=Jo(s);r<e||r===e&&s.flags&2?t=o+1:n=o}return t}function cl(e){if(!(e.flags&1)){const t=Jo(e),n=lt[lt.length-1];!n||!(e.flags&2)&&t>=Jo(n)?lt.push(e):lt.splice(Ap(t),0,e),e.flags|=1,fc()}}function fc(){qs||(qs=dc.then(hc))}function kp(e){me(e)?io.push(...e):yn&&e.id===-1?yn.splice(Qn+1,0,e):e.flags&1||(io.push(e),e.flags|=1),fc()}function Vl(e,t,n=Dt+1){for(;n<lt.length;n++){const o=lt[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;lt.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function pc(e){if(io.length){const t=[...new Set(io)].sort((n,o)=>Jo(n)-Jo(o));if(io.length=0,yn){yn.push(...t);return}for(yn=t,Qn=0;Qn<yn.length;Qn++){const n=yn[Qn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}yn=null,Qn=0}}const Jo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function hc(e){try{for(Dt=0;Dt<lt.length;Dt++){const t=lt[Dt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),hs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Dt<lt.length;Dt++){const t=lt[Dt];t&&(t.flags&=-2)}Dt=-1,lt.length=0,pc(),qs=null,(lt.length||io.length)&&hc()}}let Je=null,gc=null;function Zs(e){const t=Je;return Je=e,gc=e&&e.type.__scopeId||null,t}function ht(e,t=Je,n){if(!t||e._n)return e;const o=(...s)=>{o._d&&er(-1);const r=Zs(t);let i;try{i=e(...s)}finally{Zs(r),o._d&&er(1)}return i};return o._n=!0,o._c=!0,o._d=!0,o}function zn(e,t){if(Je===null)return e;const n=Or(Je),o=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[r,i,l,a=Le]=t[s];r&&(we(r)&&(r={mounted:r,updated:r}),r.deep&&Jt(i),o.push({dir:r,instance:n,value:i,oldValue:void 0,arg:l,modifiers:a}))}return e}function Tn(e,t,n,o){const s=e.dirs,r=t&&t.dirs;for(let i=0;i<s.length;i++){const l=s[i];r&&(l.oldValue=r[i].value);let a=l.dir[o];a&&(rn(),Ct(a,n,8,[e.el,l,e,t]),ln())}}function Vn(e,t){if(st){let n=st.provides;const o=st.parent&&st.parent.provides;o===n&&(n=st.provides=Object.create(o)),n[e]=t}}function _t(e,t,n=!1){const o=Nt();if(o||Pn){let s=Pn?Pn._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&we(t)?t.call(o&&o.proxy):t}}function Op(){return!!(Nt()||Pn)}const Dp=Symbol.for("v-scx"),Pp=()=>_t(Dp);function _e(e,t,n){return mc(e,t,n)}function mc(e,t,n=Le){const{immediate:o,deep:s,flush:r,once:i}=n,l=Xe({},n),a=t&&o||!t&&r!=="post";let c;if(ts){if(r==="sync"){const v=Pp();c=v.__watcherHandles||(v.__watcherHandles=[])}else if(!a){const v=()=>{};return v.stop=Vt,v.resume=Vt,v.pause=Vt,v}}const u=st;l.call=(v,S,x)=>Ct(v,u,S,x);let f=!1;r==="post"?l.scheduler=v=>{tt(v,u&&u.suspense)}:r!=="sync"&&(f=!0,l.scheduler=(v,S)=>{S?v():cl(v)}),l.augmentJob=v=>{t&&(v.flags|=4),f&&(v.flags|=2,u&&(v.id=u.uid,v.i=u))};const g=$p(e,t,l);return ts&&(c?c.push(g):a&&g()),g}function Lp(e,t,n){const o=this.proxy,s=je(e)?e.includes(".")?vc(o,e):()=>o[e]:e.bind(o,o);let r;we(t)?r=t:(r=t.handler,n=t);const i=gs(this),l=mc(s,r.bind(o),n);return i(),l}function vc(e,t){const n=t.split(".");return()=>{let o=e;for(let s=0;s<n.length&&o;s++)o=o[n[s]];return o}}const yc=Symbol("_vte"),Rp=e=>e.__isTeleport,Vo=e=>e&&(e.disabled||e.disabled===""),Hl=e=>e&&(e.defer||e.defer===""),Ul=e=>typeof SVGElement<"u"&&e instanceof SVGElement,jl=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Ii=(e,t)=>{const n=e&&e.to;return je(n)?t?t(n):null:n},bc={name:"Teleport",__isTeleport:!0,process(e,t,n,o,s,r,i,l,a,c){const{mc:u,pc:f,pbc:g,o:{insert:v,querySelector:S,createText:x,createComment:N}}=c,C=Vo(t.props);let{shapeFlag:A,children:m,dynamicChildren:w}=t;if(e==null){const I=t.el=x(""),H=t.anchor=x("");v(I,n,o),v(H,n,o);const X=(R,V)=>{A&16&&u(m,R,V,s,r,i,l,a)},B=()=>{const R=t.target=Ii(t.props,S),V=Ni(R,t,x,v);R&&(i!=="svg"&&Ul(R)?i="svg":i!=="mathml"&&jl(R)&&(i="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(R),C||(X(R,V),Bs(t,!1)))};C&&(X(n,H),Bs(t,!0)),Hl(t.props)?(t.el.__isMounted=!1,tt(()=>{B(),delete t.el.__isMounted},r)):B()}else{if(Hl(t.props)&&e.el.__isMounted===!1){tt(()=>{bc.process(e,t,n,o,s,r,i,l,a,c)},r);return}t.el=e.el,t.targetStart=e.targetStart;const I=t.anchor=e.anchor,H=t.target=e.target,X=t.targetAnchor=e.targetAnchor,B=Vo(e.props),R=B?n:H,V=B?I:X;if(i==="svg"||Ul(H)?i="svg":(i==="mathml"||jl(H))&&(i="mathml"),w?(g(e.dynamicChildren,w,R,s,r,i,l),hl(e,t,!0)):a||f(e,t,R,V,s,r,i,l,!1),C)B?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Ss(t,n,I,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const z=t.target=Ii(t.props,S);z&&Ss(t,z,null,c,0)}else B&&Ss(t,H,X,c,1);Bs(t,C)}},remove(e,t,n,{um:o,o:{remove:s}},r){const{shapeFlag:i,children:l,anchor:a,targetStart:c,targetAnchor:u,target:f,props:g}=e;if(f&&(s(c),s(u)),r&&s(a),i&16){const v=r||!Vo(g);for(let S=0;S<l.length;S++){const x=l[S];o(x,t,n,v,!!x.dynamicChildren)}}},move:Ss,hydrate:Bp};function Ss(e,t,n,{o:{insert:o},m:s},r=2){r===0&&o(e.targetAnchor,t,n);const{el:i,anchor:l,shapeFlag:a,children:c,props:u}=e,f=r===2;if(f&&o(i,t,n),(!f||Vo(u))&&a&16)for(let g=0;g<c.length;g++)s(c[g],t,n,2);f&&o(l,t,n)}function Bp(e,t,n,o,s,r,{o:{nextSibling:i,parentNode:l,querySelector:a,insert:c,createText:u}},f){function g(N,C){let A=C;for(;A;){if(A&&A.nodeType===8){if(A.data==="teleport start anchor")t.targetStart=A;else if(A.data==="teleport anchor"){t.targetAnchor=A,N._lpa=t.targetAnchor&&i(t.targetAnchor);break}}A=i(A)}}function v(N,C){C.anchor=f(i(N),C,l(N),n,o,s,r)}const S=t.target=Ii(t.props,a),x=Vo(t.props);if(S){const N=S._lpa||S.firstChild;t.shapeFlag&16&&(x?(v(e,t),g(S,N),t.targetAnchor||Ni(S,t,u,c,l(e)===S?e:null)):(t.anchor=i(e),g(S,N),t.targetAnchor||Ni(S,t,u,c),f(N&&i(N),t,S,n,o,s,r))),Bs(t,x)}else x&&t.shapeFlag&16&&(v(e,t),t.targetStart=e,t.targetAnchor=i(e));return t.anchor&&i(t.anchor)}const Fp=bc;function Bs(e,t){const n=e.ctx;if(n&&n.ut){let o,s;for(t?(o=e.el,s=e.anchor):(o=e.targetStart,s=e.targetAnchor);o&&o!==s;)o.nodeType===1&&o.setAttribute("data-v-owner",n.uid),o=o.nextSibling;n.ut()}}function Ni(e,t,n,o,s=null){const r=t.targetStart=n(""),i=t.targetAnchor=n("");return r[yc]=i,e&&(o(r,e,s),o(i,e,s)),i}const pn=Symbol("_leaveCb"),Eo=Symbol("_enterCb");function zp(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ct(()=>{e.isMounted=!0}),Mr(()=>{e.isUnmounting=!0}),e}const vt=[Function,Array],Vp={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:vt,onEnter:vt,onAfterEnter:vt,onEnterCancelled:vt,onBeforeLeave:vt,onLeave:vt,onAfterLeave:vt,onLeaveCancelled:vt,onBeforeAppear:vt,onAppear:vt,onAfterAppear:vt,onAppearCancelled:vt};function Hp(e,t){const{leavingVNodes:n}=e;let o=n.get(t.type);return o||(o=Object.create(null),n.set(t.type,o)),o}function Ti(e,t,n,o,s){const{appear:r,mode:i,persisted:l=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:g,onLeave:v,onAfterLeave:S,onLeaveCancelled:x,onBeforeAppear:N,onAppear:C,onAfterAppear:A,onAppearCancelled:m}=t,w=String(e.key),I=Hp(n,e),H=(R,V)=>{R&&Ct(R,o,9,V)},X=(R,V)=>{const z=V[1];H(R,V),me(R)?R.every(T=>T.length<=1)&&z():R.length<=1&&z()},B={mode:i,persisted:l,beforeEnter(R){let V=a;if(!n.isMounted)if(r)V=N||a;else return;R[pn]&&R[pn](!0);const z=I[w];z&&to(e,z)&&z.el[pn]&&z.el[pn](),H(V,[R])},enter(R){let V=c,z=u,T=f;if(!n.isMounted)if(r)V=C||c,z=A||u,T=m||f;else return;let Q=!1;R[Eo]=W=>{Q||(Q=!0,W?H(T,[R]):H(z,[R]),B.delayedLeave&&B.delayedLeave(),R[Eo]=void 0)};const M=R[Eo].bind(null,!1);V?X(V,[R,M]):M()},leave(R,V){const z=String(e.key);if(R[Eo]&&R[Eo](!0),n.isUnmounting)return V();H(g,[R]);let T=!1;R[pn]=M=>{T||(T=!0,V(),M?H(x,[R]):H(S,[R]),R[pn]=void 0,I[z]===e&&delete I[z])};const Q=R[pn].bind(null,!1);I[z]=e,v?X(v,[R,Q]):Q()},clone(R){return Ti(R,t,n,o)}};return B}function Qo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Qo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function xc(e,t=!1,n){let o=[],s=0;for(let r=0;r<e.length;r++){let i=e[r];const l=n==null?i.key:String(n)+String(i.key!=null?i.key:r);i.type===ue?(i.patchFlag&128&&s++,o=o.concat(xc(i.children,t,l))):(t||i.type!==Ut)&&o.push(l!=null?Hn(i,{key:l}):i)}if(s>1)for(let r=0;r<o.length;r++)o[r].patchFlag=-2;return o}function He(e,t){return we(e)?Xe({name:e.name},t,{setup:e}):e}function wc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Gl(e,t){let n;return!!((n=Object.getOwnPropertyDescriptor(e,t))&&!n.configurable)}const Js=new WeakMap;function Ho(e,t,n,o,s=!1){if(me(e)){e.forEach((x,N)=>Ho(x,t&&(me(t)?t[N]:t),n,o,s));return}if(lo(o)&&!s){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&Ho(e,t,n,o.component.subTree);return}const r=o.shapeFlag&4?Or(o.component):o.el,i=s?null:r,{i:l,r:a}=e,c=t&&t.r,u=l.refs===Le?l.refs={}:l.refs,f=l.setupState,g=Te(f),v=f===Le?Pu:x=>Gl(u,x)?!1:De(g,x),S=(x,N)=>!(N&&Gl(u,N));if(c!=null&&c!==a){if(Yl(t),je(c))u[c]=null,v(c)&&(f[c]=null);else if(Re(c)){const x=t;S(c,x.k)&&(c.value=null),x.k&&(u[x.k]=null)}}if(we(a))hs(a,l,12,[i,u]);else{const x=je(a),N=Re(a);if(x||N){const C=()=>{if(e.f){const A=x?v(a)?f[a]:u[a]:S()||!e.k?a.value:u[e.k];if(s)me(A)&&il(A,r);else if(me(A))A.includes(r)||A.push(r);else if(x)u[a]=[r],v(a)&&(f[a]=u[a]);else{const m=[r];S(a,e.k)&&(a.value=m),e.k&&(u[e.k]=m)}}else x?(u[a]=i,v(a)&&(f[a]=i)):N&&(S(a,e.k)&&(a.value=i),e.k&&(u[e.k]=i))};if(i){const A=()=>{C(),Js.delete(e)};A.id=-1,Js.set(e,A),tt(A,n)}else Yl(e),C()}}}function Yl(e){const t=Js.get(e);t&&(t.flags|=8,Js.delete(e))}wr().requestIdleCallback;wr().cancelIdleCallback;const lo=e=>!!e.type.__asyncLoader,_c=e=>e.type.__isKeepAlive;function Up(e,t){Sc(e,"a",t)}function jp(e,t){Sc(e,"da",t)}function Sc(e,t,n=st){const o=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if($r(t,o,n),n){let s=n.parent;for(;s&&s.parent;)_c(s.parent.vnode)&&Gp(o,t,n,s),s=s.parent}}function Gp(e,t,n,o){const s=$r(t,e,o,!0);In(()=>{il(o[t],s)},n)}function $r(e,t,n=st,o=!1){if(n){const s=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...i)=>{rn();const l=gs(n),a=Ct(t,n,e,i);return l(),ln(),a});return o?s.unshift(r):s.push(r),r}}const cn=e=>(t,n=st)=>{(!ts||e==="sp")&&$r(e,(...o)=>t(...o),n)},Ec=cn("bm"),ct=cn("m"),Yp=cn("bu"),Cc=cn("u"),Mr=cn("bum"),In=cn("um"),Kp=cn("sp"),Wp=cn("rtg"),Xp=cn("rtc");function qp(e,t=st){$r("ec",e,t)}const Ic="components";function dl(e,t){return Tc(Ic,e,!0,t)||e}const Nc=Symbol.for("v-ndc");function eo(e){return je(e)?Tc(Ic,e,!1)||e:e||Nc}function Tc(e,t,n=!0,o=!1){const s=Je||st;if(s){const r=s.type;{const l=Lh(r,!1);if(l&&(l===t||l===yt(t)||l===br(yt(t))))return r}const i=Kl(s[e]||r[e],t)||Kl(s.appContext[e],t);return!i&&o?r:i}}function Kl(e,t){return e&&(e[t]||e[yt(t)]||e[br(yt(t))])}function Ee(e,t,n,o){let s;const r=n&&n[o],i=me(e);if(i||je(e)){const l=i&&on(e);let a=!1,c=!1;l&&(a=!gt(e),c=an(e),e=Er(e)),s=new Array(e.length);for(let u=0,f=e.length;u<f;u++)s[u]=t(a?c?po(Et(e[u])):Et(e[u]):e[u],u,void 0,r&&r[u])}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,r&&r[l])}else if(Oe(e))if(e[Symbol.iterator])s=Array.from(e,(l,a)=>t(l,a,void 0,r&&r[a]));else{const l=Object.keys(e);s=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const u=l[a];s[a]=t(e[u],u,a,r&&r[a])}}else s=[];return n&&(n[o]=s),s}function Ue(e,t,n={},o,s){if(Je.ce||Je.parent&&lo(Je.parent)&&Je.parent.ce){const c=Object.keys(n).length>0;return t!=="default"&&(n.name=t),F(),Ve(ue,null,[oe("slot",n,o&&o())],c?-2:64)}let r=e[t];r&&r._c&&(r._d=!1),F();const i=r&&$c(r(n)),l=n.key||i&&i.key,a=Ve(ue,{key:(l&&!St(l)?l:`_${t}`)+(!i&&o?"_fb":"")},i||(o?o():[]),i&&e._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function $c(e){return e.some(t=>es(t)?!(t.type===Ut||t.type===ue&&!$c(t.children)):!0)?e:null}const $i=e=>e?Xc(e)?Or(e):$i(e.parent):null,Uo=Xe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>$i(e.parent),$root:e=>$i(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>kc(e),$forceUpdate:e=>e.f||(e.f=()=>{cl(e.update)}),$nextTick:e=>e.n||(e.n=ut.bind(e.proxy)),$watch:e=>Lp.bind(e)}),Qr=(e,t)=>e!==Le&&!e.__isScriptSetup&&De(e,t),Zp={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:s,props:r,accessCache:i,type:l,appContext:a}=e;if(t[0]!=="$"){const g=i[t];if(g!==void 0)switch(g){case 1:return o[t];case 2:return s[t];case 4:return n[t];case 3:return r[t]}else{if(Qr(o,t))return i[t]=1,o[t];if(s!==Le&&De(s,t))return i[t]=2,s[t];if(De(r,t))return i[t]=3,r[t];if(n!==Le&&De(n,t))return i[t]=4,n[t];Mi&&(i[t]=0)}}const c=Uo[t];let u,f;if(c)return t==="$attrs"&&ot(e.attrs,"get",""),c(e);if((u=l.__cssModules)&&(u=u[t]))return u;if(n!==Le&&De(n,t))return i[t]=4,n[t];if(f=a.config.globalProperties,De(f,t))return f[t]},set({_:e},t,n){const{data:o,setupState:s,ctx:r}=e;return Qr(s,t)?(s[t]=n,!0):o!==Le&&De(o,t)?(o[t]=n,!0):De(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:s,props:r,type:i}},l){let a;return!!(n[l]||e!==Le&&l[0]!=="$"&&De(e,l)||Qr(t,l)||De(r,l)||De(o,l)||De(Uo,l)||De(s.config.globalProperties,l)||(a=i.__cssModules)&&a[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:De(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Jp(){return Mc().slots}function Qp(){return Mc().attrs}function Mc(e){const t=Nt();return t.setupContext||(t.setupContext=Zc(t))}function Wl(e){return me(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function eh(e,t){const n={};for(const o in e)t.includes(o)||Object.defineProperty(n,o,{enumerable:!0,get:()=>e[o]});return n}let Mi=!0;function th(e){const t=kc(e),n=e.proxy,o=e.ctx;Mi=!1,t.beforeCreate&&Xl(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:i,watch:l,provide:a,inject:c,created:u,beforeMount:f,mounted:g,beforeUpdate:v,updated:S,activated:x,deactivated:N,beforeDestroy:C,beforeUnmount:A,destroyed:m,unmounted:w,render:I,renderTracked:H,renderTriggered:X,errorCaptured:B,serverPrefetch:R,expose:V,inheritAttrs:z,components:T,directives:Q,filters:M}=t;if(c&&nh(c,o,null),i)for(const O in i){const P=i[O];we(P)&&(o[O]=P.bind(n))}if(s){const O=s.call(n,n);Oe(O)&&(e.data=ps(O))}if(Mi=!0,r)for(const O in r){const P=r[O],d=we(P)?P.bind(n,n):we(P.get)?P.get.bind(n,n):Vt,h=!we(P)&&we(P.set)?P.set.bind(n):Vt,J=ie({get:d,set:h});Object.defineProperty(o,O,{enumerable:!0,configurable:!0,get:()=>J.value,set:ne=>J.value=ne})}if(l)for(const O in l)Ac(l[O],o,n,O);if(a){const O=we(a)?a.call(n):a;Reflect.ownKeys(O).forEach(P=>{Vn(P,O[P])})}u&&Xl(u,e,"c");function L(O,P){me(P)?P.forEach(d=>O(d.bind(n))):P&&O(P.bind(n))}if(L(Ec,f),L(ct,g),L(Yp,v),L(Cc,S),L(Up,x),L(jp,N),L(qp,B),L(Xp,H),L(Wp,X),L(Mr,A),L(In,w),L(Kp,R),me(V))if(V.length){const O=e.exposed||(e.exposed={});V.forEach(P=>{Object.defineProperty(O,P,{get:()=>n[P],set:d=>n[P]=d,enumerable:!0})})}else e.exposed||(e.exposed={});I&&e.render===Vt&&(e.render=I),z!=null&&(e.inheritAttrs=z),T&&(e.components=T),Q&&(e.directives=Q),R&&wc(e)}function nh(e,t,n=Vt){me(e)&&(e=Ai(e));for(const o in e){const s=e[o];let r;Oe(s)?"default"in s?r=_t(s.from||o,s.default,!0):r=_t(s.from||o):r=_t(s),Re(r)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>r.value,set:i=>r.value=i}):t[o]=r}}function Xl(e,t,n){Ct(me(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function Ac(e,t,n,o){let s=o.includes(".")?vc(n,o):()=>n[o];if(je(e)){const r=t[e];we(r)&&_e(s,r)}else if(we(e))_e(s,e.bind(n));else if(Oe(e))if(me(e))e.forEach(r=>Ac(r,t,n,o));else{const r=we(e.handler)?e.handler.bind(n):t[e.handler];we(r)&&_e(s,r,e)}}function kc(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,l=r.get(t);let a;return l?a=l:!s.length&&!n&&!o?a=t:(a={},s.length&&s.forEach(c=>Qs(a,c,i,!0)),Qs(a,t,i)),Oe(t)&&r.set(t,a),a}function Qs(e,t,n,o=!1){const{mixins:s,extends:r}=t;r&&Qs(e,r,n,!0),s&&s.forEach(i=>Qs(e,i,n,!0));for(const i in t)if(!(o&&i==="expose")){const l=oh[i]||n&&n[i];e[i]=l?l(e[i],t[i]):t[i]}return e}const oh={data:ql,props:Zl,emits:Zl,methods:Oo,computed:Oo,beforeCreate:rt,created:rt,beforeMount:rt,mounted:rt,beforeUpdate:rt,updated:rt,beforeDestroy:rt,beforeUnmount:rt,destroyed:rt,unmounted:rt,activated:rt,deactivated:rt,errorCaptured:rt,serverPrefetch:rt,components:Oo,directives:Oo,watch:rh,provide:ql,inject:sh};function ql(e,t){return t?e?function(){return Xe(we(e)?e.call(this,this):e,we(t)?t.call(this,this):t)}:t:e}function sh(e,t){return Oo(Ai(e),Ai(t))}function Ai(e){if(me(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function rt(e,t){return e?[...new Set([].concat(e,t))]:t}function Oo(e,t){return e?Xe(Object.create(null),e,t):t}function Zl(e,t){return e?me(e)&&me(t)?[...new Set([...e,...t])]:Xe(Object.create(null),Wl(e),Wl(t??{})):t}function rh(e,t){if(!e)return t;if(!t)return e;const n=Xe(Object.create(null),e);for(const o in t)n[o]=rt(e[o],t[o]);return n}function Oc(){return{app:null,config:{isNativeTag:Pu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ih=0;function lh(e,t){return function(o,s=null){we(o)||(o=Xe({},o)),s!=null&&!Oe(s)&&(s=null);const r=Oc(),i=new WeakSet,l=[];let a=!1;const c=r.app={_uid:ih++,_component:o,_props:s,_container:null,_context:r,_instance:null,version:Fh,get config(){return r.config},set config(u){},use(u,...f){return i.has(u)||(u&&we(u.install)?(i.add(u),u.install(c,...f)):we(u)&&(i.add(u),u(c,...f))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,f){return f?(r.components[u]=f,c):r.components[u]},directive(u,f){return f?(r.directives[u]=f,c):r.directives[u]},mount(u,f,g){if(!a){const v=c._ceVNode||oe(o,s);return v.appContext=r,g===!0?g="svg":g===!1&&(g=void 0),e(v,u,g),a=!0,c._container=u,u.__vue_app__=c,Or(v.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Ct(l,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,f){return r.provides[u]=f,c},runWithContext(u){const f=Pn;Pn=c;try{return u()}finally{Pn=f}}};return c}}let Pn=null;const ah=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${yt(t)}Modifiers`]||e[`${Cn(t)}Modifiers`];function uh(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||Le;let s=n;const r=t.startsWith("update:"),i=r&&ah(o,t.slice(7));i&&(i.trim&&(s=n.map(u=>je(u)?u.trim():u)),i.number&&(s=n.map(xr)));let l,a=o[l=Wr(t)]||o[l=Wr(yt(t))];!a&&r&&(a=o[l=Wr(Cn(t))]),a&&Ct(a,e,6,s);const c=o[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Ct(c,e,6,s)}}const ch=new WeakMap;function Dc(e,t,n=!1){const o=n?ch:t.emitsCache,s=o.get(e);if(s!==void 0)return s;const r=e.emits;let i={},l=!1;if(!we(e)){const a=c=>{const u=Dc(c,t,!0);u&&(l=!0,Xe(i,u))};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!r&&!l?(Oe(e)&&o.set(e,null),null):(me(r)?r.forEach(a=>i[a]=null):Xe(i,r),Oe(e)&&o.set(e,i),i)}function Ar(e,t){return!e||!gr(t)?!1:(t=t.slice(2).replace(/Once$/,""),De(e,t[0].toLowerCase()+t.slice(1))||De(e,Cn(t))||De(e,t))}function Jl(e){const{type:t,vnode:n,proxy:o,withProxy:s,propsOptions:[r],slots:i,attrs:l,emit:a,render:c,renderCache:u,props:f,data:g,setupState:v,ctx:S,inheritAttrs:x}=e,N=Zs(e);let C,A;try{if(n.shapeFlag&4){const w=s||o,I=w;C=Lt(c.call(I,w,u,f,v,g,S)),A=l}else{const w=t;C=Lt(w.length>1?w(f,{attrs:l,slots:i,emit:a}):w(f,null)),A=t.props?l:dh(l)}}catch(w){jo.length=0,Tr(w,e,1),C=oe(Ut)}let m=C;if(A&&x!==!1){const w=Object.keys(A),{shapeFlag:I}=m;w.length&&I&7&&(r&&w.some(rl)&&(A=fh(A,r)),m=Hn(m,A,!1,!0))}return n.dirs&&(m=Hn(m,null,!1,!0),m.dirs=m.dirs?m.dirs.concat(n.dirs):n.dirs),n.transition&&Qo(m,n.transition),C=m,Zs(N),C}const dh=e=>{let t;for(const n in e)(n==="class"||n==="style"||gr(n))&&((t||(t={}))[n]=e[n]);return t},fh=(e,t)=>{const n={};for(const o in e)(!rl(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function ph(e,t,n){const{props:o,children:s,component:r}=e,{props:i,children:l,patchFlag:a}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return o?Ql(o,i,c):!!i;if(a&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const g=u[f];if(Pc(i,o,g)&&!Ar(c,g))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:o===i?!1:o?i?Ql(o,i,c):!0:!!i;return!1}function Ql(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let s=0;s<o.length;s++){const r=o[s];if(Pc(t,e,r)&&!Ar(n,r))return!0}return!1}function Pc(e,t,n){const o=e[n],s=t[n];return n==="style"&&Oe(o)&&Oe(s)?!Fn(o,s):o!==s}function hh({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const Lc={},Rc=()=>Object.create(Lc),Bc=e=>Object.getPrototypeOf(e)===Lc;function gh(e,t,n,o=!1){const s={},r=Rc();e.propsDefaults=Object.create(null),Fc(e,t,s,r);for(const i in e.propsOptions[0])i in s||(s[i]=void 0);n?e.props=o?s:bp(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function mh(e,t,n,o){const{props:s,attrs:r,vnode:{patchFlag:i}}=e,l=Te(s),[a]=e.propsOptions;let c=!1;if((o||i>0)&&!(i&16)){if(i&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let g=u[f];if(Ar(e.emitsOptions,g))continue;const v=t[g];if(a)if(De(r,g))v!==r[g]&&(r[g]=v,c=!0);else{const S=yt(g);s[S]=ki(a,l,S,v,e,!1)}else v!==r[g]&&(r[g]=v,c=!0)}}}else{Fc(e,t,s,r)&&(c=!0);let u;for(const f in l)(!t||!De(t,f)&&((u=Cn(f))===f||!De(t,u)))&&(a?n&&(n[f]!==void 0||n[u]!==void 0)&&(s[f]=ki(a,l,f,void 0,e,!0)):delete s[f]);if(r!==l)for(const f in r)(!t||!De(t,f))&&(delete r[f],c=!0)}c&&Zt(e.attrs,"set","")}function Fc(e,t,n,o){const[s,r]=e.propsOptions;let i=!1,l;if(t)for(let a in t){if(Bo(a))continue;const c=t[a];let u;s&&De(s,u=yt(a))?!r||!r.includes(u)?n[u]=c:(l||(l={}))[u]=c:Ar(e.emitsOptions,a)||(!(a in o)||c!==o[a])&&(o[a]=c,i=!0)}if(r){const a=Te(n),c=l||Le;for(let u=0;u<r.length;u++){const f=r[u];n[f]=ki(s,a,f,c[f],e,!De(c,f))}}return i}function ki(e,t,n,o,s,r){const i=e[n];if(i!=null){const l=De(i,"default");if(l&&o===void 0){const a=i.default;if(i.type!==Function&&!i.skipFactory&&we(a)){const{propsDefaults:c}=s;if(n in c)o=c[n];else{const u=gs(s);o=c[n]=a.call(null,t),u()}}else o=a;s.ce&&s.ce._setProp(n,o)}i[0]&&(r&&!l?o=!1:i[1]&&(o===""||o===Cn(n))&&(o=!0))}return o}const vh=new WeakMap;function zc(e,t,n=!1){const o=n?vh:t.propsCache,s=o.get(e);if(s)return s;const r=e.props,i={},l=[];let a=!1;if(!we(e)){const u=f=>{a=!0;const[g,v]=zc(f,t,!0);Xe(i,g),v&&l.push(...v)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!a)return Oe(e)&&o.set(e,oo),oo;if(me(r))for(let u=0;u<r.length;u++){const f=yt(r[u]);ea(f)&&(i[f]=Le)}else if(r)for(const u in r){const f=yt(u);if(ea(f)){const g=r[u],v=i[f]=me(g)||we(g)?{type:g}:Xe({},g),S=v.type;let x=!1,N=!0;if(me(S))for(let C=0;C<S.length;++C){const A=S[C],m=we(A)&&A.name;if(m==="Boolean"){x=!0;break}else m==="String"&&(N=!1)}else x=we(S)&&S.name==="Boolean";v[0]=x,v[1]=N,(x||De(v,"default"))&&l.push(f)}}const c=[i,l];return Oe(e)&&o.set(e,c),c}function ea(e){return e[0]!=="$"&&!Bo(e)}const fl=e=>e==="_"||e==="_ctx"||e==="$stable",pl=e=>me(e)?e.map(Lt):[Lt(e)],yh=(e,t,n)=>{if(t._n)return t;const o=ht((...s)=>pl(t(...s)),n);return o._c=!1,o},Vc=(e,t,n)=>{const o=e._ctx;for(const s in e){if(fl(s))continue;const r=e[s];if(we(r))t[s]=yh(s,r,o);else if(r!=null){const i=pl(r);t[s]=()=>i}}},Hc=(e,t)=>{const n=pl(t);e.slots.default=()=>n},Uc=(e,t,n)=>{for(const o in t)(n||!fl(o))&&(e[o]=t[o])},bh=(e,t,n)=>{const o=e.slots=Rc();if(e.vnode.shapeFlag&32){const s=t._;s?(Uc(o,t,n),n&&Fu(o,"_",s,!0)):Vc(t,o)}else t&&Hc(e,t)},xh=(e,t,n)=>{const{vnode:o,slots:s}=e;let r=!0,i=Le;if(o.shapeFlag&32){const l=t._;l?n&&l===1?r=!1:Uc(s,t,n):(r=!t.$stable,Vc(t,s)),i=t}else t&&(Hc(e,t),i={default:1});if(r)for(const l in s)!fl(l)&&i[l]==null&&delete s[l]},tt=Ch;function wh(e){return _h(e)}function _h(e,t){const n=wr();n.__VUE__=!0;const{insert:o,remove:s,patchProp:r,createElement:i,createText:l,createComment:a,setText:c,setElementText:u,parentNode:f,nextSibling:g,setScopeId:v=Vt,insertStaticContent:S}=e,x=(E,D,y,b=null,_=null,$=null,k=void 0,K=null,Y=!!D.dynamicChildren)=>{if(E===D)return;E&&!to(E,D)&&(b=ce(E),ne(E,_,$,!0),E=null),D.patchFlag===-2&&(Y=!1,D.dynamicChildren=null);const{type:j,ref:Z,shapeFlag:q}=D;switch(j){case kr:N(E,D,y,b);break;case Ut:C(E,D,y,b);break;case Fs:E==null&&A(D,y,b,k);break;case ue:T(E,D,y,b,_,$,k,K,Y);break;default:q&1?I(E,D,y,b,_,$,k,K,Y):q&6?Q(E,D,y,b,_,$,k,K,Y):(q&64||q&128)&&j.process(E,D,y,b,_,$,k,K,Y,be)}Z!=null&&_?Ho(Z,E&&E.ref,$,D||E,!D):Z==null&&E&&E.ref!=null&&Ho(E.ref,null,$,E,!0)},N=(E,D,y,b)=>{if(E==null)o(D.el=l(D.children),y,b);else{const _=D.el=E.el;D.children!==E.children&&c(_,D.children)}},C=(E,D,y,b)=>{E==null?o(D.el=a(D.children||""),y,b):D.el=E.el},A=(E,D,y,b)=>{[E.el,E.anchor]=S(E.children,D,y,b,E.el,E.anchor)},m=({el:E,anchor:D},y,b)=>{let _;for(;E&&E!==D;)_=g(E),o(E,y,b),E=_;o(D,y,b)},w=({el:E,anchor:D})=>{let y;for(;E&&E!==D;)y=g(E),s(E),E=y;s(D)},I=(E,D,y,b,_,$,k,K,Y)=>{if(D.type==="svg"?k="svg":D.type==="math"&&(k="mathml"),E==null)H(D,y,b,_,$,k,K,Y);else{const j=E.el&&E.el._isVueCE?E.el:null;try{j&&j._beginPatch(),R(E,D,_,$,k,K,Y)}finally{j&&j._endPatch()}}},H=(E,D,y,b,_,$,k,K)=>{let Y,j;const{props:Z,shapeFlag:q,transition:ee,dirs:re}=E;if(Y=E.el=i(E.type,$,Z&&Z.is,Z),q&8?u(Y,E.children):q&16&&B(E.children,Y,null,b,_,ei(E,$),k,K),re&&Tn(E,null,b,"created"),X(Y,E,E.scopeId,k,b),Z){for(const Ie in Z)Ie!=="value"&&!Bo(Ie)&&r(Y,Ie,null,Z[Ie],$,b);"value"in Z&&r(Y,"value",null,Z.value,$),(j=Z.onVnodeBeforeMount)&&kt(j,b,E)}re&&Tn(E,null,b,"beforeMount");const Se=Sh(_,ee);Se&&ee.beforeEnter(Y),o(Y,D,y),((j=Z&&Z.onVnodeMounted)||Se||re)&&tt(()=>{j&&kt(j,b,E),Se&&ee.enter(Y),re&&Tn(E,null,b,"mounted")},_)},X=(E,D,y,b,_)=>{if(y&&v(E,y),b)for(let $=0;$<b.length;$++)v(E,b[$]);if(_){let $=_.subTree;if(D===$||Yc($.type)&&($.ssContent===D||$.ssFallback===D)){const k=_.vnode;X(E,k,k.scopeId,k.slotScopeIds,_.parent)}}},B=(E,D,y,b,_,$,k,K,Y=0)=>{for(let j=Y;j<E.length;j++){const Z=E[j]=K?Xt(E[j]):Lt(E[j]);x(null,Z,D,y,b,_,$,k,K)}},R=(E,D,y,b,_,$,k)=>{const K=D.el=E.el;let{patchFlag:Y,dynamicChildren:j,dirs:Z}=D;Y|=E.patchFlag&16;const q=E.props||Le,ee=D.props||Le;let re;if(y&&$n(y,!1),(re=ee.onVnodeBeforeUpdate)&&kt(re,y,D,E),Z&&Tn(D,E,y,"beforeUpdate"),y&&$n(y,!0),(q.innerHTML&&ee.innerHTML==null||q.textContent&&ee.textContent==null)&&u(K,""),j?V(E.dynamicChildren,j,K,y,b,ei(D,_),$):k||P(E,D,K,null,y,b,ei(D,_),$,!1),Y>0){if(Y&16)z(K,q,ee,y,_);else if(Y&2&&q.class!==ee.class&&r(K,"class",null,ee.class,_),Y&4&&r(K,"style",q.style,ee.style,_),Y&8){const Se=D.dynamicProps;for(let Ie=0;Ie<Se.length;Ie++){const ke=Se[Ie],Qe=q[ke],et=ee[ke];(et!==Qe||ke==="value")&&r(K,ke,Qe,et,_,y)}}Y&1&&E.children!==D.children&&u(K,D.children)}else!k&&j==null&&z(K,q,ee,y,_);((re=ee.onVnodeUpdated)||Z)&&tt(()=>{re&&kt(re,y,D,E),Z&&Tn(D,E,y,"updated")},b)},V=(E,D,y,b,_,$,k)=>{for(let K=0;K<D.length;K++){const Y=E[K],j=D[K],Z=Y.el&&(Y.type===ue||!to(Y,j)||Y.shapeFlag&198)?f(Y.el):y;x(Y,j,Z,null,b,_,$,k,!0)}},z=(E,D,y,b,_)=>{if(D!==y){if(D!==Le)for(const $ in D)!Bo($)&&!($ in y)&&r(E,$,D[$],null,_,b);for(const $ in y){if(Bo($))continue;const k=y[$],K=D[$];k!==K&&$!=="value"&&r(E,$,K,k,_,b)}"value"in y&&r(E,"value",D.value,y.value,_)}},T=(E,D,y,b,_,$,k,K,Y)=>{const j=D.el=E?E.el:l(""),Z=D.anchor=E?E.anchor:l("");let{patchFlag:q,dynamicChildren:ee,slotScopeIds:re}=D;re&&(K=K?K.concat(re):re),E==null?(o(j,y,b),o(Z,y,b),B(D.children||[],y,Z,_,$,k,K,Y)):q>0&&q&64&&ee&&E.dynamicChildren&&E.dynamicChildren.length===ee.length?(V(E.dynamicChildren,ee,y,_,$,k,K),(D.key!=null||_&&D===_.subTree)&&hl(E,D,!0)):P(E,D,y,Z,_,$,k,K,Y)},Q=(E,D,y,b,_,$,k,K,Y)=>{D.slotScopeIds=K,E==null?D.shapeFlag&512?_.ctx.activate(D,y,b,k,Y):M(D,y,b,_,$,k,Y):W(E,D,Y)},M=(E,D,y,b,_,$,k)=>{const K=E.component=kh(E,b,_);if(_c(E)&&(K.ctx.renderer=be),Oh(K,!1,k),K.asyncDep){if(_&&_.registerDep(K,L,k),!E.el){const Y=K.subTree=oe(Ut);C(null,Y,D,y),E.placeholder=Y.el}}else L(K,E,D,y,_,$,k)},W=(E,D,y)=>{const b=D.component=E.component;if(ph(E,D,y))if(b.asyncDep&&!b.asyncResolved){O(b,D,y);return}else b.next=D,b.update();else D.el=E.el,b.vnode=D},L=(E,D,y,b,_,$,k)=>{const K=()=>{if(E.isMounted){let{next:q,bu:ee,u:re,parent:Se,vnode:Ie}=E;{const Mt=jc(E);if(Mt){q&&(q.el=Ie.el,O(E,q,k)),Mt.asyncDep.then(()=>{tt(()=>{E.isUnmounted||j()},_)});return}}let ke=q,Qe;$n(E,!1),q?(q.el=Ie.el,O(E,q,k)):q=Ie,ee&&Rs(ee),(Qe=q.props&&q.props.onVnodeBeforeUpdate)&&kt(Qe,Se,q,Ie),$n(E,!0);const et=Jl(E),$t=E.subTree;E.subTree=et,x($t,et,f($t.el),ce($t),E,_,$),q.el=et.el,ke===null&&hh(E,et.el),re&&tt(re,_),(Qe=q.props&&q.props.onVnodeUpdated)&&tt(()=>kt(Qe,Se,q,Ie),_)}else{let q;const{el:ee,props:re}=D,{bm:Se,m:Ie,parent:ke,root:Qe,type:et}=E,$t=lo(D);$n(E,!1),Se&&Rs(Se),!$t&&(q=re&&re.onVnodeBeforeMount)&&kt(q,ke,D),$n(E,!0);{Qe.ce&&Qe.ce._hasShadowRoot()&&Qe.ce._injectChildStyle(et);const Mt=E.subTree=Jl(E);x(null,Mt,y,b,E,_,$),D.el=Mt.el}if(Ie&&tt(Ie,_),!$t&&(q=re&&re.onVnodeMounted)){const Mt=D;tt(()=>kt(q,ke,Mt),_)}(D.shapeFlag&256||ke&&lo(ke.vnode)&&ke.vnode.shapeFlag&256)&&E.a&&tt(E.a,_),E.isMounted=!0,D=y=b=null}};E.scope.on();const Y=E.effect=new ju(K);E.scope.off();const j=E.update=Y.run.bind(Y),Z=E.job=Y.runIfDirty.bind(Y);Z.i=E,Z.id=E.uid,Y.scheduler=()=>cl(Z),$n(E,!0),j()},O=(E,D,y)=>{D.component=E;const b=E.vnode.props;E.vnode=D,E.next=null,mh(E,D.props,b,y),xh(E,D.children,y),rn(),Vl(E),ln()},P=(E,D,y,b,_,$,k,K,Y=!1)=>{const j=E&&E.children,Z=E?E.shapeFlag:0,q=D.children,{patchFlag:ee,shapeFlag:re}=D;if(ee>0){if(ee&128){h(j,q,y,b,_,$,k,K,Y);return}else if(ee&256){d(j,q,y,b,_,$,k,K,Y);return}}re&8?(Z&16&&se(j,_,$),q!==j&&u(y,q)):Z&16?re&16?h(j,q,y,b,_,$,k,K,Y):se(j,_,$,!0):(Z&8&&u(y,""),re&16&&B(q,y,b,_,$,k,K,Y))},d=(E,D,y,b,_,$,k,K,Y)=>{E=E||oo,D=D||oo;const j=E.length,Z=D.length,q=Math.min(j,Z);let ee;for(ee=0;ee<q;ee++){const re=D[ee]=Y?Xt(D[ee]):Lt(D[ee]);x(E[ee],re,y,null,_,$,k,K,Y)}j>Z?se(E,_,$,!0,!1,q):B(D,y,b,_,$,k,K,Y,q)},h=(E,D,y,b,_,$,k,K,Y)=>{let j=0;const Z=D.length;let q=E.length-1,ee=Z-1;for(;j<=q&&j<=ee;){const re=E[j],Se=D[j]=Y?Xt(D[j]):Lt(D[j]);if(to(re,Se))x(re,Se,y,null,_,$,k,K,Y);else break;j++}for(;j<=q&&j<=ee;){const re=E[q],Se=D[ee]=Y?Xt(D[ee]):Lt(D[ee]);if(to(re,Se))x(re,Se,y,null,_,$,k,K,Y);else break;q--,ee--}if(j>q){if(j<=ee){const re=ee+1,Se=re<Z?D[re].el:b;for(;j<=ee;)x(null,D[j]=Y?Xt(D[j]):Lt(D[j]),y,Se,_,$,k,K,Y),j++}}else if(j>ee)for(;j<=q;)ne(E[j],_,$,!0),j++;else{const re=j,Se=j,Ie=new Map;for(j=Se;j<=ee;j++){const pt=D[j]=Y?Xt(D[j]):Lt(D[j]);pt.key!=null&&Ie.set(pt.key,j)}let ke,Qe=0;const et=ee-Se+1;let $t=!1,Mt=0;const _o=new Array(et);for(j=0;j<et;j++)_o[j]=0;for(j=re;j<=q;j++){const pt=E[j];if(Qe>=et){ne(pt,_,$,!0);continue}let At;if(pt.key!=null)At=Ie.get(pt.key);else for(ke=Se;ke<=ee;ke++)if(_o[ke-Se]===0&&to(pt,D[ke])){At=ke;break}At===void 0?ne(pt,_,$,!0):(_o[At-Se]=j+1,At>=Mt?Mt=At:$t=!0,x(pt,D[At],y,null,_,$,k,K,Y),Qe++)}const Dl=$t?Eh(_o):oo;for(ke=Dl.length-1,j=et-1;j>=0;j--){const pt=Se+j,At=D[pt],Pl=D[pt+1],Ll=pt+1<Z?Pl.el||Gc(Pl):b;_o[j]===0?x(null,At,y,Ll,_,$,k,K,Y):$t&&(ke<0||j!==Dl[ke]?J(At,y,Ll,2):ke--)}}},J=(E,D,y,b,_=null)=>{const{el:$,type:k,transition:K,children:Y,shapeFlag:j}=E;if(j&6){J(E.component.subTree,D,y,b);return}if(j&128){E.suspense.move(D,y,b);return}if(j&64){k.move(E,D,y,be);return}if(k===ue){o($,D,y);for(let q=0;q<Y.length;q++)J(Y[q],D,y,b);o(E.anchor,D,y);return}if(k===Fs){m(E,D,y);return}if(b!==2&&j&1&&K)if(b===0)K.beforeEnter($),o($,D,y),tt(()=>K.enter($),_);else{const{leave:q,delayLeave:ee,afterLeave:re}=K,Se=()=>{E.ctx.isUnmounted?s($):o($,D,y)},Ie=()=>{$._isLeaving&&$[pn](!0),q($,()=>{Se(),re&&re()})};ee?ee($,Se,Ie):Ie()}else o($,D,y)},ne=(E,D,y,b=!1,_=!1)=>{const{type:$,props:k,ref:K,children:Y,dynamicChildren:j,shapeFlag:Z,patchFlag:q,dirs:ee,cacheIndex:re}=E;if(q===-2&&(_=!1),K!=null&&(rn(),Ho(K,null,y,E,!0),ln()),re!=null&&(D.renderCache[re]=void 0),Z&256){D.ctx.deactivate(E);return}const Se=Z&1&&ee,Ie=!lo(E);let ke;if(Ie&&(ke=k&&k.onVnodeBeforeUnmount)&&kt(ke,D,E),Z&6)le(E.component,y,b);else{if(Z&128){E.suspense.unmount(y,b);return}Se&&Tn(E,null,D,"beforeUnmount"),Z&64?E.type.remove(E,D,y,be,b):j&&!j.hasOnce&&($!==ue||q>0&&q&64)?se(j,D,y,!1,!0):($===ue&&q&384||!_&&Z&16)&&se(Y,D,y),b&&he(E)}(Ie&&(ke=k&&k.onVnodeUnmounted)||Se)&&tt(()=>{ke&&kt(ke,D,E),Se&&Tn(E,null,D,"unmounted")},y)},he=E=>{const{type:D,el:y,anchor:b,transition:_}=E;if(D===ue){ve(y,b);return}if(D===Fs){w(E);return}const $=()=>{s(y),_&&!_.persisted&&_.afterLeave&&_.afterLeave()};if(E.shapeFlag&1&&_&&!_.persisted){const{leave:k,delayLeave:K}=_,Y=()=>k(y,$);K?K(E.el,$,Y):Y()}else $()},ve=(E,D)=>{let y;for(;E!==D;)y=g(E),s(E),E=y;s(D)},le=(E,D,y)=>{const{bum:b,scope:_,job:$,subTree:k,um:K,m:Y,a:j}=E;ta(Y),ta(j),b&&Rs(b),_.stop(),$&&($.flags|=8,ne(k,E,D,y)),K&&tt(K,D),tt(()=>{E.isUnmounted=!0},D)},se=(E,D,y,b=!1,_=!1,$=0)=>{for(let k=$;k<E.length;k++)ne(E[k],D,y,b,_)},ce=E=>{if(E.shapeFlag&6)return ce(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const D=g(E.anchor||E.el),y=D&&D[yc];return y?g(y):D};let Ce=!1;const Ae=(E,D,y)=>{let b;E==null?D._vnode&&(ne(D._vnode,null,null,!0),b=D._vnode.component):x(D._vnode||null,E,D,null,null,null,y),D._vnode=E,Ce||(Ce=!0,Vl(b),pc(),Ce=!1)},be={p:x,um:ne,m:J,r:he,mt:M,mc:B,pc:P,pbc:V,n:ce,o:e};return{render:Ae,hydrate:void 0,createApp:lh(Ae)}}function ei({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function $n({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Sh(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function hl(e,t,n=!1){const o=e.children,s=t.children;if(me(o)&&me(s))for(let r=0;r<o.length;r++){const i=o[r];let l=s[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[r]=Xt(s[r]),l.el=i.el),!n&&l.patchFlag!==-2&&hl(i,l)),l.type===kr&&(l.patchFlag===-1&&(l=s[r]=Xt(l)),l.el=i.el),l.type===Ut&&!l.el&&(l.el=i.el)}}function Eh(e){const t=e.slice(),n=[0];let o,s,r,i,l;const a=e.length;for(o=0;o<a;o++){const c=e[o];if(c!==0){if(s=n[n.length-1],e[s]<c){t[o]=s,n.push(o);continue}for(r=0,i=n.length-1;r<i;)l=r+i>>1,e[n[l]]<c?r=l+1:i=l;c<e[n[r]]&&(r>0&&(t[o]=n[r-1]),n[r]=o)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=t[i];return n}function jc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:jc(t)}function ta(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Gc(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Gc(t.subTree):null}const Yc=e=>e.__isSuspense;function Ch(e,t){t&&t.pendingBranch?me(e)?t.effects.push(...e):t.effects.push(e):kp(e)}const ue=Symbol.for("v-fgt"),kr=Symbol.for("v-txt"),Ut=Symbol.for("v-cmt"),Fs=Symbol.for("v-stc"),jo=[];let at=null;function F(e=!1){jo.push(at=e?null:[])}function Ih(){jo.pop(),at=jo[jo.length-1]||null}let ho=1;function er(e,t=!1){ho+=e,e<0&&at&&t&&(at.hasOnce=!0)}function Kc(e){return e.dynamicChildren=ho>0?at||oo:null,Ih(),ho>0&&at&&at.push(e),e}function G(e,t,n,o,s,r){return Kc(p(e,t,n,o,s,r,!0))}function Ve(e,t,n,o,s){return Kc(oe(e,t,n,o,s,!0))}function es(e){return e?e.__v_isVNode===!0:!1}function to(e,t){return e.type===t.type&&e.key===t.key}const Wc=({key:e})=>e??null,zs=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?je(e)||Re(e)||we(e)?{i:Je,r:e,k:t,f:!!n}:e:null);function p(e,t=null,n=null,o=0,s=null,r=e===ue?0:1,i=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Wc(t),ref:t&&zs(t),scopeId:gc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:o,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Je};return l?(gl(a,n),r&128&&e.normalize(a)):n&&(a.shapeFlag|=je(n)?8:16),ho>0&&!i&&at&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&at.push(a),a}const oe=Nh;function Nh(e,t=null,n=null,o=0,s=null,r=!1){if((!e||e===Nc)&&(e=Ut),es(e)){const l=Hn(e,t,!0);return n&&gl(l,n),ho>0&&!r&&at&&(l.shapeFlag&6?at[at.indexOf(e)]=l:at.push(l)),l.patchFlag=-2,l}if(Rh(e)&&(e=e.__vccOpts),t){t=Th(t);let{class:l,style:a}=t;l&&!je(l)&&(t.class=ge(l)),Oe(a)&&(Nr(a)&&!me(a)&&(a=Xe({},a)),t.style=Ze(a))}const i=je(e)?1:Yc(e)?128:Rp(e)?64:Oe(e)?4:we(e)?2:0;return p(e,t,n,o,s,i,r,!0)}function Th(e){return e?Nr(e)||Bc(e)?Xe({},e):e:null}function Hn(e,t,n=!1,o=!1){const{props:s,ref:r,patchFlag:i,children:l,transition:a}=e,c=t?ml(s||{},t):s,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Wc(c),ref:t&&t.ref?n&&r?me(r)?r.concat(zs(t)):[r,zs(t)]:zs(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ue?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Hn(e.ssContent),ssFallback:e.ssFallback&&Hn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&o&&Qo(u,a.clone(u)),u}function Ye(e=" ",t=0){return oe(kr,null,e,t)}function $h(e,t){const n=oe(Fs,null,e);return n.staticCount=t,n}function fe(e="",t=!1){return t?(F(),Ve(Ut,null,e)):oe(Ut,null,e)}function Lt(e){return e==null||typeof e=="boolean"?oe(Ut):me(e)?oe(ue,null,e.slice()):es(e)?Xt(e):oe(kr,null,String(e))}function Xt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Hn(e)}function gl(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(me(t))n=16;else if(typeof t=="object")if(o&65){const s=t.default;s&&(s._c&&(s._d=!1),gl(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Bc(t)?t._ctx=Je:s===3&&Je&&(Je.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else we(t)?(t={default:t,_ctx:Je},n=32):(t=String(t),o&64?(n=16,t=[Ye(t)]):n=8);e.children=t,e.shapeFlag|=n}function ml(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const s in o)if(s==="class")t.class!==o.class&&(t.class=ge([t.class,o.class]));else if(s==="style")t.style=Ze([t.style,o.style]);else if(gr(s)){const r=t[s],i=o[s];i&&r!==i&&!(me(r)&&r.includes(i))&&(t[s]=r?[].concat(r,i):i)}else s!==""&&(t[s]=o[s])}return t}function kt(e,t,n,o=null){Ct(e,t,7,[n,o])}const Mh=Oc();let Ah=0;function kh(e,t,n){const o=e.type,s=(t?t.appContext:e.appContext)||Mh,r={uid:Ah++,vnode:e,type:o,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Uu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zc(o,s),emitsOptions:Dc(o,s),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:o.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=uh.bind(null,r),e.ce&&e.ce(r),r}let st=null;const Nt=()=>st||Je;let tr,Oi;{const e=wr(),t=(n,o)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(o),r=>{s.length>1?s.forEach(i=>i(r)):s[0](r)}};tr=t("__VUE_INSTANCE_SETTERS__",n=>st=n),Oi=t("__VUE_SSR_SETTERS__",n=>ts=n)}const gs=e=>{const t=st;return tr(e),e.scope.on(),()=>{e.scope.off(),tr(t)}},na=()=>{st&&st.scope.off(),tr(null)};function Xc(e){return e.vnode.shapeFlag&4}let ts=!1;function Oh(e,t=!1,n=!1){t&&Oi(t);const{props:o,children:s}=e.vnode,r=Xc(e);gh(e,o,r,t),bh(e,s,n||t);const i=r?Dh(e,t):void 0;return t&&Oi(!1),i}function Dh(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Zp);const{setup:o}=n;if(o){rn();const s=e.setupContext=o.length>1?Zc(e):null,r=gs(e),i=hs(o,e,0,[e.props,s]),l=Lu(i);if(ln(),r(),(l||e.sp)&&!lo(e)&&wc(e),l){if(i.then(na,na),t)return i.then(a=>{oa(e,a)}).catch(a=>{Tr(a,e,0)});e.asyncDep=i}else oa(e,i)}else qc(e)}function oa(e,t,n){we(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Oe(t)&&(e.setupState=lc(t)),qc(e)}function qc(e,t,n){const o=e.type;e.render||(e.render=o.render||Vt);{const s=gs(e);rn();try{th(e)}finally{ln(),s()}}}const Ph={get(e,t){return ot(e,"get",""),e[t]}};function Zc(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Ph),slots:e.slots,emit:e.emit,expose:t}}function Or(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(lc(_n(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Uo)return Uo[n](e)},has(t,n){return n in t||n in Uo}})):e.proxy}function Lh(e,t=!0){return we(e)?e.displayName||e.name:e.name||t&&e.__name}function Rh(e){return we(e)&&"__vccOpts"in e}const ie=(e,t)=>Np(e,t,ts);function $e(e,t,n){try{er(-1);const o=arguments.length;return o===2?Oe(t)&&!me(t)?es(t)?oe(e,null,[t]):oe(e,t):oe(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&es(n)&&(n=[n]),oe(e,t,n))}finally{er(1)}}function Bh(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let o=0;o<n.length;o++)if(nn(n[o],t[o]))return!1;return ho>0&&at&&at.push(e),!0}const Fh="3.5.28";let Di;const sa=typeof window<"u"&&window.trustedTypes;if(sa)try{Di=sa.createPolicy("vue",{createHTML:e=>e})}catch{}const Jc=Di?e=>Di.createHTML(e):e=>e,zh="http://www.w3.org/2000/svg",Vh="http://www.w3.org/1998/Math/MathML",Wt=typeof document<"u"?document:null,ra=Wt&&Wt.createElement("template"),Hh={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const s=t==="svg"?Wt.createElementNS(zh,e):t==="mathml"?Wt.createElementNS(Vh,e):n?Wt.createElement(e,{is:n}):Wt.createElement(e);return e==="select"&&o&&o.multiple!=null&&s.setAttribute("multiple",o.multiple),s},createText:e=>Wt.createTextNode(e),createComment:e=>Wt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Wt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,s,r){const i=n?n.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{ra.innerHTML=Jc(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const l=ra.content;if(o==="svg"||o==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},dn="transition",Co="animation",go=Symbol("_vtc"),Qc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Uh=Xe({},Vp,Qc),Mn=(e,t=[])=>{me(e)?e.forEach(n=>n(...t)):e&&e(...t)},ia=e=>e?me(e)?e.some(t=>t.length>1):e.length>1:!1;function jh(e){const t={};for(const T in e)T in Qc||(t[T]=e[T]);if(e.css===!1)return t;const{name:n="v",type:o,duration:s,enterFromClass:r=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:a=r,appearActiveClass:c=i,appearToClass:u=l,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:g=`${n}-leave-active`,leaveToClass:v=`${n}-leave-to`}=e,S=Gh(s),x=S&&S[0],N=S&&S[1],{onBeforeEnter:C,onEnter:A,onEnterCancelled:m,onLeave:w,onLeaveCancelled:I,onBeforeAppear:H=C,onAppear:X=A,onAppearCancelled:B=m}=t,R=(T,Q,M,W)=>{T._enterCancelled=W,hn(T,Q?u:l),hn(T,Q?c:i),M&&M()},V=(T,Q)=>{T._isLeaving=!1,hn(T,f),hn(T,v),hn(T,g),Q&&Q()},z=T=>(Q,M)=>{const W=T?X:A,L=()=>R(Q,T,M);Mn(W,[Q,L]),la(()=>{hn(Q,T?a:r),Ot(Q,T?u:l),ia(W)||aa(Q,o,x,L)})};return Xe(t,{onBeforeEnter(T){Mn(C,[T]),Ot(T,r),Ot(T,i)},onBeforeAppear(T){Mn(H,[T]),Ot(T,a),Ot(T,c)},onEnter:z(!1),onAppear:z(!0),onLeave(T,Q){T._isLeaving=!0;const M=()=>V(T,Q);Ot(T,f),T._enterCancelled?(Ot(T,g),Pi(T)):(Pi(T),Ot(T,g)),la(()=>{T._isLeaving&&(hn(T,f),Ot(T,v),ia(w)||aa(T,o,N,M))}),Mn(w,[T,M])},onEnterCancelled(T){R(T,!1,void 0,!0),Mn(m,[T])},onAppearCancelled(T){R(T,!0,void 0,!0),Mn(B,[T])},onLeaveCancelled(T){V(T),Mn(I,[T])}})}function Gh(e){if(e==null)return null;if(Oe(e))return[ti(e.enter),ti(e.leave)];{const t=ti(e);return[t,t]}}function ti(e){return Gf(e)}function Ot(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[go]||(e[go]=new Set)).add(t)}function hn(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const n=e[go];n&&(n.delete(t),n.size||(e[go]=void 0))}function la(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Yh=0;function aa(e,t,n,o){const s=e._endId=++Yh,r=()=>{s===e._endId&&o()};if(n!=null)return setTimeout(r,n);const{type:i,timeout:l,propCount:a}=ed(e,t);if(!i)return o();const c=i+"end";let u=0;const f=()=>{e.removeEventListener(c,g),r()},g=v=>{v.target===e&&++u>=a&&f()};setTimeout(()=>{u<a&&f()},l+1),e.addEventListener(c,g)}function ed(e,t){const n=window.getComputedStyle(e),o=S=>(n[S]||"").split(", "),s=o(`${dn}Delay`),r=o(`${dn}Duration`),i=ua(s,r),l=o(`${Co}Delay`),a=o(`${Co}Duration`),c=ua(l,a);let u=null,f=0,g=0;t===dn?i>0&&(u=dn,f=i,g=r.length):t===Co?c>0&&(u=Co,f=c,g=a.length):(f=Math.max(i,c),u=f>0?i>c?dn:Co:null,g=u?u===dn?r.length:a.length:0);const v=u===dn&&/\b(?:transform|all)(?:,|$)/.test(o(`${dn}Property`).toString());return{type:u,timeout:f,propCount:g,hasTransform:v}}function ua(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,o)=>ca(n)+ca(e[o])))}function ca(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Pi(e){return(e?e.ownerDocument:document).body.offsetHeight}function Kh(e,t,n){const o=e[go];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const nr=Symbol("_vod"),td=Symbol("_vsh"),nd={name:"show",beforeMount(e,{value:t},{transition:n}){e[nr]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Io(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),Io(e,!0),o.enter(e)):o.leave(e,()=>{Io(e,!1)}):Io(e,t))},beforeUnmount(e,{value:t}){Io(e,t)}};function Io(e,t){e.style.display=t?e[nr]:"none",e[td]=!t}const Wh=Symbol(""),Xh=/(?:^|;)\s*display\s*:/;function qh(e,t,n){const o=e.style,s=je(n);let r=!1;if(n&&!s){if(t)if(je(t))for(const i of t.split(";")){const l=i.slice(0,i.indexOf(":")).trim();n[l]==null&&Vs(o,l,"")}else for(const i in t)n[i]==null&&Vs(o,i,"");for(const i in n)i==="display"&&(r=!0),Vs(o,i,n[i])}else if(s){if(t!==n){const i=o[Wh];i&&(n+=";"+i),o.cssText=n,r=Xh.test(n)}}else t&&e.removeAttribute("style");nr in e&&(e[nr]=r?o.display:"",e[td]&&(o.display="none"))}const da=/\s*!important$/;function Vs(e,t,n){if(me(n))n.forEach(o=>Vs(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=Zh(e,t);da.test(n)?e.setProperty(Cn(o),n.replace(da,""),"important"):e[o]=n}}const fa=["Webkit","Moz","ms"],ni={};function Zh(e,t){const n=ni[t];if(n)return n;let o=yt(t);if(o!=="filter"&&o in e)return ni[t]=o;o=br(o);for(let s=0;s<fa.length;s++){const r=fa[s]+o;if(r in e)return ni[t]=r}return t}const pa="http://www.w3.org/1999/xlink";function ha(e,t,n,o,s,r=Zf(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(pa,t.slice(6,t.length)):e.setAttributeNS(pa,t,n):n==null||r&&!zu(n)?e.removeAttribute(t):e.setAttribute(t,r?"":St(n)?String(n):n)}function ga(e,t,n,o,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Jc(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?e.getAttribute("value")||"":e.value,a=n==null?e.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in e))&&(e.value=a),n==null&&e.removeAttribute(t),e._value=n;return}let i=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=zu(n):n==null&&l==="string"?(n="",i=!0):l==="number"&&(n=0,i=!0)}try{e[t]=n}catch{}i&&e.removeAttribute(s||t)}function wn(e,t,n,o){e.addEventListener(t,n,o)}function Jh(e,t,n,o){e.removeEventListener(t,n,o)}const ma=Symbol("_vei");function Qh(e,t,n,o,s=null){const r=e[ma]||(e[ma]={}),i=r[t];if(o&&i)i.value=o;else{const[l,a]=eg(t);if(o){const c=r[t]=og(o,s);wn(e,l,c,a)}else i&&(Jh(e,l,i,a),r[t]=void 0)}}const va=/(?:Once|Passive|Capture)$/;function eg(e){let t;if(va.test(e)){t={};let o;for(;o=e.match(va);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Cn(e.slice(2)),t]}let oi=0;const tg=Promise.resolve(),ng=()=>oi||(tg.then(()=>oi=0),oi=Date.now());function og(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;Ct(sg(o,n.value),t,5,[o])};return n.value=e,n.attached=ng(),n}function sg(e,t){if(me(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>s=>!s._stopped&&o&&o(s))}else return t}const ya=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,rg=(e,t,n,o,s,r)=>{const i=s==="svg";t==="class"?Kh(e,o,i):t==="style"?qh(e,n,o):gr(t)?rl(t)||Qh(e,t,n,o,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ig(e,t,o,i))?(ga(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ha(e,t,o,i,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!je(o))?ga(e,yt(t),o,r,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),ha(e,t,o,i))};function ig(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&ya(t)&&we(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return ya(t)&&je(n)?!1:t in e}const od=new WeakMap,sd=new WeakMap,or=Symbol("_moveCb"),ba=Symbol("_enterCb"),lg=e=>(delete e.props.mode,e),ag=lg({name:"TransitionGroup",props:Xe({},Uh,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Nt(),o=zp();let s,r;return Cc(()=>{if(!s.length)return;const i=e.moveClass||`${e.name||"v"}-move`;if(!fg(s[0].el,n.vnode.el,i)){s=[];return}s.forEach(ug),s.forEach(cg);const l=s.filter(dg);Pi(n.vnode.el),l.forEach(a=>{const c=a.el,u=c.style;Ot(c,i),u.transform=u.webkitTransform=u.transitionDuration="";const f=c[or]=g=>{g&&g.target!==c||(!g||g.propertyName.endsWith("transform"))&&(c.removeEventListener("transitionend",f),c[or]=null,hn(c,i))};c.addEventListener("transitionend",f)}),s=[]}),()=>{const i=Te(e),l=jh(i);let a=i.tag||ue;if(s=[],r)for(let c=0;c<r.length;c++){const u=r[c];u.el&&u.el instanceof Element&&(s.push(u),Qo(u,Ti(u,l,o,n)),od.set(u,rd(u.el)))}r=t.default?xc(t.default()):[];for(let c=0;c<r.length;c++){const u=r[c];u.key!=null&&Qo(u,Ti(u,l,o,n))}return oe(a,null,r)}}}),vl=ag;function ug(e){const t=e.el;t[or]&&t[or](),t[ba]&&t[ba]()}function cg(e){sd.set(e,rd(e.el))}function dg(e){const t=od.get(e),n=sd.get(e),o=t.left-n.left,s=t.top-n.top;if(o||s){const r=e.el,i=r.style,l=r.getBoundingClientRect();let a=1,c=1;return r.offsetWidth&&(a=l.width/r.offsetWidth),r.offsetHeight&&(c=l.height/r.offsetHeight),(!Number.isFinite(a)||a===0)&&(a=1),(!Number.isFinite(c)||c===0)&&(c=1),Math.abs(a-1)<.01&&(a=1),Math.abs(c-1)<.01&&(c=1),i.transform=i.webkitTransform=`translate(${o/a}px,${s/c}px)`,i.transitionDuration="0s",e}}function rd(e){const t=e.getBoundingClientRect();return{left:t.left,top:t.top}}function fg(e,t,n){const o=e.cloneNode(),s=e[go];s&&s.forEach(l=>{l.split(/\s+/).forEach(a=>a&&o.classList.remove(a))}),n.split(/\s+/).forEach(l=>l&&o.classList.add(l)),o.style.display="none";const r=t.nodeType===1?t:t.parentNode;r.appendChild(o);const{hasTransform:i}=ed(o);return r.removeChild(o),i}const mo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return me(t)?n=>Rs(t,n):t};function pg(e){e.target.composing=!0}function xa(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const sn=Symbol("_assign");function wa(e,t,n){return t&&(e=e.trim()),n&&(e=xr(e)),e}const yl={created(e,{modifiers:{lazy:t,trim:n,number:o}},s){e[sn]=mo(s);const r=o||s.props&&s.props.type==="number";wn(e,t?"change":"input",i=>{i.target.composing||e[sn](wa(e.value,n,r))}),(n||r)&&wn(e,"change",()=>{e.value=wa(e.value,n,r)}),t||(wn(e,"compositionstart",pg),wn(e,"compositionend",xa),wn(e,"change",xa))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:s,number:r}},i){if(e[sn]=mo(i),e.composing)return;const l=(r||e.type==="number")&&!/^0\d/.test(e.value)?xr(e.value):e.value,a=t??"";l!==a&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||s&&e.value.trim()===a)||(e.value=a))}},hg={created(e,{value:t},n){e.checked=Fn(t,n.props.value),e[sn]=mo(n),wn(e,"change",()=>{e[sn](ns(e))})},beforeUpdate(e,{value:t,oldValue:n},o){e[sn]=mo(o),t!==n&&(e.checked=Fn(t,o.props.value))}},gg={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const s=mr(t);wn(e,"change",()=>{const r=Array.prototype.filter.call(e.options,i=>i.selected).map(i=>n?xr(ns(i)):ns(i));e[sn](e.multiple?s?new Set(r):r:r[0]),e._assigning=!0,ut(()=>{e._assigning=!1})}),e[sn]=mo(o)},mounted(e,{value:t}){_a(e,t)},beforeUpdate(e,t,n){e[sn]=mo(n)},updated(e,{value:t}){e._assigning||_a(e,t)}};function _a(e,t){const n=e.multiple,o=me(t);if(!(n&&!o&&!mr(t))){for(let s=0,r=e.options.length;s<r;s++){const i=e.options[s],l=ns(i);if(n)if(o){const a=typeof l;a==="string"||a==="number"?i.selected=t.some(c=>String(c)===String(l)):i.selected=Qf(t,l)>-1}else i.selected=t.has(l);else if(Fn(ns(i),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ns(e){return"_value"in e?e._value:e.value}const mg=["ctrl","shift","alt","meta"],vg={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>mg.some(n=>e[`${n}Key`]&&!t.includes(n))},dt=(e,t)=>{if(!e)return e;const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=((s,...r)=>{for(let i=0;i<t.length;i++){const l=vg[t[i]];if(l&&l(s,t))return}return e(s,...r)}))},yg={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Dr=(e,t)=>{const n=e._withKeys||(e._withKeys={}),o=t.join(".");return n[o]||(n[o]=(s=>{if(!("key"in s))return;const r=Cn(s.key);if(t.some(i=>i===r||yg[i]===r))return e(s)}))},bg=Xe({patchProp:rg},Hh);let Sa;function xg(){return Sa||(Sa=wh(bg))}const wg=((...e)=>{const t=xg().createApp(...e),{mount:n}=t;return t.mount=o=>{const s=Sg(o);if(!s)return;const r=t._component;!we(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const i=n(s,!1,_g(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),i},t});function _g(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Sg(e){return je(e)?document.querySelector(e):e}let id;const Pr=e=>id=e,ld=Symbol();function Li(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Go;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Go||(Go={}));function Eg(){const e=_r(!0),t=e.run(()=>ye({}));let n=[],o=[];const s=_n({install(r){Pr(s),s._a=r,r.provide(ld,s),r.config.globalProperties.$pinia=s,o.forEach(i=>n.push(i)),o=[]},use(r){return this._a?n.push(r):o.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const ad=()=>{};function Ea(e,t,n,o=ad){e.add(t);const s=()=>{e.delete(t)&&o()};return!n&&fs()&&ro(s),s}function Xn(e,...t){e.forEach(n=>{n(...t)})}const Cg=e=>e(),Ca=Symbol(),si=Symbol();function Ri(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,o)=>e.set(o,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const o=t[n],s=e[n];Li(s)&&Li(o)&&e.hasOwnProperty(n)&&!Re(o)&&!on(o)?e[n]=Ri(s,o):e[n]=o}return e}const Ig=Symbol();function Ng(e){return!Li(e)||!Object.prototype.hasOwnProperty.call(e,Ig)}const{assign:gn}=Object;function Tg(e){return!!(Re(e)&&e.effect)}function $g(e,t,n,o){const{state:s,actions:r,getters:i}=t,l=n.state.value[e];let a;function c(){l||(n.state.value[e]=s?s():{});const u=uc(n.state.value[e]);return gn(u,r,Object.keys(i||{}).reduce((f,g)=>(f[g]=_n(ie(()=>{Pr(n);const v=n._s.get(e);return i[g].call(v,v)})),f),{}))}return a=ud(e,c,t,n,o,!0),a}function ud(e,t,n={},o,s,r){let i;const l=gn({actions:{}},n),a={deep:!0};let c,u,f=new Set,g=new Set,v;const S=o.state.value[e];!r&&!S&&(o.state.value[e]={});let x;function N(B){let R;c=u=!1,typeof B=="function"?(B(o.state.value[e]),R={type:Go.patchFunction,storeId:e,events:v}):(Ri(o.state.value[e],B),R={type:Go.patchObject,payload:B,storeId:e,events:v});const V=x=Symbol();ut().then(()=>{x===V&&(c=!0)}),u=!0,Xn(f,R,o.state.value[e])}const C=r?function(){const{state:R}=n,V=R?R():{};this.$patch(z=>{gn(z,V)})}:ad;function A(){i.stop(),f.clear(),g.clear(),o._s.delete(e)}const m=(B,R="")=>{if(Ca in B)return B[si]=R,B;const V=function(){Pr(o);const z=Array.from(arguments),T=new Set,Q=new Set;function M(O){T.add(O)}function W(O){Q.add(O)}Xn(g,{args:z,name:V[si],store:I,after:M,onError:W});let L;try{L=B.apply(this&&this.$id===e?this:I,z)}catch(O){throw Xn(Q,O),O}return L instanceof Promise?L.then(O=>(Xn(T,O),O)).catch(O=>(Xn(Q,O),Promise.reject(O))):(Xn(T,L),L)};return V[Ca]=!0,V[si]=R,V},w={_p:o,$id:e,$onAction:Ea.bind(null,g),$patch:N,$reset:C,$subscribe(B,R={}){const V=Ea(f,B,R.detached,()=>z()),z=i.run(()=>_e(()=>o.state.value[e],T=>{(R.flush==="sync"?u:c)&&B({storeId:e,type:Go.direct,events:v},T)},gn({},a,R)));return V},$dispose:A},I=ps(w);o._s.set(e,I);const X=(o._a&&o._a.runWithContext||Cg)(()=>o._e.run(()=>(i=_r()).run(()=>t({action:m}))));for(const B in X){const R=X[B];if(Re(R)&&!Tg(R)||on(R))r||(S&&Ng(R)&&(Re(R)?R.value=S[B]:Ri(R,S[B])),o.state.value[e][B]=R);else if(typeof R=="function"){const V=m(R,B);X[B]=V,l.actions[B]=R}}return gn(I,X),gn(Te(I),X),Object.defineProperty(I,"$state",{get:()=>o.state.value[e],set:B=>{N(R=>{gn(R,B)})}}),o._p.forEach(B=>{gn(I,i.run(()=>B({store:I,app:o._a,pinia:o,options:l})))}),S&&r&&n.hydrate&&n.hydrate(I.$state,S),c=!0,u=!0,I}function cd(e,t,n){let o;const s=typeof t=="function";o=s?n:t;function r(i,l){const a=Op();return i=i||(a?_t(ld,null):null),i&&Pr(i),i=id,i._s.has(e)||(s?ud(e,t,o,i):$g(e,o,i)),i._s.get(e)}return r.$id=e,r}function Ia(e,t){return fs()?(ro(e,t),!0):!1}const Bi=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Mg=Object.prototype.toString,Ag=e=>Mg.call(e)==="[object Object]",Fi=()=>{};function kg(...e){if(e.length!==1)return Pe(...e);const t=e[0];return typeof t=="function"?fo(ac(()=>({get:t,set:Fi}))):ye(t)}function dd(e,t){function n(...o){return new Promise((s,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(s).catch(r)})}return n}const fd=e=>e();function Og(e,t={}){let n,o,s=Fi;const r=a=>{clearTimeout(a),s(),s=Fi};let i;return a=>{const c=xe(e),u=xe(t.maxWait);return n&&r(n),c<=0||u!==void 0&&u<=0?(o&&(r(o),o=void 0),Promise.resolve(a())):new Promise((f,g)=>{s=t.rejectOnCancel?g:f,i=a,u&&!o&&(o=setTimeout(()=>{n&&r(n),o=void 0,f(i())},u)),n=setTimeout(()=>{o&&r(o),o=void 0,f(a())},c)})}}function Dg(e=fd,t={}){const{initialState:n="active"}=t,o=kg(n==="active");function s(){o.value=!1}function r(){o.value=!0}return{isActive:fo(o),pause:s,resume:r,eventFilter:(...l)=>{o.value&&e(...l)}}}function ri(e){return Array.isArray(e)?e:[e]}function Pg(e){return Nt()}function Lg(e,t=200,n={}){return dd(Og(t,n),e)}function Rg(e,t,n={}){const{eventFilter:o=fd,...s}=n;return _e(e,dd(o,t),s)}function Bg(e,t,n={}){const{eventFilter:o,initialState:s="active",...r}=n,{eventFilter:i,pause:l,resume:a,isActive:c}=Dg(o,{initialState:s});return{stop:Rg(e,t,{...r,eventFilter:i}),pause:l,resume:a,isActive:c}}function Fg(e,t=!0,n){Pg()?ct(e,n):t?e():ut(e)}function zg(e,t=1e3,n={}){const{immediate:o=!0,immediateCallback:s=!1}=n;let r=null;const i=Ft(!1);function l(){r&&(clearInterval(r),r=null)}function a(){i.value=!1,l()}function c(){const u=xe(t);u<=0||(i.value=!0,s&&e(),l(),i.value&&(r=setInterval(e,u)))}return o&&Bi&&c(),(Re(t)||typeof t=="function")&&Ia(_e(t,()=>{i.value&&Bi&&c()})),Ia(a),{isActive:xp(i),pause:a,resume:c}}function Vg(e,t,n){return _e(e,t,{...n,immediate:!0})}const Do=Bi?window:void 0;function Hg(e){var t;const n=xe(e);return(t=n?.$el)!==null&&t!==void 0?t:n}function Na(...e){const t=(o,s,r,i)=>(o.addEventListener(s,r,i),()=>o.removeEventListener(s,r,i)),n=ie(()=>{const o=ri(xe(e[0])).filter(s=>s!=null);return o.every(s=>typeof s!="string")?o:void 0});return Vg(()=>{var o,s;return[(o=(s=n.value)===null||s===void 0?void 0:s.map(r=>Hg(r)))!==null&&o!==void 0?o:[Do].filter(r=>r!=null),ri(xe(n.value?e[1]:e[0])),ri(U(n.value?e[2]:e[1])),xe(n.value?e[3]:e[2])]},([o,s,r,i],l,a)=>{if(!o?.length||!s?.length||!r?.length)return;const c=Ag(i)?{...i}:i,u=o.flatMap(f=>s.flatMap(g=>r.map(v=>t(f,g,v,c))));a(()=>{u.forEach(f=>f())})},{flush:"post"})}const Es=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cs="__vueuse_ssr_handlers__",Ug=jg();function jg(){return Cs in Es||(Es[Cs]=Es[Cs]||{}),Es[Cs]}function Gg(e,t){return Ug[e]||t}function Yg(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Kg={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},Ta="vueuse-storage";function Wg(e,t,n,o={}){var s;const{flush:r="pre",deep:i=!0,listenToStorageChanges:l=!0,writeDefaults:a=!0,mergeDefaults:c=!1,shallow:u,window:f=Do,eventFilter:g,onError:v=M=>{console.error(M)},initOnMounted:S}=o,x=(u?Ft:ye)(typeof t=="function"?t():t),N=ie(()=>xe(e));if(!n)try{n=Gg("getDefaultStorage",()=>Do?.localStorage)()}catch(M){v(M)}if(!n)return x;const C=xe(t),A=Yg(C),m=(s=o.serializer)!==null&&s!==void 0?s:Kg[A],{pause:w,resume:I}=Bg(x,M=>V(M),{flush:r,deep:i,eventFilter:g});_e(N,()=>T(),{flush:r});let H=!1;const X=M=>{S&&!H||T(M)},B=M=>{S&&!H||Q(M)};f&&l&&(n instanceof Storage?Na(f,"storage",X,{passive:!0}):Na(f,Ta,B)),S?Fg(()=>{H=!0,T()}):T();function R(M,W){if(f){const L={key:N.value,oldValue:M,newValue:W,storageArea:n};f.dispatchEvent(n instanceof Storage?new StorageEvent("storage",L):new CustomEvent(Ta,{detail:L}))}}function V(M){try{const W=n.getItem(N.value);if(M==null)R(W,null),n.removeItem(N.value);else{const L=m.write(M);W!==L&&(n.setItem(N.value,L),R(W,L))}}catch(W){v(W)}}function z(M){const W=M?M.newValue:n.getItem(N.value);if(W==null)return a&&C!=null&&n.setItem(N.value,m.write(C)),C;if(!M&&c){const L=m.read(W);return typeof c=="function"?c(L,C):A==="object"&&!Array.isArray(L)?{...C,...L}:L}else return typeof W!="string"?W:m.read(W)}function T(M){if(!(M&&M.storageArea!==n)){if(M&&M.key==null){x.value=C;return}if(!(M&&M.key!==N.value)){w();try{const W=m.write(x.value);(M===void 0||M?.newValue!==W)&&(x.value=z(M))}catch(W){v(W)}finally{M?ut(I):I()}}}}function Q(M){T(M.detail)}return x}const zt=cd("ui",{state:()=>({modal:{isOpen:!1,kind:"alert",title:"Notice",message:"",confirmText:"OK",cancelText:"Cancel",inputValue:"",inputPlaceholder:"",inputRequired:!1,resolve:null},toasts:[]}),getters:{isPackageMode:()=>!0},actions:{showToast(e,t="info",n=2600){const o=`toast-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;this.toasts.push({id:o,message:e,type:t}),setTimeout(()=>{this.removeToast(o)},n)},removeToast(e){this.toasts=this.toasts.filter(t=>t.id!==e)},closeModal(){this.modal.isOpen=!1,this.modal.resolve=null},resolveModal(e){typeof this.modal.resolve=="function"&&this.modal.resolve(e),this.closeModal()},openAlert({title:e="Notice",message:t="",confirmText:n="OK"}={}){return new Promise(o=>{this.modal={...this.modal,isOpen:!0,kind:"alert",title:e,message:t,confirmText:n,cancelText:"Cancel",inputValue:"",inputPlaceholder:"",inputRequired:!1,resolve:o}})},openConfirm({title:e="Confirm",message:t="",confirmText:n="Confirm",cancelText:o="Cancel"}={}){return new Promise(s=>{this.modal={...this.modal,isOpen:!0,kind:"confirm",title:e,message:t,confirmText:n,cancelText:o,inputValue:"",inputPlaceholder:"",inputRequired:!1,resolve:s}})},openPrompt({title:e="Input Needed",message:t="",confirmText:n="Save",cancelText:o="Cancel",placeholder:s="",value:r="",required:i=!1}={}){return new Promise(l=>{this.modal={...this.modal,isOpen:!0,kind:"prompt",title:e,message:t,confirmText:n,cancelText:o,inputValue:r,inputPlaceholder:s,inputRequired:i,resolve:l}})},setModalInputValue(e){this.modal.inputValue=e}}}),te={MONGODB:"MongoDB",MYSQL:"MySQL",POSTGRESQL:"PostgreSQL"},Xg={[te.MONGODB]:["String","Number","ObjectId","Date","Boolean","Array","Object","Map","Buffer","Mixed"],[te.MYSQL]:["INT","BIGINT","TINYINT","SMALLINT","DECIMAL","FLOAT","DOUBLE","VARCHAR","TEXT","CHAR","LONGTEXT","DATE","DATETIME","TIMESTAMP","TIME","YEAR","BOOLEAN","JSON","ENUM","BLOB"],[te.POSTGRESQL]:["INT","BIGINT","SMALLINT","DECIMAL","REAL","DOUBLE PRECISION","SERIAL","BIGSERIAL","VARCHAR","TEXT","CHAR","DATE","TIMESTAMP","TIME","INTERVAL","BOOLEAN","JSON","JSONB","UUID","BYTEA","XML"]},bl={[te.MONGODB]:{name:"_id",type:"ObjectId",key:!0},[te.MYSQL]:{name:"id",type:"INT",primaryKey:!0,autoIncrement:!0},[te.POSTGRESQL]:{name:"id",type:"SERIAL",primaryKey:!0}},qg=(e={})=>{const{baseUrl:t="",headers:n={}}=e,o=async(s,r={})=>{const i=`${t}${s}`;try{const l=await fetch(i,{...r,headers:{"Content-Type":"application/json",...n,...r.headers}});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.json()}catch(l){throw console.error(`ApiBridge Request Error [${s}]:`,l),l}};return{async fetchSchema(){return o("/api/schema")},async saveSchema(s){return o("/api/sync",{method:"POST",body:JSON.stringify(s)})},async saveLayout(s){return o("/api/save-layout",{method:"POST",body:JSON.stringify(s)})},async fetchLiveDb(s){return o(`/api/live-db/${s}`)},async fetchDatabases(){return o("/api/databases")}}},pd="mongo-architect-schema";let ii=!1,Yt=null;const Zg=e=>{if(typeof window>"u")return;const t={databases:e.databases,activeDatabaseId:e.activeDatabaseId,collections:e.collections.map(n=>({...n,isPersisted:n.isPersisted||!1})),edges:e.edges,selectedItemId:e.selectedItemId,selectedItemType:e.selectedItemType,selectedCollectionId:e.selectedCollectionId,clipboard:e.clipboard};try{return window.localStorage.setItem(pd,JSON.stringify(t)),{ok:!0}}catch(n){return{ok:!1,error:n}}},Jg=e=>{if(!e)return!1;if(e?.name==="QuotaExceededError"||e?.code===22||e?.code===1014)return!0;const t=String(e?.message||"").toLowerCase();return t.includes("quota")||t.includes("storage")},hd=(e,t)=>{const n=Number.parseInt(e??"",10);return Number.isFinite(n)&&n>0?n:t},li=hd("100",100),Qg=hd("600000",1e3*60*10),Ne={past:[],future:[],isRestoring:!1},No=e=>{const t=Date.now()-Qg;return e.filter(n=>n.createdAt>=t)},bn=(e,t)=>{for(const n of e){if(n.id===t)return{field:n,list:e};if(n.children&&n.children.length>0){const o=bn(n.children,t);if(o)return o}}return null},$a=(e,t)=>!e||!t?!1:!!bn(e.data?.fields||[],t),zi=e=>e&&typeof e=="object"&&e.__raw?e.__raw:Array.isArray(e)?`[${e.map(t=>zi(t)).join(", ")}]`:e&&typeof e=="object"?`{ ${Object.entries(e).map(([n,o])=>`${n}: ${zi(o)}`).join(", ")} }`:JSON.stringify(e),ai=e=>e==="ObjectId"?"Schema.Types.ObjectId":e,it=e=>{if(e===!0||e===!1)return e;if(e==="true")return!0;if(e==="false")return!1},qn=e=>{if(e===""||e===null||e===void 0)return;const t=Number(e);return Number.isFinite(t)?t:void 0},em=e=>{const t=[];t.push(`type: ${ai(e.type)}`),e.ref&&e.type==="ObjectId"&&t.push(`ref: ${JSON.stringify(e.ref)}`),e.required&&t.push("required: true"),e.unique&&t.push("unique: true"),e.index&&t.push("index: true"),e.sparse&&t.push("sparse: true"),e.immutable&&t.push("immutable: true"),typeof e.alias=="string"&&e.alias.trim()&&t.push(`alias: ${JSON.stringify(e.alias.trim())}`);const n=it(e.selectMode);if(typeof n=="boolean"&&t.push(`select: ${n}`),e.type==="String"){e.trim&&t.push("trim: true"),e.lowercase&&t.push("lowercase: true"),e.uppercase&&t.push("uppercase: true");const o=qn(e.minLength);typeof o=="number"&&o>=0&&t.push(`minLength: ${o}`);const s=qn(e.maxLength);typeof s=="number"&&s>=0&&t.push(`maxLength: ${s}`);const r=String(e.matchPattern||"").trim();if(r){const a=String(e.matchFlags||"");t.push(`match: new RegExp(${JSON.stringify(r)}, ${JSON.stringify(a)})`)}const i=Array.isArray(e.enumValues)?e.enumValues.filter(a=>String(a).trim().length>0).map(a=>String(a).trim()):[];i.length>0&&t.push(`enum: ${zi(i)}`);const l=String(e.defaultString??"").trim();l&&t.push(`default: ${JSON.stringify(l)}`)}if(e.type==="Number"){const o=qn(e.min);typeof o=="number"&&t.push(`min: ${o}`);const s=qn(e.max);typeof s=="number"&&t.push(`max: ${s}`);const r=qn(e.defaultNumber);typeof r=="number"&&t.push(`default: ${r}`)}if(e.type==="Boolean"){const o=it(e.defaultBooleanMode);typeof o=="boolean"&&t.push(`default: ${o}`)}if(e.type==="Date"){const o=e.defaultDateMode;if(o==="now")t.push("default: Date.now");else if(o==="custom"){const l=String(e.defaultDateValue||"").trim();l&&t.push(`default: new Date(${JSON.stringify(l)})`)}const s=String(e.minDate||"").trim();s&&t.push(`min: new Date(${JSON.stringify(s)})`);const r=String(e.maxDate||"").trim();r&&t.push(`max: new Date(${JSON.stringify(r)})`);const i=qn(e.expiresSeconds);typeof i=="number"&&i>=0&&t.push(`expires: ${i}`)}if(e.type==="ObjectId"){const o=String(e.defaultObjectId||"").trim();o&&t.push(`default: ${JSON.stringify(o)}`)}if(e.type==="Map"){const o=String(e.mapOfType||"").trim();o&&t.push(`of: ${ai(o)}`)}if(e.type==="Array"){const o=String(e.arrayOfType||"").trim();o&&t.push(`of: ${ai(o)}`)}return t},Yo=(e,t=1)=>{let n="";const o="  ".repeat(t);return e.forEach(s=>{if(s.name==="_id")return;if(s.children&&s.children.length>0){s.type==="Array"?(n+=`${o}${s.name}: [{
`,n+=Yo(s.children,t+1),n+=`${o}}],
`):(n+=`${o}${s.name}: {
`,n+=Yo(s.children,t+1),n+=`${o}},
`);return}const r=em(s);n+=`${o}${s.name}: { ${r.join(", ")} },
`}),n},ui=(e={})=>{const t={};e.timestampsEnabled&&(e.createdAtName||e.updatedAtName?(t.timestamps={},e.createdAtName&&(t.timestamps.createdAt=e.createdAtName),e.updatedAtName&&(t.timestamps.updatedAt=e.updatedAtName)):t.timestamps=!0);const n=String(e.schemaCollectionName||"").trim();n&&(t.collection=n);const o=e.schemaStrictMode;if(o==="throw")t.strict="throw";else{const m=it(o);typeof m=="boolean"&&(t.strict=m)}const s=it(e.schemaStrictQueryMode);typeof s=="boolean"&&(t.strictQuery=s);const r=it(e.schemaAutoIndexMode);typeof r=="boolean"&&(t.autoIndex=r);const i=it(e.schemaAutoCreateMode);typeof i=="boolean"&&(t.autoCreate=i);const l=it(e.schemaIdVirtualMode);typeof l=="boolean"&&(t.id=l);const a=it(e.schemaUnderscoreIdMode);typeof a=="boolean"&&(t._id=a);const c=it(e.schemaMinimizeMode);typeof c=="boolean"&&(t.minimize=c);const u=it(e.schemaSkipVersioningMode);typeof u=="boolean"&&(t.skipVersioning=u);const f=it(e.schemaOptimisticConcurrencyMode);typeof f=="boolean"&&(t.optimisticConcurrency=f);const g=e.schemaVersionKeyMode;if(g==="disable")t.versionKey=!1;else if(g==="custom"){const m=String(e.schemaVersionKeyName||"").trim();m&&(t.versionKey=m)}if(e.schemaCappedEnabled){const m={},w=Number(e.schemaCappedSize||0),I=Number(e.schemaCappedMax||0),H=it(e.schemaCappedAutoIndexIdMode);w>0&&(m.size=w),I>0&&(m.max=I),typeof H=="boolean"&&(m.autoIndexId=H),Object.keys(m).length>0?t.capped=m:t.capped=!0}const v=String(e.schemaReadPreference||"").trim();v&&(t.read=v);const S={},x=String(e.schemaWriteConcernW||"").trim(),N=it(e.schemaWriteConcernJMode),C=Number(e.schemaWriteConcernWtimeout||0);if(x){const m=Number(x);S.w=Number.isFinite(m)&&x!==""?m:x}typeof N=="boolean"&&(S.j=N),C>0&&(S.wtimeout=C),Object.keys(S).length>0&&(t.writeConcern=S);const A=String(e.schemaCollationLocale||"").trim();if(A){const m={locale:A},w=Number(e.schemaCollationStrength||0),I=it(e.schemaCollationCaseLevelMode),H=String(e.schemaCollationCaseFirst||"").trim(),X=it(e.schemaCollationNumericOrderingMode);w>=1&&w<=5&&(m.strength=w),typeof I=="boolean"&&(m.caseLevel=I),H&&(m.caseFirst=H),typeof X=="boolean"&&(m.numericOrdering=X),t.collation=m}return t},ci=e=>Object.keys(e).length>0?`, ${JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:")}`:"",tm=1,nm=new Set(Object.values(te)),To=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),om=(e=[])=>e.map(t=>{const n=JSON.parse(JSON.stringify(t));return delete n.selected,n}),sm=(e=[])=>e.map(t=>{const n=JSON.parse(JSON.stringify(t));return delete n.selected,n}),rm=e=>{if(!To(e))return{ok:!1,message:"Invalid project file structure: root must be an object."};if(!Array.isArray(e.databases)||e.databases.length===0)return{ok:!1,message:"Invalid project file structure: databases is required and must be a non-empty array."};if(!Array.isArray(e.collections)||!Array.isArray(e.edges))return{ok:!1,message:"Invalid project file structure: collections and edges must be arrays."};const t=new Set;for(const n of e.databases){if(!To(n)||typeof n.id!="string"||!n.id.trim())return{ok:!1,message:"Invalid project file structure: each database must have a valid id."};if(typeof n.name!="string"||!n.name.trim())return{ok:!1,message:"Invalid project file structure: each database must have a valid name."};if(n.type&&!nm.has(n.type))return{ok:!1,message:`Invalid database type "${n.type}".`};t.add(n.id)}if(e.activeDatabaseId&&!t.has(e.activeDatabaseId))return{ok:!1,message:"Invalid project file structure: activeDatabaseId must exist in databases."};for(const n of e.collections){if(!To(n)||typeof n.id!="string"||!n.id.trim())return{ok:!1,message:"Invalid project file structure: each collection must have a valid id."};if(!To(n.data)||!Array.isArray(n.data.fields))return{ok:!1,message:"Invalid project file structure: each collection must include data.fields array."};if(n.databaseId&&!t.has(n.databaseId))return{ok:!1,message:`Invalid project file structure: collection "${n.id}" references unknown databaseId.`}}for(const n of e.edges){if(!To(n)||typeof n.id!="string"||!n.id.trim())return{ok:!1,message:"Invalid project file structure: each edge must have a valid id."};if(typeof n.source!="string"||typeof n.target!="string")return{ok:!1,message:`Invalid project file structure: edge "${n.id}" must include source and target.`};if(n.databaseId&&!t.has(n.databaseId))return{ok:!1,message:`Invalid project file structure: edge "${n.id}" references unknown databaseId.`}}return{ok:!0}},It=cd("schema",{state:()=>Wg(pd,{databases:[{id:"db-main",name:"MainDB"}],activeDatabaseId:"db-main",collections:[],edges:[],selectedItemId:null,selectedItemType:null,selectedCollectionId:null,clipboard:null,canUndo:!1,canRedo:!1,isDirty:!1,bridgeMode:"local",apiBaseUrl:"",apiHeaders:{}}),getters:{activeDatabase:e=>e.databases.find(t=>t.id===e.activeDatabaseId)||null,activeCollections:e=>e.collections.filter(t=>t.databaseId===e.activeDatabaseId),activeEdges:e=>e.edges.filter(t=>t.databaseId===e.activeDatabaseId),selectedItem:e=>{if(!e.selectedItemId)return null;if(e.selectedItemType==="collection")return e.collections.find(t=>t.id===e.selectedItemId);if(e.selectedItemType==="field"&&e.selectedCollectionId){const t=e.collections.find(n=>n.id===e.selectedCollectionId);if(t){const n=bn(t.data.fields,e.selectedItemId);return n?n.field:null}}return e.selectedItemType==="edge"&&e.edges.find(t=>t.id===e.selectedItemId)||null},getCollectionCode:e=>t=>{const n=e.collections.find(r=>r.id===t);if(!n)return"";let o=`const mongoose = require('mongoose');
const { Schema } = mongoose;

`;const s=ci(ui(n.data));return o+=`const ${n.data.label}Schema = new Schema({
`,o+=Yo(n.data.fields),o+=`}${s});

`,o+=`const ${n.data.label} = mongoose.model('${n.data.label}', ${n.data.label}Schema);

`,o},activeDatabaseType:e=>e.databases.find(n=>n.id===e.activeDatabaseId)?.type||te.MONGODB,mongooseSchemaCode:e=>{let t=`const mongoose = require('mongoose');
const { Schema } = mongoose;

`;return e.collections.filter(n=>n.databaseId===e.activeDatabaseId).forEach(n=>{const o=ci(ui(n.data));t+=`const ${n.data.label}Schema = new Schema({
`,t+=Yo(n.data.fields),t+=`}${o});

`,t+=`const ${n.data.label} = mongoose.model('${n.data.label}', ${n.data.label}Schema);

`}),t},getCollectionsCode:e=>(t=[])=>{if(!Array.isArray(t)||t.length===0)return"";const n=new Set(t);let o=`const mongoose = require('mongoose');
const { Schema } = mongoose;

`;return e.collections.filter(s=>n.has(s.id)).forEach(s=>{const r=ci(ui(s.data));o+=`const ${s.data.label}Schema = new Schema({
`,o+=Yo(s.data.fields),o+=`}${r});

`,o+=`const ${s.data.label} = mongoose.model('${s.data.label}', ${s.data.label}Schema);

`}),o}},_debouncedSaveLayout:null,actions:{pruneInvalidEdges(e=null){const t=e?this.collections.filter(s=>s.databaseId===e):this.collections,n=new Map(t.map(s=>[s.id,s])),o=this.edges.filter(s=>{if(e&&s.databaseId!==e)return!0;const r=n.get(s.source),i=n.get(s.target);return!(!r||!i||s.sourceHandle&&!$a(r,s.sourceHandle)||s.targetHandle&&!$a(i,s.targetHandle))});o.length===this.edges.length&&o.every((s,r)=>s===this.edges[r])||(this.edges=o)},persistState(){const e=Zg(this);if(e?.ok)return ii=!1,!0;if(Jg(e?.error)&&!ii){ii=!0;const t=zt();t.openAlert({title:"Storage Full",message:"Browser local storage is full. Please export your current project now to avoid data loss, then remove old data/import only what you need.",confirmText:"I Understand"}),t.showToast("Storage full. Export your project now.","error",5e3)}return!1},initializeDatabases(){(!Array.isArray(this.databases)||this.databases.length===0)&&(this.databases=[{id:"db-main",name:"MainDB"}]),(!this.activeDatabaseId||!this.databases.some(n=>n.id===this.activeDatabaseId))&&(this.activeDatabaseId=this.databases[0].id);const e=new Set(this.databases.map(n=>n.id)),t=this.activeDatabaseId;this.collections.forEach(n=>{(!n.databaseId||!e.has(n.databaseId))&&(n.databaseId=t)}),this.databases.forEach(n=>{n.type||(n.type=te.MONGODB)}),this.edges.forEach(n=>{if(!n.databaseId||!e.has(n.databaseId)){const o=this.collections.find(s=>s.id===n.source);n.databaseId=o?.databaseId||t}}),this.pruneInvalidEdges(),this.persistState()},addDatabase(e="New Database",t=te.MONGODB){const n=`db-${Date.now()}`;return this.databases.push({id:n,name:String(e).trim()||"New Database",type:t}),this.activeDatabaseId=n,this.clearSelections(),n},setActiveDatabase(e){this.databases.some(t=>t.id===e)&&(this.activeDatabaseId=e,this.pruneInvalidEdges(e),this.clearSelections())},updateDatabaseName(e,t){const n=this.databases.find(o=>o.id===e);n&&(n.name=String(t).trim()||n.name,this.persistState())},removeDatabase(e){return this.databases.length<=1?{success:!1,message:"At least one database is required."}:this.databases.some(n=>n.id===e)?(this.recordHistory(),this.databases=this.databases.filter(n=>n.id!==e),this.collections=this.collections.filter(n=>n.databaseId!==e),this.edges=this.edges.filter(n=>n.databaseId!==e),this.activeDatabaseId===e&&(this.activeDatabaseId=this.databases[0].id),this.clearSelections(),this.syncHistoryState(),{success:!0}):{success:!1,message:"Database not found."}},syncHistoryState(){Ne.past=No(Ne.past),Ne.future=No(Ne.future),this.canUndo=Ne.past.length>0,this.canRedo=Ne.future.length>0,this.isDirty=this.canUndo||this.canRedo,this.persistState()},initializeHistory(){Ne.past=[],Ne.future=[],Ne.isRestoring=!1,this.syncHistoryState()},getHistorySnapshot(){return JSON.stringify({databases:this.databases,activeDatabaseId:this.activeDatabaseId,collections:this.collections,edges:this.edges})},applyHistorySnapshot(e){const t=JSON.parse(e);this.databases=t.databases||this.databases,this.activeDatabaseId=t.activeDatabaseId||this.activeDatabaseId,this.collections=t.collections||[],this.edges=t.edges||[],this.initializeDatabases(),this.selectItem(null,null,null)},recordHistory(){if(Ne.isRestoring)return;const e=this.getHistorySnapshot();Ne.past[Ne.past.length-1]?.snapshot!==e&&(Ne.past=No(Ne.past),Ne.past.push({snapshot:e,createdAt:Date.now()}),Ne.past.length>li&&Ne.past.shift(),Ne.future=[],this.syncHistoryState())},undo(){if(!Ne.past.length)return!1;const e=this.getHistorySnapshot(),t=Ne.past.pop()?.snapshot;return t?(Ne.future=No(Ne.future),Ne.future.push({snapshot:e,createdAt:Date.now()}),Ne.future.length>li&&Ne.future.shift(),Ne.isRestoring=!0,this.applyHistorySnapshot(t),Ne.isRestoring=!1,this.syncHistoryState(),!0):!1},redo(){if(!Ne.future.length)return!1;const e=this.getHistorySnapshot(),t=Ne.future.pop()?.snapshot;return t?(Ne.past=No(Ne.past),Ne.past.push({snapshot:e,createdAt:Date.now()}),Ne.past.length>li&&Ne.past.shift(),Ne.isRestoring=!0,this.applyHistorySnapshot(t),Ne.isRestoring=!1,this.syncHistoryState(),!0):!1},clearSelections(){this.collections.forEach(e=>{e.selected=!1}),this.edges.forEach(e=>{e.selected=!1}),this.selectItem(null,null,null),this.syncHistoryState()},setCollectionSelection(e,t=!1){const n=this.collections.find(i=>i.id===e);if(!n||n.databaseId!==this.activeDatabaseId)return;if(!t){this.collections.forEach(i=>{i.selected=i.id===e}),this.edges.forEach(i=>{i.selected=!1}),this.selectItem(e,"collection");return}const o=this.collections.filter(i=>i.selected&&i.databaseId===this.activeDatabaseId);if(n.selected&&o.length===1){this.selectItem(n.id,"collection");return}n.selected=!n.selected;const r=this.collections.filter(i=>i.selected&&i.databaseId===this.activeDatabaseId);r.length===1?this.selectItem(r[0].id,"collection"):this.selectItem(null,null,null)},exportProject(){return JSON.stringify({version:tm,exportedAt:new Date().toISOString(),databases:this.databases,activeDatabaseId:this.activeDatabaseId,collections:om(this.collections),edges:sm(this.edges)},null,2)},importProject(e){let t;try{t=typeof e=="string"?JSON.parse(e):e}catch{return{success:!1,message:"Invalid JSON format."}}const n=rm(t);if(!n.ok)return{success:!1,message:n.message||"Invalid project file structure."};this.recordHistory();const o=(t.collections||[]).map(r=>({...r,isPersisted:!0})),s=this.collections.filter(r=>!r.isPersisted);if(Array.isArray(t.databases)&&t.databases.length>0&&(this.databases=t.databases),s.length===0)this.collections=o,this.edges=(t.edges||[]).map(r=>({...r,isPersisted:!0}));else{const r=new Map;s.forEach(c=>r.set(c.id,c));const i=new Map(this.collections.map(c=>[c.id,c.position]));o.forEach(c=>{const u={...c};i.has(c.id)&&(u.position=i.get(c.id)),r.set(c.id,u)}),this.collections=Array.from(r.values());const l=(t.edges||[]).map(c=>({...c,isPersisted:!0})),a=new Map;this.edges.filter(c=>!c.isPersisted).forEach(c=>a.set(c.id,c)),l.forEach(c=>a.set(c.id,c)),this.edges=Array.from(a.values())}return this.activeDatabaseId=t.activeDatabaseId||this.databases[0]?.id||"db-main",this.initializeDatabases(),this.pruneInvalidEdges(),this.selectItem(null,null,null),this.clipboard=null,this.syncHistoryState(),{success:!0}},selectItem(e,t,n=null){this.selectedItemId=e,this.selectedItemType=t,this.selectedCollectionId=n},updateCollectionProps(e,t){const n=this.collections.find(o=>o.id===e);n&&(this.recordHistory(),Object.assign(n.data,t),this.syncHistoryState())},updateFieldProps(e,t,n){const o=this.collections.find(s=>s.id===e);if(o){const s=bn(o.data.fields,t);s&&(this.recordHistory(),Object.assign(s.field,n),this.syncHistoryState())}},addCollection(e){this.recordHistory(),e.databaseId=e.databaseId||this.activeDatabaseId,this.collections.push(e),this.pruneInvalidEdges(e.databaseId),this.syncHistoryState()},updateCollectionPosition(e,t){const n=this.collections.findIndex(o=>o.id===e);n!==-1&&(this.recordHistory(),this.collections[n].position=t,this.syncHistoryState())},autoArrangeActiveDatabase(){const e=this.activeDatabaseId,t=this.collections.filter(C=>C.databaseId===e);if(t.length<2)return!1;const n=new Set(t.map(C=>C.id)),o=new Map,s=new Map,r=new Map;t.forEach(C=>{o.set(C.id,[]),s.set(C.id,0),r.set(C.id,0)}),this.activeEdges.forEach(C=>{!n.has(C.source)||!n.has(C.target)||C.source!==C.target&&(o.get(C.source).push(C.target),s.set(C.target,(s.get(C.target)||0)+1))});const i=t.map(C=>C.id).filter(C=>(s.get(C)||0)===0),l=new Set;for(;i.length>0;){const C=i.shift();if(l.has(C))continue;l.add(C),(o.get(C)||[]).forEach(m=>{const w=Math.max(r.get(m)||0,(r.get(C)||0)+1);r.set(m,w),s.set(m,(s.get(m)||0)-1),(s.get(m)||0)===0&&i.push(m)})}const a=Math.max(...Array.from(r.values()));t.forEach(C=>{l.has(C.id)||r.set(C.id,a+1)});const c=new Map;t.forEach(C=>{const A=r.get(C.id)||0;c.has(A)||c.set(A,[]),c.get(A).push(C)}),Array.from(c.values()).forEach(C=>{C.sort((A,m)=>{const w=(o.get(A.id)||[]).length,I=(o.get(m.id)||[]).length;return w!==I?I-w:String(A.data?.label||"").localeCompare(String(m.data?.label||""))})});const u=80,f=60,g=380,v=260,S=8;this.recordHistory();const x=Array.from(c.entries()).sort((C,A)=>C[0]-A[0]);let N=0;return x.forEach(([C,A])=>{A.forEach((w,I)=>{const H=this.collections.find(R=>R.id===w.id);if(!H)return;const X=Math.floor(I/S),B=I%S;H.position={x:u+(C+X+N)*g,y:f+B*v}});const m=Math.floor((A.length-1)/S);N+=m}),this.syncHistoryState(),!0},addField(e,t){const n=this.collections.find(o=>o.id===e);n&&(this.recordHistory(),n.data.fields.push(t),this.syncHistoryState())},addChildField(e,t,n){const o=this.collections.find(s=>s.id===e);if(o){const s=bn(o.data.fields,t);s&&(this.recordHistory(),s.field.children||(s.field.children=[]),s.field.children.push(n),this.syncHistoryState())}},removeField(e,t){const n=this.collections.find(o=>o.id===e);if(n){this.recordHistory();const o=s=>{const r=s.findIndex(i=>i.id===t);if(r!==-1)return s.splice(r,1),!0;for(const i of s)if(i.children&&i.children.length>0&&o(i.children))return!0;return!1};o(n.data.fields),this.pruneInvalidEdges(n.databaseId),this.selectedItemId===t&&this.selectItem(null,null),this.syncHistoryState()}},removeCollection(e){this.recordHistory();const n=this.collections.find(o=>o.id===e)?.databaseId||this.activeDatabaseId;this.collections=this.collections.filter(o=>o.id!==e),this.edges=this.edges.filter(o=>o.source!==e&&o.target!==e),this.pruneInvalidEdges(n),this.selectedItemId===e&&this.selectItem(null,null),this.syncHistoryState()},removeCollections(e=[]){if(!Array.isArray(e)||e.length===0)return;this.recordHistory();const t=new Set(e),n=new Set(this.collections.filter(o=>t.has(o.id)).map(o=>o.databaseId));this.collections=this.collections.filter(o=>!t.has(o.id)),this.edges=this.edges.filter(o=>!t.has(o.source)&&!t.has(o.target)),n.forEach(o=>this.pruneInvalidEdges(o)),this.selectItem(null,null,null),this.syncHistoryState()},reorderField(e,t,n,o){const s=this.collections.find(i=>i.id===e);if(!s)return;let r=s.data.fields;if(t){const i=bn(s.data.fields,t);if(i&&i.field.children)r=i.field.children;else return}if(o>=0&&o<r.length){this.recordHistory();const[i]=r.splice(n,1);r.splice(o,0,i),this.syncHistoryState()}},removeEdge(e){this.recordHistory(),this.edges=this.edges.filter(t=>t.id!==e),this.selectedItemId===e&&this.selectItem(null,null),this.syncHistoryState()},updateEdgeProps(e,t={}){const n=this.edges.find(i=>i.id===e);if(!n)return;this.recordHistory(),Object.assign(n,t);const o=this.collections.find(i=>i.id===n.target),s=this.collections.find(i=>i.id===n.source),r=s?bn(s.data?.fields||[],n.sourceHandle):null;if(o&&n.targetHandle){const i=bn(o.data?.fields||[],n.targetHandle);i?.field&&(i.field.foreignKey=!0,i.field.referencesTable=s?.data?.label||i.field.referencesTable||"",i.field.referencesColumnId=n.sourceHandle||i.field.referencesColumnId||"",i.field.referencesColumn=r?.field?.name||i.field.referencesColumn||"",Object.prototype.hasOwnProperty.call(t,"onDelete")&&(i.field.onDelete=String(t.onDelete||"")),Object.prototype.hasOwnProperty.call(t,"onUpdate")&&(i.field.onUpdate=String(t.onUpdate||"")),Object.prototype.hasOwnProperty.call(t,"constraintName")&&(i.field.fkConstraintName=String(t.constraintName||"")))}this.syncHistoryState()},copyNode(e){const t=this.collections.find(n=>n.id===e);t&&(this.clipboard=JSON.parse(JSON.stringify(t)))},pasteNode(){if(!this.clipboard)return;this.recordHistory();const e=`col-${Date.now()}`,t=JSON.parse(JSON.stringify(this.clipboard));t.id=e,t.position={x:t.position.x+20,y:t.position.y+20};const n=o=>{o.forEach(s=>{s.id=`f-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,s.children&&n(s.children)})};n(t.data.fields),this.collections.push(t),this.selectItem(e,"collection"),this.syncHistoryState()},initBridge(e={}){this.bridgeMode="remote",this.apiBaseUrl=e.baseUrl||this.apiBaseUrl,this.apiHeaders=e.headers||this.apiHeaders,Yt=qg({baseUrl:this.apiBaseUrl,headers:this.apiHeaders})},async fetchRemoteSchema(){if(!Yt)return{success:!1,message:"Bridge not initialized"};const e=zt();try{const t=await Yt.fetchSchema();if(t)return this.importProject(t),{success:!0}}catch(t){return e.showToast("Failed to fetch remote schema","error"),{success:!1,error:t}}},async saveProject(e=null){if(!Yt)return{success:!1,message:"Bridge not initialized"};const t=zt();let n=this.collections,o=this.edges;if(e){const r=new Set(e);n=this.collections.filter(i=>r.has(i.id)),o=this.edges.filter(i=>r.has(i.source)&&r.has(i.target))}const s={databases:this.databases,activeDatabaseId:this.activeDatabaseId,collections:n,edges:o};try{const r=await Yt.saveSchema(s);return await this.fetchRemoteSchema(),t.showToast("Project synced to migrations successfully","success"),{success:!0,response:r}}catch(r){return t.showToast("Failed to sync with migrations","error"),{success:!1,error:r}}},async saveLayout(){return Yt?(this._debouncedSaveLayout||(this._debouncedSaveLayout=Lg(async()=>{const e={collections:this.collections};try{await Yt.saveLayout(e)}catch(t){console.error("Failed to save layout:",t)}},1e3)),this._debouncedSaveLayout(),{success:!0}):{success:!1,message:"Bridge not initialized"}},async fetchLiveDbSchema(e){if(!Yt)return{success:!1,message:"Bridge not initialized"};const t=zt();try{const n=await Yt.fetchLiveDb(e);if(n)return this.importProject(n),t.showToast("Database schema imported successfully"),{success:!0}}catch(n){return t.showToast("Failed to import database schema","error"),{success:!1,error:n}}}}});const im=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const Ma=e=>e==="";const lm=(...e)=>e.filter((t,n,o)=>!!t&&t.trim()!==""&&o.indexOf(t)===n).join(" ").trim();const Aa=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const am=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,o)=>o?o.toUpperCase():n.toLowerCase());const um=e=>{const t=am(e);return t.charAt(0).toUpperCase()+t.slice(1)};var $o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const cm=({name:e,iconNode:t,absoluteStrokeWidth:n,"absolute-stroke-width":o,strokeWidth:s,"stroke-width":r,size:i=$o.width,color:l=$o.stroke,...a},{slots:c})=>$e("svg",{...$o,...a,width:i,height:i,stroke:l,"stroke-width":Ma(n)||Ma(o)||n===!0||o===!0?Number(s||r||$o["stroke-width"])*24/Number(i):s||r||$o["stroke-width"],class:lm("lucide",a.class,...e?[`lucide-${Aa(um(e))}-icon`,`lucide-${Aa(e)}`]:["lucide-icon"]),...!c.default&&!im(a)&&{"aria-hidden":"true"}},[...t.map(u=>$e(...u)),...c.default?[c.default()]:[]]);const Ge=(e,t)=>(n,{slots:o,attrs:s})=>$e(cm,{...s,...n,iconNode:t,name:e},o);const gd=Ge("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const dm=Ge("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const md=Ge("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);const vd=Ge("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const yd=Ge("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const bd=Ge("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);const fm=Ge("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const xd=Ge("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const pm=Ge("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const hm=Ge("network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);const gm=Ge("panel-left-close",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);const mm=Ge("panel-left-open",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]]);const sr=Ge("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const vm=Ge("redo-2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);const wd=Ge("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const ym=Ge("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const bm=Ge("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);const Ln=Ge("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);const xm=Ge("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);const wm=Ge("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);const Lr=Ge("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_m={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4"},Sm={class:"bg-[#1e1e1e] border border-gray-700 rounded-lg shadow-2xl w-full max-w-md overflow-hidden"},Em={class:"px-6 py-4 border-b border-gray-700 flex justify-between items-center bg-[#252525]"},Cm={class:"p-6 space-y-4"},Im={class:"grid grid-cols-1 gap-2"},Nm=["value"],Tm={class:"text-white text-sm"},$m={class:"px-6 py-4 border-t border-gray-700 bg-[#252525] flex justify-end gap-3"},Mm={__name:"CreateDatabaseModal",props:{isOpen:Boolean},emits:["close","create"],setup(e,{emit:t}){const n=t,o=ye("New Database"),s=ye(te.MONGODB),r=()=>{o.value.trim()&&(n("create",{name:o.value,type:s.value}),o.value="New Database",s.value=te.MONGODB)};return(i,l)=>e.isOpen?(F(),G("div",_m,[p("div",Sm,[p("div",Em,[l[4]||(l[4]=p("h2",{class:"text-xl font-bold text-white"},"Create Database",-1)),p("button",{onClick:l[0]||(l[0]=a=>i.$emit("close")),class:"text-gray-400 hover:text-white transition-colors"},[oe(U(Lr),{size:20})])]),p("div",Cm,[p("div",null,[l[5]||(l[5]=p("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Database Name",-1)),zn(p("input",{"onUpdate:modelValue":l[1]||(l[1]=a=>o.value=a),type:"text",class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-3 py-2 text-white text-sm focus:border-emerald-500 focus:outline-none transition-colors",placeholder:"Enter database name",onKeyup:Dr(r,["enter"])},null,544),[[yl,o.value]])]),p("div",null,[l[6]||(l[6]=p("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Database Type",-1)),p("div",Im,[(F(!0),G(ue,null,Ee(Object.values(U(te)),a=>(F(),G("label",{key:a,class:ge(["flex items-center gap-3 p-3 rounded border cursor-pointer hover:bg-[#2a2a2a] transition-all",s.value===a?"border-emerald-500 bg-[#2a2a2a]":"border-gray-700 bg-[#1e1e1e]"])},[zn(p("input",{type:"radio",name:"dbType",value:a,"onUpdate:modelValue":l[2]||(l[2]=c=>s.value=c),class:"text-emerald-500 focus:ring-emerald-500 bg-gray-700 border-gray-600"},null,8,Nm),[[hg,s.value]]),p("span",Tm,de(a),1)],2))),128))])])]),p("div",$m,[p("button",{onClick:l[3]||(l[3]=a=>i.$emit("close")),class:"px-4 py-2 rounded bg-gray-700 hover:bg-gray-600 text-white font-medium transition-colors text-sm"}," Cancel "),p("button",{onClick:r,class:"px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-700 text-white font-medium transition-colors text-sm"}," Create Database ")])])])):fe("",!0)}},Un=(e,t)=>{const o=String(e??"").normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/[^a-zA-Z0-9]+/g,"_").replace(/^_+|_+$/g,"").replace(/_+/g,"_").toLowerCase()||t;return/^[0-9]/.test(o)?`n_${o}`:o},Hs=(e,t)=>{if(!t.has(e))return t.add(e),e;let n=2,o=`${e}_${n}`;for(;t.has(o);)n+=1,o=`${e}_${n}`;return t.add(o),o},Vi=(e,t)=>{const n=String(e||"").trim();return Un(n||t,t)},ka=e=>{const t=String(e||"").trim().toUpperCase();return new Set(["CASCADE","RESTRICT","SET NULL","NO ACTION","SET DEFAULT"]).has(t)?t:""},_d=e=>String(e||"").trim().toLowerCase(),Am=(e,t)=>{if(!t){const i=String(e.referencesColumn||"").trim();return i?Un(i,"id"):"id"}const n=t.columnsByFieldId.get(e.referencesColumnId);if(n)return n;const o=_d(e.referencesColumn),s=t.columnsByFieldName.get(o);if(s)return s;const r=String(e.referencesColumn||"").trim();return r?Un(r,"id"):"id"},Oa=e=>String(e||"").trim().toLowerCase(),Sd=(e,t)=>{if(!e||!e.collections)return"";const n=e.collections.map(a=>km(a,t)).filter(Boolean),o=new Map;n.forEach(a=>{const c=Oa(a.sourceLabel);o.has(c)||o.set(c,a)});const s=n.map(a=>a.createTableSql).filter(Boolean),r=n.flatMap(a=>a.indexStatements),i=new Set,l=n.flatMap(a=>a.foreignKeys.map((c,u)=>{const f=o.get(Oa(c.referencesTable)),g=f?f.tableName:Un(c.referencesTable,"reference_table"),v=Am(c,f),S=Vi(c.constraintName,`fk_${a.tableName}_${c.columnName}_${u+1}`),x=Hs(S,i);let N=`ALTER TABLE ${a.tableName} ADD CONSTRAINT ${x} FOREIGN KEY (${c.columnName}) REFERENCES ${g} (${v})`;return c.onDelete&&(N+=` ON DELETE ${c.onDelete}`),c.onUpdate&&(N+=` ON UPDATE ${c.onUpdate}`),`${N};`}));return[...s,...r,...l].join(`

`)},km=(e,t)=>{const n=Un(e?.data?.label,"untitled_table"),o=e?.data?.fields||[];if(o.length===0)return{sourceLabel:String(e?.data?.label||""),tableName:n,createTableSql:`-- Table ${n} has no fields`,indexStatements:[],foreignKeys:[],columnsByFieldId:new Map,columnsByFieldName:new Map};const s=[],r=[],i=new Set,l=[],a=[],c=[],u=new Set,f=new Set,g=new Map,v=new Map;o.forEach((x,N)=>{const C=Un(x?.name,`column_${N+1}`),A=Hs(C,i),m=Om(x,t,A);s.push(m),g.set(x.id,A);const w=_d(x.name);w&&!v.has(w)&&v.set(w,A),x.primaryKey&&r.push(A),x.foreignKey&&x.referencesTable&&(x.referencesColumn||x.referencesColumnId)&&c.push({columnName:A,referencesTable:x.referencesTable,referencesColumn:x.referencesColumn,referencesColumnId:x.referencesColumnId,constraintName:x.fkConstraintName,onDelete:ka(x.onDelete),onUpdate:ka(x.onUpdate)});const I=String(x.checkExpression||"").trim();if(I){const H=String(x.checkConstraintName||"").trim().length>0,X=Vi(x.checkConstraintName,`chk_${n}_${A}`);let B=`CHECK (${I})`;H&&(B=`CONSTRAINT ${Hs(X,f)} ${B}`),l.push(B)}if(x.index&&!x.primaryKey&&!x.unique){const H=Vi(x.indexName,`idx_${n}_${A}`),X=Hs(H,u);a.push(`CREATE INDEX ${X} ON ${n} (${A});`)}}),r.length>0&&s.push(`PRIMARY KEY (${r.join(", ")})`);const S=`CREATE TABLE ${n} (
${[...s,...l].map(x=>"  "+x).join(`,
`)}
);`;return{sourceLabel:String(e?.data?.label||""),tableName:n,createTableSql:S,indexStatements:a,foreignKeys:c,columnsByFieldId:g,columnsByFieldName:v}},Om=(e,t,n)=>{const o=n||Un(e?.name,"column"),s=Dm(e,t);let r=`${o} ${s}`;if(e.unsigned&&t===te.MYSQL&&Pm(s)&&(r+=" UNSIGNED"),!e.nullable&&!e.primaryKey&&(r+=" NOT NULL"),e.autoIncrement&&(t===te.MYSQL?r+=" AUTO_INCREMENT":t===te.POSTGRESQL&&(r+=" GENERATED BY DEFAULT AS IDENTITY")),e.unique&&(r+=" UNIQUE"),e.defaultValue!==void 0&&e.defaultValue!==null&&e.defaultValue!==""){const i=Lm(e.defaultValue);r+=` DEFAULT ${i}`}return r},Dm=(e,t)=>{const n=e.type,o=e.typeParams?`(${e.typeParams})`:"";if(["VARCHAR","CHAR","TEXT","LONGTEXT","INT","BIGINT","TINYINT","SMALLINT","DECIMAL","FLOAT","DOUBLE","REAL","DOUBLE PRECISION","SERIAL","BIGSERIAL","BOOLEAN","DATE","DATETIME","TIMESTAMP","TIME","YEAR","INTERVAL","JSON","JSONB","BLOB","BYTEA","XML","ENUM","UUID"].includes(n))return n==="ENUM"&&e.enumValues&&e.enumValues.length>0?`ENUM(${e.enumValues.map(i=>`'${i}'`).join(", ")})`:`${n}${o}`;switch(n){case"String":return"VARCHAR(255)";case"Number":return"INT";case"Boolean":return"BOOLEAN";case"Date":return t===te.POSTGRESQL?"TIMESTAMP":"DATETIME";case"ObjectId":return t===te.POSTGRESQL?"UUID":"VARCHAR(24)";case"Array":case"Object":case"Map":case"Mixed":return t===te.POSTGRESQL?"JSONB":"JSON";case"Buffer":return"BLOB";default:return"VARCHAR(255)"}},Pm=e=>["INT","BIGINT","TINYINT","SMALLINT","DECIMAL","FLOAT","DOUBLE"].some(t=>e.toUpperCase().startsWith(t)),Lm=e=>{if(typeof e=="number")return e;if(typeof e=="boolean")return e?"TRUE":"FALSE";const t=String(e).trim();return t!==""&&!Number.isNaN(Number(t))?t:t.toLowerCase()==="true"||t.toLowerCase()==="false"?t.toUpperCase():t.toUpperCase()==="CURRENT_TIMESTAMP"||t.toUpperCase()==="NOW()"?t:`'${t}'`},Hi=(e,t)=>{const o=String(e??"").normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/[^a-zA-Z0-9]+/g,"_").replace(/^_+|_+$/g,"").replace(/_+/g,"_").toLowerCase()||t;return/^[0-9]/.test(o)?`n_${o}`:o},xl=(e,t="Model")=>{const n=String(e??"").replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/[^a-zA-Z0-9]+/g," ").trim().split(/\s+/).filter(Boolean);if(n.length===0)return t;const o=n.map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join("");return/^[0-9]/.test(o)?`M${o}`:o},Da=(e,t="field")=>{const n=xl(e,t);return n.charAt(0).toLowerCase()+n.slice(1)},Ui=(e,t)=>{if(!t.has(e))return t.add(e),e;let n=2,o=`${e}${n}`;for(;t.has(o);)n+=1,o=`${e}${n}`;return t.add(o),o},Pa=e=>String(e||"").trim().toLowerCase(),La=e=>{const t=String(e||"").trim().toUpperCase();return{CASCADE:"Cascade",RESTRICT:"Restrict","SET NULL":"SetNull","NO ACTION":"NoAction","SET DEFAULT":"SetDefault"}[t]||""},Rm=e=>{const t=String(e?.type||"").toUpperCase();return{INT:"Int",INTEGER:"Int",BIGINT:"BigInt",SMALLINT:"Int",TINYINT:"Int",SERIAL:"Int",BIGSERIAL:"BigInt",DECIMAL:"Decimal",NUMERIC:"Decimal",FLOAT:"Float",DOUBLE:"Float",REAL:"Float",BOOLEAN:"Boolean",BOOL:"Boolean",VARCHAR:"String",CHAR:"String",TEXT:"String",LONGTEXT:"String",ENUM:"String",DATE:"DateTime",DATETIME:"DateTime",TIMESTAMP:"DateTime",TIME:"DateTime",JSON:"Json",JSONB:"Json",UUID:"String",BLOB:"Bytes",BYTEA:"Bytes",XML:"String"}[t]||"String"},Bm=e=>e===te.MYSQL?"mysql":e===te.POSTGRESQL?"postgresql":"mongodb",Fm=(e,t)=>{if(!t)return"id";if(e.referencesColumnId&&t.fieldNameById.has(e.referencesColumnId))return t.fieldNameById.get(e.referencesColumnId);const n=Hi(e.referencesColumn,"id");return t.fieldNameByColumn.has(n)?t.fieldNameByColumn.get(n):"id"},zm=(e,t)=>{const n=String(e?.data?.label||"").trim(),o=Hi(n,`table_${t+1}`),s=xl(n||o,`Model${t+1}`),r=Array.isArray(e?.data?.fields)?e.data.fields:[],i=new Set,l=new Map,a=new Map,c=r.map((u,f)=>{const g=Hi(u?.name,`column_${f+1}`),v=Ui(g,i);return l.set(u.id,v),a.has(g)||a.set(g,v),{...u,columnName:g,fieldName:v}});return{id:e?.id,sourceLabel:n,tableName:o,modelName:s,fields:c,fieldNameById:l,fieldNameByColumn:a}},Ed=(e,t)=>{const n=Array.isArray(e?.collections)?e.collections:[],o=Bm(t),s=n.map((f,g)=>zm(f,g)),r=new Map(s.map(f=>[Pa(f.sourceLabel),f])),i=new Map,l=new Map(s.map(f=>[f.modelName,new Set])),a=s.map(f=>{const g=[],v=[];return f.fields.forEach(x=>{const N=Rm(x),C=x.nullable===!0,A=C?"?":"",m=[];x.primaryKey&&m.push("@id"),x.autoIncrement&&m.push("@default(autoincrement())"),x.unique&&!x.primaryKey&&m.push("@unique");const w=String(x.defaultValue||"").trim();if(w&&!x.autoIncrement&&(w.toUpperCase()==="CURRENT_TIMESTAMP"||w.toLowerCase()==="now()"?m.push("@default(now())"):Number.isNaN(Number(w))?w.toLowerCase()==="true"||w.toLowerCase()==="false"?m.push(`@default(${w.toLowerCase()})`):m.push(`@default(${JSON.stringify(w)})`):m.push(`@default(${w})`)),g.push(`  ${x.fieldName} ${N}${A}${m.length?` ${m.join(" ")}`:""}`),!(x.foreignKey&&x.referencesTable&&(x.referencesColumn||x.referencesColumnId)))return;const I=r.get(Pa(x.referencesTable));if(!I)return;const H=Fm(x,I),X=xl(`${f.modelName}_${I.modelName}_${x.fieldName}`,`${f.modelName}${I.modelName}${x.fieldName}`),B=Da(I.modelName,"relation"),R=Ui(B,l.get(f.modelName)),V=La(x.onDelete),z=La(x.onUpdate),T=[`"${X}"`,`fields: [${x.fieldName}]`,`references: [${H}]`];V&&T.push(`onDelete: ${V}`),z&&T.push(`onUpdate: ${z}`),v.push(`  ${R} ${I.modelName}${C?"?":""} @relation(${T.join(", ")})`);const Q=Da(f.modelName,"items");i.has(I.modelName)||i.set(I.modelName,[]),i.get(I.modelName).push({baseName:Q,relationName:X,modelName:f.modelName})}),(i.get(f.modelName)||[]).forEach(x=>{const N=Ui(x.baseName,l.get(f.modelName));v.push(`  ${N} ${x.modelName}[] @relation("${x.relationName}")`)}),g.push(...v),g.push(`
  @@map(${JSON.stringify(f.tableName)})`),`model ${f.modelName} {
${g.join(`
`)}
}`}),c=["datasource db {",`  provider = ${JSON.stringify(o)}`,'  url      = env("DATABASE_URL")',"}"].join(`
`);return[["generator client {",'  provider = "prisma-client-js"',"}"].join(`
`),c,...a].join(`

`)},Mo=(e,t)=>{const o=String(e??"").normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/[^a-zA-Z0-9]+/g,"_").replace(/^_+|_+$/g,"").replace(/_+/g,"_").toLowerCase()||t;return/^[0-9]/.test(o)?`n_${o}`:o},Vm=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"",Hm=(e,t)=>{const n=String(e?.type||"").toUpperCase();return String(e?.typeParams||"").trim(),e.primaryKey&&e.autoIncrement?"$table->id()":n==="INT"||n==="INTEGER"?"$table->integer":n==="BIGINT"?"$table->bigInteger":n==="SMALLINT"?"$table->smallInteger":n==="TINYINT"?"$table->tinyInteger":n==="VARCHAR"?"$table->string":n==="CHAR"?"$table->char":n==="TEXT"||n==="LONGTEXT"?"$table->text":n==="DECIMAL"?"$table->decimal":n==="FLOAT"||n==="DOUBLE"||n==="REAL"?"$table->double":n==="BOOLEAN"?"$table->boolean":n==="DATE"?"$table->date":n==="DATETIME"||n==="TIMESTAMP"?"$table->timestamp":n==="TIME"?"$table->time":n==="JSON"||n==="JSONB"?"$table->json":n==="UUID"?"$table->uuid":n==="BLOB"||n==="BYTEA"?"$table->binary":n==="ENUM"?"$table->enum":t===te.POSTGRESQL&&n==="SERIAL"?"$table->integer":t===te.POSTGRESQL&&n==="BIGSERIAL"?"$table->bigInteger":"$table->string"},Um=e=>{const t=String(e??"").trim();return t?t.toUpperCase()==="CURRENT_TIMESTAMP"||t.toLowerCase()==="now()"?"->useCurrent()":Number.isNaN(Number(t))?t.toLowerCase()==="true"||t.toLowerCase()==="false"?`->default(${t.toLowerCase()})`:`->default('${t.replace(/'/g,"\\'")}')`:`->default(${t})`:null},Cd=(e,t)=>{const o=(Array.isArray(e?.collections)?e.collections:[]).map((r,i)=>{const l=Mo(r?.data?.label,`table_${i+1}`),a=Array.isArray(r?.data?.fields)?r.data.fields:[],c=new Map(a.map((u,f)=>[u.id,Mo(u?.name,`column_${f+1}`)]));return{collection:r,tableName:l,fields:a,fieldMap:c}}),s=new Map(o.map(r=>[String(r.collection?.data?.label||"").trim().toLowerCase(),r]));return o.map((r,i)=>{`${r.tableName.split("_").map(Vm).join("")}`;const l=`${new Date().toISOString().split("T")[0].replace(/-/g,"_")}_${String(i+1).padStart(6,"0")}_create_${r.tableName}_table.php`,a=[];return r.fields.forEach((u,f)=>{const g=r.fieldMap.get(u.id)||Mo(u?.name,`column_${f+1}`),v=Hm(u,t);let S="";if(v==="$table->id()"){S=`            ${v};`,a.push(S);return}if(v==="$table->decimal"){const[N,C]=String(u.typeParams||"10,2").split(",").map(A=>Number.parseInt(A.trim(),10));S=`            ${v}('${g}', ${Number.isFinite(N)?N:10}, ${Number.isFinite(C)?C:2})`}else if(v==="$table->enum"){const N=Array.isArray(u.enumValues)&&u.enumValues.length>0?`[${u.enumValues.map(C=>`'${String(C).replace(/'/g,"\\'")}'`).join(", ")}]`:"['value1', 'value2']";S=`            ${v}('${g}', ${N})`}else if(v==="$table->string"&&String(u?.type||"").toUpperCase()==="VARCHAR"){const N=Number.parseInt(String(u.typeParams||"255"),10);S=`            ${v}('${g}', ${Number.isFinite(N)?N:255})`}else S=`            ${v}('${g}')`;u.unsigned&&t===te.MYSQL&&(S+="->unsigned()"),u.nullable&&(S+="->nullable()"),u.unique&&(S+="->unique()"),u.index&&(S+="->index()");const x=Um(u.defaultValue);if(x&&(S+=x),S+=";",a.push(S),u.primaryKey&&!u.autoIncrement&&a.push(`            $table->primary('${g}');`),u.foreignKey&&u.referencesTable&&(u.referencesColumn||u.referencesColumnId)){const N=s.get(String(u.referencesTable).trim().toLowerCase()),C=N?N.tableName:Mo(u.referencesTable,"reference_table"),A=u.referencesColumnId&&N?.fieldMap.has(u.referencesColumnId)?N.fieldMap.get(u.referencesColumnId):Mo(u.referencesColumn,"id");let m=`            $table->foreign('${g}')`;m+=`->references('${A}')`,m+=`->on('${C}')`,u.onDelete&&(m+=`->onDelete('${String(u.onDelete).toLowerCase().replace(/\s+/g," ")}')`),u.onUpdate&&(m+=`->onUpdate('${String(u.onUpdate).toLowerCase().replace(/\s+/g," ")}')`),m+=";",a.push(m)}}),`// ${l}
<?php

use Illuminate\\Database\\Migrations\\Migration;
use Illuminate\\Database\\Schema\\Blueprint;
use Illuminate\\Support\\Facades\\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('${r.tableName}', function (Blueprint $table) {
${a.join(`
`)}
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('${r.tableName}');
    }
};
`}).join(`

`)},di=(e,t)=>{const o=String(e??"").normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/[^a-zA-Z0-9]+/g,"_").replace(/^_+|_+$/g,"").replace(/_+/g,"_").toLowerCase()||t;return/^[0-9]/.test(o)?`n_${o}`:o},Id=(e,t="Entity")=>{const n=String(e??"").replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/[^a-zA-Z0-9]+/g," ").trim().split(/\s+/).filter(Boolean);if(n.length===0)return t;const o=n.map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join("");return/^[0-9]/.test(o)?`E${o}`:o},Ra=(e,t="field")=>{const n=Id(e,t);return n.charAt(0).toLowerCase()+n.slice(1)},jm=e=>{const t=String(e||"").toUpperCase();return["INT","INTEGER","BIGINT","SMALLINT","TINYINT","SERIAL","BIGSERIAL","DECIMAL","FLOAT","DOUBLE","REAL"].includes(t)?"number":["BOOLEAN","BOOL"].includes(t)?"boolean":["BLOB","BYTEA"].includes(t)?"Buffer":["DATE","DATETIME","TIMESTAMP","TIME"].includes(t)?"Date":["JSON","JSONB"].includes(t)?"Record<string, unknown>":"string"},Ba=e=>{const t=String(e||"").trim().toUpperCase();return new Set(["RESTRICT","CASCADE","SET NULL","NO ACTION","SET DEFAULT"]).has(t)?t:"NO ACTION"},Nd=(e,t)=>{const o=(Array.isArray(e?.collections)?e.collections:[]).map((r,i)=>{const l=di(r?.data?.label,`table_${i+1}`),a=Id(r?.data?.label,`Entity${i+1}`),c=Array.isArray(r?.data?.fields)?r.data.fields:[],u=new Map(c.map((f,g)=>[f.id,di(f.name,`column_${g+1}`)]));return{collection:r,tableName:l,className:a,fields:c,columnNameByFieldId:u}}),s=new Map(o.map(r=>[String(r.collection?.data?.label||"").trim().toLowerCase(),r]));return o.map(r=>{const i=new Set(["Entity","Column","PrimaryGeneratedColumn","PrimaryColumn","Index"]),l=[];r.fields.forEach((u,f)=>{const g=Ra(u.name,`field${f+1}`),v=r.columnNameByFieldId.get(u.id)||di(u.name,`column_${f+1}`),S=String(u.type||"varchar").toLowerCase(),x=jm(u.type);if(u.primaryKey)u.autoIncrement?l.push("  @PrimaryGeneratedColumn()"):l.push(`  @PrimaryColumn({ name: '${v}', type: '${S}' })`);else{const N=[`name: '${v}'`,`type: '${S}'`];if(u.nullable&&N.push("nullable: true"),u.unique&&N.push("unique: true"),u.defaultValue!==void 0&&u.defaultValue!==null&&String(u.defaultValue).trim()!==""&&N.push(`default: ${JSON.stringify(String(u.defaultValue))}`),u.typeParams&&["varchar","char"].includes(S)){const C=Number.parseInt(String(u.typeParams),10);Number.isFinite(C)&&C>0&&N.push(`length: ${C}`)}if(u.typeParams&&S==="decimal"){const[C,A]=String(u.typeParams).split(",").map(m=>Number.parseInt(m.trim(),10));Number.isFinite(C)&&N.push(`precision: ${C}`),Number.isFinite(A)&&N.push(`scale: ${A}`)}u.index&&l.push("  @Index()"),l.push(`  @Column({ ${N.join(", ")} })`)}if(l.push(`  ${g}${u.nullable?"?":""}: ${x};`),l.push(""),u.foreignKey&&u.referencesTable&&(u.referencesColumn||u.referencesColumnId)){const N=s.get(String(u.referencesTable).trim().toLowerCase());if(N){i.add("ManyToOne"),i.add("JoinColumn");const C=Ra(N.className,"relation"),A=Ba(u.onDelete),m=Ba(u.onUpdate);l.push(`  @ManyToOne(() => ${N.className}, { onDelete: '${A}', onUpdate: '${m}' })`),l.push(`  @JoinColumn({ name: '${v}' })`),l.push(`  ${C}${u.nullable?"?":""}: ${N.className};`),l.push("")}}}),i.delete("PrimaryGeneratedColumn"),r.fields.some(u=>u.primaryKey&&u.autoIncrement)||i.delete("PrimaryGeneratedColumn"),r.fields.some(u=>u.primaryKey&&!u.autoIncrement)||i.delete("PrimaryColumn"),r.fields.some(u=>!u.primaryKey)||i.delete("Column"),r.fields.some(u=>u.index)||i.delete("Index"),Array.from(l).some(u=>u.includes("@ManyToOne"))||(i.delete("ManyToOne"),i.delete("JoinColumn"));const a=`import { ${Array.from(i).join(", ")} } from 'typeorm';`,c=l.join(`
`).trimEnd();return`${a}

@Entity({ name: '${r.tableName}' })
export class ${r.className} {
${c?`${c}
`:""}}
`}).join(`

`)},Fa={INIT:"init",PER_MODEL:"per_model"},za=(e,t)=>{const o=String(e??"").normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/[^a-zA-Z0-9]+/g,"_").replace(/^_+|_+$/g,"").replace(/_+/g,"_").toLowerCase()||t;return/^[0-9]/.test(o)?`n_${o}`:o},Gm=(e,t="Model")=>{const n=String(e??"").replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/[^a-zA-Z0-9]+/g," ").trim().split(/\s+/).filter(Boolean);if(!n.length)return t;const o=n.map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join("");return/^[0-9]/.test(o)?`M${o}`:o},Va=(e,t)=>{if(!t.has(e))return t.add(e),e;let n=2,o=`${e}_${n}`;for(;t.has(o);)n++,o=`${e}_${n}`;return t.add(o),o},Ym=(e,t)=>{const n=String(e?.type||"").toUpperCase(),o=String(e?.typeParams||"").trim(),s={TEXT:"DataTypes.TEXT",LONGTEXT:"DataTypes.TEXT",INT:"DataTypes.INTEGER",INTEGER:"DataTypes.INTEGER",BIGINT:"DataTypes.BIGINT",SMALLINT:"DataTypes.SMALLINT",TINYINT:"DataTypes.TINYINT",BOOLEAN:"DataTypes.BOOLEAN",BOOL:"DataTypes.BOOLEAN",DATE:"DataTypes.DATEONLY",DATETIME:"DataTypes.DATE",TIMESTAMP:"DataTypes.DATE",TIME:"DataTypes.TIME",JSON:"DataTypes.JSON",JSONB:"DataTypes.JSON",UUID:"DataTypes.UUID",BLOB:"DataTypes.BLOB",BYTEA:"DataTypes.BLOB",REAL:"DataTypes.REAL",DOUBLE:"DataTypes.DOUBLE",FLOAT:"DataTypes.FLOAT"};if(s[n])return s[n];if(n==="VARCHAR")return`DataTypes.STRING(${Number(o)||255})`;if(n==="CHAR")return`DataTypes.CHAR(${Number(o)||1})`;if(n==="DECIMAL"){const[r,i]=o.split(",").map(Number);return r&&i?`DataTypes.DECIMAL(${r}, ${i})`:r?`DataTypes.DECIMAL(${r})`:"DataTypes.DECIMAL"}return t===te.POSTGRESQL&&n==="INTERVAL","DataTypes.STRING"},Km=e=>{if(e==null||e==="")return null;const t=String(e).trim();return/^CURRENT_TIMESTAMP$/i.test(t)||/^now\(\)$/i.test(t)?"DataTypes.NOW":!isNaN(Number(t))||t==="true"||t==="false"?t:JSON.stringify(t)},Wm=(e,t,n)=>{const o=[];o.push(`type: ${Ym(e,n)}`),o.push(`field: "${t}"`),e.primaryKey&&o.push("primaryKey: true"),e.autoIncrement&&o.push("autoIncrement: true"),e.primaryKey||o.push(`allowNull: ${e.nullable===!0}`),e.unique&&o.push("unique: true");const s=Km(e.defaultValue);return s&&o.push(`defaultValue: ${s}`),`{
      ${o.join(`,
      `)}
    }`},Xm=(e=[],t)=>{const n=new Set,o=new Set,s=e.map((i,l)=>{const a=Va(za(i?.data?.label,`table_${l+1}`),n),c=Va(Gm(i?.data?.label,`Model${l+1}`),o),u=i?.data?.fields??[];return{modelName:c,tableName:a,fields:u}});return{modelBlocks:s.map(i=>{const l=i.fields.map((a,c)=>{const u=za(a?.name,`column_${c+1}`),f=Wm(a,u,t);return`    ${u}: ${f}`});return{modelName:i.modelName,tableName:i.tableName,fieldsCode:l.join(`,
`)}}),modelNames:s.map(i=>i.modelName)}},qm=e=>`import { DataTypes } from 'sequelize';

export function initSequelizeModels(sequelize) {
${e.modelBlocks.map(n=>`
  const ${n.modelName} = sequelize.define("${n.modelName}", {
${n.fieldsCode}
  }, {
    tableName: "${n.tableName}",
    timestamps: false
  });
  `).join(`
`)}

  return {
    ${e.modelNames.join(`,
    `)}
  };
}
`,Zm=e=>{const t=e.modelBlocks.map(s=>`
// models/${s.modelName}.js
import { DataTypes } from 'sequelize';

export default function define${s.modelName}(sequelize) {
  const ${s.modelName} = sequelize.define("${s.modelName}", {
${s.fieldsCode}
  }, {
    tableName: "${s.tableName}",
    timestamps: false
  });

  return ${s.modelName};
}
`),n=e.modelNames.map(s=>`import define${s} from './${s}.js';`).join(`
`),o=e.modelNames.map(s=>`  const ${s} = define${s}(sequelize);`).join(`
`);return`
${t.join(`
`)}

// models/index.js
${n}

export function initModels(sequelize) {
${o}

  return {
    ${e.modelNames.join(`,
    `)}
  };
}
`},Td=(e,t,n=Fa.INIT)=>{const o=e?.collections??[],s=Xm(o,t);return n===Fa.PER_MODEL?Zm(s):qm(s)},ze={MONGOOSE:"mongoose",SQL:"sql",PRISMA:"prisma",LARAVEL:"laravel",TYPEORM:"typeorm",SEQUELIZE:"sequelize"},Ha={[te.MONGODB]:{singular:"Collection",plural:"Collections"},[te.MYSQL]:{singular:"Table",plural:"Tables"},[te.POSTGRESQL]:{singular:"Table",plural:"Tables"}},Ua={[te.MONGODB]:"String",[te.MYSQL]:"VARCHAR",[te.POSTGRESQL]:"VARCHAR"},ja={[te.MONGODB]:[{value:ze.MONGOOSE,label:"Mongoose",language:"javascript"}],[te.MYSQL]:[{value:ze.SQL,label:"SQL",language:"sql"},{value:ze.PRISMA,label:"Prisma",language:"plaintext"},{value:ze.LARAVEL,label:"Laravel",language:"php"},{value:ze.TYPEORM,label:"TypeORM",language:"typescript"},{value:ze.SEQUELIZE,label:"Sequelize",language:"javascript"}],[te.POSTGRESQL]:[{value:ze.SQL,label:"SQL",language:"sql"},{value:ze.PRISMA,label:"Prisma",language:"plaintext"},{value:ze.LARAVEL,label:"Laravel",language:"php"},{value:ze.TYPEORM,label:"TypeORM",language:"typescript"},{value:ze.SEQUELIZE,label:"Sequelize",language:"javascript"}]},Nn=e=>{const t=Ha[e]||Ha[te.MONGODB];return{singular:t.singular,plural:t.plural,singularLower:t.singular.toLowerCase(),pluralLower:t.plural.toLowerCase()}},$d=(e,t=[])=>{const{singularLower:n}=Nn(e),o=`new_${n}`,s=new Set((t||[]).map(l=>String(l||"").trim().toLowerCase()).filter(Boolean));let r=1,i=`${o}_${r}`;for(;s.has(i);)r+=1,i=`${o}_${r}`;return i},Md=e=>Ua[e]||Ua[te.MONGODB],jn=e=>ja[e]||ja[te.MONGODB],wl=e=>jn(e)[0].value,Jm=()=>({type:te.MONGODB,getDefaultField:()=>({...bl[te.MONGODB]}),getExportTargets:()=>jn(te.MONGODB),getLanguage:(e=ze.MONGOOSE)=>jn(te.MONGODB).find(n=>n.value===e)?.language||"javascript",getDefaultExportTarget:()=>wl(te.MONGODB),getEntityTerms:()=>Nn(te.MONGODB),generateCode:({target:e=ze.MONGOOSE,store:t,collectionId:n=null,collectionIds:o=[]})=>!t||e!==ze.MONGOOSE?"":o.length>0?t.getCollectionsCode(o):n?t.getCollectionCode(n):t.mongooseSchemaCode}),Qm=()=>({type:te.MYSQL,getDefaultField:()=>({...bl[te.MYSQL]}),getExportTargets:()=>jn(te.MYSQL),getLanguage:(e=ze.SQL)=>jn(te.MYSQL).find(n=>n.value===e)?.language||"sql",getDefaultExportTarget:()=>wl(te.MYSQL),getEntityTerms:()=>Nn(te.MYSQL),generateCode:({target:e=ze.SQL,collections:t=[]})=>e===ze.PRISMA?Ed({collections:t},te.MYSQL):e===ze.LARAVEL?Cd({collections:t},te.MYSQL):e===ze.TYPEORM?Nd({collections:t},te.MYSQL):e===ze.SEQUELIZE?Td({collections:t},te.MYSQL):Sd({collections:t},te.MYSQL)}),ev=()=>({type:te.POSTGRESQL,getDefaultField:()=>({...bl[te.POSTGRESQL]}),getExportTargets:()=>jn(te.POSTGRESQL),getLanguage:(e=ze.SQL)=>jn(te.POSTGRESQL).find(n=>n.value===e)?.language||"sql",getDefaultExportTarget:()=>wl(te.POSTGRESQL),getEntityTerms:()=>Nn(te.POSTGRESQL),generateCode:({target:e=ze.SQL,collections:t=[]})=>e===ze.PRISMA?Ed({collections:t},te.POSTGRESQL):e===ze.LARAVEL?Cd({collections:t},te.POSTGRESQL):e===ze.TYPEORM?Nd({collections:t},te.POSTGRESQL):e===ze.SEQUELIZE?Td({collections:t},te.POSTGRESQL):Sd({collections:t},te.POSTGRESQL)}),Ga={[te.MONGODB]:Jm,[te.MYSQL]:Qm,[te.POSTGRESQL]:ev},_l=e=>(Ga[e]||Ga[te.MONGODB])(),ms=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n},tv={class:"w-64 bg-[#1e1e1e] border-r border-gray-700 flex flex-col h-full overflow-hidden"},nv={class:"p-4 border-b border-gray-700 flex items-center gap-2 bg-[#252525]"},ov={class:"p-4 space-y-4 flex-1 overflow-y-auto custom-scrollbar"},sv={class:"space-y-2"},rv={class:"flex min-w-0 gap-2"},iv=["value"],lv=["value"],av={class:"space-y-2"},uv={class:"flex items-center justify-between"},cv={class:"text-xs font-bold text-gray-500 uppercase tracking-wider"},dv=["onClick"],fv={class:"text-sm truncate flex-1"},pv={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},hv=["onClick"],gv=["onClick","title"],mv={class:"space-y-2"},vv={__name:"Sidebar",emits:["export-collection","toggle-sidebar"],setup(e,{emit:t}){const n=It(),o=zt(),s=ye(null),r=ye(!1),i=ie(()=>Nn(n.activeDatabaseType)),l="v2.5.0",a=()=>{if(!n.activeDatabaseId)return;n.autoArrangeActiveDatabase()?o.showToast("Auto-layout applied.","success"):o.showToast("Not enough items to layout.","info")},c=()=>{if(!n.activeDatabaseId)return;const m=Date.now().toString(),I={..._l(n.activeDatabaseType).getDefaultField(),id:`f-${Date.now()}-1`},H=$d(n.activeDatabaseType,n.activeCollections.map(X=>X?.data?.label));n.addCollection({id:m,type:"collection",position:{x:Math.random()*400,y:Math.random()*400},data:{label:H,fields:[I]}}),n.selectItem(m,"collection")},u=()=>{r.value=!0},f=({name:m,type:w})=>{n.addDatabase(m,w),o.showToast(`Database "${m}" (${w}) created.`,"success"),r.value=!1},g=m=>{n.setActiveDatabase(m.target.value)},v=async()=>{const m=n.activeDatabase;if(!m||!await o.openConfirm({title:"Delete Database",message:`Delete database "${m.name}" and all its ${i.value.pluralLower}?`,confirmText:"Delete"}))return;const I=n.removeDatabase(m.id);if(!I.success&&I.message){o.showToast(I.message,"error");return}o.showToast(`Database "${m.name}" deleted.`,"success")},S=(m,w)=>{const I=m.shiftKey||m.metaKey||m.ctrlKey;n.setCollectionSelection(w,I)},x=async m=>{await o.openConfirm({title:`Delete ${i.value.singular}`,message:`Are you sure you want to delete this ${i.value.singularLower}?`,confirmText:"Delete"})&&(n.removeCollection(m),o.showToast(`${i.value.singular} deleted.`,"success"))},N=()=>{const m=n.exportProject(),w=new Blob([m],{type:"application/json"}),I=URL.createObjectURL(w),H=document.createElement("a");H.href=I,H.download=`mongo-diagram-project-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(H),H.click(),H.remove(),URL.revokeObjectURL(I)},C=()=>{s.value?.click()},A=async m=>{const w=m.target.files?.[0];if(w)try{const I=await w.text(),H=n.importProject(I);if(!H.success){o.showToast(`Import failed: ${H.message}`,"error");return}o.showToast("Project imported successfully.","success")}catch{o.showToast("Import failed: unable to read file.","error")}finally{m.target.value=""}};return(m,w)=>(F(),G(ue,null,[p("aside",tv,[p("div",nv,[w[2]||(w[2]=p("div",{class:"w-8 h-8 rounded bg-emerald-500 flex items-center justify-center text-white font-bold"}," M ",-1)),w[3]||(w[3]=p("h1",{class:"text-white font-bold text-lg flex-1"},"Mongo Diagram",-1)),p("button",{onClick:w[0]||(w[0]=I=>m.$emit("toggle-sidebar")),class:"p-1.5 rounded hover:bg-[#2a2a2a] text-gray-400 hover:text-white transition-colors",title:"Hide Sidebar"},[oe(U(gm),{size:16})])]),p("div",ov,[p("div",sv,[w[4]||(w[4]=p("p",{class:"text-xs font-bold text-gray-500 uppercase tracking-wider"},"Database",-1)),p("div",rv,[p("select",{value:U(n).activeDatabaseId,onChange:g,class:"min-w-0 flex-1 bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1.5 text-white text-sm focus:border-emerald-500 focus:outline-none"},[(F(!0),G(ue,null,Ee(U(n).databases,I=>(F(),G("option",{key:I.id,value:I.id},de(I.name),9,lv))),128))],40,iv),p("button",{onClick:u,class:"shrink-0 px-2 py-1.5 rounded bg-[#2d2d2d] hover:bg-[#3d3d3d] text-gray-300 border border-gray-600/70",title:"Create Database"},[oe(U(sr),{size:14})]),p("button",{onClick:v,class:"shrink-0 px-2 py-1.5 rounded bg-red-900/30 hover:bg-red-900/50 text-red-300 border border-red-900/60",title:"Delete Active Database"},[oe(U(Ln),{size:14})])])]),p("div",av,[p("div",uv,[p("p",cv,de(i.value.plural),1),p("button",{onClick:a,class:"p-1 hover:bg-[#2a2a2a] rounded text-gray-500 hover:text-white transition-colors",title:"Auto Layout / Arrange Nodes"},[oe(U(pm),{size:14})])]),(F(!0),G(ue,null,Ee(U(n).activeCollections,I=>(F(),G("div",{key:I.id,onClick:H=>S(H,I.id),class:ge(["flex items-center gap-2 p-2 rounded cursor-pointer transition-colors group",I.selected||U(n).selectedItemId===I.id?"bg-[#2a2a2a] text-emerald-400":"hover:bg-[#2a2a2a] text-gray-300 hover:text-white"])},[oe(U(yd),{size:16}),p("span",fv,de(I.data.label),1),p("div",pv,[p("button",{onClick:dt(H=>m.$emit("export-collection",I.id),["stop"]),class:"p-1 hover:bg-gray-700 rounded text-gray-400 hover:text-white",title:"Export Code"},[oe(U(md),{size:12})],8,hv),p("button",{onClick:dt(H=>x(I.id),["stop"]),class:"p-1 hover:bg-red-900/50 rounded text-gray-400 hover:text-red-400",title:`Delete ${i.value.singular}`},[oe(U(Ln),{size:12})],8,gv)])],10,dv))),128)),p("button",{onClick:c,class:"w-full mt-2 flex items-center justify-center gap-2 p-2 bg-[#2d2d2d] hover:bg-[#3d3d3d] rounded text-sm text-gray-300 transition-colors border border-gray-600 border-dashed"},[oe(U(sr),{size:16}),Ye(" New "+de(i.value.singular),1)])]),p("div",mv,[w[7]||(w[7]=p("p",{class:"text-xs font-bold text-gray-500 uppercase tracking-wider"},"Project",-1)),p("button",{onClick:N,class:"w-full flex items-center gap-2 p-2 rounded hover:bg-[#2a2a2a] text-gray-300 hover:text-white transition-colors text-left"},[oe(U(bd),{size:16}),w[5]||(w[5]=p("span",{class:"text-sm"},"Export Project (.json)",-1))]),p("button",{onClick:C,class:"w-full flex items-center gap-2 p-2 rounded hover:bg-[#2a2a2a] text-gray-300 hover:text-white transition-colors text-left"},[oe(U(wm),{size:16}),w[6]||(w[6]=p("span",{class:"text-sm"},"Import Project (.json)",-1))]),p("input",{ref_key:"importInput",ref:s,type:"file",accept:".json,application/json",class:"hidden",onChange:A},null,544)])]),p("div",{class:"p-4 border-t border-gray-700 text-xs text-gray-500 text-center bg-[#252525]"},de(l))]),oe(Mm,{"is-open":r.value,onClose:w[1]||(w[1]=I=>r.value=!1),onCreate:f},null,8,["is-open"])],64))}},yv=ms(vv,[["__scopeId","data-v-7e3cc3cc"]]);function os(e){return fs()?(ro(e),!0):!1}function Qt(e){return typeof e=="function"?e():U(e)}const bv=typeof window<"u"&&typeof document<"u",xv=e=>typeof e<"u",wv=Object.prototype.toString,_v=e=>wv.call(e)==="[object Object]",Sv=()=>{};function Ev(e,t){function n(...o){return new Promise((s,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(s).catch(r)})}return n}const Ad=e=>e();function Cv(e=Ad){const t=ye(!0);function n(){t.value=!1}function o(){t.value=!0}return{isActive:fo(t),pause:n,resume:o,eventFilter:(...r)=>{t.value&&e(...r)}}}function Ya(e,t=!1,n="Timeout"){return new Promise((o,s)=>{setTimeout(t?()=>s(n):o,e)})}function Iv(e,t,n={}){const{eventFilter:o=Ad,...s}=n;return _e(e,Ev(o,t),s)}function Zn(e,t,n={}){const{eventFilter:o,...s}=n,{eventFilter:r,pause:i,resume:l,isActive:a}=Cv(o);return{stop:Iv(e,t,{...s,eventFilter:r}),pause:i,resume:l,isActive:a}}function Nv(e,t={}){if(!Re(e))return uc(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=ac(()=>({get(){return e.value[o]},set(s){var r;if((r=Qt(t.replaceRef))!=null?r:!0)if(Array.isArray(e.value)){const l=[...e.value];l[o]=s,e.value=l}else{const l={...e.value,[o]:s};Object.setPrototypeOf(l,Object.getPrototypeOf(e.value)),e.value=l}else e.value[o]=s}}));return n}function ji(e,t=!1){function n(f,{flush:g="sync",deep:v=!1,timeout:S,throwOnTimeout:x}={}){let N=null;const A=[new Promise(m=>{N=_e(e,w=>{f(w)!==t&&(N?.(),m(w))},{flush:g,deep:v,immediate:!0})})];return S!=null&&A.push(Ya(S,x).then(()=>Qt(e)).finally(()=>N?.())),Promise.race(A)}function o(f,g){if(!Re(f))return n(w=>w===f,g);const{flush:v="sync",deep:S=!1,timeout:x,throwOnTimeout:N}=g??{};let C=null;const m=[new Promise(w=>{C=_e([e,f],([I,H])=>{t!==(I===H)&&(C?.(),w(I))},{flush:v,deep:S,immediate:!0})})];return x!=null&&m.push(Ya(x,N).then(()=>Qt(e)).finally(()=>(C?.(),Qt(e)))),Promise.race(m)}function s(f){return n(g=>!!g,f)}function r(f){return o(null,f)}function i(f){return o(void 0,f)}function l(f){return n(Number.isNaN,f)}function a(f,g){return n(v=>{const S=Array.from(v);return S.includes(f)||S.includes(Qt(f))},g)}function c(f){return u(1,f)}function u(f=1,g){let v=-1;return n(()=>(v+=1,v>=f),g)}return Array.isArray(Qt(e))?{toMatch:n,toContains:a,changed:c,changedTimes:u,get not(){return ji(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:s,toBeNull:r,toBeNaN:l,toBeUndefined:i,changed:c,changedTimes:u,get not(){return ji(e,!t)}}}function Gi(e){return ji(e)}function Tv(e){var t;const n=Qt(e);return(t=n?.$el)!=null?t:n}const kd=bv?window:void 0;function Od(...e){let t,n,o,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,s]=e,t=kd):[t,n,o,s]=e,!t)return Sv;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],i=()=>{r.forEach(u=>u()),r.length=0},l=(u,f,g,v)=>(u.addEventListener(f,g,v),()=>u.removeEventListener(f,g,v)),a=_e(()=>[Tv(t),Qt(s)],([u,f])=>{if(i(),!u)return;const g=_v(f)?{...f}:f;r.push(...n.flatMap(v=>o.map(S=>l(u,v,S,g))))},{immediate:!0,flush:"post"}),c=()=>{a(),i()};return os(c),c}function $v(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Ka(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:s=kd,eventName:r="keydown",passive:i=!1,dedupe:l=!1}=o,a=$v(t);return Od(s,r,u=>{u.repeat&&Qt(l)||a(u)&&n(u)},i)}function Mv(e){return JSON.parse(JSON.stringify(e))}function fi(e,t,n,o={}){var s,r,i;const{clone:l=!1,passive:a=!1,eventName:c,deep:u=!1,defaultValue:f,shouldEmit:g}=o,v=Nt(),S=n||v?.emit||((s=v?.$emit)==null?void 0:s.bind(v))||((i=(r=v?.proxy)==null?void 0:r.$emit)==null?void 0:i.bind(v?.proxy));let x=c;t||(t="modelValue"),x=x||`update:${t.toString()}`;const N=m=>l?typeof l=="function"?l(m):Mv(m):m,C=()=>xv(e[t])?N(e[t]):f,A=m=>{g?g(m)&&S(x,m):S(x,m)};if(a){const m=C(),w=ye(m);let I=!1;return _e(()=>e[t],H=>{I||(I=!0,w.value=N(H),ut(()=>I=!1))}),_e(w,H=>{!I&&(H!==e[t]||u)&&A(H)},{deep:u}),w}else return ie({get(){return C()},set(m){A(m)}})}var Av={value:()=>{}};function Rr(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Us(n)}function Us(e){this._=e}function kv(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",s=n.indexOf(".");if(s>=0&&(o=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Us.prototype=Rr.prototype={constructor:Us,on:function(e,t){var n=this._,o=kv(e+"",n),s,r=-1,i=o.length;if(arguments.length<2){for(;++r<i;)if((s=(e=o[r]).type)&&(s=Ov(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<i;)if(s=(e=o[r]).type)n[s]=Wa(n[s],e.name,t);else if(t==null)for(s in n)n[s]=Wa(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Us(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),o=0,s,r;o<s;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,s=r.length;o<s;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,r=o.length;s<r;++s)o[s].value.apply(t,n)}};function Ov(e,t){for(var n=0,o=e.length,s;n<o;++n)if((s=e[n]).name===t)return s.value}function Wa(e,t,n){for(var o=0,s=e.length;o<s;++o)if(e[o].name===t){e[o]=Av,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Yi="http://www.w3.org/1999/xhtml";const Xa={svg:"http://www.w3.org/2000/svg",xhtml:Yi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Br(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Xa.hasOwnProperty(t)?{space:Xa[t],local:e}:e}function Dv(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Yi&&t.documentElement.namespaceURI===Yi?t.createElement(e):t.createElementNS(n,e)}}function Pv(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Dd(e){var t=Br(e);return(t.local?Pv:Dv)(t)}function Lv(){}function Sl(e){return e==null?Lv:function(){return this.querySelector(e)}}function Rv(e){typeof e!="function"&&(e=Sl(e));for(var t=this._groups,n=t.length,o=new Array(n),s=0;s<n;++s)for(var r=t[s],i=r.length,l=o[s]=new Array(i),a,c,u=0;u<i;++u)(a=r[u])&&(c=e.call(a,a.__data__,u,r))&&("__data__"in a&&(c.__data__=a.__data__),l[u]=c);return new mt(o,this._parents)}function Bv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Fv(){return[]}function Pd(e){return e==null?Fv:function(){return this.querySelectorAll(e)}}function zv(e){return function(){return Bv(e.apply(this,arguments))}}function Vv(e){typeof e=="function"?e=zv(e):e=Pd(e);for(var t=this._groups,n=t.length,o=[],s=[],r=0;r<n;++r)for(var i=t[r],l=i.length,a,c=0;c<l;++c)(a=i[c])&&(o.push(e.call(a,a.__data__,c,i)),s.push(a));return new mt(o,s)}function Ld(e){return function(){return this.matches(e)}}function Rd(e){return function(t){return t.matches(e)}}var Hv=Array.prototype.find;function Uv(e){return function(){return Hv.call(this.children,e)}}function jv(){return this.firstElementChild}function Gv(e){return this.select(e==null?jv:Uv(typeof e=="function"?e:Rd(e)))}var Yv=Array.prototype.filter;function Kv(){return Array.from(this.children)}function Wv(e){return function(){return Yv.call(this.children,e)}}function Xv(e){return this.selectAll(e==null?Kv:Wv(typeof e=="function"?e:Rd(e)))}function qv(e){typeof e!="function"&&(e=Ld(e));for(var t=this._groups,n=t.length,o=new Array(n),s=0;s<n;++s)for(var r=t[s],i=r.length,l=o[s]=[],a,c=0;c<i;++c)(a=r[c])&&e.call(a,a.__data__,c,r)&&l.push(a);return new mt(o,this._parents)}function Bd(e){return new Array(e.length)}function Zv(){return new mt(this._enter||this._groups.map(Bd),this._parents)}function rr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}rr.prototype={constructor:rr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Jv(e){return function(){return e}}function Qv(e,t,n,o,s,r){for(var i=0,l,a=t.length,c=r.length;i<c;++i)(l=t[i])?(l.__data__=r[i],o[i]=l):n[i]=new rr(e,r[i]);for(;i<a;++i)(l=t[i])&&(s[i]=l)}function ey(e,t,n,o,s,r,i){var l,a,c=new Map,u=t.length,f=r.length,g=new Array(u),v;for(l=0;l<u;++l)(a=t[l])&&(g[l]=v=i.call(a,a.__data__,l,t)+"",c.has(v)?s[l]=a:c.set(v,a));for(l=0;l<f;++l)v=i.call(e,r[l],l,r)+"",(a=c.get(v))?(o[l]=a,a.__data__=r[l],c.delete(v)):n[l]=new rr(e,r[l]);for(l=0;l<u;++l)(a=t[l])&&c.get(g[l])===a&&(s[l]=a)}function ty(e){return e.__data__}function ny(e,t){if(!arguments.length)return Array.from(this,ty);var n=t?ey:Qv,o=this._parents,s=this._groups;typeof e!="function"&&(e=Jv(e));for(var r=s.length,i=new Array(r),l=new Array(r),a=new Array(r),c=0;c<r;++c){var u=o[c],f=s[c],g=f.length,v=oy(e.call(u,u&&u.__data__,c,o)),S=v.length,x=l[c]=new Array(S),N=i[c]=new Array(S),C=a[c]=new Array(g);n(u,f,x,N,C,v,t);for(var A=0,m=0,w,I;A<S;++A)if(w=x[A]){for(A>=m&&(m=A+1);!(I=N[m])&&++m<S;);w._next=I||null}}return i=new mt(i,o),i._enter=l,i._exit=a,i}function oy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sy(){return new mt(this._exit||this._groups.map(Bd),this._parents)}function ry(e,t,n){var o=this.enter(),s=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?r.remove():n(r),o&&s?o.merge(s).order():s}function iy(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,s=n.length,r=o.length,i=Math.min(s,r),l=new Array(s),a=0;a<i;++a)for(var c=n[a],u=o[a],f=c.length,g=l[a]=new Array(f),v,S=0;S<f;++S)(v=c[S]||u[S])&&(g[S]=v);for(;a<s;++a)l[a]=n[a];return new mt(l,this._parents)}function ly(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],s=o.length-1,r=o[s],i;--s>=0;)(i=o[s])&&(r&&i.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(i,r),r=i);return this}function ay(e){e||(e=uy);function t(f,g){return f&&g?e(f.__data__,g.__data__):!f-!g}for(var n=this._groups,o=n.length,s=new Array(o),r=0;r<o;++r){for(var i=n[r],l=i.length,a=s[r]=new Array(l),c,u=0;u<l;++u)(c=i[u])&&(a[u]=c);a.sort(t)}return new mt(s,this._parents).order()}function uy(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function cy(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function dy(){return Array.from(this)}function fy(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],s=0,r=o.length;s<r;++s){var i=o[s];if(i)return i}return null}function py(){let e=0;for(const t of this)++e;return e}function hy(){return!this.node()}function gy(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var s=t[n],r=0,i=s.length,l;r<i;++r)(l=s[r])&&e.call(l,l.__data__,r,s);return this}function my(e){return function(){this.removeAttribute(e)}}function vy(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yy(e,t){return function(){this.setAttribute(e,t)}}function by(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function xy(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function wy(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function _y(e,t){var n=Br(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?vy:my:typeof t=="function"?n.local?wy:xy:n.local?by:yy)(n,t))}function Fd(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Sy(e){return function(){this.style.removeProperty(e)}}function Ey(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Cy(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Iy(e,t,n){return arguments.length>1?this.each((t==null?Sy:typeof t=="function"?Cy:Ey)(e,t,n??"")):vo(this.node(),e)}function vo(e,t){return e.style.getPropertyValue(t)||Fd(e).getComputedStyle(e,null).getPropertyValue(t)}function Ny(e){return function(){delete this[e]}}function Ty(e,t){return function(){this[e]=t}}function $y(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function My(e,t){return arguments.length>1?this.each((t==null?Ny:typeof t=="function"?$y:Ty)(e,t)):this.node()[e]}function zd(e){return e.trim().split(/^|\s+/)}function El(e){return e.classList||new Vd(e)}function Vd(e){this._node=e,this._names=zd(e.getAttribute("class")||"")}Vd.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Hd(e,t){for(var n=El(e),o=-1,s=t.length;++o<s;)n.add(t[o])}function Ud(e,t){for(var n=El(e),o=-1,s=t.length;++o<s;)n.remove(t[o])}function Ay(e){return function(){Hd(this,e)}}function ky(e){return function(){Ud(this,e)}}function Oy(e,t){return function(){(t.apply(this,arguments)?Hd:Ud)(this,e)}}function Dy(e,t){var n=zd(e+"");if(arguments.length<2){for(var o=El(this.node()),s=-1,r=n.length;++s<r;)if(!o.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?Oy:t?Ay:ky)(n,t))}function Py(){this.textContent=""}function Ly(e){return function(){this.textContent=e}}function Ry(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function By(e){return arguments.length?this.each(e==null?Py:(typeof e=="function"?Ry:Ly)(e)):this.node().textContent}function Fy(){this.innerHTML=""}function zy(e){return function(){this.innerHTML=e}}function Vy(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Hy(e){return arguments.length?this.each(e==null?Fy:(typeof e=="function"?Vy:zy)(e)):this.node().innerHTML}function Uy(){this.nextSibling&&this.parentNode.appendChild(this)}function jy(){return this.each(Uy)}function Gy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Yy(){return this.each(Gy)}function Ky(e){var t=typeof e=="function"?e:Dd(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Wy(){return null}function Xy(e,t){var n=typeof e=="function"?e:Dd(e),o=t==null?Wy:typeof t=="function"?t:Sl(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function qy(){var e=this.parentNode;e&&e.removeChild(this)}function Zy(){return this.each(qy)}function Jy(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Qy(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function e0(e){return this.select(e?Qy:Jy)}function t0(e){return arguments.length?this.property("__data__",e):this.node().__data__}function n0(e){return function(t){e.call(this,t,this.__data__)}}function o0(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function s0(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,s=t.length,r;n<s;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++o]=r;++o?t.length=o:delete this.__on}}}function r0(e,t,n){return function(){var o=this.__on,s,r=n0(t);if(o){for(var i=0,l=o.length;i<l;++i)if((s=o[i]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=r,s.options=n),s.value=t;return}}this.addEventListener(e.type,r,n),s={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(s):this.__on=[s]}}function i0(e,t,n){var o=o0(e+""),s,r=o.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,c=l.length,u;a<c;++a)for(s=0,u=l[a];s<r;++s)if((i=o[s]).type===u.type&&i.name===u.name)return u.value}return}for(l=t?r0:s0,s=0;s<r;++s)this.each(l(o[s],t,n));return this}function jd(e,t,n){var o=Fd(e),s=o.CustomEvent;typeof s=="function"?s=new s(t,n):(s=o.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function l0(e,t){return function(){return jd(this,e,t)}}function a0(e,t){return function(){return jd(this,e,t.apply(this,arguments))}}function u0(e,t){return this.each((typeof t=="function"?a0:l0)(e,t))}function*c0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],s=0,r=o.length,i;s<r;++s)(i=o[s])&&(yield i)}var Gd=[null];function mt(e,t){this._groups=e,this._parents=t}function vs(){return new mt([[document.documentElement]],Gd)}function d0(){return this}mt.prototype=vs.prototype={constructor:mt,select:Rv,selectAll:Vv,selectChild:Gv,selectChildren:Xv,filter:qv,data:ny,enter:Zv,exit:sy,join:ry,merge:iy,selection:d0,order:ly,sort:ay,call:cy,nodes:dy,node:fy,size:py,empty:hy,each:gy,attr:_y,style:Iy,property:My,classed:Dy,text:By,html:Hy,raise:jy,lower:Yy,append:Ky,insert:Xy,remove:Zy,clone:e0,datum:t0,on:i0,dispatch:u0,[Symbol.iterator]:c0};function bt(e){return typeof e=="string"?new mt([[document.querySelector(e)]],[document.documentElement]):new mt([[e]],Gd)}function f0(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Pt(e,t){if(e=f0(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const p0={passive:!1},ss={capture:!0,passive:!1};function pi(e){e.stopImmediatePropagation()}function ao(e){e.preventDefault(),e.stopImmediatePropagation()}function Yd(e){var t=e.document.documentElement,n=bt(e).on("dragstart.drag",ao,ss);"onselectstart"in t?n.on("selectstart.drag",ao,ss):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Kd(e,t){var n=e.document.documentElement,o=bt(e).on("dragstart.drag",null);t&&(o.on("click.drag",ao,ss),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Is=e=>()=>e;function Ki(e,{sourceEvent:t,subject:n,target:o,identifier:s,active:r,x:i,y:l,dx:a,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}Ki.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function h0(e){return!e.ctrlKey&&!e.button}function g0(){return this.parentNode}function m0(e,t){return t??{x:e.x,y:e.y}}function v0(){return navigator.maxTouchPoints||"ontouchstart"in this}function y0(){var e=h0,t=g0,n=m0,o=v0,s={},r=Rr("start","drag","end"),i=0,l,a,c,u,f=0;function g(w){w.on("mousedown.drag",v).filter(o).on("touchstart.drag",N).on("touchmove.drag",C,p0).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(w,I){if(!(u||!e.call(this,w,I))){var H=m(this,t.call(this,w,I),w,I,"mouse");H&&(bt(w.view).on("mousemove.drag",S,ss).on("mouseup.drag",x,ss),Yd(w.view),pi(w),c=!1,l=w.clientX,a=w.clientY,H("start",w))}}function S(w){if(ao(w),!c){var I=w.clientX-l,H=w.clientY-a;c=I*I+H*H>f}s.mouse("drag",w)}function x(w){bt(w.view).on("mousemove.drag mouseup.drag",null),Kd(w.view,c),ao(w),s.mouse("end",w)}function N(w,I){if(e.call(this,w,I)){var H=w.changedTouches,X=t.call(this,w,I),B=H.length,R,V;for(R=0;R<B;++R)(V=m(this,X,w,I,H[R].identifier,H[R]))&&(pi(w),V("start",w,H[R]))}}function C(w){var I=w.changedTouches,H=I.length,X,B;for(X=0;X<H;++X)(B=s[I[X].identifier])&&(ao(w),B("drag",w,I[X]))}function A(w){var I=w.changedTouches,H=I.length,X,B;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),X=0;X<H;++X)(B=s[I[X].identifier])&&(pi(w),B("end",w,I[X]))}function m(w,I,H,X,B,R){var V=r.copy(),z=Pt(R||H,I),T,Q,M;if((M=n.call(w,new Ki("beforestart",{sourceEvent:H,target:g,identifier:B,active:i,x:z[0],y:z[1],dx:0,dy:0,dispatch:V}),X))!=null)return T=M.x-z[0]||0,Q=M.y-z[1]||0,function W(L,O,P){var d=z,h;switch(L){case"start":s[B]=W,h=i++;break;case"end":delete s[B],--i;case"drag":z=Pt(P||O,I),h=i;break}V.call(L,w,new Ki(L,{sourceEvent:O,subject:M,target:g,identifier:B,active:h,x:z[0]+T,y:z[1]+Q,dx:z[0]-d[0],dy:z[1]-d[1],dispatch:V}),X)}}return g.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Is(!!w),g):e},g.container=function(w){return arguments.length?(t=typeof w=="function"?w:Is(w),g):t},g.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Is(w),g):n},g.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:Is(!!w),g):o},g.on=function(){var w=r.on.apply(r,arguments);return w===r?g:w},g.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,g):Math.sqrt(f)},g}function Cl(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Wd(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function ys(){}var rs=.7,ir=1/rs,uo="\\s*([+-]?\\d+)\\s*",is="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",b0=/^#([0-9a-f]{3,8})$/,x0=new RegExp(`^rgb\\(${uo},${uo},${uo}\\)$`),w0=new RegExp(`^rgb\\(${Ht},${Ht},${Ht}\\)$`),_0=new RegExp(`^rgba\\(${uo},${uo},${uo},${is}\\)$`),S0=new RegExp(`^rgba\\(${Ht},${Ht},${Ht},${is}\\)$`),E0=new RegExp(`^hsl\\(${is},${Ht},${Ht}\\)$`),C0=new RegExp(`^hsla\\(${is},${Ht},${Ht},${is}\\)$`),qa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cl(ys,Gn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Za,formatHex:Za,formatHex8:I0,formatHsl:N0,formatRgb:Ja,toString:Ja});function Za(){return this.rgb().formatHex()}function I0(){return this.rgb().formatHex8()}function N0(){return Xd(this).formatHsl()}function Ja(){return this.rgb().formatRgb()}function Gn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=b0.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Qa(t):n===3?new ft(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ns(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ns(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=x0.exec(e))?new ft(t[1],t[2],t[3],1):(t=w0.exec(e))?new ft(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_0.exec(e))?Ns(t[1],t[2],t[3],t[4]):(t=S0.exec(e))?Ns(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=E0.exec(e))?nu(t[1],t[2]/100,t[3]/100,1):(t=C0.exec(e))?nu(t[1],t[2]/100,t[3]/100,t[4]):qa.hasOwnProperty(e)?Qa(qa[e]):e==="transparent"?new ft(NaN,NaN,NaN,0):null}function Qa(e){return new ft(e>>16&255,e>>8&255,e&255,1)}function Ns(e,t,n,o){return o<=0&&(e=t=n=NaN),new ft(e,t,n,o)}function T0(e){return e instanceof ys||(e=Gn(e)),e?(e=e.rgb(),new ft(e.r,e.g,e.b,e.opacity)):new ft}function Wi(e,t,n,o){return arguments.length===1?T0(e):new ft(e,t,n,o??1)}function ft(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Cl(ft,Wi,Wd(ys,{brighter(e){return e=e==null?ir:Math.pow(ir,e),new ft(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?rs:Math.pow(rs,e),new ft(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ft(Rn(this.r),Rn(this.g),Rn(this.b),lr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eu,formatHex:eu,formatHex8:$0,formatRgb:tu,toString:tu}));function eu(){return`#${On(this.r)}${On(this.g)}${On(this.b)}`}function $0(){return`#${On(this.r)}${On(this.g)}${On(this.b)}${On((isNaN(this.opacity)?1:this.opacity)*255)}`}function tu(){const e=lr(this.opacity);return`${e===1?"rgb(":"rgba("}${Rn(this.r)}, ${Rn(this.g)}, ${Rn(this.b)}${e===1?")":`, ${e})`}`}function lr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Rn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function On(e){return e=Rn(e),(e<16?"0":"")+e.toString(16)}function nu(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new xt(e,t,n,o)}function Xd(e){if(e instanceof xt)return new xt(e.h,e.s,e.l,e.opacity);if(e instanceof ys||(e=Gn(e)),!e)return new xt;if(e instanceof xt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,s=Math.min(t,n,o),r=Math.max(t,n,o),i=NaN,l=r-s,a=(r+s)/2;return l?(t===r?i=(n-o)/l+(n<o)*6:n===r?i=(o-t)/l+2:i=(t-n)/l+4,l/=a<.5?r+s:2-r-s,i*=60):l=a>0&&a<1?0:i,new xt(i,l,a,e.opacity)}function M0(e,t,n,o){return arguments.length===1?Xd(e):new xt(e,t,n,o??1)}function xt(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Cl(xt,M0,Wd(ys,{brighter(e){return e=e==null?ir:Math.pow(ir,e),new xt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rs:Math.pow(rs,e),new xt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,s=2*n-o;return new ft(hi(e>=240?e-240:e+120,s,o),hi(e,s,o),hi(e<120?e+240:e-120,s,o),this.opacity)},clamp(){return new xt(ou(this.h),Ts(this.s),Ts(this.l),lr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=lr(this.opacity);return`${e===1?"hsl(":"hsla("}${ou(this.h)}, ${Ts(this.s)*100}%, ${Ts(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ou(e){return e=(e||0)%360,e<0?e+360:e}function Ts(e){return Math.max(0,Math.min(1,e||0))}function hi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Il=e=>()=>e;function A0(e,t){return function(n){return e+n*t}}function k0(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function O0(e){return(e=+e)==1?qd:function(t,n){return n-t?k0(t,n,e):Il(isNaN(t)?n:t)}}function qd(e,t){var n=t-e;return n?A0(e,n):Il(isNaN(e)?t:e)}const ar=(function e(t){var n=O0(t);function o(s,r){var i=n((s=Wi(s)).r,(r=Wi(r)).r),l=n(s.g,r.g),a=n(s.b,r.b),c=qd(s.opacity,r.opacity);return function(u){return s.r=i(u),s.g=l(u),s.b=a(u),s.opacity=c(u),s+""}}return o.gamma=e,o})(1);function D0(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),s;return function(r){for(s=0;s<n;++s)o[s]=e[s]*(1-r)+t[s]*r;return o}}function P0(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function L0(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,s=new Array(o),r=new Array(n),i;for(i=0;i<o;++i)s[i]=Ko(e[i],t[i]);for(;i<n;++i)r[i]=t[i];return function(l){for(i=0;i<o;++i)r[i]=s[i](l);return r}}function R0(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function Rt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function B0(e,t){var n={},o={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=Ko(e[s],t[s]):o[s]=t[s];return function(r){for(s in n)o[s]=n[s](r);return o}}var Xi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gi=new RegExp(Xi.source,"g");function F0(e){return function(){return e}}function z0(e){return function(t){return e(t)+""}}function Zd(e,t){var n=Xi.lastIndex=gi.lastIndex=0,o,s,r,i=-1,l=[],a=[];for(e=e+"",t=t+"";(o=Xi.exec(e))&&(s=gi.exec(t));)(r=s.index)>n&&(r=t.slice(n,r),l[i]?l[i]+=r:l[++i]=r),(o=o[0])===(s=s[0])?l[i]?l[i]+=s:l[++i]=s:(l[++i]=null,a.push({i,x:Rt(o,s)})),n=gi.lastIndex;return n<t.length&&(r=t.slice(n),l[i]?l[i]+=r:l[++i]=r),l.length<2?a[0]?z0(a[0].x):F0(t):(t=a.length,function(c){for(var u=0,f;u<t;++u)l[(f=a[u]).i]=f.x(c);return l.join("")})}function Ko(e,t){var n=typeof t,o;return t==null||n==="boolean"?Il(t):(n==="number"?Rt:n==="string"?(o=Gn(t))?(t=o,ar):Zd:t instanceof Gn?ar:t instanceof Date?R0:P0(t)?D0:Array.isArray(t)?L0:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?B0:Rt)(e,t)}var su=180/Math.PI,qi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Jd(e,t,n,o,s,r){var i,l,a;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(a=e*n+t*o)&&(n-=e*a,o-=t*a),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,a/=l),e*o<t*n&&(e=-e,t=-t,a=-a,i=-i),{translateX:s,translateY:r,rotate:Math.atan2(t,e)*su,skewX:Math.atan(a)*su,scaleX:i,scaleY:l}}var $s;function V0(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?qi:Jd(t.a,t.b,t.c,t.d,t.e,t.f)}function H0(e){return e==null||($s||($s=document.createElementNS("http://www.w3.org/2000/svg","g")),$s.setAttribute("transform",e),!(e=$s.transform.baseVal.consolidate()))?qi:(e=e.matrix,Jd(e.a,e.b,e.c,e.d,e.e,e.f))}function Qd(e,t,n,o){function s(c){return c.length?c.pop()+" ":""}function r(c,u,f,g,v,S){if(c!==f||u!==g){var x=v.push("translate(",null,t,null,n);S.push({i:x-4,x:Rt(c,f)},{i:x-2,x:Rt(u,g)})}else(f||g)&&v.push("translate("+f+t+g+n)}function i(c,u,f,g){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),g.push({i:f.push(s(f)+"rotate(",null,o)-2,x:Rt(c,u)})):u&&f.push(s(f)+"rotate("+u+o)}function l(c,u,f,g){c!==u?g.push({i:f.push(s(f)+"skewX(",null,o)-2,x:Rt(c,u)}):u&&f.push(s(f)+"skewX("+u+o)}function a(c,u,f,g,v,S){if(c!==f||u!==g){var x=v.push(s(v)+"scale(",null,",",null,")");S.push({i:x-4,x:Rt(c,f)},{i:x-2,x:Rt(u,g)})}else(f!==1||g!==1)&&v.push(s(v)+"scale("+f+","+g+")")}return function(c,u){var f=[],g=[];return c=e(c),u=e(u),r(c.translateX,c.translateY,u.translateX,u.translateY,f,g),i(c.rotate,u.rotate,f,g),l(c.skewX,u.skewX,f,g),a(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,g),c=u=null,function(v){for(var S=-1,x=g.length,N;++S<x;)f[(N=g[S]).i]=N.x(v);return f.join("")}}}var U0=Qd(V0,"px, ","px)","deg)"),j0=Qd(H0,", ",")",")"),G0=1e-12;function ru(e){return((e=Math.exp(e))+1/e)/2}function Y0(e){return((e=Math.exp(e))-1/e)/2}function K0(e){return((e=Math.exp(2*e))-1)/(e+1)}const js=(function e(t,n,o){function s(r,i){var l=r[0],a=r[1],c=r[2],u=i[0],f=i[1],g=i[2],v=u-l,S=f-a,x=v*v+S*S,N,C;if(x<G0)C=Math.log(g/c)/t,N=function(X){return[l+X*v,a+X*S,c*Math.exp(t*X*C)]};else{var A=Math.sqrt(x),m=(g*g-c*c+o*x)/(2*c*n*A),w=(g*g-c*c-o*x)/(2*g*n*A),I=Math.log(Math.sqrt(m*m+1)-m),H=Math.log(Math.sqrt(w*w+1)-w);C=(H-I)/t,N=function(X){var B=X*C,R=ru(I),V=c/(n*A)*(R*K0(t*B+I)-Y0(I));return[l+V*v,a+V*S,c*R/ru(t*B+I)]}}return N.duration=C*1e3*t/Math.SQRT2,N}return s.rho=function(r){var i=Math.max(.001,+r),l=i*i,a=l*l;return e(i,l,a)},s})(Math.SQRT2,2,4);var yo=0,Po=0,Ao=0,ef=1e3,ur,Lo,cr=0,Yn=0,Fr=0,ls=typeof performance=="object"&&performance.now?performance:Date,tf=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Nl(){return Yn||(tf(W0),Yn=ls.now()+Fr)}function W0(){Yn=0}function dr(){this._call=this._time=this._next=null}dr.prototype=nf.prototype={constructor:dr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Nl():+n)+(t==null?0:+t),!this._next&&Lo!==this&&(Lo?Lo._next=this:ur=this,Lo=this),this._call=e,this._time=n,Zi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zi())}};function nf(e,t,n){var o=new dr;return o.restart(e,t,n),o}function X0(){Nl(),++yo;for(var e=ur,t;e;)(t=Yn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--yo}function iu(){Yn=(cr=ls.now())+Fr,yo=Po=0;try{X0()}finally{yo=0,Z0(),Yn=0}}function q0(){var e=ls.now(),t=e-cr;t>ef&&(Fr-=t,cr=e)}function Z0(){for(var e,t=ur,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ur=n);Lo=e,Zi(o)}function Zi(e){if(!yo){Po&&(Po=clearTimeout(Po));var t=e-Yn;t>24?(e<1/0&&(Po=setTimeout(iu,e-ls.now()-Fr)),Ao&&(Ao=clearInterval(Ao))):(Ao||(cr=ls.now(),Ao=setInterval(q0,ef)),yo=1,tf(iu))}}function lu(e,t,n){var o=new dr;return t=t==null?0:+t,o.restart(s=>{o.stop(),e(s+t)},t,n),o}var J0=Rr("start","end","cancel","interrupt"),Q0=[],of=0,au=1,Ji=2,Gs=3,uu=4,Qi=5,Ys=6;function zr(e,t,n,o,s,r){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;eb(e,n,{name:t,index:o,group:s,on:J0,tween:Q0,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:of})}function Tl(e,t){var n=Tt(e,t);if(n.state>of)throw new Error("too late; already scheduled");return n}function jt(e,t){var n=Tt(e,t);if(n.state>Gs)throw new Error("too late; already running");return n}function Tt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function eb(e,t,n){var o=e.__transition,s;o[t]=n,n.timer=nf(r,0,n.time);function r(c){n.state=au,n.timer.restart(i,n.delay,n.time),n.delay<=c&&i(c-n.delay)}function i(c){var u,f,g,v;if(n.state!==au)return a();for(u in o)if(v=o[u],v.name===n.name){if(v.state===Gs)return lu(i);v.state===uu?(v.state=Ys,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete o[u]):+u<t&&(v.state=Ys,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete o[u])}if(lu(function(){n.state===Gs&&(n.state=uu,n.timer.restart(l,n.delay,n.time),l(c))}),n.state=Ji,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ji){for(n.state=Gs,s=new Array(g=n.tween.length),u=0,f=-1;u<g;++u)(v=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(s[++f]=v);s.length=f+1}}function l(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(a),n.state=Qi,1),f=-1,g=s.length;++f<g;)s[f].call(e,u);n.state===Qi&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=Ys,n.timer.stop(),delete o[t];for(var c in o)return;delete e.__transition}}function Ks(e,t){var n=e.__transition,o,s,r=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((o=n[i]).name!==t){r=!1;continue}s=o.state>Ji&&o.state<Qi,o.state=Ys,o.timer.stop(),o.on.call(s?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[i]}r&&delete e.__transition}}function tb(e){return this.each(function(){Ks(this,e)})}function nb(e,t){var n,o;return function(){var s=jt(this,e),r=s.tween;if(r!==n){o=n=r;for(var i=0,l=o.length;i<l;++i)if(o[i].name===t){o=o.slice(),o.splice(i,1);break}}s.tween=o}}function ob(e,t,n){var o,s;if(typeof n!="function")throw new Error;return function(){var r=jt(this,e),i=r.tween;if(i!==o){s=(o=i).slice();for(var l={name:t,value:n},a=0,c=s.length;a<c;++a)if(s[a].name===t){s[a]=l;break}a===c&&s.push(l)}r.tween=s}}function sb(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Tt(this.node(),n).tween,s=0,r=o.length,i;s<r;++s)if((i=o[s]).name===e)return i.value;return null}return this.each((t==null?nb:ob)(n,e,t))}function $l(e,t,n){var o=e._id;return e.each(function(){var s=jt(this,o);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return Tt(s,o).value[t]}}function sf(e,t){var n;return(typeof t=="number"?Rt:t instanceof Gn?ar:(n=Gn(t))?(t=n,ar):Zd)(e,t)}function rb(e){return function(){this.removeAttribute(e)}}function ib(e){return function(){this.removeAttributeNS(e.space,e.local)}}function lb(e,t,n){var o,s=n+"",r;return function(){var i=this.getAttribute(e);return i===s?null:i===o?r:r=t(o=i,n)}}function ab(e,t,n){var o,s=n+"",r;return function(){var i=this.getAttributeNS(e.space,e.local);return i===s?null:i===o?r:r=t(o=i,n)}}function ub(e,t,n){var o,s,r;return function(){var i,l=n(this),a;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),a=l+"",i===a?null:i===o&&a===s?r:(s=a,r=t(o=i,l)))}}function cb(e,t,n){var o,s,r;return function(){var i,l=n(this),a;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),a=l+"",i===a?null:i===o&&a===s?r:(s=a,r=t(o=i,l)))}}function db(e,t){var n=Br(e),o=n==="transform"?j0:sf;return this.attrTween(e,typeof t=="function"?(n.local?cb:ub)(n,o,$l(this,"attr."+e,t)):t==null?(n.local?ib:rb)(n):(n.local?ab:lb)(n,o,t))}function fb(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function pb(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function hb(e,t){var n,o;function s(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&pb(e,r)),n}return s._value=t,s}function gb(e,t){var n,o;function s(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&fb(e,r)),n}return s._value=t,s}function mb(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Br(e);return this.tween(n,(o.local?hb:gb)(o,t))}function vb(e,t){return function(){Tl(this,e).delay=+t.apply(this,arguments)}}function yb(e,t){return t=+t,function(){Tl(this,e).delay=t}}function bb(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?vb:yb)(t,e)):Tt(this.node(),t).delay}function xb(e,t){return function(){jt(this,e).duration=+t.apply(this,arguments)}}function wb(e,t){return t=+t,function(){jt(this,e).duration=t}}function _b(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xb:wb)(t,e)):Tt(this.node(),t).duration}function Sb(e,t){if(typeof t!="function")throw new Error;return function(){jt(this,e).ease=t}}function Eb(e){var t=this._id;return arguments.length?this.each(Sb(t,e)):Tt(this.node(),t).ease}function Cb(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;jt(this,e).ease=n}}function Ib(e){if(typeof e!="function")throw new Error;return this.each(Cb(this._id,e))}function Nb(e){typeof e!="function"&&(e=Ld(e));for(var t=this._groups,n=t.length,o=new Array(n),s=0;s<n;++s)for(var r=t[s],i=r.length,l=o[s]=[],a,c=0;c<i;++c)(a=r[c])&&e.call(a,a.__data__,c,r)&&l.push(a);return new un(o,this._parents,this._name,this._id)}function Tb(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,s=n.length,r=Math.min(o,s),i=new Array(o),l=0;l<r;++l)for(var a=t[l],c=n[l],u=a.length,f=i[l]=new Array(u),g,v=0;v<u;++v)(g=a[v]||c[v])&&(f[v]=g);for(;l<o;++l)i[l]=t[l];return new un(i,this._parents,this._name,this._id)}function $b(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Mb(e,t,n){var o,s,r=$b(t)?Tl:jt;return function(){var i=r(this,e),l=i.on;l!==o&&(s=(o=l).copy()).on(t,n),i.on=s}}function Ab(e,t){var n=this._id;return arguments.length<2?Tt(this.node(),n).on.on(e):this.each(Mb(n,e,t))}function kb(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ob(){return this.on("end.remove",kb(this._id))}function Db(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Sl(e));for(var o=this._groups,s=o.length,r=new Array(s),i=0;i<s;++i)for(var l=o[i],a=l.length,c=r[i]=new Array(a),u,f,g=0;g<a;++g)(u=l[g])&&(f=e.call(u,u.__data__,g,l))&&("__data__"in u&&(f.__data__=u.__data__),c[g]=f,zr(c[g],t,n,g,c,Tt(u,n)));return new un(r,this._parents,t,n)}function Pb(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Pd(e));for(var o=this._groups,s=o.length,r=[],i=[],l=0;l<s;++l)for(var a=o[l],c=a.length,u,f=0;f<c;++f)if(u=a[f]){for(var g=e.call(u,u.__data__,f,a),v,S=Tt(u,n),x=0,N=g.length;x<N;++x)(v=g[x])&&zr(v,t,n,x,g,S);r.push(g),i.push(u)}return new un(r,i,t,n)}var Lb=vs.prototype.constructor;function Rb(){return new Lb(this._groups,this._parents)}function Bb(e,t){var n,o,s;return function(){var r=vo(this,e),i=(this.style.removeProperty(e),vo(this,e));return r===i?null:r===n&&i===o?s:s=t(n=r,o=i)}}function rf(e){return function(){this.style.removeProperty(e)}}function Fb(e,t,n){var o,s=n+"",r;return function(){var i=vo(this,e);return i===s?null:i===o?r:r=t(o=i,n)}}function zb(e,t,n){var o,s,r;return function(){var i=vo(this,e),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(e),vo(this,e))),i===a?null:i===o&&a===s?r:(s=a,r=t(o=i,l))}}function Vb(e,t){var n,o,s,r="style."+t,i="end."+r,l;return function(){var a=jt(this,e),c=a.on,u=a.value[r]==null?l||(l=rf(t)):void 0;(c!==n||s!==u)&&(o=(n=c).copy()).on(i,s=u),a.on=o}}function Hb(e,t,n){var o=(e+="")=="transform"?U0:sf;return t==null?this.styleTween(e,Bb(e,o)).on("end.style."+e,rf(e)):typeof t=="function"?this.styleTween(e,zb(e,o,$l(this,"style."+e,t))).each(Vb(this._id,e)):this.styleTween(e,Fb(e,o,t),n).on("end.style."+e,null)}function Ub(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function jb(e,t,n){var o,s;function r(){var i=t.apply(this,arguments);return i!==s&&(o=(s=i)&&Ub(e,i,n)),o}return r._value=t,r}function Gb(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,jb(e,t,n??""))}function Yb(e){return function(){this.textContent=e}}function Kb(e){return function(){var t=e(this);this.textContent=t??""}}function Wb(e){return this.tween("text",typeof e=="function"?Kb($l(this,"text",e)):Yb(e==null?"":e+""))}function Xb(e){return function(t){this.textContent=e.call(this,t)}}function qb(e){var t,n;function o(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&Xb(s)),t}return o._value=e,o}function Zb(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,qb(e))}function Jb(){for(var e=this._name,t=this._id,n=lf(),o=this._groups,s=o.length,r=0;r<s;++r)for(var i=o[r],l=i.length,a,c=0;c<l;++c)if(a=i[c]){var u=Tt(a,t);zr(a,e,n,c,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new un(o,this._parents,e,n)}function Qb(){var e,t,n=this,o=n._id,s=n.size();return new Promise(function(r,i){var l={value:i},a={value:function(){--s===0&&r()}};n.each(function(){var c=jt(this,o),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(a)),c.on=t}),s===0&&r()})}var e1=0;function un(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function lf(){return++e1}var Kt=vs.prototype;un.prototype={constructor:un,select:Db,selectAll:Pb,selectChild:Kt.selectChild,selectChildren:Kt.selectChildren,filter:Nb,merge:Tb,selection:Rb,transition:Jb,call:Kt.call,nodes:Kt.nodes,node:Kt.node,size:Kt.size,empty:Kt.empty,each:Kt.each,on:Ab,attr:db,attrTween:mb,style:Hb,styleTween:Gb,text:Wb,textTween:Zb,remove:Ob,tween:sb,delay:bb,duration:_b,ease:Eb,easeVarying:Ib,end:Qb,[Symbol.iterator]:Kt[Symbol.iterator]};function t1(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var n1={time:null,delay:0,duration:250,ease:t1};function o1(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function s1(e){var t,n;e instanceof un?(t=e._id,e=e._name):(t=lf(),(n=n1).time=Nl(),e=e==null?null:e+"");for(var o=this._groups,s=o.length,r=0;r<s;++r)for(var i=o[r],l=i.length,a,c=0;c<l;++c)(a=i[c])&&zr(a,e,t,c,i,n||o1(a,t));return new un(o,this._parents,e,t)}vs.prototype.interrupt=tb;vs.prototype.transition=s1;const Ms=e=>()=>e;function r1(e,{sourceEvent:t,target:n,transform:o,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:s}})}function en(e,t,n){this.k=e,this.x=t,this.y=n}en.prototype={constructor:en,scale:function(e){return e===1?this:new en(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new en(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bo=new en(1,0,0);en.prototype;function mi(e){e.stopImmediatePropagation()}function ko(e){e.preventDefault(),e.stopImmediatePropagation()}function i1(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function l1(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function cu(){return this.__zoom||bo}function a1(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function u1(){return navigator.maxTouchPoints||"ontouchstart"in this}function c1(e,t,n){var o=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s),i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i))}function d1(){var e=i1,t=l1,n=c1,o=a1,s=u1,r=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,a=js,c=Rr("start","zoom","end"),u,f,g,v=500,S=150,x=0,N=10;function C(M){M.property("__zoom",cu).on("wheel.zoom",B,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",V).filter(s).on("touchstart.zoom",z).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(M,W,L,O){var P=M.selection?M.selection():M;P.property("__zoom",cu),M!==P?I(M,W,L,O):P.interrupt().each(function(){H(this,arguments).event(O).start().zoom(null,typeof W=="function"?W.apply(this,arguments):W).end()})},C.scaleBy=function(M,W,L,O){C.scaleTo(M,function(){var P=this.__zoom.k,d=typeof W=="function"?W.apply(this,arguments):W;return P*d},L,O)},C.scaleTo=function(M,W,L,O){C.transform(M,function(){var P=t.apply(this,arguments),d=this.__zoom,h=L==null?w(P):typeof L=="function"?L.apply(this,arguments):L,J=d.invert(h),ne=typeof W=="function"?W.apply(this,arguments):W;return n(m(A(d,ne),h,J),P,i)},L,O)},C.translateBy=function(M,W,L,O){C.transform(M,function(){return n(this.__zoom.translate(typeof W=="function"?W.apply(this,arguments):W,typeof L=="function"?L.apply(this,arguments):L),t.apply(this,arguments),i)},null,O)},C.translateTo=function(M,W,L,O,P){C.transform(M,function(){var d=t.apply(this,arguments),h=this.__zoom,J=O==null?w(d):typeof O=="function"?O.apply(this,arguments):O;return n(bo.translate(J[0],J[1]).scale(h.k).translate(typeof W=="function"?-W.apply(this,arguments):-W,typeof L=="function"?-L.apply(this,arguments):-L),d,i)},O,P)};function A(M,W){return W=Math.max(r[0],Math.min(r[1],W)),W===M.k?M:new en(W,M.x,M.y)}function m(M,W,L){var O=W[0]-L[0]*M.k,P=W[1]-L[1]*M.k;return O===M.x&&P===M.y?M:new en(M.k,O,P)}function w(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function I(M,W,L,O){M.on("start.zoom",function(){H(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){H(this,arguments).event(O).end()}).tween("zoom",function(){var P=this,d=arguments,h=H(P,d).event(O),J=t.apply(P,d),ne=L==null?w(J):typeof L=="function"?L.apply(P,d):L,he=Math.max(J[1][0]-J[0][0],J[1][1]-J[0][1]),ve=P.__zoom,le=typeof W=="function"?W.apply(P,d):W,se=a(ve.invert(ne).concat(he/ve.k),le.invert(ne).concat(he/le.k));return function(ce){if(ce===1)ce=le;else{var Ce=se(ce),Ae=he/Ce[2];ce=new en(Ae,ne[0]-Ce[0]*Ae,ne[1]-Ce[1]*Ae)}h.zoom(null,ce)}})}function H(M,W,L){return!L&&M.__zooming||new X(M,W)}function X(M,W){this.that=M,this.args=W,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,W),this.taps=0}X.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,W){return this.mouse&&M!=="mouse"&&(this.mouse[1]=W.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=W.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=W.invert(this.touch1[0])),this.that.__zoom=W,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var W=bt(this.that).datum();c.call(M,this.that,new r1(M,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:c}),W)}};function B(M,...W){if(!e.apply(this,arguments))return;var L=H(this,W).event(M),O=this.__zoom,P=Math.max(r[0],Math.min(r[1],O.k*Math.pow(2,o.apply(this,arguments)))),d=Pt(M);if(L.wheel)(L.mouse[0][0]!==d[0]||L.mouse[0][1]!==d[1])&&(L.mouse[1]=O.invert(L.mouse[0]=d)),clearTimeout(L.wheel);else{if(O.k===P)return;L.mouse=[d,O.invert(d)],Ks(this),L.start()}ko(M),L.wheel=setTimeout(h,S),L.zoom("mouse",n(m(A(O,P),L.mouse[0],L.mouse[1]),L.extent,i));function h(){L.wheel=null,L.end()}}function R(M,...W){if(g||!e.apply(this,arguments))return;var L=M.currentTarget,O=H(this,W,!0).event(M),P=bt(M.view).on("mousemove.zoom",ne,!0).on("mouseup.zoom",he,!0),d=Pt(M,L),h=M.clientX,J=M.clientY;Yd(M.view),mi(M),O.mouse=[d,this.__zoom.invert(d)],Ks(this),O.start();function ne(ve){if(ko(ve),!O.moved){var le=ve.clientX-h,se=ve.clientY-J;O.moved=le*le+se*se>x}O.event(ve).zoom("mouse",n(m(O.that.__zoom,O.mouse[0]=Pt(ve,L),O.mouse[1]),O.extent,i))}function he(ve){P.on("mousemove.zoom mouseup.zoom",null),Kd(ve.view,O.moved),ko(ve),O.event(ve).end()}}function V(M,...W){if(e.apply(this,arguments)){var L=this.__zoom,O=Pt(M.changedTouches?M.changedTouches[0]:M,this),P=L.invert(O),d=L.k*(M.shiftKey?.5:2),h=n(m(A(L,d),O,P),t.apply(this,W),i);ko(M),l>0?bt(this).transition().duration(l).call(I,h,O,M):bt(this).call(C.transform,h,O,M)}}function z(M,...W){if(e.apply(this,arguments)){var L=M.touches,O=L.length,P=H(this,W,M.changedTouches.length===O).event(M),d,h,J,ne;for(mi(M),h=0;h<O;++h)J=L[h],ne=Pt(J,this),ne=[ne,this.__zoom.invert(ne),J.identifier],P.touch0?!P.touch1&&P.touch0[2]!==ne[2]&&(P.touch1=ne,P.taps=0):(P.touch0=ne,d=!0,P.taps=1+!!u);u&&(u=clearTimeout(u)),d&&(P.taps<2&&(f=ne[0],u=setTimeout(function(){u=null},v)),Ks(this),P.start())}}function T(M,...W){if(this.__zooming){var L=H(this,W).event(M),O=M.changedTouches,P=O.length,d,h,J,ne;for(ko(M),d=0;d<P;++d)h=O[d],J=Pt(h,this),L.touch0&&L.touch0[2]===h.identifier?L.touch0[0]=J:L.touch1&&L.touch1[2]===h.identifier&&(L.touch1[0]=J);if(h=L.that.__zoom,L.touch1){var he=L.touch0[0],ve=L.touch0[1],le=L.touch1[0],se=L.touch1[1],ce=(ce=le[0]-he[0])*ce+(ce=le[1]-he[1])*ce,Ce=(Ce=se[0]-ve[0])*Ce+(Ce=se[1]-ve[1])*Ce;h=A(h,Math.sqrt(ce/Ce)),J=[(he[0]+le[0])/2,(he[1]+le[1])/2],ne=[(ve[0]+se[0])/2,(ve[1]+se[1])/2]}else if(L.touch0)J=L.touch0[0],ne=L.touch0[1];else return;L.zoom("touch",n(m(h,J,ne),L.extent,i))}}function Q(M,...W){if(this.__zooming){var L=H(this,W).event(M),O=M.changedTouches,P=O.length,d,h;for(mi(M),g&&clearTimeout(g),g=setTimeout(function(){g=null},v),d=0;d<P;++d)h=O[d],L.touch0&&L.touch0[2]===h.identifier?delete L.touch0:L.touch1&&L.touch1[2]===h.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(h=Pt(h,this),Math.hypot(f[0]-h[0],f[1]-h[1])<N)){var J=bt(this).on("dblclick.zoom");J&&J.apply(this,arguments)}}}return C.wheelDelta=function(M){return arguments.length?(o=typeof M=="function"?M:Ms(+M),C):o},C.filter=function(M){return arguments.length?(e=typeof M=="function"?M:Ms(!!M),C):e},C.touchable=function(M){return arguments.length?(s=typeof M=="function"?M:Ms(!!M),C):s},C.extent=function(M){return arguments.length?(t=typeof M=="function"?M:Ms([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),C):t},C.scaleExtent=function(M){return arguments.length?(r[0]=+M[0],r[1]=+M[1],C):[r[0],r[1]]},C.translateExtent=function(M){return arguments.length?(i[0][0]=+M[0][0],i[1][0]=+M[1][0],i[0][1]=+M[0][1],i[1][1]=+M[1][1],C):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},C.constrain=function(M){return arguments.length?(n=M,C):n},C.duration=function(M){return arguments.length?(l=+M,C):l},C.interpolate=function(M){return arguments.length?(a=M,C):a},C.on=function(){var M=c.on.apply(c,arguments);return M===c?C:M},C.clickDistance=function(M){return arguments.length?(x=(M=+M)*M,C):Math.sqrt(x)},C.tapDistance=function(M){return arguments.length?(N=+M,C):N},C}var pe=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(pe||{}),Ml=(e=>(e.Partial="partial",e.Full="full",e))(Ml||{}),kn=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(kn||{}),Sn=(e=>(e.Strict="strict",e.Loose="loose",e))(Sn||{}),qt=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(qt||{}),Wo=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Wo||{}),af=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(af||{});const f1=["INPUT","SELECT","TEXTAREA"],p1=typeof document<"u"?document:null;function el(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,s=typeof o?.hasAttribute=="function"?o.hasAttribute("contenteditable"):!1,r=typeof o?.closest=="function"?o.closest(".nokey"):null;return f1.includes(o?.nodeName)||s||!!r}function h1(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function du(e,t,n,o){const s=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(i=>i.trim().toLowerCase());if(s.length===1)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const r=s.every((i,l)=>n.has(i)&&Array.from(n.values())[l]===s[l]);return o&&n.delete(e.toLowerCase()),r}function g1(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=m1(n.code,e);return Array.isArray(e)?e.some(s=>du(n[o],s,t,n.type==="keyup")):du(n[o],e,t,n.type==="keyup")}}function m1(e,t){return t.includes(e)?"code":"key"}function Xo(e,t){const n=ie(()=>xe(t?.target)??p1),o=Ft(xe(e)===!0);let s=!1;const r=new Set;let i=a(xe(e));_e(()=>xe(e),(c,u)=>{typeof u=="boolean"&&typeof c!="boolean"&&l(),i=a(c)},{immediate:!0}),Od(["blur","contextmenu"],l),Ka((...c)=>i(...c),c=>{var u,f;const g=xe(t?.actInsideInputWithModifier)??!0,v=xe(t?.preventDefault)??!1;if(s=h1(c),(!s||s&&!g)&&el(c))return;const x=((f=(u=c.composedPath)==null?void 0:u.call(c))==null?void 0:f[0])||c.target,N=x?.nodeName==="BUTTON"||x?.nodeName==="A";!v&&(s||!N)&&c.preventDefault(),o.value=!0},{eventName:"keydown",target:n}),Ka((...c)=>i(...c),c=>{const u=xe(t?.actInsideInputWithModifier)??!0;if(o.value){if((!s||s&&!u)&&el(c))return;s=!1,o.value=!1}},{eventName:"keyup",target:n});function l(){s=!1,r.clear(),o.value=xe(e)===!0}function a(c){return c===null?(l(),()=>!1):typeof c=="boolean"?(l(),o.value=c,()=>!1):Array.isArray(c)||typeof c=="string"?g1(c,r):c}return o}const uf="vue-flow__node-desc",cf="vue-flow__edge-desc",v1="vue-flow__aria-live",df=["Enter"," ","Escape"],co={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function fr(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function pr(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Vr(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Kn(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function ff(e,t){return{x:Kn(e.x,t[0][0],t[1][0]),y:Kn(e.y,t[0][1],t[1][1])}}function fu(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function En(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function Bn(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!En(e)}function Ro(e){return Bn(e)&&"computedPosition"in e}function As(e){return!Number.isNaN(e)&&Number.isFinite(e)}function y1(e){return As(e.width)&&As(e.height)&&As(e.x)&&As(e.y)}function b1(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:_n({width:0,height:0}),computedPosition:_n({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Ke(e.data)?e.data:{},events:_n(Ke(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function pf(e,t,n){var o,s;const r={id:e.id.toString(),type:e.type??t?.type??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(s=e.targetHandle)==null?void 0:s.toString(),updatable:e.updatable??n?.updatable,selectable:e.selectable??n?.selectable,focusable:e.focusable??n?.focusable,data:Ke(e.data)?e.data:{},events:_n(Ke(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??n?.interactionWidth,...n??{}};return Object.assign(t??r,e,{id:e.id.toString()})}function hf(e,t,n,o){const s=typeof e=="string"?e:e.id,r=new Set,i=o==="source"?"target":"source";for(const l of n)l[i]===s&&r.add(l[o]);return t.filter(l=>r.has(l.id))}function x1(...e){if(e.length===3){const[r,i,l]=e;return hf(r,i,l,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(r=>En(r)&&r.source===o).map(r=>n.find(i=>Bn(i)&&i.id===r.target))}function w1(...e){if(e.length===3){const[r,i,l]=e;return hf(r,i,l,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(r=>En(r)&&r.target===o).map(r=>n.find(i=>Bn(i)&&i.id===r.source))}function gf({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function _1(e,t){return t.some(n=>En(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function as({x:e,y:t},{x:n,y:o,zoom:s}){return{x:e*s+n,y:t*s+o}}function us({x:e,y:t},{x:n,y:o,zoom:s},r=!1,i=[1,1]){const l={x:(e-n)/s,y:(t-o)/s};return r?Hr(l,i):l}function S1(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function mf({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function E1({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function vf(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=S1(t,mf({...o.computedPosition,...o.dimensions}))}return E1(t)}function yf(e,t,n={x:0,y:0,zoom:1},o=!1,s=!1){const r={...us(t,n),width:t.width/n.zoom,height:t.height/n.zoom},i=[];for(const l of e){const{dimensions:a,selectable:c=!0,hidden:u=!1}=l,f=a.width??l.width??null,g=a.height??l.height??null;if(s&&!c||u)continue;const v=pr(r,fr(l)),S=f===null||g===null,x=o&&v>0,N=(f??0)*(g??0);(S||x||v>=N||l.dragging)&&i.push(l)}return i}function bf(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function Jn(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return bs(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function C1(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=Jn(e,n),s=Jn(e,t);return{top:o,right:s,bottom:o,left:s,x:s*2,y:o*2}}if(typeof e=="object"){const o=Jn(e.top??e.y??0,n),s=Jn(e.bottom??e.y??0,n),r=Jn(e.left??e.x??0,t),i=Jn(e.right??e.x??0,t);return{top:o,right:i,bottom:s,left:r,x:r+i,y:o+s}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function I1(e,t,n,o,s,r){const{x:i,y:l}=as(e,{x:t,y:n,zoom:o}),{x:a,y:c}=as({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:o}),u=s-a,f=r-c;return{left:Math.floor(i),top:Math.floor(l),right:Math.floor(u),bottom:Math.floor(f)}}function pu(e,t,n,o,s,r=.1){const i=C1(r,t,n),l=(t-i.x)/e.width,a=(n-i.y)/e.height,c=Math.min(l,a),u=Kn(c,o,s),f=e.x+e.width/2,g=e.y+e.height/2,v=t/2-f*u,S=n/2-g*u,x=I1(e,v,S,u,t,n),N={left:Math.min(x.left-i.left,0),top:Math.min(x.top-i.top,0),right:Math.min(x.right-i.right,0),bottom:Math.min(x.bottom-i.bottom,0)};return{x:v-N.left+N.right,y:S-N.top+N.bottom,zoom:u}}function N1(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function xf(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:xf(n,t):!1}function cs(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function hu(e){const t=e.ctrlKey&&hr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t}function gu(e,t,n){return e<t?Kn(Math.abs(e-t),1,t)/t:e>n?-Kn(Math.abs(e-n),1,t)/t:0}function wf(e,t,n=15,o=40){const s=gu(e.x,o,t.width-o)*n,r=gu(e.y,o,t.height-o)*n;return[s,r]}function vi(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let s={};if(typeof t.style=="function"?s={...t.style(t)}:t.style&&(s={...t.style}),s.width=s.width??`${t.dimensions.width}px`,s.height=s.height??`${t.dimensions.height}px`,n>0)if(typeof s.width=="string"){const r=Number(s.width.replace("px",""));s.width=`${r+n}px`}else s.width+=n;if(o>0)if(typeof s.height=="string"){const r=Number(s.height.replace("px",""));s.height=`${r+o}px`}else s.height+=o;if(e.position.x<0){const r=Math.abs(e.position.x);if(t.position.x=t.position.x-r,typeof s.width=="string"){const i=Number(s.width.replace("px",""));s.width=`${i+r}px`}else s.width+=r;e.position.x=0}if(e.position.y<0){const r=Math.abs(e.position.y);if(t.position.y=t.position.y-r,typeof s.height=="string"){const i=Number(s.height.replace("px",""));s.height=`${i+r}px`}else s.height+=r;e.position.y=0}t.dimensions.width=Number(s.width.toString().replace("px","")),t.dimensions.height=Number(s.height.toString().replace("px","")),typeof t.style=="function"?t.style=r=>{const i=t.style;return{...i(r),...s}}:t.style={...t.style,...s}}}}function mu(e,t){var n,o;const s=e.filter(i=>i.type==="add"||i.type==="remove");for(const i of s)if(i.type==="add")t.findIndex(a=>a.id===i.item.id)===-1&&t.push(i.item);else if(i.type==="remove"){const l=t.findIndex(a=>a.id===i.id);l!==-1&&t.splice(l,1)}const r=t.map(i=>i.id);for(const i of t)for(const l of e)if(l.id===i.id)switch(l.type){case"select":i.selected=l.selected;break;case"position":if(Ro(i)&&(typeof l.position<"u"&&(i.position=l.position),typeof l.dragging<"u"&&(i.dragging=l.dragging),i.expandParent&&i.parentNode)){const a=t[r.indexOf(i.parentNode)];a&&Ro(a)&&vi(i,a)}break;case"dimensions":if(Ro(i)&&(typeof l.dimensions<"u"&&(i.dimensions=l.dimensions),typeof l.updateStyle<"u"&&l.updateStyle&&(i.style={...i.style||{},width:`${(n=l.dimensions)==null?void 0:n.width}px`,height:`${(o=l.dimensions)==null?void 0:o.height}px`}),typeof l.resizing<"u"&&(i.resizing=l.resizing),i.expandParent&&i.parentNode)){const a=t[r.indexOf(i.parentNode)];a&&Ro(a)&&(!!a.dimensions.width&&!!a.dimensions.height?vi(i,a):ut(()=>{vi(i,a)}))}break}return t}function mn(e,t){return{id:e,type:"select",selected:t}}function vu(e){return{item:e,type:"add"}}function yu(e){return{id:e,type:"remove"}}function bu(e,t,n,o,s){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:s||null,type:"remove"}}function xn(e,t=new Set,n=!1){const o=[];for(const[s,r]of e){const i=t.has(s);!(r.selected===void 0&&!i)&&r.selected!==i&&(n&&(r.selected=i),o.push(mn(r.id,i)))}return o}const xu=()=>{};function ae(e){const t=new Set;let n=xu,o=()=>!1;const s=()=>t.size>0||o(),r=g=>{n=g},i=()=>{n=xu},l=g=>{o=g},a=()=>{o=()=>!1},c=g=>{t.delete(g)};return{on:g=>{t.add(g);const v=()=>c(g);return os(v),{off:v}},off:c,trigger:g=>{const v=[n];return s()?v.push(...t):e&&v.push(e),Promise.allSettled(v.map(S=>S(g)))},hasListeners:s,listeners:t,setEmitter:r,removeEmitter:i,setHasEmitListeners:l,removeHasEmitListeners:a}}function wu(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function T1(e,t,n,o){var s,r;const i=new Map;for(const[l,a]of e)(a.selected||a.id===o)&&(!a.parentNode||!xf(a,e))&&(a.draggable||t&&typeof a.draggable>"u")&&e.get(l)&&i.set(l,{id:a.id,position:a.position||{x:0,y:0},distance:{x:n.x-((s=a.computedPosition)==null?void 0:s.x)||0,y:n.y-((r=a.computedPosition)==null?void 0:r.y)||0},from:{x:a.computedPosition.x,y:a.computedPosition.y},extent:a.extent,parentNode:a.parentNode,dimensions:{...a.dimensions},expandParent:a.expandParent});return Array.from(i.values())}function yi({id:e,dragItems:t,findNode:n}){const o=[];for(const s of t){const r=n(s.id);r&&o.push(r)}return[e?o.find(s=>s.id===e):o[0],o]}function _f(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function $1(e,t,n){const[o,s,r,i]=typeof e!="string"?_f(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+i,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-s,n.computedPosition.y+n.dimensions.height-r]]:!1}function M1(e,t,n,o){let s=e.extent||n;if((s==="parent"||!Array.isArray(s)&&s?.range==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const r=$1(s,e,o);r&&(s=r)}else t(new qe(We.NODE_EXTENT_INVALID,e.id)),s=n;else if(Array.isArray(s)){const r=o?.computedPosition.x||0,i=o?.computedPosition.y||0;s=[[s[0][0]+r,s[0][1]+i],[s[1][0]+r,s[1][1]+i]]}else if(s!=="parent"&&s?.range&&Array.isArray(s.range)){const[r,i,l,a]=_f(s.padding),c=o?.computedPosition.x||0,u=o?.computedPosition.y||0;s=[[s.range[0][0]+c+a,s.range[0][1]+u+r],[s.range[1][0]+c-i,s.range[1][1]+u-l]]}return s==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:s}function A1({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Al(e,t,n,o,s){const r=A1(e.dimensions,M1(e,n,o,s)),i=ff(t,r);return{position:{x:i.x-(s?.computedPosition.x||0),y:i.y-(s?.computedPosition.y||0)},computedPosition:i}}function xo(e,t,n=pe.Left,o=!1){const s=(t?.x??0)+e.computedPosition.x,r=(t?.y??0)+e.computedPosition.y,{width:i,height:l}=t??P1(e);if(o)return{x:s+i/2,y:r+l/2};switch(t?.position??n){case pe.Top:return{x:s+i/2,y:r};case pe.Right:return{x:s+i,y:r+l/2};case pe.Bottom:return{x:s+i/2,y:r+l};case pe.Left:return{x:s,y:r+l/2}}}function _u(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function k1({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:s,targetHeight:r,width:i,height:l,viewport:a}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+s),y2:Math.max(e.y+o,t.y+r)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u=mf({x:(0-a.x)/a.zoom,y:(0-a.y)/a.zoom,width:i/a.zoom,height:l/a.zoom}),f=Math.max(0,Math.min(u.x2,c.x2)-Math.max(u.x,c.x)),g=Math.max(0,Math.min(u.y2,c.y2)-Math.max(u.y,c.y));return Math.ceil(f*g)>0}function O1(e,t,n=!1){const o=typeof e.zIndex=="number";let s=o?e.zIndex:0;const r=t(e.source),i=t(e.target);return!r||!i?0:(n&&(s=o?e.zIndex:Math.max(r.computedPosition.z||0,i.computedPosition.z||0)),s)}var We=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(We||{});const Su={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class qe extends Error{constructor(t,...n){var o;super((o=Su[t])==null?void 0:o.call(Su,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function kl(e){return"clientX"in e}function D1(e){return"sourceEvent"in e}function Bt(e,t){const n=kl(e);let o,s;return n?(o=e.clientX,s=e.clientY):"touches"in e&&e.touches.length>0?(o=e.touches[0].clientX,s=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(o=e.changedTouches[0].clientX,s=e.changedTouches[0].clientY):(o=0,s=0),{x:o-(t?.left??0),y:s-(t?.top??0)}}const hr=()=>{var e;return typeof navigator<"u"&&((e=navigator?.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function P1(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function Hr(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const L1=()=>!0;function bi(e){e?.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function R1(e,t,n){const o=[],s={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const r of t.values())pr(s,fr(r))>0&&o.push(r);return o}const B1=250;function F1(e,t,n,o){var s,r;let i=[],l=Number.POSITIVE_INFINITY;const a=R1(e,n,t+B1);for(const c of a){const u=[...((s=c.handleBounds)==null?void 0:s.source)??[],...((r=c.handleBounds)==null?void 0:r.target)??[]];for(const f of u){if(o.nodeId===f.nodeId&&o.type===f.type&&o.id===f.id)continue;const{x:g,y:v}=xo(c,f,f.position,!0),S=Math.sqrt((g-e.x)**2+(v-e.y)**2);S>t||(S<l?(i=[{...f,x:g,y:v}],l=S):S===l&&i.push({...f,x:g,y:v}))}}if(!i.length)return null;if(i.length>1){const c=o.type==="source"?"target":"source";return i.find(u=>u.type===c)??i[0]}return i[0]}function Eu(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:s,fromType:r,doc:i,lib:l,flowId:a,isValidConnection:c=L1},u,f,g,v){const S=r==="target",x=t?i.querySelector(`.${l}-flow__handle[data-id="${a}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:N,y:C}=Bt(e),A=i.elementFromPoint(N,C),m=A?.classList.contains(`${l}-flow__handle`)?A:x,w={handleDomNode:m,isValid:!1,connection:null,toHandle:null};if(m){const I=Sf(void 0,m),H=m.getAttribute("data-nodeid"),X=m.getAttribute("data-handleid"),B=m.classList.contains("connectable"),R=m.classList.contains("connectableend");if(!H||!I)return w;const V={source:S?H:o,sourceHandle:S?X:s,target:S?o:H,targetHandle:S?s:X};w.connection=V;const T=B&&R&&(n===Sn.Strict?S&&I==="source"||!S&&I==="target":H!==o||X!==s);w.isValid=T&&c(V,{nodes:f,edges:u,sourceNode:g(V.source),targetNode:g(V.target)}),w.toHandle=Ef(H,I,X,v,n,!0)}return w}function Sf(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function z1(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function V1(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function Ef(e,t,n,o,s,r=!1){var i,l,a;const c=o.get(e);if(!c)return null;const u=s===Sn.Strict?(i=c.handleBounds)==null?void 0:i[t]:[...((l=c.handleBounds)==null?void 0:l.source)??[],...((a=c.handleBounds)==null?void 0:a.target)??[]],f=(n?u?.find(g=>g.id===n):u?.[0])??null;return f&&r?{...f,...xo(c,f,f.position,!0)}:f}const tl={[pe.Left]:pe.Right,[pe.Right]:pe.Left,[pe.Top]:pe.Bottom,[pe.Bottom]:pe.Top},H1=["production","prod"];function bs(e,...t){Cf()&&console.warn(`[Vue Flow]: ${e}`,...t)}function Cf(){return!H1.includes("production")}function Cu(e,t,n,o,s){const r=t.querySelectorAll(`.vue-flow__handle.${e}`);return r?.length?Array.from(r).map(i=>{const l=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:s,position:i.getAttribute("data-handlepos"),x:(l.left-n.left)/o,y:(l.top-n.top)/o,...Vr(i)}}):null}function nl(e,t,n,o,s,r=!1,i){s.value=!1,e.selected?(r||e.selected&&t)&&(o([e]),ut(()=>{i.blur()})):n([e])}function Ke(e){return typeof U(e)<"u"}function U1(e,t,n,o){if(!e||!e.source||!e.target)return n(new qe(We.EDGE_INVALID,e?.id??"[ID UNKNOWN]")),!1;let s;return En(e)?s=e:s={...e,id:gf(e)},s=pf(s,void 0,o),_1(s,t)?!1:s}function j1(e,t,n,o,s){if(!t.source||!t.target)return s(new qe(We.EDGE_INVALID,e.id)),!1;if(!n)return s(new qe(We.EDGE_NOT_FOUND,e.id)),!1;const{id:r,...i}=e;return{...i,id:o?gf(t):r,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function Iu(e,t,n){const o={},s=[];for(let r=0;r<e.length;++r){const i=e[r];if(!Bn(i)){n(new qe(We.NODE_INVALID,i?.id)||`[ID UNKNOWN|INDEX ${r}]`);continue}const l=b1(i,t(i.id),i.parentNode);i.parentNode&&(o[i.parentNode]=!0),s[r]=l}for(const r of s){const i=t(r.parentNode)||s.find(l=>l.id===r.parentNode);r.parentNode&&!i&&n(new qe(We.NODE_MISSING_PARENT,r.id,r.parentNode)),(r.parentNode||o[r.id])&&(o[r.id]&&(r.isParent=!0),i&&(i.isParent=!0))}return s}function Nu(e,t,n,o,s,r){let i=s;const l=o.get(i)||new Map;o.set(i,l.set(n,t)),i=`${s}-${e}`;const a=o.get(i)||new Map;if(o.set(i,a.set(n,t)),r){i=`${s}-${e}-${r}`;const c=o.get(i)||new Map;o.set(i,c.set(n,t))}}function xi(e,t,n){e.clear();for(const o of n){const{source:s,target:r,sourceHandle:i=null,targetHandle:l=null}=o,a={edgeId:o.id,source:s,target:r,sourceHandle:i,targetHandle:l},c=`${s}-${i}--${r}-${l}`,u=`${r}-${l}--${s}-${i}`;Nu("source",a,u,e,s,i),Nu("target",a,c,e,r,l)}}function Tu(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function wi(e,t,n,o,s,r,i,l){const a=[];for(const c of e){const u=En(c)?c:U1(c,l,s,r);if(!u)continue;const f=n(u.source),g=n(u.target);if(!f||!g){s(new qe(We.EDGE_SOURCE_TARGET_MISSING,u.id,u.source,u.target));continue}if(!f){s(new qe(We.EDGE_SOURCE_MISSING,u.id,u.source));continue}if(!g){s(new qe(We.EDGE_TARGET_MISSING,u.id,u.target));continue}if(t&&!t(u,{edges:l,nodes:i,sourceNode:f,targetNode:g})){s(new qe(We.EDGE_INVALID,u.id));continue}const v=o(u.id);a.push({...pf(u,v,r),sourceNode:f,targetNode:g})}return a}const $u=Symbol("vueFlow"),If=Symbol("nodeId"),Nf=Symbol("nodeRef"),G1=Symbol("edgeId"),Y1=Symbol("edgeRef"),Ur=Symbol("slots");function Tf(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:s,nodeLookup:r,nodeExtent:i,nodeDragThreshold:l,viewport:a,autoPanOnNodeDrag:c,autoPanSpeed:u,nodesDraggable:f,panBy:g,findNode:v,multiSelectionActive:S,nodesSelectionActive:x,selectNodesOnDrag:N,removeSelectedElements:C,addSelectedNodes:A,updateNodePositions:m,emits:w}=Be(),{onStart:I,onDrag:H,onStop:X,onClick:B,el:R,disabled:V,id:z,selectable:T,dragHandle:Q}=e,M=Ft(!1);let W=[],L,O=null,P={x:void 0,y:void 0},d={x:0,y:0},h=null,J=!1,ne=!1,he=0,ve=!1;const le=X1(),se=({x:E,y:D})=>{P={x:E,y:D};let y=!1;if(W=W.map(b=>{const _={x:E-b.distance.x,y:D-b.distance.y},{computedPosition:$}=Al(b,n.value?Hr(_,o.value):_,w.error,i.value,b.parentNode?v(b.parentNode):void 0);return y=y||b.position.x!==$.x||b.position.y!==$.y,b.position=$,b}),ne=ne||y,!!y&&(m(W,!0,!0),M.value=!0,h)){const[b,_]=yi({id:z,dragItems:W,findNode:v});H({event:h,node:b,nodes:_})}},ce=()=>{if(!O)return;const[E,D]=wf(d,O,u.value);if(E!==0||D!==0){const y={x:(P.x??0)-E/a.value.zoom,y:(P.y??0)-D/a.value.zoom};g({x:E,y:D})&&se(y)}he=requestAnimationFrame(ce)},Ce=(E,D)=>{J=!0;const y=v(z);!N.value&&!S.value&&y&&(y.selected||C()),y&&xe(T)&&N.value&&nl(y,S.value,A,C,x,!1,D);const b=le(E.sourceEvent);if(P=b,W=T1(r.value,f.value,b,z),W.length){const[_,$]=yi({id:z,dragItems:W,findNode:v});I({event:E.sourceEvent,node:_,nodes:$})}},Ae=(E,D)=>{var y;E.sourceEvent.type==="touchmove"&&E.sourceEvent.touches.length>1||(ne=!1,l.value===0&&Ce(E,D),P=le(E.sourceEvent),O=((y=t.value)==null?void 0:y.getBoundingClientRect())||null,d=Bt(E.sourceEvent,O))},be=(E,D)=>{const y=le(E.sourceEvent);if(!ve&&J&&c.value&&(ve=!0,ce()),!J){const b=y.xSnapped-(P.x??0),_=y.ySnapped-(P.y??0);Math.sqrt(b*b+_*_)>l.value&&Ce(E,D)}(P.x!==y.xSnapped||P.y!==y.ySnapped)&&W.length&&J&&(h=E.sourceEvent,d=Bt(E.sourceEvent,O),se(y))},Me=E=>{let D=!1;if(!J&&!M.value&&!S.value){const y=E.sourceEvent,b=le(y),_=b.xSnapped-(P.x??0),$=b.ySnapped-(P.y??0),k=Math.sqrt(_*_+$*$);k!==0&&k<=l.value&&(B?.(y),D=!0)}if(W.length&&!D){ne&&(m(W,!1,!1),ne=!1);const[y,b]=yi({id:z,dragItems:W,findNode:v});X({event:E.sourceEvent,node:y,nodes:b})}W=[],M.value=!1,ve=!1,J=!1,P={x:void 0,y:void 0},cancelAnimationFrame(he)};return _e([()=>xe(V),R],([E,D],y,b)=>{if(D){const _=bt(D);E||(L=y0().on("start",$=>Ae($,D)).on("drag",$=>be($,D)).on("end",$=>Me($)).filter($=>{const k=$.target,K=xe(Q);return!$.button&&(!s.value||!wu(k,`.${s.value}`,D)&&(!K||wu(k,K,D)))}),_.call(L)),b(()=>{_.on(".drag",null),L&&(L.on("start",null),L.on("drag",null),L.on("end",null))})}}),M}function K1(){return{doubleClick:ae(),click:ae(),mouseEnter:ae(),mouseMove:ae(),mouseLeave:ae(),contextMenu:ae(),updateStart:ae(),update:ae(),updateEnd:ae()}}function W1(e,t){const n=K1();return n.doubleClick.on(o=>{var s,r;t.edgeDoubleClick(o),(r=(s=e.events)==null?void 0:s.doubleClick)==null||r.call(s,o)}),n.click.on(o=>{var s,r;t.edgeClick(o),(r=(s=e.events)==null?void 0:s.click)==null||r.call(s,o)}),n.mouseEnter.on(o=>{var s,r;t.edgeMouseEnter(o),(r=(s=e.events)==null?void 0:s.mouseEnter)==null||r.call(s,o)}),n.mouseMove.on(o=>{var s,r;t.edgeMouseMove(o),(r=(s=e.events)==null?void 0:s.mouseMove)==null||r.call(s,o)}),n.mouseLeave.on(o=>{var s,r;t.edgeMouseLeave(o),(r=(s=e.events)==null?void 0:s.mouseLeave)==null||r.call(s,o)}),n.contextMenu.on(o=>{var s,r;t.edgeContextMenu(o),(r=(s=e.events)==null?void 0:s.contextMenu)==null||r.call(s,o)}),n.updateStart.on(o=>{var s,r;t.edgeUpdateStart(o),(r=(s=e.events)==null?void 0:s.updateStart)==null||r.call(s,o)}),n.update.on(o=>{var s,r;t.edgeUpdate(o),(r=(s=e.events)==null?void 0:s.update)==null||r.call(s,o)}),n.updateEnd.on(o=>{var s,r;t.edgeUpdateEnd(o),(r=(s=e.events)==null?void 0:s.updateEnd)==null||r.call(s,o)}),Object.entries(n).reduce((o,[s,r])=>(o.emit[s]=r.trigger,o.on[s]=r.on,o),{emit:{},on:{}})}function X1(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:o}=Be();return s=>{var r;const i=((r=o.value)==null?void 0:r.getBoundingClientRect())??{left:0,top:0},l=D1(s)?s.sourceEvent:s,{x:a,y:c}=Bt(l,i),u=us({x:a,y:c},e.value),{x:f,y:g}=n.value?Hr(u,t.value):u;return{xSnapped:f,ySnapped:g,...u}}}function ks(){return!0}function $f({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:s,onEdgeUpdate:r,onEdgeUpdateEnd:i}){const{id:l,vueFlowRef:a,connectionMode:c,connectionRadius:u,connectOnClick:f,connectionClickStartHandle:g,nodesConnectable:v,autoPanOnConnect:S,autoPanSpeed:x,findNode:N,panBy:C,startConnection:A,updateConnection:m,endConnection:w,emits:I,viewport:H,edges:X,nodes:B,isValidConnection:R,nodeLookup:V}=Be();let z=null,T=!1,Q=null;function M(L){var O;const P=xe(n)==="target",d=kl(L),h=fu(L.target),J=L.currentTarget;if(J&&(d&&L.button===0||!d)){let ne=function(Z){y=Bt(Z,Me),se=F1(us(y,H.value,!1,[1,1]),u.value,V.value,$),b||(_(),b=!0);const q=Eu(Z,{handle:se,connectionMode:c.value,fromNodeId:xe(t),fromHandleId:xe(e),fromType:P?"target":"source",isValidConnection:le,doc:h,lib:"vue",flowId:l,nodeLookup:V.value},X.value,B.value,N,V.value);Q=q.handleDomNode,z=q.connection,T=V1(!!se,q.isValid);const ee={...j,isValid:T,to:q.toHandle&&T?as({x:q.toHandle.x,y:q.toHandle.y},H.value):y,toHandle:q.toHandle,toPosition:T&&q.toHandle?q.toHandle.position:tl[$.position],toNode:q.toHandle?V.value.get(q.toHandle.nodeId):null};if(T&&se&&j?.toHandle&&ee.toHandle&&j.toHandle.type===ee.toHandle.type&&j.toHandle.nodeId===ee.toHandle.nodeId&&j.toHandle.id===ee.toHandle.id&&j.to.x===ee.to.x&&j.to.y===ee.to.y)return;const re=se??q.toHandle;if(m(re&&T?as({x:re.x,y:re.y},H.value):y,re,z1(!!re,T)),j=ee,!se&&!T&&!Q)return bi(D);z&&z.source!==z.target&&Q&&(bi(D),D=Q,Q.classList.add("connecting","vue-flow__handle-connecting"),Q.classList.toggle("valid",!!T),Q.classList.toggle("vue-flow__handle-valid",!!T))},he=function(Z){"touches"in Z&&Z.touches.length>0||((se||Q)&&z&&T&&(r?r(Z,z):I.connect(z)),I.connectEnd(Z),s&&i?.(Z),bi(D),cancelAnimationFrame(ce),w(Z),b=!1,T=!1,z=null,Q=null,h.removeEventListener("mousemove",ne),h.removeEventListener("mouseup",he),h.removeEventListener("touchmove",ne),h.removeEventListener("touchend",he))};const ve=N(xe(t));let le=xe(o)||R.value||ks;!le&&ve&&(le=(P?ve.isValidSourcePos:ve.isValidTargetPos)||ks);let se,ce=0;const{x:Ce,y:Ae}=Bt(L),be=Sf(xe(s),J),Me=(O=a.value)==null?void 0:O.getBoundingClientRect();if(!Me||!be)return;const E=Ef(xe(t),be,xe(e),V.value,c.value);if(!E)return;let D,y=Bt(L,Me),b=!1;const _=()=>{if(!S.value)return;const[Z,q]=wf(y,Me,x.value);C({x:Z,y:q}),ce=requestAnimationFrame(_)},$={...E,nodeId:xe(t),type:be,position:E.position},k=V.value.get(xe(t)),Y={inProgress:!0,isValid:null,from:xo(k,$,pe.Left,!0),fromHandle:$,fromPosition:$.position,fromNode:k,to:y,toHandle:null,toPosition:tl[$.position],toNode:null};A({nodeId:xe(t),id:xe(e),type:be,position:J?.getAttribute("data-handlepos")||pe.Top,...y},{x:Ce-Me.left,y:Ae-Me.top}),I.connectStart({event:L,nodeId:xe(t),handleId:xe(e),handleType:be});let j=Y;h.addEventListener("mousemove",ne),h.addEventListener("mouseup",he),h.addEventListener("touchmove",ne),h.addEventListener("touchend",he)}}function W(L){var O,P;if(!f.value)return;const d=xe(n)==="target";if(!g.value){I.clickConnectStart({event:L,nodeId:xe(t),handleId:xe(e)}),A({nodeId:xe(t),type:xe(n),id:xe(e),position:pe.Top,...Bt(L)},void 0,!0);return}let h=xe(o)||R.value||ks;const J=N(xe(t));if(!h&&J&&(h=(d?J.isValidSourcePos:J.isValidTargetPos)||ks),J&&(typeof J.connectable>"u"?v.value:J.connectable)===!1)return;const ne=fu(L.target),he=Eu(L,{handle:{nodeId:xe(t),id:xe(e),type:xe(n),position:pe.Top,...Bt(L)},connectionMode:c.value,fromNodeId:g.value.nodeId,fromHandleId:g.value.id??null,fromType:g.value.type,isValidConnection:h,doc:ne,lib:"vue",flowId:l,nodeLookup:V.value},X.value,B.value,N,V.value),ve=((O=he.connection)==null?void 0:O.source)===((P=he.connection)==null?void 0:P.target);he.isValid&&he.connection&&!ve&&I.connect(he.connection),I.clickConnectEnd(L),w(L,!0)}return{handlePointerDown:M,handleClick:W}}function q1(){return _t(If,"")}function Mf(e){const t=e??q1()??"",n=_t(Nf,ye(null)),{findNode:o,edges:s,emits:r}=Be(),i=o(t);return i||r.error(new qe(We.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:i,parentNode:ie(()=>o(i.parentNode)),connectedEdges:ie(()=>bf([i],s.value))}}function Z1(){return{doubleClick:ae(),click:ae(),mouseEnter:ae(),mouseMove:ae(),mouseLeave:ae(),contextMenu:ae(),dragStart:ae(),drag:ae(),dragStop:ae()}}function J1(e,t){const n=Z1();return n.doubleClick.on(o=>{var s,r;t.nodeDoubleClick(o),(r=(s=e.events)==null?void 0:s.doubleClick)==null||r.call(s,o)}),n.click.on(o=>{var s,r;t.nodeClick(o),(r=(s=e.events)==null?void 0:s.click)==null||r.call(s,o)}),n.mouseEnter.on(o=>{var s,r;t.nodeMouseEnter(o),(r=(s=e.events)==null?void 0:s.mouseEnter)==null||r.call(s,o)}),n.mouseMove.on(o=>{var s,r;t.nodeMouseMove(o),(r=(s=e.events)==null?void 0:s.mouseMove)==null||r.call(s,o)}),n.mouseLeave.on(o=>{var s,r;t.nodeMouseLeave(o),(r=(s=e.events)==null?void 0:s.mouseLeave)==null||r.call(s,o)}),n.contextMenu.on(o=>{var s,r;t.nodeContextMenu(o),(r=(s=e.events)==null?void 0:s.contextMenu)==null||r.call(s,o)}),n.dragStart.on(o=>{var s,r;t.nodeDragStart(o),(r=(s=e.events)==null?void 0:s.dragStart)==null||r.call(s,o)}),n.drag.on(o=>{var s,r;t.nodeDrag(o),(r=(s=e.events)==null?void 0:s.drag)==null||r.call(s,o)}),n.dragStop.on(o=>{var s,r;t.nodeDragStop(o),(r=(s=e.events)==null?void 0:s.dragStop)==null||r.call(s,o)}),Object.entries(n).reduce((o,[s,r])=>(o.emit[s]=r.trigger,o.on[s]=r.on,o),{emit:{},on:{}})}function Af(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:s,snapToGrid:r,nodesDraggable:i,emits:l}=Be();return(a,c=!1)=>{const u=r.value?s.value[0]:5,f=r.value?s.value[1]:5,g=c?4:1,v=a.x*u*g,S=a.y*f*g,x=[];for(const N of e.value)if(N.draggable||i&&typeof N.draggable>"u"){const C={x:N.computedPosition.x+v,y:N.computedPosition.y+S},{position:A}=Al(N,C,l.error,t.value,N.parentNode?o(N.parentNode):void 0);x.push({id:N.id,position:A,from:N.position,distance:{x:a.x,y:a.y},dimensions:N.dimensions})}n(x,!0,!1)}}const Os=.1,Q1=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function fn(){return bs("Viewport not initialized yet."),Promise.resolve(!1)}const ex={zoomIn:fn,zoomOut:fn,zoomTo:fn,fitView:fn,setCenter:fn,fitBounds:fn,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:fn,setTransform:fn,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function tx(e){function t(o,s){return new Promise(r=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(s?.interpolate==="linear"?Ko:js).scaleBy(_i(e.d3Selection,s?.duration,s?.ease,()=>{r(!0)}),o):r(!1)})}function n(o,s,r,i){return new Promise(l=>{var a;const{x:c,y:u}=ff({x:-o,y:-s},e.translateExtent),f=bo.translate(-c,-u).scale(r);e.d3Selection&&e.d3Zoom?(a=e.d3Zoom)==null||a.interpolate(i?.interpolate==="linear"?Ko:js).transform(_i(e.d3Selection,i?.duration,i?.ease,()=>{l(!0)}),f):l(!1)})}return ie(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:s=>t(1.2,s),zoomOut:s=>t(1/1.2,s),zoomTo:(s,r)=>new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(r?.interpolate==="linear"?Ko:js).scaleTo(_i(e.d3Selection,r?.duration,r?.ease,()=>{i(!0)}),s):i(!1)}),setViewport:(s,r)=>n(s.x,s.y,s.zoom,r),setTransform:(s,r)=>n(s.x,s.y,s.zoom,r),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(s={padding:Os,includeHiddenNodes:!1,duration:0})=>{var r,i;const l=[];for(const g of e.nodes)g.dimensions.width&&g.dimensions.height&&(s?.includeHiddenNodes||!g.hidden)&&(!((r=s.nodes)!=null&&r.length)||(i=s.nodes)!=null&&i.length&&s.nodes.includes(g.id))&&l.push(g);if(!l.length)return Promise.resolve(!1);const a=vf(l),{x:c,y:u,zoom:f}=pu(a,e.dimensions.width,e.dimensions.height,s.minZoom??e.minZoom,s.maxZoom??e.maxZoom,s.padding??Os);return n(c,u,f,s)},setCenter:(s,r,i)=>{const l=typeof i?.zoom<"u"?i.zoom:e.maxZoom,a=e.dimensions.width/2-s*l,c=e.dimensions.height/2-r*l;return n(a,c,l,i)},fitBounds:(s,r={padding:Os})=>{const{x:i,y:l,zoom:a}=pu(s,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,r.padding??Os);return n(i,l,a,r)},project:s=>us(s,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:s=>{if(e.vueFlowRef){const{x:r,y:i}=e.vueFlowRef.getBoundingClientRect(),l={x:s.x-r,y:s.y-i};return us(l,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:s=>{if(e.vueFlowRef){const{x:r,y:i}=e.vueFlowRef.getBoundingClientRect(),l={x:s.x+r,y:s.y+i};return as(l,e.viewport)}return{x:0,y:0}}}:ex)}function _i(e,t=0,n=Q1,o=()=>{}){const s=typeof t=="number"&&t>0;return s||o(),s?e.transition().duration(t).ease(n).on("end",o):e}function nx(e,t,n){const o=_r(!0);return o.run(()=>{const s=()=>{o.run(()=>{let x,N,C=!!(n.nodes.value.length||n.edges.value.length);x=Zn([e.modelValue,()=>{var A,m;return(m=(A=e.modelValue)==null?void 0:A.value)==null?void 0:m.length}],([A])=>{A&&Array.isArray(A)&&(N?.pause(),n.setElements(A),!N&&!C&&A.length?C=!0:N?.resume())}),N=Zn([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([A,m])=>{var w;(w=e.modelValue)!=null&&w.value&&Array.isArray(e.modelValue.value)&&(x?.pause(),e.modelValue.value=[...A,...m],ut(()=>{x?.resume()}))},{immediate:C}),ro(()=>{x?.stop(),N?.stop()})})},r=()=>{o.run(()=>{let x,N,C=!!n.nodes.value.length;x=Zn([e.nodes,()=>{var A,m;return(m=(A=e.nodes)==null?void 0:A.value)==null?void 0:m.length}],([A])=>{A&&Array.isArray(A)&&(N?.pause(),n.setNodes(A),!N&&!C&&A.length?C=!0:N?.resume())}),N=Zn([n.nodes,()=>n.nodes.value.length],([A])=>{var m;(m=e.nodes)!=null&&m.value&&Array.isArray(e.nodes.value)&&(x?.pause(),e.nodes.value=[...A],ut(()=>{x?.resume()}))},{immediate:C}),ro(()=>{x?.stop(),N?.stop()})})},i=()=>{o.run(()=>{let x,N,C=!!n.edges.value.length;x=Zn([e.edges,()=>{var A,m;return(m=(A=e.edges)==null?void 0:A.value)==null?void 0:m.length}],([A])=>{A&&Array.isArray(A)&&(N?.pause(),n.setEdges(A),!N&&!C&&A.length?C=!0:N?.resume())}),N=Zn([n.edges,()=>n.edges.value.length],([A])=>{var m;(m=e.edges)!=null&&m.value&&Array.isArray(e.edges.value)&&(x?.pause(),e.edges.value=[...A],ut(()=>{x?.resume()}))},{immediate:C}),ro(()=>{x?.stop(),N?.stop()})})},l=()=>{o.run(()=>{_e(()=>t.maxZoom,()=>{t.maxZoom&&Ke(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},a=()=>{o.run(()=>{_e(()=>t.minZoom,()=>{t.minZoom&&Ke(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},c=()=>{o.run(()=>{_e(()=>t.translateExtent,()=>{t.translateExtent&&Ke(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},u=()=>{o.run(()=>{_e(()=>t.nodeExtent,()=>{t.nodeExtent&&Ke(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},f=()=>{o.run(()=>{_e(()=>t.applyDefault,()=>{Ke(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},g=()=>{o.run(()=>{const x=async N=>{let C=N;typeof t.autoConnect=="function"&&(C=await t.autoConnect(N)),C!==!1&&n.addEdges([C])};_e(()=>t.autoConnect,()=>{Ke(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),_e(n.autoConnect,(N,C,A)=>{N?n.onConnect(x):n.hooks.value.connect.off(x),A(()=>{n.hooks.value.connect.off(x)})},{immediate:!0})})},v=()=>{const x=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const N of Object.keys(t)){const C=N;if(!x.includes(C)){const A=Pe(()=>t[C]),m=n[C];Re(m)&&o.run(()=>{_e(A,w=>{Ke(w)&&(m.value=w)},{immediate:!0})})}}};s(),r(),i(),a(),l(),c(),u(),f(),g(),v()}),()=>o.stop()}function ox(){return{edgesChange:ae(),nodesChange:ae(),nodeDoubleClick:ae(),nodeClick:ae(),nodeMouseEnter:ae(),nodeMouseMove:ae(),nodeMouseLeave:ae(),nodeContextMenu:ae(),nodeDragStart:ae(),nodeDrag:ae(),nodeDragStop:ae(),nodesInitialized:ae(),miniMapNodeClick:ae(),miniMapNodeDoubleClick:ae(),miniMapNodeMouseEnter:ae(),miniMapNodeMouseMove:ae(),miniMapNodeMouseLeave:ae(),connect:ae(),connectStart:ae(),connectEnd:ae(),clickConnectStart:ae(),clickConnectEnd:ae(),paneReady:ae(),init:ae(),move:ae(),moveStart:ae(),moveEnd:ae(),selectionDragStart:ae(),selectionDrag:ae(),selectionDragStop:ae(),selectionContextMenu:ae(),selectionStart:ae(),selectionEnd:ae(),viewportChangeStart:ae(),viewportChange:ae(),viewportChangeEnd:ae(),paneScroll:ae(),paneClick:ae(),paneContextMenu:ae(),paneMouseEnter:ae(),paneMouseMove:ae(),paneMouseLeave:ae(),edgeContextMenu:ae(),edgeMouseEnter:ae(),edgeMouseMove:ae(),edgeMouseLeave:ae(),edgeDoubleClick:ae(),edgeClick:ae(),edgeUpdateStart:ae(),edgeUpdate:ae(),edgeUpdateEnd:ae(),updateNodeInternals:ae(),error:ae(e=>bs(e.message))}}function sx(e,t){const n=Nt();Ec(()=>{for(const[s,r]of Object.entries(t.value)){const i=l=>{e(s,l)};r.setEmitter(i),os(r.removeEmitter),r.setHasEmitListeners(()=>o(s)),os(r.removeHasEmitListeners)}});function o(s){var r;const i=rx(s);return!!((r=n?.vnode.props)==null?void 0:r[i])}}function rx(e){const[t,...n]=e.split(":");return`on${t.replace(/(?:^|-)(\w)/g,(s,r)=>r.toUpperCase())}${n.length?`:${n.join(":")}`:""}`}function kf(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Ml.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Wo.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:kn.Bezier,style:{}},connectionMode:Sn.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:hr()?"Meta":"Control",zoomActivationKeyCode:hr()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:ox(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const ix=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function lx(e,t,n){const o=tx(e),s=y=>{const b=y??[];e.hooks.updateNodeInternals.trigger(b)},r=y=>w1(y,e.nodes,e.edges),i=y=>x1(y,e.nodes,e.edges),l=y=>bf(y,e.edges),a=({id:y,type:b,nodeId:_})=>{var $;const k=y?`-${b}-${y}`:`-${b}`;return Array.from((($=e.connectionLookup.get(`${_}${k}`))==null?void 0:$.values())??[])},c=y=>{if(y)return t.value.get(y)},u=y=>{if(y)return n.value.get(y)},f=(y,b,_)=>{var $,k;const K=[];for(const Y of y){const j={id:Y.id,type:"position",dragging:_,from:Y.from};if(b&&(j.position=Y.position,Y.parentNode)){const Z=c(Y.parentNode);j.position={x:j.position.x-((($=Z?.computedPosition)==null?void 0:$.x)??0),y:j.position.y-(((k=Z?.computedPosition)==null?void 0:k.y)??0)}}K.push(j)}K?.length&&e.hooks.nodesChange.trigger(K)},g=y=>{if(!e.vueFlowRef)return;const b=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!b)return;const _=window.getComputedStyle(b),{m22:$}=new window.DOMMatrixReadOnly(_.transform),k=[];for(const K of y){const Y=K,j=c(Y.id);if(j){const Z=Vr(Y.nodeElement);if(!!(Z.width&&Z.height&&(j.dimensions.width!==Z.width||j.dimensions.height!==Z.height||Y.forceUpdate))){const ee=Y.nodeElement.getBoundingClientRect();j.dimensions=Z,j.handleBounds.source=Cu("source",Y.nodeElement,ee,$,j.id),j.handleBounds.target=Cu("target",Y.nodeElement,ee,$,j.id),k.push({id:j.id,type:"dimensions",dimensions:Z})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),k.length&&e.hooks.nodesChange.trigger(k)},v=(y,b)=>{const _=new Set,$=new Set;for(const Y of y)Bn(Y)?_.add(Y.id):En(Y)&&$.add(Y.id);const k=xn(t.value,_,!0),K=xn(n.value,$);if(e.multiSelectionActive){for(const Y of _)k.push(mn(Y,b));for(const Y of $)K.push(mn(Y,b))}k.length&&e.hooks.nodesChange.trigger(k),K.length&&e.hooks.edgesChange.trigger(K)},S=y=>{if(e.multiSelectionActive){const b=y.map(_=>mn(_.id,!0));e.hooks.nodesChange.trigger(b);return}e.hooks.nodesChange.trigger(xn(t.value,new Set(y.map(b=>b.id)),!0)),e.hooks.edgesChange.trigger(xn(n.value))},x=y=>{if(e.multiSelectionActive){const b=y.map(_=>mn(_.id,!0));e.hooks.edgesChange.trigger(b);return}e.hooks.edgesChange.trigger(xn(n.value,new Set(y.map(b=>b.id)))),e.hooks.nodesChange.trigger(xn(t.value,new Set,!0))},N=y=>{v(y,!0)},C=y=>{const _=(y||e.nodes).map($=>($.selected=!1,mn($.id,!1)));e.hooks.nodesChange.trigger(_)},A=y=>{const _=(y||e.edges).map($=>($.selected=!1,mn($.id,!1)));e.hooks.edgesChange.trigger(_)},m=y=>{if(!y||!y.length)return v([],!1);const b=y.reduce((_,$)=>{const k=mn($.id,!1);return Bn($)?_.nodes.push(k):_.edges.push(k),_},{nodes:[],edges:[]});b.nodes.length&&e.hooks.nodesChange.trigger(b.nodes),b.edges.length&&e.hooks.edgesChange.trigger(b.edges)},w=y=>{var b;(b=e.d3Zoom)==null||b.scaleExtent([y,e.maxZoom]),e.minZoom=y},I=y=>{var b;(b=e.d3Zoom)==null||b.scaleExtent([e.minZoom,y]),e.maxZoom=y},H=y=>{var b;(b=e.d3Zoom)==null||b.translateExtent(y),e.translateExtent=y},X=y=>{e.nodeExtent=y,s()},B=y=>{var b;(b=e.d3Zoom)==null||b.clickDistance(y)},R=y=>{e.nodesDraggable=y,e.nodesConnectable=y,e.elementsSelectable=y},V=y=>{const b=y instanceof Function?y(e.nodes):y;!e.initialized&&!b.length||(e.nodes=Iu(b,c,e.hooks.error.trigger))},z=y=>{const b=y instanceof Function?y(e.edges):y;if(!e.initialized&&!b.length)return;const _=wi(b,e.isValidConnection,c,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);xi(e.connectionLookup,n.value,_),e.edges=_},T=y=>{const b=y instanceof Function?y([...e.nodes,...e.edges]):y;!e.initialized&&!b.length||(V(b.filter(Bn)),z(b.filter(En)))},Q=y=>{let b=y instanceof Function?y(e.nodes):y;b=Array.isArray(b)?b:[b];const _=Iu(b,c,e.hooks.error.trigger),$=[];for(const k of _)$.push(vu(k));$.length&&e.hooks.nodesChange.trigger($)},M=y=>{let b=y instanceof Function?y(e.edges):y;b=Array.isArray(b)?b:[b];const _=wi(b,e.isValidConnection,c,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),$=[];for(const k of _)$.push(vu(k));$.length&&e.hooks.edgesChange.trigger($)},W=(y,b=!0,_=!1)=>{const $=y instanceof Function?y(e.nodes):y,k=Array.isArray($)?$:[$],K=[],Y=[];function j(q){const ee=l(q);for(const re of ee)(!Ke(re.deletable)||re.deletable)&&Y.push(bu(re.id,re.source,re.target,re.sourceHandle,re.targetHandle))}function Z(q){const ee=[];for(const re of e.nodes)re.parentNode===q&&ee.push(re);if(ee.length){for(const re of ee)K.push(yu(re.id));b&&j(ee);for(const re of ee)Z(re.id)}}for(const q of k){const ee=typeof q=="string"?c(q):q;ee&&(Ke(ee.deletable)&&!ee.deletable||(K.push(yu(ee.id)),b&&j([ee]),_&&Z(ee.id)))}Y.length&&e.hooks.edgesChange.trigger(Y),K.length&&e.hooks.nodesChange.trigger(K)},L=y=>{const b=y instanceof Function?y(e.edges):y,_=Array.isArray(b)?b:[b],$=[];for(const k of _){const K=typeof k=="string"?u(k):k;K&&(Ke(K.deletable)&&!K.deletable||$.push(bu(typeof k=="string"?k:k.id,K.source,K.target,K.sourceHandle,K.targetHandle)))}e.hooks.edgesChange.trigger($)},O=(y,b,_=!0)=>{const $=u(y.id);if(!$)return!1;const k=e.edges.indexOf($),K=j1(y,b,$,_,e.hooks.error.trigger);if(K){const[Y]=wi([K],e.isValidConnection,c,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((j,Z)=>Z===k?Y:j),xi(e.connectionLookup,n.value,[Y]),Y}return!1},P=(y,b,_={replace:!1})=>{const $=u(y);if(!$)return;const k=typeof b=="function"?b($):b;$.data=_.replace?k:{...$.data,...k}},d=y=>mu(y,e.nodes),h=y=>{const b=mu(y,e.edges);return xi(e.connectionLookup,n.value,b),b},J=(y,b,_={replace:!1})=>{const $=c(y);if(!$)return;const k=typeof b=="function"?b($):b;_.replace?e.nodes.splice(e.nodes.indexOf($),1,k):Object.assign($,k)},ne=(y,b,_={replace:!1})=>{const $=c(y);if(!$)return;const k=typeof b=="function"?b($):b;$.data=_.replace?k:{...$.data,...k}},he=(y,b,_=!1)=>{_?e.connectionClickStartHandle=y:e.connectionStartHandle=y,e.connectionEndHandle=null,e.connectionStatus=null,b&&(e.connectionPosition=b)},ve=(y,b=null,_=null)=>{e.connectionStartHandle&&(e.connectionPosition=y,e.connectionEndHandle=b,e.connectionStatus=_)},le=(y,b)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,b?e.connectionClickStartHandle=null:e.connectionStartHandle=null},se=y=>{const b=y1(y),_=b?null:Ro(y)?y:c(y.id);return!b&&!_?[null,null,b]:[b?y:fr(_),_,b]},ce=(y,b=!0,_=e.nodes)=>{const[$,k,K]=se(y);if(!$)return[];const Y=[];for(const j of _||e.nodes){if(!K&&(j.id===k.id||!j.computedPosition))continue;const Z=fr(j),q=pr(Z,$);(b&&q>0||q>=Z.width*Z.height||q>=Number($.width)*Number($.height))&&Y.push(j)}return Y},Ce=(y,b,_=!0)=>{const[$]=se(y);if(!$)return!1;const k=pr($,b);return _&&k>0||k>=Number($.width)*Number($.height)},Ae=y=>{const{viewport:b,dimensions:_,d3Zoom:$,d3Selection:k,translateExtent:K}=e;if(!$||!k||!y.x&&!y.y)return!1;const Y=bo.translate(b.x+y.x,b.y+y.y).scale(b.zoom),j=[[0,0],[_.width,_.height]],Z=$.constrain()(Y,j,K),q=e.viewport.x!==Z.x||e.viewport.y!==Z.y||e.viewport.zoom!==Z.k;return $.transform(k,Z),q},be=y=>{const b=y instanceof Function?y(e):y,_=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Ke(b.defaultEdgeOptions)&&(e.defaultEdgeOptions=b.defaultEdgeOptions);const $=b.modelValue||b.nodes||b.edges?[]:void 0;$&&(b.modelValue&&$.push(...b.modelValue),b.nodes&&$.push(...b.nodes),b.edges&&$.push(...b.edges),T($));const k=()=>{Ke(b.maxZoom)&&I(b.maxZoom),Ke(b.minZoom)&&w(b.minZoom),Ke(b.translateExtent)&&H(b.translateExtent)};for(const K of Object.keys(b)){const Y=K,j=b[Y];![...ix,..._].includes(Y)&&Ke(j)&&(e[Y]=j)}Gi(()=>e.d3Zoom).not.toBeNull().then(k),e.initialized||(e.initialized=!0)};return{updateNodePositions:f,updateNodeDimensions:g,setElements:T,setNodes:V,setEdges:z,addNodes:Q,addEdges:M,removeNodes:W,removeEdges:L,findNode:c,findEdge:u,updateEdge:O,updateEdgeData:P,updateNode:J,updateNodeData:ne,applyEdgeChanges:h,applyNodeChanges:d,addSelectedElements:N,addSelectedNodes:S,addSelectedEdges:x,setMinZoom:w,setMaxZoom:I,setTranslateExtent:H,setNodeExtent:X,setPaneClickDistance:B,removeSelectedElements:m,removeSelectedNodes:C,removeSelectedEdges:A,startConnection:he,updateConnection:ve,endConnection:le,setInteractive:R,setState:be,getIntersectingNodes:ce,getIncomers:r,getOutgoers:i,getConnectedEdges:l,getHandleConnections:a,isNodeIntersecting:Ce,panBy:Ae,fitView:y=>o.value.fitView(y),zoomIn:y=>o.value.zoomIn(y),zoomOut:y=>o.value.zoomOut(y),zoomTo:(y,b)=>o.value.zoomTo(y,b),setViewport:(y,b)=>o.value.setViewport(y,b),setTransform:(y,b)=>o.value.setTransform(y,b),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(y,b,_)=>o.value.setCenter(y,b,_),fitBounds:(y,b)=>o.value.fitBounds(y,b),project:y=>o.value.project(y),screenToFlowCoordinate:y=>o.value.screenToFlowCoordinate(y),flowToScreenCoordinate:y=>o.value.flowToScreenCoordinate(y),toObject:()=>{const y=[],b=[];for(const _ of e.nodes){const{computedPosition:$,handleBounds:k,selected:K,dimensions:Y,isParent:j,resizing:Z,dragging:q,events:ee,...re}=_;y.push(re)}for(const _ of e.edges){const{selected:$,sourceNode:k,targetNode:K,events:Y,...j}=_;b.push(j)}return JSON.parse(JSON.stringify({nodes:y,edges:b,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:y=>new Promise(b=>{const{nodes:_,edges:$,position:k,zoom:K,viewport:Y}=y;_&&V(_),$&&z($);const[j,Z]=Y?.x&&Y?.y?[Y.x,Y.y]:k??[null,null];if(j&&Z){const q=Y?.zoom||K||e.viewport.zoom;return Gi(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:j,y:Z,zoom:q}).then(()=>{b(!0)})})}else b(!0)}),updateNodeInternals:s,viewportHelper:o,$reset:()=>{const y=kf();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const b=bo.translate(y.defaultViewport.x??0,y.defaultViewport.y??0).scale(Kn(y.defaultViewport.zoom??1,y.minZoom,y.maxZoom)),_=e.viewportRef.getBoundingClientRect(),$=[[0,0],[_.width,_.height]],k=e.d3Zoom.constrain()(b,$,y.translateExtent);e.d3Zoom.transform(e.d3Selection,k)}be(y)},$destroy:()=>{}}}const ax=["data-id","data-handleid","data-nodeid","data-handlepos"],ux={name:"Handle",compatConfig:{MODE:3}},wo=He({...ux,props:{id:{default:null},type:{},position:{default:()=>pe.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=eh(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Pe(()=>n.type??"source"),s=Pe(()=>n.isValidConnection??null),{id:r,connectionStartHandle:i,connectionClickStartHandle:l,connectionEndHandle:a,vueFlowRef:c,nodesConnectable:u,noDragClassName:f,noPanClassName:g}=Be(),{id:v,node:S,nodeEl:x,connectedEdges:N}=Mf(),C=ye(),A=Pe(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),m=Pe(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),w=Pe(()=>{var z,T,Q,M,W,L;return((z=i.value)==null?void 0:z.nodeId)===v&&((T=i.value)==null?void 0:T.id)===e.id&&((Q=i.value)==null?void 0:Q.type)===o.value||((M=a.value)==null?void 0:M.nodeId)===v&&((W=a.value)==null?void 0:W.id)===e.id&&((L=a.value)==null?void 0:L.type)===o.value}),I=Pe(()=>{var z,T,Q;return((z=l.value)==null?void 0:z.nodeId)===v&&((T=l.value)==null?void 0:T.id)===e.id&&((Q=l.value)==null?void 0:Q.type)===o.value}),{handlePointerDown:H,handleClick:X}=$f({nodeId:v,handleId:e.id,isValidConnection:s,type:o}),B=ie(()=>typeof e.connectable=="string"&&e.connectable==="single"?!N.value.some(z=>{const T=z[`${o.value}Handle`];return z[o.value]!==v?!1:T?T===e.id:!0}):typeof e.connectable=="number"?N.value.filter(z=>{const T=z[`${o.value}Handle`];return z[o.value]!==v?!1:T?T===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(S,N.value):Ke(e.connectable)?e.connectable:u.value);ct(()=>{var z;if(!S.dimensions.width||!S.dimensions.height)return;const T=(z=S.handleBounds[o.value])==null?void 0:z.find(d=>d.id===e.id);if(!c.value||T)return;const Q=c.value.querySelector(".vue-flow__transformationpane");if(!x.value||!C.value||!Q||!e.id)return;const M=x.value.getBoundingClientRect(),W=C.value.getBoundingClientRect(),L=window.getComputedStyle(Q),{m22:O}=new window.DOMMatrixReadOnly(L.transform),P={id:e.id,position:e.position,x:(W.left-M.left)/O,y:(W.top-M.top)/O,type:o.value,nodeId:v,...Vr(C.value)};S.handleBounds[o.value]=[...S.handleBounds[o.value]??[],P]});function R(z){const T=kl(z);B.value&&A.value&&(T&&z.button===0||!T)&&H(z)}function V(z){!v||!l.value&&!A.value||B.value&&X(z)}return t({handleClick:X,handlePointerDown:H,onClick:V,onPointerDown:R}),(z,T)=>(F(),G("div",{ref_key:"handle",ref:C,"data-id":`${U(r)}-${U(v)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":U(v),"data-handlepos":z.position,class:ge(["vue-flow__handle",[`vue-flow__handle-${z.position}`,`vue-flow__handle-${e.id}`,U(f),U(g),o.value,{connectable:B.value,connecting:I.value,connectablestart:A.value,connectableend:m.value,connectionindicator:B.value&&(A.value&&!w.value||m.value&&w.value)}]]),onMousedown:R,onTouchstartPassive:R,onClick:V},[Ue(z.$slots,"default",{id:z.id})],42,ax))}}),jr=function({sourcePosition:e=pe.Bottom,targetPosition:t=pe.Top,label:n,connectable:o=!0,isValidTargetPos:s,isValidSourcePos:r,data:i}){const l=i.label??n;return[$e(wo,{type:"target",position:t,connectable:o,isValidConnection:s}),typeof l!="string"&&l?$e(l):$e(ue,[l]),$e(wo,{type:"source",position:e,connectable:o,isValidConnection:r})]};jr.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];jr.inheritAttrs=!1;jr.compatConfig={MODE:3};const cx=jr,Gr=function({targetPosition:e=pe.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:s}){const r=s.label??t;return[$e(wo,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof r!="string"&&r?$e(r):$e(ue,[r])]};Gr.props=["targetPosition","label","isValidTargetPos","connectable","data"];Gr.inheritAttrs=!1;Gr.compatConfig={MODE:3};const dx=Gr,Yr=function({sourcePosition:e=pe.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:s}){const r=s.label??t;return[typeof r!="string"&&r?$e(r):$e(ue,[r]),$e(wo,{type:"source",position:e,connectable:n,isValidConnection:o})]};Yr.props=["sourcePosition","label","isValidSourcePos","connectable","data"];Yr.inheritAttrs=!1;Yr.compatConfig={MODE:3};const fx=Yr,px=["transform"],hx=["width","height","x","y","rx","ry"],gx=["y"],mx={name:"EdgeText",compatConfig:{MODE:3}},vx=He({...mx,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=ye({x:0,y:0,width:0,height:0}),n=ye(null),o=ie(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);ct(s),_e([()=>e.x,()=>e.y,n,()=>e.label],s);function s(){if(!n.value)return;const r=n.value.getBBox();(r.width!==t.value.width||r.height!==t.value.height)&&(t.value=r)}return(r,i)=>(F(),G("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[r.labelShowBg?(F(),G("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*r.labelBgPadding[0]}px`,height:`${t.value.height+2*r.labelBgPadding[1]}px`,x:-r.labelBgPadding[0],y:-r.labelBgPadding[1],style:Ze(r.labelBgStyle),rx:r.labelBgBorderRadius,ry:r.labelBgBorderRadius},null,12,hx)):fe("",!0),p("text",ml(r.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:r.labelStyle}),[Ue(r.$slots,"default",{},()=>[typeof r.label!="string"?(F(),Ve(eo(r.label),{key:0})):(F(),G(ue,{key:1},[Ye(de(r.label),1)],64))])],16,gx)],8,px))}}),yx=["id","d","marker-end","marker-start"],bx=["d","stroke-width"],xx={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},Kr=He({...xx,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=ye(null),o=ye(null),s=ye(null),r=Qp();return t({pathEl:n,interactionEl:o,labelEl:s}),(i,l)=>(F(),G(ue,null,[p("path",ml(U(r),{id:i.id,ref_key:"pathEl",ref:n,d:i.path,class:"vue-flow__edge-path","marker-end":i.markerEnd,"marker-start":i.markerStart}),null,16,yx),i.interactionWidth?(F(),G("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:i.path,"stroke-width":i.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,bx)):fe("",!0),i.label&&i.labelX&&i.labelY?(F(),Ve(vx,{key:1,ref_key:"labelEl",ref:s,x:i.labelX,y:i.labelY,label:i.label,"label-show-bg":i.labelShowBg,"label-bg-style":i.labelBgStyle,"label-bg-padding":i.labelBgPadding,"label-bg-border-radius":i.labelBgBorderRadius,"label-style":i.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):fe("",!0)],64))}});function Of({sourceX:e,sourceY:t,targetX:n,targetY:o}){const s=Math.abs(n-e)/2,r=n<e?n+s:n-s,i=Math.abs(o-t)/2,l=o<t?o+i:o-i;return[r,l,s,i]}function Df({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:s,sourceControlY:r,targetControlX:i,targetControlY:l}){const a=e*.125+s*.375+i*.375+n*.125,c=t*.125+r*.375+l*.375+o*.125,u=Math.abs(a-e),f=Math.abs(c-t);return[a,c,u,f]}function Ds(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Mu({pos:e,x1:t,y1:n,x2:o,y2:s,c:r}){let i,l;switch(e){case pe.Left:i=t-Ds(t-o,r),l=n;break;case pe.Right:i=t+Ds(o-t,r),l=n;break;case pe.Top:i=t,l=n-Ds(n-s,r);break;case pe.Bottom:i=t,l=n+Ds(s-n,r);break}return[i,l]}function Pf(e){const{sourceX:t,sourceY:n,sourcePosition:o=pe.Bottom,targetX:s,targetY:r,targetPosition:i=pe.Top,curvature:l=.25}=e,[a,c]=Mu({pos:o,x1:t,y1:n,x2:s,y2:r,c:l}),[u,f]=Mu({pos:i,x1:s,y1:r,x2:t,y2:n,c:l}),[g,v,S,x]=Df({sourceX:t,sourceY:n,targetX:s,targetY:r,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:f});return[`M${t},${n} C${a},${c} ${u},${f} ${s},${r}`,g,v,S,x]}function Au({pos:e,x1:t,y1:n,x2:o,y2:s}){let r,i;switch(e){case pe.Left:case pe.Right:r=.5*(t+o),i=n;break;case pe.Top:case pe.Bottom:r=t,i=.5*(n+s);break}return[r,i]}function Lf(e){const{sourceX:t,sourceY:n,sourcePosition:o=pe.Bottom,targetX:s,targetY:r,targetPosition:i=pe.Top}=e,[l,a]=Au({pos:o,x1:t,y1:n,x2:s,y2:r}),[c,u]=Au({pos:i,x1:s,y1:r,x2:t,y2:n}),[f,g,v,S]=Df({sourceX:t,sourceY:n,targetX:s,targetY:r,sourceControlX:l,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${t},${n} C${l},${a} ${c},${u} ${s},${r}`,f,g,v,S]}const ku={[pe.Left]:{x:-1,y:0},[pe.Right]:{x:1,y:0},[pe.Top]:{x:0,y:-1},[pe.Bottom]:{x:0,y:1}};function wx({source:e,sourcePosition:t=pe.Bottom,target:n}){return t===pe.Left||t===pe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Ou(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function _x({source:e,sourcePosition:t=pe.Bottom,target:n,targetPosition:o=pe.Top,center:s,offset:r}){const i=ku[t],l=ku[o],a={x:e.x+i.x*r,y:e.y+i.y*r},c={x:n.x+l.x*r,y:n.y+l.y*r},u=wx({source:a,sourcePosition:t,target:c}),f=u.x!==0?"x":"y",g=u[f];let v,S,x;const N={x:0,y:0},C={x:0,y:0},[A,m,w,I]=Of({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[f]*l[f]===-1){S=s.x??A,x=s.y??m;const X=[{x:S,y:a.y},{x:S,y:c.y}],B=[{x:a.x,y:x},{x:c.x,y:x}];i[f]===g?v=f==="x"?X:B:v=f==="x"?B:X}else{const X=[{x:a.x,y:c.y}],B=[{x:c.x,y:a.y}];if(f==="x"?v=i.x===g?B:X:v=i.y===g?X:B,t===o){const Q=Math.abs(e[f]-n[f]);if(Q<=r){const M=Math.min(r-1,r-Q);i[f]===g?N[f]=(a[f]>e[f]?-1:1)*M:C[f]=(c[f]>n[f]?-1:1)*M}}if(t!==o){const Q=f==="x"?"y":"x",M=i[f]===l[Q],W=a[Q]>c[Q],L=a[Q]<c[Q];(i[f]===1&&(!M&&W||M&&L)||i[f]!==1&&(!M&&L||M&&W))&&(v=f==="x"?X:B)}const R={x:a.x+N.x,y:a.y+N.y},V={x:c.x+C.x,y:c.y+C.y},z=Math.max(Math.abs(R.x-v[0].x),Math.abs(V.x-v[0].x)),T=Math.max(Math.abs(R.y-v[0].y),Math.abs(V.y-v[0].y));z>=T?(S=(R.x+V.x)/2,x=v[0].y):(S=v[0].x,x=(R.y+V.y)/2)}return[[e,{x:a.x+N.x,y:a.y+N.y},...v,{x:c.x+C.x,y:c.y+C.y},n],S,x,w,I]}function Sx(e,t,n,o){const s=Math.min(Ou(e,t)/2,Ou(t,n)/2,o),{x:r,y:i}=t;if(e.x===r&&r===n.x||e.y===i&&i===n.y)return`L${r} ${i}`;if(e.y===i){const c=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${r+s*c},${i}Q ${r},${i} ${r},${i+s*u}`}const l=e.x<n.x?1:-1,a=e.y<n.y?-1:1;return`L ${r},${i+s*a}Q ${r},${i} ${r+s*l},${i}`}function ol(e){const{sourceX:t,sourceY:n,sourcePosition:o=pe.Bottom,targetX:s,targetY:r,targetPosition:i=pe.Top,borderRadius:l=5,centerX:a,centerY:c,offset:u=20}=e,[f,g,v,S,x]=_x({source:{x:t,y:n},sourcePosition:o,target:{x:s,y:r},targetPosition:i,center:{x:a,y:c},offset:u});return[f.reduce((C,A,m)=>{let w;return m>0&&m<f.length-1?w=Sx(f[m-1],A,f[m+1],l):w=`${m===0?"M":"L"}${A.x} ${A.y}`,C+=w,C},""),g,v,S,x]}function Ex(e){const{sourceX:t,sourceY:n,targetX:o,targetY:s}=e,[r,i,l,a]=Of({sourceX:t,sourceY:n,targetX:o,targetY:s});return[`M ${t},${n}L ${o},${s}`,r,i,l,a]}const Cx=He({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,s]=Ex(e);return $e(Kr,{path:n,labelX:o,labelY:s,...t,...e})}}}),Ix=Cx,Nx=He({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,s]=ol({...e,sourcePosition:e.sourcePosition??pe.Bottom,targetPosition:e.targetPosition??pe.Top});return $e(Kr,{path:n,labelX:o,labelY:s,...t,...e})}}}),Rf=Nx,Tx=He({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>$e(Rf,{...e,...t,borderRadius:0})}}),$x=Tx,Mx=He({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,s]=Pf({...e,sourcePosition:e.sourcePosition??pe.Bottom,targetPosition:e.targetPosition??pe.Top});return $e(Kr,{path:n,labelX:o,labelY:s,...t,...e})}}}),Ax=Mx,kx=He({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,s]=Lf({...e,sourcePosition:e.sourcePosition??pe.Bottom,targetPosition:e.targetPosition??pe.Top});return $e(Kr,{path:n,labelX:o,labelY:s,...t,...e})}}}),Ox=kx,Dx={input:fx,default:cx,output:dx},Px={default:Ax,straight:Ix,step:$x,smoothstep:Rf,simplebezier:Ox};function Lx(e,t,n){const o=ie(()=>x=>t.value.get(x)),s=ie(()=>x=>n.value.get(x)),r=ie(()=>{const x={...Px,...e.edgeTypes},N=Object.keys(x);for(const C of e.edges)C.type&&!N.includes(C.type)&&(x[C.type]=C.type);return x}),i=ie(()=>{const x={...Dx,...e.nodeTypes},N=Object.keys(x);for(const C of e.nodes)C.type&&!N.includes(C.type)&&(x[C.type]=C.type);return x}),l=ie(()=>e.onlyRenderVisibleElements?yf(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),a=ie(()=>{if(e.onlyRenderVisibleElements){const x=[];for(const N of e.edges){const C=t.value.get(N.source),A=t.value.get(N.target);k1({sourcePos:C.computedPosition||{x:0,y:0},targetPos:A.computedPosition||{x:0,y:0},sourceWidth:C.dimensions.width,sourceHeight:C.dimensions.height,targetWidth:A.dimensions.width,targetHeight:A.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&x.push(N)}return x}return e.edges}),c=ie(()=>[...l.value,...a.value]),u=ie(()=>{const x=[];for(const N of e.nodes)N.selected&&x.push(N);return x}),f=ie(()=>{const x=[];for(const N of e.edges)N.selected&&x.push(N);return x}),g=ie(()=>[...u.value,...f.value]),v=ie(()=>{const x=[];for(const N of e.nodes)N.dimensions.width&&N.dimensions.height&&N.handleBounds!==void 0&&x.push(N);return x}),S=ie(()=>l.value.length>0&&v.value.length===l.value.length);return{getNode:o,getEdge:s,getElements:c,getEdgeTypes:r,getNodeTypes:i,getEdges:a,getNodes:l,getSelectedElements:g,getSelectedNodes:u,getSelectedEdges:f,getNodesInitialized:v,areNodesInitialized:S}}let Rx=class no{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=Nt())==null?void 0:t.appContext.app,o=n?.config.globalProperties.$vueFlowStorage??no.instance;return no.instance=o??new no,n&&(n.config.globalProperties.$vueFlowStorage=no.instance),no.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=kf(),s=ps(o),r={};for(const[g,v]of Object.entries(s.hooks)){const S=`on${g.charAt(0).toUpperCase()+g.slice(1)}`;r[S]=v.on}const i={};for(const[g,v]of Object.entries(s.hooks))i[g]=v.trigger;const l=ie(()=>{const g=new Map;for(const v of s.nodes)g.set(v.id,v);return g}),a=ie(()=>{const g=new Map;for(const v of s.edges)g.set(v.id,v);return g}),c=Lx(s,l,a),u=lx(s,l,a);u.setState({...s,...n});const f={...r,...c,...u,...Nv(s),nodeLookup:l,edgeLookup:a,emits:i,id:t,vueFlowVersion:"1.48.2",$destroy:()=>{this.remove(t)}};return this.set(t,f),f}getId(){return`vue-flow-${this.currentId++}`}};function Be(e){const t=Rx.getInstance(),n=fs(),o=typeof e=="object",s=o?e:{id:e},r=s.id,i=r??n?.vueFlowId;let l;if(n){const a=_t($u,null);typeof a<"u"&&a!==null&&(!i||a.id===i)&&(l=a)}if(l||i&&(l=t.get(i)),!l||i&&l.id!==i){const a=r??t.getId(),c=t.create(a,s);l=c,(n??_r(!0)).run(()=>{_e(c.applyDefault,(f,g,v)=>{const S=N=>{c.applyNodeChanges(N)},x=N=>{c.applyEdgeChanges(N)};f?(c.onNodesChange(S),c.onEdgesChange(x)):(c.hooks.value.nodesChange.off(S),c.hooks.value.edgesChange.off(x)),v(()=>{c.hooks.value.nodesChange.off(S),c.hooks.value.edgesChange.off(x)})},{immediate:!0}),os(()=>{if(l){const f=t.get(l.id);f?f.$destroy():bs(`No store instance found for id ${l.id} in storage.`)}})})}else o&&l.setState(s);if(n&&(Vn($u,l),n.vueFlowId=l.id),o){const a=Nt();a?.type.name!=="VueFlow"&&l.emits.error(new qe(We.USEVUEFLOW_OPTIONS))}return l}function Bx(e){const{emits:t,dimensions:n}=Be();let o;ct(()=>{const s=()=>{var r,i;if(!e.value||!(((i=(r=e.value).checkVisibility)==null?void 0:i.call(r))??!0))return;const l=Vr(e.value);(l.width===0||l.height===0)&&t.error(new qe(We.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:l.width||500,height:l.height||500}};s(),window.addEventListener("resize",s),e.value&&(o=new ResizeObserver(()=>s()),o.observe(e.value)),Mr(()=>{window.removeEventListener("resize",s),o&&e.value&&o.unobserve(e.value)})})}const Fx={name:"UserSelection",compatConfig:{MODE:3}},zx=He({...Fx,props:{userSelectionRect:{}},setup(e){return(t,n)=>(F(),G("div",{class:"vue-flow__selection vue-flow__container",style:Ze({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),Vx=["tabIndex"],Hx={name:"NodesSelection",compatConfig:{MODE:3}},Ux=He({...Hx,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:s,disableKeyboardA11y:r,userSelectionActive:i}=Be(),l=Af(),a=ye(null),c=Tf({el:a,onStart(S){t.selectionDragStart(S),t.nodeDragStart(S)},onDrag(S){t.selectionDrag(S),t.nodeDrag(S)},onStop(S){t.selectionDragStop(S),t.nodeDragStop(S)}});ct(()=>{var S;r.value||(S=a.value)==null||S.focus({preventScroll:!0})});const u=ie(()=>vf(o.value)),f=ie(()=>({width:`${u.value.width}px`,height:`${u.value.height}px`,top:`${u.value.y}px`,left:`${u.value.x}px`}));function g(S){t.selectionContextMenu({event:S,nodes:o.value})}function v(S){r.value||co[S.key]&&(S.preventDefault(),l({x:co[S.key].x,y:co[S.key].y},S.shiftKey))}return(S,x)=>!U(i)&&u.value.width&&u.value.height?(F(),G("div",{key:0,class:ge(["vue-flow__nodesselection vue-flow__container",U(s)]),style:Ze({transform:`translate(${U(n).x}px,${U(n).y}px) scale(${U(n).zoom})`})},[p("div",{ref_key:"el",ref:a,class:ge([{dragging:U(c)},"vue-flow__nodesselection-rect"]),style:Ze(f.value),tabIndex:U(r)?void 0:-1,onContextmenu:g,onKeydown:v},null,46,Vx)],6)):fe("",!0)}});function jx(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Gx={name:"Pane",compatConfig:{MODE:3}},Yx=He({...Gx,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:s,userSelectionActive:r,removeSelectedElements:i,userSelectionRect:l,elementsSelectable:a,nodesSelectionActive:c,getSelectedEdges:u,getSelectedNodes:f,removeNodes:g,removeEdges:v,selectionMode:S,deleteKeyCode:x,multiSelectionKeyCode:N,multiSelectionActive:C,edgeLookup:A,nodeLookup:m,connectionLookup:w,defaultEdgeOptions:I,connectionStartHandle:H,panOnDrag:X}=Be(),B=Ft(null),R=Ft(new Set),V=Ft(new Set),z=Ft(null),T=Pe(()=>a.value&&(e.isSelecting||r.value)),Q=Pe(()=>H.value!==null);let M=!1,W=!1;const L=Xo(x,{actInsideInputWithModifier:!1}),O=Xo(N);_e(L,le=>{le&&(g(f.value),v(u.value),c.value=!1)}),_e(O,le=>{C.value=le});function P(le,se){return ce=>{ce.target===se&&le?.(ce)}}function d(le){if(M||Q.value){M=!1;return}s.paneClick(le),i(),c.value=!1}function h(le){var se;if(Array.isArray(X.value)&&((se=X.value)!=null&&se.includes(2))){le.preventDefault();return}s.paneContextMenu(le)}function J(le){s.paneScroll(le)}function ne(le){var se,ce,Ce;if(z.value=((se=t.value)==null?void 0:se.getBoundingClientRect())??null,!a.value||!e.isSelecting||le.button!==0||le.target!==B.value||!z.value)return;(Ce=(ce=le.target)==null?void 0:ce.setPointerCapture)==null||Ce.call(ce,le.pointerId);const{x:Ae,y:be}=jx(le,z.value);W=!0,M=!1,i(),l.value={width:0,height:0,startX:Ae,startY:be,x:Ae,y:be},s.selectionStart(le)}function he(le){var se;if(!z.value||!l.value)return;M=!0;const{x:ce,y:Ce}=Bt(le,z.value),{startX:Ae=0,startY:be=0}=l.value,Me={startX:Ae,startY:be,x:ce<Ae?ce:Ae,y:Ce<be?Ce:be,width:Math.abs(ce-Ae),height:Math.abs(Ce-be)},E=R.value,D=V.value;R.value=new Set(yf(n.value,Me,o.value,S.value===Ml.Partial,!0).map(b=>b.id)),V.value=new Set;const y=((se=I.value)==null?void 0:se.selectable)??!0;for(const b of R.value){const _=w.value.get(b);if(_)for(const{edgeId:$}of _.values()){const k=A.value.get($);k&&(k.selectable??y)&&V.value.add($)}}if(!Tu(E,R.value)){const b=xn(m.value,R.value,!0);s.nodesChange(b)}if(!Tu(D,V.value)){const b=xn(A.value,V.value);s.edgesChange(b)}l.value=Me,r.value=!0,c.value=!1}function ve(le){var se;le.button!==0||!W||((se=le.target)==null||se.releasePointerCapture(le.pointerId),!r.value&&l.value&&le.target===B.value&&d(le),r.value=!1,l.value=null,c.value=R.value.size>0,s.selectionEnd(le),e.selectionKeyPressed&&(M=!1),W=!1)}return(le,se)=>(F(),G("div",{ref_key:"container",ref:B,class:ge(["vue-flow__pane vue-flow__container",{selection:le.isSelecting}]),onClick:se[0]||(se[0]=ce=>T.value?void 0:P(d,B.value)(ce)),onContextmenu:se[1]||(se[1]=ce=>P(h,B.value)(ce)),onWheelPassive:se[2]||(se[2]=ce=>P(J,B.value)(ce)),onPointerenter:se[3]||(se[3]=ce=>T.value?void 0:U(s).paneMouseEnter(ce)),onPointerdown:se[4]||(se[4]=ce=>T.value?ne(ce):U(s).paneMouseMove(ce)),onPointermove:se[5]||(se[5]=ce=>T.value?he(ce):U(s).paneMouseMove(ce)),onPointerup:se[6]||(se[6]=ce=>T.value?ve(ce):void 0),onPointerleave:se[7]||(se[7]=ce=>U(s).paneMouseLeave(ce))},[Ue(le.$slots,"default"),U(r)&&U(l)?(F(),Ve(zx,{key:0,"user-selection-rect":U(l)},null,8,["user-selection-rect"])):fe("",!0),U(c)&&U(f).length?(F(),Ve(Ux,{key:1})):fe("",!0)],34))}}),Kx={name:"Transform",compatConfig:{MODE:3}},Wx=He({...Kx,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=Be(),s=ie(()=>n.value?!o.value:!1),r=ie(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(i,l)=>(F(),G("div",{class:"vue-flow__transformationpane vue-flow__container",style:Ze({transform:r.value,opacity:s.value?0:void 0})},[Ue(i.$slots,"default")],4))}}),Xx={name:"Viewport",compatConfig:{MODE:3}},qx=He({...Xx,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:s,zoomActivationKeyCode:r,selectionKeyCode:i,panActivationKeyCode:l,panOnScroll:a,panOnScrollMode:c,panOnScrollSpeed:u,panOnDrag:f,zoomOnDoubleClick:g,zoomOnPinch:v,zoomOnScroll:S,preventScrolling:x,noWheelClassName:N,noPanClassName:C,emits:A,connectionStartHandle:m,userSelectionActive:w,paneDragging:I,d3Zoom:H,d3Selection:X,d3ZoomHandler:B,viewport:R,viewportRef:V,paneClickDistance:z}=Be();Bx(V);const T=Ft(!1),Q=Ft(!1);let M=null,W=!1,L=0,O={x:0,y:0,zoom:0};const P=Xo(l),d=Xo(i),h=Xo(r),J=Pe(()=>(!d.value||d.value&&i.value===!0)&&(P.value||f.value)),ne=Pe(()=>P.value||a.value),he=Pe(()=>i.value===!0&&J.value!==!0),ve=Pe(()=>d.value&&i.value!==!0||w.value||he.value),le=Pe(()=>m.value!==null);ct(()=>{if(!V.value){bs("Viewport element is missing");return}const be=V.value,Me=be.getBoundingClientRect(),E=d1().clickDistance(z.value).scaleExtent([t.value,n.value]).translateExtent(s.value),D=bt(be).call(E),y=D.on("wheel.zoom"),b=bo.translate(o.value.x??0,o.value.y??0).scale(Kn(o.value.zoom??1,t.value,n.value)),_=[[0,0],[Me.width,Me.height]],$=E.constrain()(b,_,s.value);E.transform(D,$),E.wheelDelta(hu),H.value=E,X.value=D,B.value=y,R.value={x:$.x,y:$.y,zoom:$.k},E.on("start",k=>{var K;if(!k.sourceEvent)return null;L=k.sourceEvent.button,T.value=!0;const Y=Ce(k.transform);((K=k.sourceEvent)==null?void 0:K.type)==="mousedown"&&(I.value=!0),O=Y,A.viewportChangeStart(Y),A.moveStart({event:k,flowTransform:Y})}),E.on("end",k=>{if(!k.sourceEvent)return null;if(T.value=!1,I.value=!1,se(J.value,L??0)&&!W&&A.paneContextMenu(k.sourceEvent),W=!1,ce(O,k.transform)){const K=Ce(k.transform);O=K,A.viewportChangeEnd(K),A.moveEnd({event:k,flowTransform:K})}}),E.filter(k=>{var K;const Y=h.value||S.value,j=v.value&&k.ctrlKey,Z=k.button,q=k.type==="wheel";if(Z===1&&k.type==="mousedown"&&(Ae(k,"vue-flow__node")||Ae(k,"vue-flow__edge")))return!0;if(!J.value&&!Y&&!ne.value&&!g.value&&!v.value||w.value||le.value&&!q||!g.value&&k.type==="dblclick"||Ae(k,N.value)&&q||Ae(k,C.value)&&(!q||ne.value&&q&&!h.value)||!v.value&&k.ctrlKey&&q||!Y&&!ne.value&&!j&&q)return!1;if(!v&&k.type==="touchstart"&&((K=k.touches)==null?void 0:K.length)>1)return k.preventDefault(),!1;if(!J.value&&(k.type==="mousedown"||k.type==="touchstart")||he.value&&Array.isArray(f.value)&&f.value.includes(0)&&Z===0||Array.isArray(f.value)&&!f.value.includes(Z)&&(k.type==="mousedown"||k.type==="touchstart"))return!1;const ee=Array.isArray(f.value)&&f.value.includes(Z)||i.value===!0&&Array.isArray(f.value)&&!f.value.includes(0)||!Z||Z<=1;return(!k.ctrlKey||P.value||q)&&ee}),_e([w,J],()=>{w.value&&!T.value?E.on("zoom",null):w.value||E.on("zoom",k=>{R.value={x:k.transform.x,y:k.transform.y,zoom:k.transform.k};const K=Ce(k.transform);W=se(J.value,L??0),A.viewportChange(K),A.move({event:k,flowTransform:K})})},{immediate:!0}),_e([w,ne,c,h,v,x,N],()=>{ne.value&&!h.value&&!w.value?D.on("wheel.zoom",k=>{if(Ae(k,N.value))return!1;const K=h.value||S.value,Y=v.value&&k.ctrlKey;if(!(!x.value||ne.value||K||Y))return!1;k.preventDefault(),k.stopImmediatePropagation();const Z=D.property("__zoom").k||1,q=hr();if(!P.value&&k.ctrlKey&&v.value&&q){const ke=Pt(k),Qe=hu(k),et=Z*2**Qe;E.scaleTo(D,et,ke,k);return}const ee=k.deltaMode===1?20:1;let re=c.value===Wo.Vertical?0:k.deltaX*ee,Se=c.value===Wo.Horizontal?0:k.deltaY*ee;!q&&k.shiftKey&&c.value!==Wo.Vertical&&!re&&Se&&(re=Se,Se=0),E.translateBy(D,-(re/Z)*u.value,-(Se/Z)*u.value);const Ie=Ce(D.property("__zoom"));M&&clearTimeout(M),Q.value?(A.move({event:k,flowTransform:Ie}),A.viewportChange(Ie),M=setTimeout(()=>{A.moveEnd({event:k,flowTransform:Ie}),A.viewportChangeEnd(Ie),Q.value=!1},150)):(Q.value=!0,A.moveStart({event:k,flowTransform:Ie}),A.viewportChangeStart(Ie))},{passive:!1}):typeof y<"u"&&D.on("wheel.zoom",function(k,K){const Y=!x.value&&k.type==="wheel"&&!k.ctrlKey,j=h.value||S.value,Z=v.value&&k.ctrlKey;if(!j&&!a.value&&!Z&&k.type==="wheel"||Y||Ae(k,N.value))return null;k.preventDefault(),y.call(this,k,K)},{passive:!1})},{immediate:!0})});function se(be,Me){return Me===2&&Array.isArray(be)&&be.includes(2)}function ce(be,Me){return be.x!==Me.x&&!Number.isNaN(Me.x)||be.y!==Me.y&&!Number.isNaN(Me.y)||be.zoom!==Me.k&&!Number.isNaN(Me.k)}function Ce(be){return{x:be.x,y:be.y,zoom:be.k}}function Ae(be,Me){return be.target.closest(`.${Me}`)}return(be,Me)=>(F(),G("div",{ref_key:"viewportRef",ref:V,class:"vue-flow__viewport vue-flow__container"},[oe(Yx,{"is-selecting":ve.value,"selection-key-pressed":U(d),class:ge({connecting:le.value,dragging:U(I),draggable:U(f)===!0||Array.isArray(U(f))&&U(f).includes(0)})},{default:ht(()=>[oe(Wx,null,{default:ht(()=>[Ue(be.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Zx=["id"],Jx=["id"],Qx=["id"],ew={name:"A11yDescriptions",compatConfig:{MODE:3}},tw=He({...ew,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Be();return(s,r)=>(F(),G(ue,null,[p("div",{id:`${U(uf)}-${U(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+de(U(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Zx),p("div",{id:`${U(cf)}-${U(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Jx),U(n)?fe("",!0):(F(),G("div",{key:0,id:`${U(v1)}-${U(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},de(U(o)),9,Qx))],64))}});function nw(){const e=Be();_e(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function ow(e,t,n){return n===pe.Left?e-t:n===pe.Right?e+t:e}function sw(e,t,n){return n===pe.Top?e-t:n===pe.Bottom?e+t:e}const Ol=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=pe.Top,type:s}){return $e("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${s}`,cx:ow(t,e,o),cy:sw(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Ol.props=["radius","centerX","centerY","position","type"];Ol.compatConfig={MODE:3};const Du=Ol,rw=He({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:s,emits:r,nodesSelectionActive:i,noPanClassName:l,getEdgeTypes:a,removeSelectedEdges:c,findEdge:u,findNode:f,isValidConnection:g,multiSelectionActive:v,disableKeyboardA11y:S,elementsSelectable:x,edgesUpdatable:N,edgesFocusable:C,hooks:A}=Be(),m=ie(()=>u(e.id)),{emit:w,on:I}=W1(m.value,r),H=_t(Ur),X=Nt(),B=ye(!1),R=ye(!1),V=ye(""),z=ye(null),T=ye("source"),Q=ye(null),M=Pe(()=>typeof m.value.selectable>"u"?x.value:m.value.selectable),W=Pe(()=>typeof m.value.updatable>"u"?N.value:m.value.updatable),L=Pe(()=>typeof m.value.focusable>"u"?C.value:m.value.focusable);Vn(G1,e.id),Vn(Y1,Q);const O=ie(()=>m.value.class instanceof Function?m.value.class(m.value):m.value.class),P=ie(()=>m.value.style instanceof Function?m.value.style(m.value):m.value.style),d=ie(()=>{const b=m.value.type||"default",_=H?.[`edge-${b}`];if(_)return _;let $=m.value.template??a.value[b];if(typeof $=="string"&&X){const k=Object.keys(X.appContext.components);k&&k.includes(b)&&($=dl(b,!1))}return $&&typeof $!="string"?$:(r.error(new qe(We.EDGE_TYPE_MISSING,$)),!1)}),{handlePointerDown:h}=$f({nodeId:V,handleId:z,type:T,isValidConnection:g,edgeUpdaterType:T,onEdgeUpdate:he,onEdgeUpdateEnd:ve});return()=>{const b=f(m.value.source),_=f(m.value.target),$="pathOptions"in m.value?m.value.pathOptions:{};if(!b&&!_)return r.error(new qe(We.EDGE_SOURCE_TARGET_MISSING,m.value.id,m.value.source,m.value.target)),null;if(!b)return r.error(new qe(We.EDGE_SOURCE_MISSING,m.value.id,m.value.source)),null;if(!_)return r.error(new qe(We.EDGE_TARGET_MISSING,m.value.id,m.value.target)),null;if(!m.value||m.value.hidden||b.hidden||_.hidden)return null;let k;o.value===Sn.Strict?k=b.handleBounds.source:k=[...b.handleBounds.source||[],...b.handleBounds.target||[]];const K=_u(k,m.value.sourceHandle);let Y;o.value===Sn.Strict?Y=_.handleBounds.target:Y=[..._.handleBounds.target||[],..._.handleBounds.source||[]];const j=_u(Y,m.value.targetHandle),Z=K?.position||pe.Bottom,q=j?.position||pe.Top,{x:ee,y:re}=xo(b,K,Z),{x:Se,y:Ie}=xo(_,j,q);return m.value.sourceX=ee,m.value.sourceY=re,m.value.targetX=Se,m.value.targetY=Ie,$e("g",{ref:Q,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${d.value===!1?"default":m.value.type||"default"}`,l.value,O.value,{updating:B.value,selected:m.value.selected,animated:m.value.animated,inactive:!M.value&&!A.value.edgeClick.hasListeners()}],tabIndex:L.value?0:void 0,"aria-label":m.value.ariaLabel===null?void 0:m.value.ariaLabel??`Edge from ${m.value.source} to ${m.value.target}`,"aria-describedby":L.value?`${cf}-${t}`:void 0,"aria-roledescription":"edge",role:L.value?"group":"img",...m.value.domAttributes,onClick:se,onContextmenu:ce,onDblclick:Ce,onMouseenter:Ae,onMousemove:be,onMouseleave:Me,onKeyDown:L.value?y:void 0},[R.value?null:$e(d.value===!1?a.value.default:d.value,{id:e.id,sourceNode:b,targetNode:_,source:m.value.source,target:m.value.target,type:m.value.type,updatable:W.value,selected:m.value.selected,animated:m.value.animated,label:m.value.label,labelStyle:m.value.labelStyle,labelShowBg:m.value.labelShowBg,labelBgStyle:m.value.labelBgStyle,labelBgPadding:m.value.labelBgPadding,labelBgBorderRadius:m.value.labelBgBorderRadius,data:m.value.data,events:{...m.value.events,...I},style:P.value,markerStart:`url('#${cs(m.value.markerStart,t)}')`,markerEnd:`url('#${cs(m.value.markerEnd,t)}')`,sourcePosition:Z,targetPosition:q,sourceX:ee,sourceY:re,targetX:Se,targetY:Ie,sourceHandleId:m.value.sourceHandle,targetHandleId:m.value.targetHandle,interactionWidth:m.value.interactionWidth,...$}),[W.value==="source"||W.value===!0?[$e("g",{onMousedown:E,onMouseenter:J,onMouseout:ne},$e(Du,{position:Z,centerX:ee,centerY:re,radius:s.value,type:"source","data-type":"source"}))]:null,W.value==="target"||W.value===!0?[$e("g",{onMousedown:D,onMouseenter:J,onMouseout:ne},$e(Du,{position:q,centerX:Se,centerY:Ie,radius:s.value,type:"target","data-type":"target"}))]:null]])};function J(){B.value=!0}function ne(){B.value=!1}function he(b,_){w.update({event:b,edge:m.value,connection:_})}function ve(b){w.updateEnd({event:b,edge:m.value}),R.value=!1}function le(b,_){b.button===0&&(R.value=!0,V.value=_?m.value.target:m.value.source,z.value=(_?m.value.targetHandle:m.value.sourceHandle)??null,T.value=_?"target":"source",w.updateStart({event:b,edge:m.value}),h(b))}function se(b){var _;const $={event:b,edge:m.value};M.value&&(i.value=!1,m.value.selected&&v.value?(c([m.value]),(_=Q.value)==null||_.blur()):n([m.value])),w.click($)}function ce(b){w.contextMenu({event:b,edge:m.value})}function Ce(b){w.doubleClick({event:b,edge:m.value})}function Ae(b){w.mouseEnter({event:b,edge:m.value})}function be(b){w.mouseMove({event:b,edge:m.value})}function Me(b){w.mouseLeave({event:b,edge:m.value})}function E(b){le(b,!0)}function D(b){le(b,!1)}function y(b){var _;!S.value&&df.includes(b.key)&&M.value&&(b.key==="Escape"?((_=Q.value)==null||_.blur(),c([u(e.id)])):n([u(e.id)]))}}}),iw=rw,lw=He({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:s,connectionPosition:r,connectionLineType:i,connectionLineStyle:l,connectionLineOptions:a,connectionStatus:c,viewport:u,findNode:f}=Be(),g=(e=_t(Ur))==null?void 0:e["connection-line"],v=ie(()=>{var A;return f((A=o.value)==null?void 0:A.nodeId)}),S=ie(()=>{var A;return f((A=s.value)==null?void 0:A.nodeId)??null}),x=ie(()=>({x:(r.value.x-u.value.x)/u.value.zoom,y:(r.value.y-u.value.y)/u.value.zoom})),N=ie(()=>a.value.markerStart?`url(#${cs(a.value.markerStart,t)})`:""),C=ie(()=>a.value.markerEnd?`url(#${cs(a.value.markerEnd,t)})`:"");return()=>{var A,m,w;if(!v.value||!o.value)return null;const I=o.value.id,H=o.value.type,X=v.value.handleBounds;let B=X?.[H]??[];if(n.value===Sn.Loose){const P=X?.[H==="source"?"target":"source"]??[];B=[...B,...P]}if(!B)return null;const R=(I?B.find(P=>P.id===I):B[0])??null,V=R?.position??pe.Top,{x:z,y:T}=xo(v.value,R,V);let Q=null;S.value&&(n.value===Sn.Strict?Q=((A=S.value.handleBounds[H==="source"?"target":"source"])==null?void 0:A.find(P=>{var d;return P.id===((d=s.value)==null?void 0:d.id)}))||null:Q=((m=[...S.value.handleBounds.source??[],...S.value.handleBounds.target??[]])==null?void 0:m.find(P=>{var d;return P.id===((d=s.value)==null?void 0:d.id)}))||null);const M=((w=s.value)==null?void 0:w.position)??(V?tl[V]:null);if(!V||!M)return null;const W=i.value??a.value.type??kn.Bezier;let L="";const O={sourceX:z,sourceY:T,sourcePosition:V,targetX:x.value.x,targetY:x.value.y,targetPosition:M};return W===kn.Bezier?[L]=Pf(O):W===kn.Step?[L]=ol({...O,borderRadius:0}):W===kn.SmoothStep?[L]=ol(O):W===kn.SimpleBezier?[L]=Lf(O):L=`M${z},${T} ${x.value.x},${x.value.y}`,$e("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},$e("g",{class:"vue-flow__connection"},g?$e(g,{sourceX:z,sourceY:T,sourcePosition:V,targetX:x.value.x,targetY:x.value.y,targetPosition:M,sourceNode:v.value,sourceHandle:R,targetNode:S.value,targetHandle:Q,markerEnd:C.value,markerStart:N.value,connectionStatus:c.value}):$e("path",{d:L,class:[a.value.class,c.value,"vue-flow__connection-path"],style:{...l.value,...a.value.style},"marker-end":C.value,"marker-start":N.value})))}}}),aw=lw,uw=["id","markerWidth","markerHeight","markerUnits","orient"],cw={name:"MarkerType",compatConfig:{MODE:3}},dw=He({...cw,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(F(),G("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===U(qt).ArrowClosed?(F(),G("polyline",{key:0,style:Ze({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):fe("",!0),t.type===U(qt).Arrow?(F(),G("polyline",{key:1,style:Ze({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):fe("",!0)],8,uw))}}),fw={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},pw={name:"MarkerDefinitions",compatConfig:{MODE:3}},hw=He({...pw,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:s}=Be(),r=ie(()=>{const i=new Set,l=[],a=c=>{if(c){const u=cs(c,t);i.has(u)||(typeof c=="object"?l.push({...c,id:u,color:c.color||s.value}):l.push({id:u,color:s.value,type:c}),i.add(u))}};for(const c of[o.value.markerEnd,o.value.markerStart])a(c);for(const c of n.value)for(const u of[c.markerStart,c.markerEnd])a(u);return l.sort((c,u)=>c.id.localeCompare(u.id))});return(i,l)=>(F(),G("svg",fw,[p("defs",null,[(F(!0),G(ue,null,Ee(r.value,a=>(F(),Ve(dw,{id:a.id,key:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,"stroke-width":a.strokeWidth,orient:a.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),gw={name:"Edges",compatConfig:{MODE:3}},mw=He({...gw,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=Be();return(s,r)=>(F(),G(ue,null,[oe(hw),(F(!0),G(ue,null,Ee(U(n),i=>(F(),G("svg",{key:i.id,class:"vue-flow__edges vue-flow__container",style:Ze({zIndex:U(O1)(i,U(t),U(o))})},[oe(U(iw),{id:i.id},null,8,["id"])],4))),128)),oe(U(aw))],64))}}),vw=He({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:s,multiSelectionActive:r,emits:i,removeSelectedNodes:l,addSelectedNodes:a,updateNodeDimensions:c,onUpdateNodeInternals:u,getNodeTypes:f,nodeExtent:g,elevateNodesOnSelect:v,disableKeyboardA11y:S,ariaLiveMessage:x,snapToGrid:N,snapGrid:C,nodeDragThreshold:A,nodesDraggable:m,elementsSelectable:w,nodesConnectable:I,nodesFocusable:H,hooks:X}=Be(),B=ye(null);Vn(Nf,B),Vn(If,e.id);const R=_t(Ur),V=Nt(),z=Af(),{node:T,parentNode:Q}=Mf(e.id),{emit:M,on:W}=J1(T,i),L=Pe(()=>typeof T.draggable>"u"?m.value:T.draggable),O=Pe(()=>typeof T.selectable>"u"?w.value:T.selectable),P=Pe(()=>typeof T.connectable>"u"?I.value:T.connectable),d=Pe(()=>typeof T.focusable>"u"?H.value:T.focusable),h=ie(()=>O.value||L.value||X.value.nodeClick.hasListeners()||X.value.nodeDoubleClick.hasListeners()||X.value.nodeMouseEnter.hasListeners()||X.value.nodeMouseMove.hasListeners()||X.value.nodeMouseLeave.hasListeners()),J=Pe(()=>!!T.dimensions.width&&!!T.dimensions.height),ne=ie(()=>{const _=T.type||"default",$=R?.[`node-${_}`];if($)return $;let k=T.template||f.value[_];if(typeof k=="string"&&V){const K=Object.keys(V.appContext.components);K&&K.includes(_)&&(k=dl(_,!1))}return k&&typeof k!="string"?k:(i.error(new qe(We.NODE_TYPE_MISSING,k)),!1)}),he=Tf({id:e.id,el:B,disabled:()=>!L.value,selectable:O,dragHandle:()=>T.dragHandle,onStart(_){M.dragStart(_)},onDrag(_){M.drag(_)},onStop(_){M.dragStop(_)},onClick(_){y(_)}}),ve=ie(()=>T.class instanceof Function?T.class(T):T.class),le=ie(()=>{const _=(T.style instanceof Function?T.style(T):T.style)||{},$=T.width instanceof Function?T.width(T):T.width,k=T.height instanceof Function?T.height(T):T.height;return!_.width&&$&&(_.width=typeof $=="string"?$:`${$}px`),!_.height&&k&&(_.height=typeof k=="string"?k:`${k}px`),_}),se=Pe(()=>Number(T.zIndex??le.value.zIndex??0));return u(_=>{(_.includes(e.id)||!_.length)&&Ce()}),ct(()=>{_e(()=>T.hidden,(_=!1,$,k)=>{!_&&B.value&&(e.resizeObserver.observe(B.value),k(()=>{B.value&&e.resizeObserver.unobserve(B.value)}))},{immediate:!0,flush:"post"})}),_e([()=>T.type,()=>T.sourcePosition,()=>T.targetPosition],()=>{ut(()=>{c([{id:e.id,nodeElement:B.value,forceUpdate:!0}])})}),_e([()=>T.position.x,()=>T.position.y,()=>{var _;return(_=Q.value)==null?void 0:_.computedPosition.x},()=>{var _;return(_=Q.value)==null?void 0:_.computedPosition.y},()=>{var _;return(_=Q.value)==null?void 0:_.computedPosition.z},se,()=>T.selected,()=>T.dimensions.height,()=>T.dimensions.width,()=>{var _;return(_=Q.value)==null?void 0:_.dimensions.height},()=>{var _;return(_=Q.value)==null?void 0:_.dimensions.width}],([_,$,k,K,Y,j])=>{const Z={x:_,y:$,z:j+(v.value&&T.selected?1e3:0)};typeof k<"u"&&typeof K<"u"?T.computedPosition=N1({x:k,y:K,z:Y},Z):T.computedPosition=Z},{flush:"post",immediate:!0}),_e([()=>T.extent,g],([_,$],[k,K])=>{(_!==k||$!==K)&&ce()}),T.extent==="parent"||typeof T.extent=="object"&&"range"in T.extent&&T.extent.range==="parent"?Gi(()=>J).toBe(!0).then(ce):ce(),()=>T.hidden?null:$e("div",{ref:B,"data-id":T.id,class:["vue-flow__node",`vue-flow__node-${ne.value===!1?"default":T.type||"default"}`,{[n.value]:L.value,dragging:he?.value,draggable:L.value,selected:T.selected,selectable:O.value,parent:T.isParent},ve.value],style:{visibility:J.value?"visible":"hidden",zIndex:T.computedPosition.z??se.value,transform:`translate(${T.computedPosition.x}px,${T.computedPosition.y}px)`,pointerEvents:h.value?"all":"none",...le.value},tabIndex:d.value?0:void 0,role:d.value?"group":void 0,"aria-describedby":S.value?void 0:`${uf}-${t}`,"aria-label":T.ariaLabel,"aria-roledescription":"node",...T.domAttributes,onMouseenter:Ae,onMousemove:be,onMouseleave:Me,onContextmenu:E,onClick:y,onDblclick:D,onKeydown:b},[$e(ne.value===!1?f.value.default:ne.value,{id:T.id,type:T.type,data:T.data,events:{...T.events,...W},selected:T.selected,resizing:T.resizing,dragging:he.value,connectable:P.value,position:T.computedPosition,dimensions:T.dimensions,isValidTargetPos:T.isValidTargetPos,isValidSourcePos:T.isValidSourcePos,parent:T.parentNode,parentNodeId:T.parentNode,zIndex:T.computedPosition.z??se.value,targetPosition:T.targetPosition,sourcePosition:T.sourcePosition,label:T.label,dragHandle:T.dragHandle,onUpdateNodeInternals:Ce})]);function ce(){const _=T.computedPosition,{computedPosition:$,position:k}=Al(T,N.value?Hr(_,C.value):_,i.error,g.value,Q.value);(T.computedPosition.x!==$.x||T.computedPosition.y!==$.y)&&(T.computedPosition={...T.computedPosition,...$}),(T.position.x!==k.x||T.position.y!==k.y)&&(T.position=k)}function Ce(){B.value&&c([{id:e.id,nodeElement:B.value,forceUpdate:!0}])}function Ae(_){he?.value||M.mouseEnter({event:_,node:T})}function be(_){he?.value||M.mouseMove({event:_,node:T})}function Me(_){he?.value||M.mouseLeave({event:_,node:T})}function E(_){return M.contextMenu({event:_,node:T})}function D(_){return M.doubleClick({event:_,node:T})}function y(_){O.value&&(!o.value||!L.value||A.value>0)&&nl(T,r.value,a,l,s,!1,B.value),M.click({event:_,node:T})}function b(_){if(!(el(_)||S.value))if(df.includes(_.key)&&O.value){const $=_.key==="Escape";nl(T,r.value,a,l,s,$,B.value)}else L.value&&T.selected&&co[_.key]&&(_.preventDefault(),x.value=`Moved selected node ${_.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~T.position.x}, y: ${~~T.position.y}`,z({x:co[_.key].x,y:co[_.key].y},_.shiftKey))}}}),yw=vw;function bw(e={includeHiddenNodes:!1}){const{nodes:t}=Be();return ie(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&(n?.handleBounds===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const xw={class:"vue-flow__nodes vue-flow__container"},ww={name:"Nodes",compatConfig:{MODE:3}},_w=He({...ww,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=Be(),s=bw(),r=ye();return _e(s,i=>{i&&ut(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),ct(()=>{r.value=new ResizeObserver(i=>{const l=i.map(a=>({id:a.target.getAttribute("data-id"),nodeElement:a.target,forceUpdate:!0}));ut(()=>n(l))})}),Mr(()=>{var i;return(i=r.value)==null?void 0:i.disconnect()}),(i,l)=>(F(),G("div",xw,[r.value?(F(!0),G(ue,{key:0},Ee(U(t),(a,c,u,f)=>{const g=[a.id];if(f&&f.key===a.id&&Bh(f,g))return f;const v=(F(),Ve(U(yw),{id:a.id,key:a.id,"resize-observer":r.value},null,8,["id","resize-observer"]));return v.memo=g,v},l,0),128)):fe("",!0)]))}});function Sw(){const{emits:e}=Be();ct(()=>{if(Cf()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new qe(We.MISSING_STYLES))}})}const Ew=p("div",{class:"vue-flow__edge-labels"},null,-1),Cw={name:"VueFlow",compatConfig:{MODE:3}},Iw=He({...Cw,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,s=Jp(),r=fi(o,"modelValue",n),i=fi(o,"nodes",n),l=fi(o,"edges",n),a=Be(o),c=nx({modelValue:r,nodes:i,edges:l},o,a);return sx(n,a.hooks),nw(),Sw(),Vn(Ur,s),In(c),t(a),(u,f)=>(F(),G("div",{ref:U(a).vueFlowRef,class:"vue-flow"},[oe(qx,null,{default:ht(()=>[oe(mw),Ew,oe(_w),Ue(u.$slots,"zoom-pane")]),_:3}),Ue(u.$slots,"default"),oe(tw)],512))}}),Nw={name:"Panel",compatConfig:{MODE:3}},Tw=He({...Nw,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Be(),o=ie(()=>`${t.position}`.split("-"));return(s,r)=>(F(),G("div",{class:ge(["vue-flow__panel",o.value]),style:Ze({pointerEvents:U(n)?"none":"all"})},[Ue(s.$slots,"default")],6))}});var tn=(e=>(e.Lines="lines",e.Dots="dots",e))(tn||{});const Bf=function({dimensions:e,size:t,color:n}){return $e("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},Ff=function({radius:e,color:t}){return $e("circle",{cx:e,cy:e,r:e,fill:t})};tn.Lines+"",tn.Dots+"";const $w={[tn.Dots]:"#81818a",[tn.Lines]:"#eee"},Mw=["id","x","y","width","height","patternTransform"],Aw={key:2,height:"100",width:"100"},kw=["fill"],Ow=["x","y","fill"],Dw={name:"Background",compatConfig:{MODE:3}},Pw=He({...Dw,props:{id:{},variant:{default:()=>tn.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(e){const{id:t,viewport:n}=Be(),o=ie(()=>{const i=n.value.zoom,[l,a]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],c=[l*i||1,a*i||1],u=e.size*i,[f,g]=Array.isArray(e.offset)?e.offset:[e.offset,e.offset],v=[f*i||1+c[0]/2,g*i||1+c[1]/2];return{scaledGap:c,offset:v,size:u}}),s=Pe(()=>`pattern-${t}${e.id?`-${e.id}`:""}`),r=Pe(()=>e.color||e.patternColor||$w[e.variant||tn.Dots]);return(i,l)=>(F(),G("svg",{class:"vue-flow__background vue-flow__container",style:Ze({height:`${i.height>100?100:i.height}%`,width:`${i.width>100?100:i.width}%`})},[Ue(i.$slots,"pattern-container",{id:s.value},()=>[p("pattern",{id:s.value,x:U(n).x%o.value.scaledGap[0],y:U(n).y%o.value.scaledGap[1],width:o.value.scaledGap[0],height:o.value.scaledGap[1],patternTransform:`translate(-${o.value.offset[0]},-${o.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[Ue(i.$slots,"pattern",{},()=>[i.variant===U(tn).Lines?(F(),Ve(U(Bf),{key:0,size:i.lineWidth,color:r.value,dimensions:o.value.scaledGap},null,8,["size","color","dimensions"])):i.variant===U(tn).Dots?(F(),Ve(U(Ff),{key:1,color:r.value,radius:o.value.size/2},null,8,["color","radius"])):fe("",!0),i.bgColor?(F(),G("svg",Aw,[p("rect",{width:"100%",height:"100%",fill:i.bgColor},null,8,kw)])):fe("",!0)])],8,Mw)]),p("rect",{x:i.x,y:i.y,width:"100%",height:"100%",fill:`url(#${s.value})`},null,8,Ow),Ue(i.$slots,"default",{id:s.value})],4))}}),Lw={name:"ControlButton",compatConfig:{MODE:3}},Rw=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n},Bw={type:"button",class:"vue-flow__controls-button"};function Fw(e,t,n,o,s,r){return F(),G("button",Bw,[Ue(e.$slots,"default")])}const Ps=Rw(Lw,[["render",Fw]]),zw={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Vw=p("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),Hw=[Vw];function Uw(e,t){return F(),G("svg",zw,Hw)}const jw={render:Uw},Gw={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Yw=p("path",{d:"M0 0h32v4.2H0z"},null,-1),Kw=[Yw];function Ww(e,t){return F(),G("svg",Gw,Kw)}const Xw={render:Ww},qw={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Zw=p("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),Jw=[Zw];function Qw(e,t){return F(),G("svg",qw,Jw)}const e_={render:Qw},t_={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},n_=p("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),o_=[n_];function s_(e,t){return F(),G("svg",t_,o_)}const r_={render:s_},i_={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},l_=p("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),a_=[l_];function u_(e,t){return F(),G("svg",i_,a_)}const c_={render:u_},d_={name:"Controls",compatConfig:{MODE:3}},f_=He({...d_,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>af.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:o,elementsSelectable:s,setInteractive:r,zoomIn:i,zoomOut:l,fitView:a,viewport:c,minZoom:u,maxZoom:f}=Be(),g=Pe(()=>n.value||o.value||s.value),v=Pe(()=>c.value.zoom<=u.value),S=Pe(()=>c.value.zoom>=f.value);function x(){i(),t("zoomIn")}function N(){l(),t("zoomOut")}function C(){a(e.fitViewParams),t("fitView")}function A(){r(!g.value),t("interactionChange",!g.value)}return(m,w)=>(F(),Ve(U(Tw),{class:"vue-flow__controls",position:m.position},{default:ht(()=>[Ue(m.$slots,"top"),m.showZoom?(F(),G(ue,{key:0},[Ue(m.$slots,"control-zoom-in",{},()=>[oe(Ps,{class:"vue-flow__controls-zoomin",disabled:S.value,onClick:x},{default:ht(()=>[Ue(m.$slots,"icon-zoom-in",{},()=>[(F(),Ve(eo(U(jw))))])]),_:3},8,["disabled"])]),Ue(m.$slots,"control-zoom-out",{},()=>[oe(Ps,{class:"vue-flow__controls-zoomout",disabled:v.value,onClick:N},{default:ht(()=>[Ue(m.$slots,"icon-zoom-out",{},()=>[(F(),Ve(eo(U(Xw))))])]),_:3},8,["disabled"])])],64)):fe("",!0),m.showFitView?Ue(m.$slots,"control-fit-view",{key:1},()=>[oe(Ps,{class:"vue-flow__controls-fitview",onClick:C},{default:ht(()=>[Ue(m.$slots,"icon-fit-view",{},()=>[(F(),Ve(eo(U(e_))))])]),_:3})]):fe("",!0),m.showInteractive?Ue(m.$slots,"control-interactive",{key:2},()=>[m.showInteractive?(F(),Ve(Ps,{key:0,class:"vue-flow__controls-interactive",onClick:A},{default:ht(()=>[g.value?Ue(m.$slots,"icon-unlock",{key:0},()=>[(F(),Ve(eo(U(c_))))]):fe("",!0),g.value?fe("",!0):Ue(m.$slots,"icon-lock",{key:1},()=>[(F(),Ve(eo(U(r_))))])]),_:3})):fe("",!0)]):fe("",!0),Ue(m.$slots,"default")]),_:3},8,["position"]))}}),p_={class:"nodrag"},h_=["draggable"],g_={class:"text-gray-500/80 group-hover/field:text-gray-300 transition-colors cursor-grab active:cursor-grabbing",title:"Drag to reorder field"},m_={key:0,class:"text-xs text-yellow-500 font-mono"},v_={key:1,class:"flex-1 mr-2"},y_={key:2,class:"text-[13px] text-gray-100 truncate select-none"},b_={key:3,class:"text-[10px] text-red-500 font-bold"},x_={class:"flex items-center gap-2 ml-2"},w_={key:0,class:"relative"},Ls=16,__={__name:"FieldItem",props:{field:Object,collectionId:String,parentId:{type:String,default:null},index:{type:Number,default:0},isLast:{type:Boolean,default:!1},level:{type:Number,default:0},ancestorLastFlags:{type:Array,default:()=>[]}},setup(e){const t=e,n=It(),o=ie(()=>n.selectedItemId===t.field.id),s=ie(()=>`${t.level*Ls+16}px`),r=ie(()=>{const I=String(t.field?.type||"").trim().toUpperCase(),H=new Set(["NUMBER","INT","INTEGER","BIGINT","TINYINT","SMALLINT","DECIMAL","FLOAT","DOUBLE","REAL","DOUBLE PRECISION","SERIAL","BIGSERIAL"]),X=new Set(["STRING","VARCHAR","TEXT","CHAR","LONGTEXT"]),B=new Set(["DATE","DATETIME","TIMESTAMP","TIME","YEAR","INTERVAL"]),R=new Set(["BOOLEAN"]),V=new Set(["ARRAY","OBJECT","MAP","MIXED","JSON","JSONB","XML"]),z=new Set(["BUFFER","BLOB","BYTEA"]),T=new Set(["OBJECTID","UUID"]),Q=new Set(["ENUM"]);return T.has(I)?"text-amber-400":X.has(I)?"text-blue-400":H.has(I)?"text-violet-400":B.has(I)?"text-emerald-400":R.has(I)?"text-pink-400":V.has(I)?"text-cyan-300":z.has(I)?"text-orange-300":Q.has(I)?"text-fuchsia-300":"text-gray-300"}),i=ye(!1),l=ye(""),a=ye(null),c=ye(!1),u=ye(!1),f=()=>{i.value=!0,l.value=t.field.name,setTimeout(()=>{a.value?.focus()},0)},g=()=>{l.value.trim()&&n.updateFieldProps(t.collectionId,t.field.id,{name:l.value.trim()}),i.value=!1},v=()=>{n.selectItem(t.field.id,"field",t.collectionId)},S=()=>{const I=`f-${Date.now()}`,H=Md(n.activeDatabaseType);n.addChildField(t.collectionId,t.field.id,{id:I,name:"childField",type:H}),n.selectItem(I,"field",t.collectionId)},x=I=>{if(u.value){I.preventDefault();return}I.dataTransfer.effectAllowed="move",I.dataTransfer.setData("application/json",JSON.stringify({fieldId:t.field.id,index:t.index,parentId:t.parentId,collectionId:t.collectionId})),I.stopPropagation()},N=I=>{I.preventDefault(),I.dataTransfer.dropEffect="move",c.value=!0},C=I=>{c.value=!1},A=I=>{I.preventDefault(),I.stopPropagation(),c.value=!1;try{const H=JSON.parse(I.dataTransfer.getData("application/json"));H.collectionId===t.collectionId&&H.parentId===t.parentId&&H.index!==t.index&&n.reorderField(t.collectionId,t.parentId,H.index,t.index)}catch(H){console.error("Drop error:",H)}},m=()=>{u.value=!0},w=()=>{requestAnimationFrame(()=>{u.value=!1})};return ct(()=>{window.addEventListener("mouseup",w),window.addEventListener("touchend",w)}),In(()=>{window.removeEventListener("mouseup",w),window.removeEventListener("touchend",w)}),(I,H)=>{const X=dl("FieldItem",!0);return F(),G("div",p_,[p("div",{onClick:dt(v,["stop"]),class:ge(["relative group/field flex items-center justify-between text-sm py-1.5 pr-2.5 rounded cursor-pointer border-2 transition-all duration-150",[o.value?"bg-[#2a2a2a] border-emerald-500":"border-transparent hover:bg-[#2a2a2a]",c.value?"border-t-emerald-500 bg-[#2a2a2a]/50 scale-[1.02]":""]]),style:Ze({paddingLeft:s.value}),draggable:!u.value,onDragstart:x,onDragover:N,onDragleave:C,onDrop:A},[(F(!0),G(ue,null,Ee(e.ancestorLastFlags,(B,R)=>zn((F(),G("div",{key:R,class:"absolute top-0 bottom-0 w-px bg-[#404040]",style:Ze({left:`${R*Ls+22}px`})},null,4)),[[nd,!B]])),128)),e.level>0?(F(),G(ue,{key:0},[p("div",{class:"absolute w-px bg-[#404040]",style:Ze({left:`${(e.level-1)*Ls+22}px`,top:"0",height:e.isLast?"50%":"100%"})},null,4),p("div",{class:"absolute h-px bg-[#404040]",style:Ze({left:`${(e.level-1)*Ls+22}px`,top:"50%",width:"8px"})},null,4)],64)):fe("",!0),oe(U(wo),{type:"target",position:U(pe).Left,id:e.field.id,onMousedown:dt(m,["stop"]),onTouchstart:dt(m,["stop"]),class:"!w-2 !h-2 !bg-gray-500 !-left-2.5 opacity-0 group-hover/field:opacity-100 transition-opacity"},null,8,["position","id"]),p("div",{class:"flex items-center gap-2 flex-1 min-w-0",onDblclick:dt(f,["stop"])},[p("span",g_,[oe(U(xd),{size:13})]),e.field.key?(F(),G("span",m_,"PK")):fe("",!0),i.value?(F(),G("div",v_,[zn(p("input",{ref_key:"nameInput",ref:a,"onUpdate:modelValue":H[0]||(H[0]=B=>l.value=B),onBlur:g,onKeydown:Dr(g,["enter"]),onClick:H[1]||(H[1]=dt(()=>{},["stop"])),class:"w-full bg-[#1e1e1e] text-gray-200 font-bold px-1 py-0.5 rounded border border-emerald-500 focus:outline-none text-xs"},null,544),[[yl,l.value]])])):(F(),G("span",y_,de(e.field.name),1)),e.field.required?(F(),G("span",b_,"*")):fe("",!0)],32),p("div",x_,[p("span",{class:ge(["w-[82px] text-right text-[11px] font-semibold font-mono uppercase tracking-wider",r.value])},de(e.field.type),3),e.field.type==="Object"||e.field.type==="Array"?(F(),G("button",{key:0,onClick:dt(S,["stop"]),class:"p-0.5 rounded hover:bg-emerald-600/20 text-gray-400 hover:text-emerald-400 opacity-0 group-hover/field:opacity-100 transition-opacity"},[oe(U(sr),{size:13})])):fe("",!0)]),oe(U(wo),{type:"source",position:U(pe).Right,id:e.field.id,onMousedown:dt(m,["stop"]),onTouchstart:dt(m,["stop"]),class:"!w-2 !h-2 !bg-emerald-500 !-right-2.5 opacity-0 group-hover/field:opacity-100 transition-opacity"},null,8,["position","id"])],46,h_),e.field.children&&e.field.children.length>0?(F(),G("div",w_,[oe(vl,{name:"field-list"},{default:ht(()=>[(F(!0),G(ue,null,Ee(e.field.children,(B,R)=>(F(),Ve(X,{key:B.id,field:B,collectionId:e.collectionId,parentId:e.field.id,index:R,isLast:R===e.field.children.length-1,level:e.level+1,ancestorLastFlags:[...e.ancestorLastFlags,e.isLast]},null,8,["field","collectionId","parentId","index","isLast","level","ancestorLastFlags"]))),128))]),_:1})])):fe("",!0)])}}},S_=ms(__,[["__scopeId","data-v-a677c2d1"]]),E_={class:"flex items-center gap-2 min-w-0 flex-1 mr-2"},C_={class:"w-6 h-6 rounded-md bg-emerald-500/15 border border-emerald-500/30 flex items-center justify-center text-emerald-400"},I_={key:0,class:"flex-1 min-w-0"},N_={key:1,class:"min-w-0 flex-1"},T_={class:"font-bold text-emerald-300 truncate block leading-tight select-none"},$_={class:"text-[10px] text-gray-500"},M_={key:0,class:"flex gap-1"},A_={class:"p-1 rounded text-gray-500 hover:text-white hover:bg-gray-700/70 transition-colors"},k_={class:"px-2.5 py-2.5 space-y-1.5 nodrag bg-[#1a1a1f]"},O_={class:"p-2 border-t border-gray-700/80 bg-[#212127]"},D_={__name:"CollectionNode",props:{data:{type:Object,required:!0},id:{type:String,required:!0},selected:{type:Boolean,default:!1}},setup(e){const t=e,n=It(),{updateNodeInternals:o,findNode:s,addSelectedNodes:r,removeSelectedNodes:i}=Be(),l=ye(!1),a=ye(""),c=ye(null);let u=null;const f=()=>{l.value=!0,a.value=t.data.label,setTimeout(()=>{c.value?.focus()},0)},g=()=>{a.value.trim()&&n.updateCollectionProps(t.id,{label:a.value.trim()}),l.value=!1},v=()=>{const C=new Set(n.activeCollections.filter(w=>w.selected).map(w=>w.id)),A=[],m=[];n.activeCollections.forEach(w=>{const I=s(w.id);if(I){if(C.has(w.id)){I.selected||A.push(I);return}I.selected&&m.push(I)}}),m.length>0&&i(m),A.length>0&&r(A)},S=C=>{const A=C.shiftKey||C.metaKey||C.ctrlKey;if(s(t.id)){if(A){const w=n.activeCollections.filter(H=>H.selected).length;if(!!n.activeCollections.find(H=>H.id===t.id)?.selected&&w===1){n.selectItem(t.id,"collection"),v();return}n.setCollectionSelection(t.id,!0),v();return}n.setCollectionSelection(t.id,!1),v()}},x=()=>{const C=`f-${Date.now()}`,A=Md(n.activeDatabaseType);n.addField(t.id,{id:C,name:"newField",type:A}),n.selectItem(C,"field",t.id)},N=()=>{u&&(cancelAnimationFrame(u),u=null);const C=180,A=performance.now(),m=()=>{o([t.id]),performance.now()-A<C?u=requestAnimationFrame(m):u=null};u=requestAnimationFrame(m)};return _e(()=>t.data.fields,async()=>{await ut(),N()},{deep:!0}),In(()=>{u&&cancelAnimationFrame(u)}),(C,A)=>(F(),G("div",{onClick:dt(S,["stop"]),class:ge(["min-w-[276px] bg-gradient-to-b from-[#1f1f23] to-[#17171a] rounded-xl border shadow-[0_8px_28px_rgba(0,0,0,0.35)] overflow-hidden transition-all duration-200 group",e.selected||U(n).selectedItemId===e.id&&U(n).selectedItemType==="collection"?"border-emerald-400 ring-1 ring-emerald-400/90 shadow-[0_8px_28px_rgba(16,185,129,0.16)]":"border-gray-700/90 hover:border-gray-500"])},[A[2]||(A[2]=p("div",{class:"h-0.5 bg-gradient-to-r from-emerald-400/80 via-cyan-400/70 to-blue-400/60"},null,-1)),p("div",{class:"px-3 py-2 bg-[#27272d] border-b border-gray-700/80 flex justify-between items-center handle drag-handle cursor-grab active:cursor-grabbing",onDblclick:dt(f,["stop"])},[p("div",E_,[p("div",C_,[oe(U(yd),{size:13})]),l.value?(F(),G("div",I_,[zn(p("input",{ref_key:"titleInput",ref:c,"onUpdate:modelValue":A[0]||(A[0]=m=>a.value=m),onBlur:g,onKeydown:Dr(g,["enter"]),class:"w-full bg-[#1e1e1e] text-emerald-300 font-bold px-2 py-1 rounded border border-emerald-500 focus:outline-none text-sm"},null,544),[[yl,a.value]])])):(F(),G("div",N_,[p("span",T_,de(e.data.label),1),p("span",$_,de(e.data.fields.length)+" fields",1)]))]),l.value?fe("",!0):(F(),G("div",M_,[p("button",A_,[oe(U(fm),{size:14})])]))],32),p("div",k_,[oe(vl,{name:"field-list"},{default:ht(()=>[(F(!0),G(ue,null,Ee(e.data.fields,(m,w)=>(F(),Ve(S_,{key:m.id,field:m,collectionId:e.id,parentId:null,index:w,isLast:w===e.data.fields.length-1,level:0},null,8,["field","collectionId","index","isLast"]))),128))]),_:1})]),p("div",O_,[p("button",{onClick:dt(x,["stop"]),class:"w-full flex items-center justify-center gap-1 py-1.5 text-xs font-medium text-gray-300 hover:text-emerald-200 bg-[#2a2a33] hover:bg-[#30303a] border border-gray-600/60 rounded-md transition-colors"},[oe(U(sr),{size:14}),A[1]||(A[1]=Ye(" Add Field ",-1))])])],2))}},P_=ms(D_,[["__scopeId","data-v-5d8c1a09"]]),L_={key:0,class:"px-2 py-1 text-xs font-bold text-gray-500 uppercase border-b border-gray-700 mb-1"},R_={key:1,class:"px-2 py-1 text-xs font-bold text-gray-500 uppercase border-b border-gray-700 mb-1"},B_={key:2,class:"px-2 py-1 text-xs font-bold text-gray-500 uppercase border-b border-gray-700 mb-1"},F_={__name:"ContextMenu",props:{x:{type:Number,required:!0},y:{type:Number,required:!0},type:{type:String,required:!0},id:{type:String,default:null}},emits:["close","delete","duplicate"],setup(e,{emit:t}){const n=t,o=ye(null),s=It(),r=ie(()=>Nn(s.activeDatabaseType)),i=l=>{o.value&&!o.value.contains(l.target)&&n("close")};return ct(()=>{console.log("[ContextMenu] Component Mounted"),setTimeout(()=>{console.log("[ContextMenu] Adding global listeners"),document.addEventListener("click",i),document.addEventListener("contextmenu",i)},100)}),In(()=>{console.log("[ContextMenu] Component Unmounted"),document.removeEventListener("click",i),document.removeEventListener("contextmenu",i)}),(l,a)=>(F(),Ve(Fp,{to:"body"},[(F(),G("div",{key:0,ref_key:"menuRef",ref:o,class:"fixed z-[9999] bg-[#1e1e1e] border border-gray-700 rounded-lg shadow-xl py-1 w-48 text-sm",style:Ze({top:`${e.y}px`,left:`${e.x}px`})},[e.type==="collection"?(F(),G("div",L_,de(r.value.singular)+" Actions ",1)):e.type==="edge"?(F(),G("div",R_," Relation Actions ")):e.type==="canvas"?(F(),G("div",B_," Canvas Actions ")):fe("",!0),e.type==="canvas"?(F(),G("button",{key:3,onClick:a[0]||(a[0]=c=>l.$emit("create")),class:"w-full text-left px-3 py-2 hover:bg-[#2a2a2a] text-emerald-400 hover:text-emerald-300 flex items-center gap-2 transition-colors"},[oe(U(vd),{size:14}),Ye(" Create "+de(r.value.singular),1)])):fe("",!0),e.type!=="canvas"?(F(),G("button",{key:4,onClick:a[1]||(a[1]=c=>l.$emit("delete",e.id)),class:"w-full text-left px-3 py-2 hover:bg-red-900/30 text-red-400 hover:text-red-300 flex items-center gap-2 transition-colors"},[oe(U(Ln),{size:14}),a[2]||(a[2]=Ye(" Delete ",-1))])):fe("",!0)],4))]))}},z_={class:"relative h-full w-full bg-[#1a1a1a]"},V_="#64748b",H_={__name:"DiagramCanvas",setup(e){const t=It(),{onConnect:n,addEdges:o,onPaneClick:s,onEdgeClick:r,onNodeContextMenu:i,onEdgeContextMenu:l,onPaneContextMenu:a,project:c,getSelectedNodes:u,getSelectedEdges:f,findEdge:g,addSelectedEdges:v,removeSelectedEdges:S}=Be(),x={collection:_n(P_)},N=ie({get:()=>t.activeCollections,set:O=>{const P=t.activeDatabaseId,d=t.collections.filter(J=>J.databaseId!==P),h=(O||[]).map(J=>J?.databaseId===P?J:{...J,databaseId:P});t.collections=[...d,...h]}}),C=(O=[])=>{const P=t.activeDatabaseId,d=new Set(t.activeCollections.map(h=>h.id));return(O||[]).filter(h=>h&&h.source&&h.target&&h.sourceHandle&&h.targetHandle).filter(h=>d.has(h.source)&&d.has(h.target)).filter(h=>B(h.source,h.sourceHandle)).filter(h=>B(h.target,h.targetHandle)).map(h=>h?.databaseId===P?h:{...h,databaseId:P})},A=ie({get:()=>t.activeEdges,set:O=>{const P=t.activeDatabaseId,d=t.edges.filter(J=>J.databaseId!==P),h=C(O);t.edges=[...d,...h]}}),m={id:"#fbbf24",string:"#60a5fa",number:"#a78bfa",date:"#34d399",boolean:"#f472b6",json:"#67e8f9",binary:"#fdba74",enum:"#e879f9",default:"#64748b"},w={ONE_TO_ONE:"one_to_one",ONE_TO_MANY:"one_to_many",MANY_TO_MANY:"many_to_many"},I=(O,P)=>{for(const d of O||[]){if(d.id===P)return d;if(d.children?.length){const h=I(d.children,P);if(h)return h}}return null},H=(O,P)=>{const d=t.collections.find(J=>J.id===O);return!d||!P?null:I(d.data?.fields||[],P)?.type||null},X=O=>{const P=String(O||"").trim().toUpperCase(),d=new Set(["NUMBER","INT","INTEGER","BIGINT","TINYINT","SMALLINT","DECIMAL","FLOAT","DOUBLE","REAL","DOUBLE PRECISION","SERIAL","BIGSERIAL"]),h=new Set(["STRING","VARCHAR","TEXT","CHAR","LONGTEXT"]),J=new Set(["DATE","DATETIME","TIMESTAMP","TIME","YEAR","INTERVAL"]),ne=new Set(["BOOLEAN"]),he=new Set(["ARRAY","OBJECT","MAP","MIXED","JSON","JSONB","XML"]),ve=new Set(["BUFFER","BLOB","BYTEA"]),le=new Set(["OBJECTID","UUID"]),se=new Set(["ENUM"]);return le.has(P)?m.id:h.has(P)?m.string:d.has(P)?m.number:J.has(P)?m.date:ne.has(P)?m.boolean:he.has(P)?m.json:ve.has(P)?m.binary:se.has(P)?m.enum:m.default},B=(O,P)=>P?!!H(O,P):!1,R=O=>{const P=H(O.source,O.sourceHandle),d=X(P)||V_,h=O.relationType||w.ONE_TO_MANY;return h===w.ONE_TO_ONE?{label:"1-1",style:{stroke:d,strokeWidth:2,strokeDasharray:"0"},markerStart:{type:qt.Arrow,color:d,width:14,height:14},markerEnd:{type:qt.Arrow,color:d,width:14,height:14}}:h===w.MANY_TO_MANY?{label:"N-N",style:{stroke:d,strokeWidth:2,strokeDasharray:"3 3"},markerStart:{type:qt.ArrowClosed,color:d,width:18,height:18},markerEnd:{type:qt.ArrowClosed,color:d,width:18,height:18}}:{label:"1-N",style:{stroke:d,strokeWidth:2,strokeDasharray:"6 4"},markerStart:{type:qt.Arrow,color:d,width:14,height:14},markerEnd:{type:qt.ArrowClosed,color:d,width:18,height:18}}},V=()=>{t.edges.forEach(O=>{const P=R(O),d=P.style,h=O.style||{};(h.stroke!==d.stroke||h.strokeWidth!==d.strokeWidth||h.strokeDasharray!==d.strokeDasharray)&&(O.style={...h,...d}),O.label!==P.label&&(O.label=P.label),(O.labelStyle?.color!=="#e5e7eb"||O.labelStyle?.fontSize!==11||O.labelStyle?.fontWeight!==700)&&(O.labelStyle={color:"#e5e7eb",fontSize:11,fontWeight:700}),(O.labelBgStyle?.fill!=="#1f2937"||O.labelBgStyle?.fillOpacity!==.95)&&(O.labelBgStyle={fill:"#1f2937",fillOpacity:.95}),(O.labelBgPadding?.[0]!==4||O.labelBgPadding?.[1]!==2)&&(O.labelBgPadding=[4,2]);const ne=O.markerStart?.type||null,he=O.markerEnd?.type||null;P.markerStart?(ne!==P.markerStart.type||O.markerStart?.color!==P.markerStart.color)&&(O.markerStart=P.markerStart):O.markerStart&&(O.markerStart=void 0),(he!==P.markerEnd.type||O.markerEnd?.color!==P.markerEnd.color)&&(O.markerEnd=P.markerEnd),O.animated!==!1&&(O.animated=!1)})},z=ye({visible:!1,x:0,y:0,type:null,id:null}),T=ye({id:null,ts:0}),Q=(O,P,d)=>{O.preventDefault(),O.stopPropagation(),z.value={visible:!0,x:O.clientX,y:O.clientY,type:P,id:d}},M=()=>{z.value.visible=!1},W=(O,P)=>{if(O==="delete")z.value.type==="collection"?t.removeCollection(P):z.value.type==="edge"&&t.removeEdge(P);else if(O==="create"){const{x:d,y:h}=c({x:z.value.x,y:z.value.y}),J=`col-${Date.now()}`,he={..._l(t.activeDatabaseType).getDefaultField(),id:`f-${Date.now()}-1`},ve=$d(t.activeDatabaseType,t.activeCollections.map(se=>se?.data?.label)),le={id:J,type:"collection",position:{x:d,y:h},data:{label:ve,fields:[he]}};t.addCollection(le)}M()};n(O=>{!O.source||!O.target||!O.sourceHandle||!O.targetHandle||B(O.source,O.sourceHandle)&&B(O.target,O.targetHandle)&&o([{...O,databaseId:t.activeDatabaseId,relationType:w.ONE_TO_MANY,onDelete:"",onUpdate:"",constraintName:"",animated:!1}])}),s(()=>{t.clearSelections(),M()}),r(O=>{if(O.event.shiftKey||O.event.metaKey||O.event.ctrlKey){const J=g(O.edge.id);if(J){const ne=f.value.some(ve=>ve.id===J.id),he=f.value.length;if(ne&&he===1){t.selectItem(J.id,"edge"),M();return}ne?S([J]):v([J])}M();return}const d=Date.now(),h=T.value.id===O.edge.id&&d-T.value.ts<320;if(T.value={id:O.edge.id,ts:d},h){const J=O.edge.relationType||w.ONE_TO_MANY,ne=J===w.ONE_TO_MANY?w.ONE_TO_ONE:J===w.ONE_TO_ONE?w.MANY_TO_MANY:w.ONE_TO_MANY;t.updateEdgeProps(O.edge.id,{relationType:ne})}t.selectItem(O.edge.id,"edge"),M()}),i(O=>{Q(O.event,"collection",O.node.id)}),l(O=>{Q(O.event,"edge",O.edge.id)}),a(O=>{Q(O,"canvas",null)}),_e([u,f],([O,P])=>{if(t.selectedItemType==="field"){if(t.activeCollections.some(J=>J.id===t.selectedCollectionId))return;t.selectItem(null,null,null);return}if(O.length+P.length!==1){t.selectItem(null,null,null);return}if(O.length===1){t.selectItem(O[0].id,"collection");return}P.length===1&&t.selectItem(P[0].id,"edge")},{deep:!0}),_e(()=>t.collections,()=>{t.pruneInvalidEdges(t.activeDatabaseId),V(),t.bridgeMode==="remote"&&t.saveLayout()},{deep:!0}),_e(()=>t.edges,()=>{V()},{deep:!0});const L=O=>{if(!(["INPUT","TEXTAREA"].includes(document.activeElement.tagName)||document.activeElement.isContentEditable)){if(O.key==="Delete"||O.key==="Backspace"){const P=u.value.map(h=>h.id),d=f.value.map(h=>h.id);if(P.length||d.length){P.forEach(h=>t.removeCollection(h)),d.forEach(h=>t.removeEdge(h));return}t.selectedItemId&&(t.selectedItemType==="collection"?t.removeCollection(t.selectedItemId):t.selectedItemType==="edge"&&t.removeEdge(t.selectedItemId))}if(O.ctrlKey||O.metaKey){const P=O.key.toLowerCase();if(P==="z"){O.preventDefault(),O.shiftKey?t.redo():t.undo();return}if(P==="y"){O.preventDefault(),t.redo();return}P==="c"?t.selectedItemId&&t.selectedItemType==="collection"&&t.copyNode(t.selectedItemId):P==="v"&&t.pasteNode()}}};return ct(()=>{t.pruneInvalidEdges(t.activeDatabaseId),V(),window.addEventListener("keydown",L)}),In(()=>{window.removeEventListener("keydown",L)}),(O,P)=>(F(),G("div",z_,[P[4]||(P[4]=$h('<div class="absolute bottom-4 left-4 z-20 w-52 rounded-lg border border-gray-700 bg-[#1e1e1e]/90 p-3 backdrop-blur"><p class="mb-2 text-[10px] font-semibold uppercase tracking-wide text-gray-400">Relationship Legend</p><div class="space-y-1.5 text-xs text-gray-300"><div class="flex items-center gap-2"><span class="inline-block h-px w-8 bg-gray-300"></span><span>1-1</span></div><div class="flex items-center gap-2"><span class="inline-block h-px w-8 border-t border-dashed border-gray-300"></span><span>1-N</span></div><div class="flex items-center gap-2"><span class="inline-block h-px w-8 border-t border-dotted border-gray-300"></span><span>N-N</span></div></div></div>',1)),(F(),Ve(U(Iw),{key:U(t).activeDatabaseId,nodes:N.value,"onUpdate:nodes":P[2]||(P[2]=d=>N.value=d),edges:A.value,"onUpdate:edges":P[3]||(P[3]=d=>A.value=d),"node-types":x,"multi-selection-key-code":["Meta","Control","Shift"],class:"h-full w-full","default-viewport":{zoom:1},"min-zoom":.2,"max-zoom":4},{default:ht(()=>[oe(U(Pw),{"pattern-color":"#333",gap:20}),oe(U(f_)),z.value.visible?(F(),Ve(F_,{key:0,x:z.value.x,y:z.value.y,type:z.value.type,id:z.value.id,onClose:M,onDelete:P[0]||(P[0]=d=>W("delete",d)),onCreate:P[1]||(P[1]=()=>W("create"))},null,8,["x","y","type","id"])):fe("",!0)]),_:1},8,["nodes","edges"]))]))}},U_={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4"},j_={class:"bg-[#1e1e1e] border border-gray-700 rounded-lg shadow-2xl w-full max-w-5xl h-[85vh] flex flex-col overflow-hidden"},G_={class:"px-6 py-4 border-b border-gray-700 flex justify-between items-center gap-3 bg-[#252525]"},Y_={class:"flex min-w-0 items-center gap-3"},K_={key:0,class:"flex items-center gap-2"},W_=["value"],X_={class:"flex items-center gap-3"},q_={class:"flex-1 flex overflow-hidden"},Z_={key:0,class:"w-64 border-r border-gray-700 bg-[#1a1a1a] flex flex-col"},J_={class:"flex-1 overflow-y-auto p-2 space-y-1"},Q_=["checked","onChange"],eS={class:"text-sm text-gray-300 truncate"},tS={class:"flex-1 bg-[#1e1e1e] overflow-hidden relative"},nS={class:"absolute inset-0 flex flex-col items-center justify-center z-10 bg-[#1e1e1e]"},oS={class:"px-6 py-4 border-t border-gray-700 bg-[#252525] flex justify-end gap-3"},sS={__name:"CodeExport",props:{isOpen:Boolean,collectionId:{type:String,default:null},collectionIds:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:t}){const n=e,o=It(),s=zt(),r=ie(()=>_l(o.activeDatabaseType)),i=ie(()=>r.value.getExportTargets()),l=ye(r.value.getDefaultExportTarget()),a=ye(new Set),c=()=>{const B=o.activeDatabaseId;return o.collections.filter(V=>V.databaseId===B).filter(V=>a.value.has(V.id))},u=ie(()=>o.collections.filter(B=>B.databaseId===o.activeDatabaseId)),f=B=>{a.value.has(B)?a.value.delete(B):a.value.add(B)},g=()=>{a.value=new Set(u.value.map(B=>B.id))},v=()=>{a.value.clear()},S=ie(()=>{const B=c();return B.length===0?"-- No tables selected for export":r.value.generateCode({target:l.value,store:o,collectionId:n.collectionId,collectionIds:n.collectionIds,collections:B})}),x=ye(null),N=ye(!0),C=ie(()=>r.value.getLanguage(l.value)),A=ye(!0),m=()=>{A.value=!A.value},w=()=>{const B=u.value;n.collectionIds.length>0?a.value=new Set(n.collectionIds):n.collectionId?a.value=new Set([n.collectionId]):a.value=new Set(B.map(R=>R.id))};let I=null;_e([r,i],()=>{new Set(i.value.map(R=>R.value)).has(l.value)||(l.value=r.value.getDefaultExportTarget())},{immediate:!0});const H=async()=>{try{await navigator.clipboard.writeText(S.value),s.showToast("Code copied to clipboard.","success")}catch{s.showToast("Failed to copy code.","error")}},X=()=>{if(I)return;N.value=!0;const B=()=>{require.config({paths:{vs:"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs"}}),require(["vs/editor/editor.main"],function(){N.value=!1,x.value&&(I&&I.dispose(),I=monaco.editor.create(x.value,{value:S.value,language:C.value,theme:"vs-dark",readOnly:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,padding:{top:16}}))})};if(window.monaco&&window.monaco.editor){B();return}if(document.getElementById("monaco-loader")){if(window.require)B();else{const V=setInterval(()=>{window.require&&(clearInterval(V),B())},100)}return}const R=document.createElement("script");R.id="monaco-loader",R.src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js",R.onload=B,document.body.appendChild(R)};return _e(()=>n.isOpen,B=>{B?(w(),setTimeout(()=>{X(),I&&I.setValue(S.value)},100)):I&&(I.dispose(),I=null)}),_e(S,B=>{I&&(I.setValue(B),monaco.editor.setModelLanguage(I.getModel(),C.value))}),In(()=>{I&&I.dispose()}),(B,R)=>e.isOpen?(F(),G("div",U_,[p("div",j_,[p("div",G_,[p("div",Y_,[R[4]||(R[4]=p("h2",{class:"text-xl font-bold text-white"},"Export Schema",-1)),i.value.length>1?(F(),G("div",K_,[R[3]||(R[3]=p("span",{class:"text-xs uppercase tracking-wide text-gray-400"},"Target",-1)),zn(p("select",{"onUpdate:modelValue":R[0]||(R[0]=V=>l.value=V),class:"min-w-0 bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-xs text-white focus:border-emerald-500 focus:outline-none"},[(F(!0),G(ue,null,Ee(i.value,V=>(F(),G("option",{key:V.value,value:V.value},de(V.label),9,W_))),128))],512),[[gg,l.value]])])):fe("",!0)]),p("div",X_,[p("button",{onClick:m,class:"text-xs px-2 py-1 rounded bg-[#2a2a2a] border border-gray-600 text-gray-300 hover:text-white"},de(A.value?"Hide Tables":"Show Tables"),1),p("button",{onClick:R[1]||(R[1]=V=>B.$emit("close")),class:"text-gray-400 hover:text-white transition-colors"},[oe(U(Lr),{size:20})])])]),p("div",q_,[A.value?(F(),G("div",Z_,[p("div",{class:"p-3 border-b border-gray-700 flex items-center justify-between gap-2"},[R[5]||(R[5]=p("span",{class:"text-xs font-bold text-gray-500 uppercase"},"Select Tables",-1)),p("div",{class:"flex gap-2"},[p("button",{onClick:g,class:"text-[10px] text-emerald-400 hover:underline"},"All"),p("button",{onClick:v,class:"text-[10px] text-red-400 hover:underline"},"None")])]),p("div",J_,[(F(!0),G(ue,null,Ee(u.value,V=>(F(),G("label",{key:V.id,class:"flex items-center gap-2 p-2 rounded hover:bg-[#2a2a2a] cursor-pointer transition-colors"},[p("input",{type:"checkbox",checked:a.value.has(V.id),onChange:z=>f(V.id),class:"rounded border-gray-600 bg-gray-700 text-emerald-500 focus:ring-emerald-500"},null,40,Q_),p("span",eS,de(V.data.label),1)]))),128))])])):fe("",!0),p("div",tS,[zn(p("div",nS,[...R[6]||(R[6]=[p("div",{class:"w-8 h-8 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin mb-2"},null,-1),p("span",{class:"text-gray-400 text-sm"},"Loading Editor...",-1)])],512),[[nd,N.value]]),p("div",{ref_key:"editorContainer",ref:x,class:ge(["w-full h-full",{"opacity-0":N.value}])},null,2)])]),p("div",oS,[p("button",{onClick:R[2]||(R[2]=V=>B.$emit("close")),class:"px-4 py-2 rounded bg-gray-700 hover:bg-gray-600 text-white font-medium transition-colors"}," Close "),p("button",{onClick:H,class:"px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-700 text-white font-medium flex items-center gap-2 transition-colors"},[oe(U(vd),{size:16}),R[7]||(R[7]=Ye(" Copy Code ",-1))])])])])):fe("",!0)}},rS={class:"w-80 bg-[#1e1e1e] border-l border-gray-700 flex flex-col h-full overflow-y-auto"},iS={key:0,class:"flex-1 flex flex-col items-center justify-center text-gray-500 p-8 text-center"},lS={class:"text-sm"},aS={key:1,class:"p-4 space-y-6"},uS={class:"p-4 bg-[#2a2a2a] rounded space-y-2"},cS={class:"text-xs text-gray-400"},dS={class:"space-y-2"},fS=["value"],pS=["value"],hS={key:0,class:"space-y-3"},gS={class:"grid grid-cols-2 gap-2"},mS=["value"],vS=["value"],yS=["value"],bS=["value"],xS=["value"],wS={class:"pt-4 border-t border-gray-700"},_S={key:2,class:"p-4 space-y-6"},SS={class:"block text-xs font-bold text-gray-500 uppercase mb-2"},ES=["value"],CS={key:0,class:"space-y-3"},IS={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},NS={key:0,class:"space-y-2 pl-2 border-l-2 border-emerald-500/30"},TS=["value"],$S=["value"],MS={key:1,class:"space-y-3"},AS=["value"],kS={class:"grid grid-cols-2 gap-2"},OS=["value"],DS=["value"],PS=["value"],LS=["value"],RS=["value"],BS=["value"],FS=["value"],zS=["value"],VS=["value"],HS=["value"],US=["value"],jS=["value"],GS=["value"],YS=["value"],KS=["value"],WS=["value"],XS={class:"grid grid-cols-2 gap-2"},qS=["value"],ZS={key:0},JS=["value"],QS={class:"grid grid-cols-2 gap-2"},e2=["value"],t2=["value"],n2=["value"],o2=["value"],s2={class:"space-y-2"},r2={class:"grid grid-cols-3 gap-2"},i2=["value"],l2=["value"],a2=["value"],u2=["value"],c2={class:"space-y-2"},d2={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},f2={key:0,class:"grid grid-cols-3 gap-2"},p2=["value"],h2=["value"],g2=["value"],m2=["value"],v2={class:"space-y-2"},y2={class:"grid grid-cols-2 gap-2"},b2=["value"],x2=["value"],w2=["value"],_2=["value"],S2=["value"],E2=["value"],C2=["value"],I2=["value"],N2={class:"pt-4 border-t border-gray-700"},T2={key:3,class:"p-4 space-y-6"},$2=["value"],M2=["value"],A2=["value"],k2={class:"space-y-3"},O2={key:0,class:"grid grid-cols-2 gap-2"},D2={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},P2={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},L2={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},R2={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},B2={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},F2={key:1,class:"grid grid-cols-2 gap-2"},z2={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},V2={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},H2={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},U2={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},j2={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},G2={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},Y2={key:2,class:"grid grid-cols-2 gap-2"},K2=["value"],W2=["value"],X2=["value"],q2={key:3},Z2=["value"],J2={key:0,class:"space-y-3"},Q2={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},eE={key:0,class:"grid grid-cols-2 gap-2"},tE=["value"],nE=["value"],oE=["value"],sE=["value"],rE=["value"],iE=["value"],lE=["value"],aE=["value"],uE=["value"],cE={class:"space-y-2"},dE=["value"],fE=["value"],pE={key:1,class:"space-y-1"},hE=["value"],gE={key:1,class:"space-y-3"},mE={class:"grid grid-cols-1 gap-2"},vE={class:"min-w-0 flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},yE={class:"min-w-0 flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},bE={class:"min-w-0 flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},xE={class:"grid grid-cols-2 gap-2"},wE=["value"],_E=["value"],SE={class:"grid grid-cols-2 gap-2"},EE=["value"],CE=["value"],IE=["value"],NE={class:"space-y-2"},TE=["value","onInput"],$E=["onClick"],ME={key:2,class:"space-y-2"},AE=["value","onInput"],kE=["onClick"],OE={key:3,class:"space-y-2"},DE=["value"],PE={key:4,class:"space-y-3"},LE={class:"grid grid-cols-3 gap-2"},RE=["value"],BE=["value"],FE=["value"],zE={key:5,class:"space-y-3"},VE=["value"],HE=["value"],UE={key:6,class:"space-y-3"},jE={class:"grid grid-cols-2 gap-2"},GE=["value"],YE=["value"],KE={class:"grid grid-cols-3 gap-2"},WE=["value"],XE=["value"],qE=["value"],ZE={key:7,class:"space-y-3"},JE=["value"],QE=["value"],eC=["value"],tC={key:8,class:"space-y-3"},nC=["value"],oC=["value"],sC={key:9,class:"space-y-3"},rC=["value"],iC=["value"],lC={class:"pt-4 border-t border-gray-700"},aC={__name:"PropertiesPanel",setup(e){const t=It(),n=zt(),o=ie(()=>t.selectedItem),s=ie(()=>t.selectedItemType==="collection"),r=ie(()=>t.selectedItemType==="field"),i=ie(()=>t.selectedItemType==="edge"),l=ie(()=>t.activeDatabaseType),a=ie(()=>Nn(l.value)),c=ie(()=>Xg[l.value]||[]),u=[{value:"",label:"Default"},{value:"true",label:"True"},{value:"false",label:"False"}],f=[{value:"",label:"Default"},{value:"true",label:"True"},{value:"false",label:"False"},{value:"throw",label:"Throw"}],g=[{value:"",label:"Default"},{value:"primary",label:"primary"},{value:"primaryPreferred",label:"primaryPreferred"},{value:"secondary",label:"secondary"},{value:"secondaryPreferred",label:"secondaryPreferred"},{value:"nearest",label:"nearest"}],v=[{value:"",label:"Default"},{value:"upper",label:"upper"},{value:"lower",label:"lower"},{value:"off",label:"off"}],S=["String","Number","Boolean","Date","ObjectId","Object","Mixed"],x=[{value:"",label:"No Action"},{value:"CASCADE",label:"CASCADE"},{value:"RESTRICT",label:"RESTRICT"},{value:"SET NULL",label:"SET NULL"},{value:"NO ACTION",label:"NO ACTION"}],N=[{value:"one_to_one",label:"One-to-One (1:1)"},{value:"one_to_many",label:"One-to-Many (1:N)"},{value:"many_to_many",label:"Many-to-Many (N:N)"}],C=ie(()=>t.activeCollections||[]),A=ie(()=>{if(!r.value||l.value===te.MONGODB)return null;const P=String(o.value?.referencesTable||"");return C.value.find(d=>d.data?.label===P)||null}),m=ie(()=>A.value?.data?.fields||[]),w=(P,d)=>{t.updateCollectionProps(t.selectedItemId,{[P]:d})},I=(P,d)=>{r.value&&t.updateFieldProps(t.selectedCollectionId,t.selectedItemId,{[P]:d})},H=(P,d)=>{!i.value||!o.value||t.updateEdgeProps(t.selectedItemId,{[P]:d})},X=ie(()=>{if(!i.value||!o.value)return{sourceName:"-",sourceField:"-",targetName:"-",targetField:"-"};const P=o.value,d=t.collections.find(ve=>ve.id===P.source),h=t.collections.find(ve=>ve.id===P.target),J=(ve,le)=>{for(const se of ve||[]){if(se.id===le)return se;const ce=J(se.children||[],le);if(ce)return ce}return null},ne=J(d?.data?.fields||[],P.sourceHandle),he=J(h?.data?.fields||[],P.targetHandle);return{sourceName:d?.data?.label||P.source,sourceField:ne?.name||P.sourceHandle||"-",targetName:h?.data?.label||P.target,targetField:he?.name||P.targetHandle||"-"}}),B=P=>{I("referencesTable",P),I("referencesColumnId",""),I("referencesColumn","")},R=P=>{I("referencesColumnId",P);const d=m.value.find(h=>h.id===P);I("referencesColumn",d?.name||"")},V=()=>{if(!r.value||!o.value)return[];if(Array.isArray(o.value.enumValues))return o.value.enumValues;if(typeof o.value.enum=="string"&&o.value.enum.trim()){const P=o.value.enum.split(",").map(d=>d.trim()).filter(Boolean);return t.updateFieldProps(t.selectedCollectionId,t.selectedItemId,{enumValues:P,enum:""}),P}return[]},z=()=>{I("enumValues",[...V(),""])},T=(P,d)=>{const h=[...V()];P<0||P>=h.length||(h[P]=d,I("enumValues",h))},Q=P=>{const d=[...V()];P<0||P>=d.length||(d.splice(P,1),I("enumValues",d))},M=P=>{s.value?t.updateCollectionProps(t.selectedItemId,{label:P.target.value}):r.value&&t.updateFieldProps(t.selectedCollectionId,t.selectedItemId,{name:P.target.value})},W=P=>{r.value&&t.updateFieldProps(t.selectedCollectionId,t.selectedItemId,{type:P.target.value})},L=P=>{if(r.value){const d=o.value[P]||!1;t.updateFieldProps(t.selectedCollectionId,t.selectedItemId,{[P]:!d})}},O=async()=>{await n.openConfirm({title:"Delete Item",message:"Are you sure?",confirmText:"Delete"})&&(s.value?(t.removeCollection(t.selectedItemId),n.showToast(`${a.value.singular} deleted.`,"success")):r.value?(t.removeField(t.selectedCollectionId,t.selectedItemId),n.showToast("Field deleted.","success")):i.value&&(t.removeEdge(t.selectedItemId),n.showToast("Relationship deleted.","success")))};return(P,d)=>(F(),G("aside",rS,[d[155]||(d[155]=p("div",{class:"p-4 border-b border-gray-700"},[p("h2",{class:"font-bold text-gray-200"},"Properties")],-1)),!o.value&&!i.value?(F(),G("div",iS,[oe(U(gd),{size:48,class:"mb-4 opacity-50"}),p("p",lS,"Select a "+de(a.value.singularLower)+", field, or relationship to edit properties",1)])):i.value?(F(),G("div",aS,[p("div",uS,[d[77]||(d[77]=p("h3",{class:"text-gray-200 font-semibold"},"Relationship",-1)),p("p",cS,de(X.value.sourceName)+"."+de(X.value.sourceField)+" -> "+de(X.value.targetName)+"."+de(X.value.targetField),1),d[78]||(d[78]=p("p",{class:"text-[11px] text-gray-500"},"Tip: double-click edge to cycle cardinality quickly.",-1))]),p("div",dS,[d[79]||(d[79]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Cardinality",-1)),p("select",{value:o.value?.relationType||"one_to_many",onChange:d[0]||(d[0]=h=>H("relationType",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-3 py-2 text-white text-sm"},[(F(),G(ue,null,Ee(N,h=>p("option",{key:h.value,value:h.value},de(h.label),9,pS)),64))],40,fS)]),l.value!==U(te).MONGODB?(F(),G("div",hS,[d[83]||(d[83]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Referential Actions",-1)),p("div",gS,[p("div",null,[d[80]||(d[80]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"On Delete",-1)),p("select",{value:o.value?.onDelete||"",onChange:d[1]||(d[1]=h=>H("onDelete",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(x,h=>p("option",{key:`edge-on-delete-${h.value}`,value:h.value},de(h.label),9,vS)),64))],40,mS)]),p("div",null,[d[81]||(d[81]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"On Update",-1)),p("select",{value:o.value?.onUpdate||"",onChange:d[2]||(d[2]=h=>H("onUpdate",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(x,h=>p("option",{key:`edge-on-update-${h.value}`,value:h.value},de(h.label),9,bS)),64))],40,yS)])]),p("div",null,[d[82]||(d[82]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Constraint Name",-1)),p("input",{value:o.value?.constraintName||"",onInput:d[3]||(d[3]=h=>H("constraintName",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"optional"},null,40,xS)])])):fe("",!0),p("div",wS,[p("button",{onClick:O,class:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-900/30 hover:bg-red-900/50 text-red-500 border border-red-900/50 rounded transition-colors text-sm"},[oe(U(Ln),{size:16}),d[84]||(d[84]=Ye(" Delete Relationship ",-1))])])])):s.value?(F(),G("div",_S,[p("div",null,[p("label",SS,de(a.value.singular)+" Name",1),p("input",{value:o.value.data.label,onInput:M,class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-3 py-2 text-white text-sm focus:border-emerald-500 focus:outline-none transition-colors",type:"text"},null,40,ES)]),l.value===U(te).MONGODB?(F(),G("div",CS,[d[88]||(d[88]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Schema Options",-1)),p("div",IS,[d[85]||(d[85]=p("span",{class:"text-sm text-gray-300"},"Timestamps",-1)),p("button",{onClick:d[4]||(d[4]=h=>U(t).updateCollectionProps(U(t).selectedItemId,{timestampsEnabled:!o.value.data.timestampsEnabled})),class:ge(["w-10 h-5 rounded-full relative transition-colors",o.value.data.timestampsEnabled?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.data.timestampsEnabled?"translate-x-5":""])},null,2)],2)]),o.value.data.timestampsEnabled?(F(),G("div",NS,[p("div",null,[d[86]||(d[86]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Created At Field",-1)),p("input",{value:o.value.data.createdAtName,onInput:d[5]||(d[5]=h=>U(t).updateCollectionProps(U(t).selectedItemId,{createdAtName:h.target.value})),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs focus:border-emerald-500 focus:outline-none transition-colors",type:"text",placeholder:"default: createdAt"},null,40,TS)]),p("div",null,[d[87]||(d[87]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Updated At Field",-1)),p("input",{value:o.value.data.updatedAtName,onInput:d[6]||(d[6]=h=>U(t).updateCollectionProps(U(t).selectedItemId,{updatedAtName:h.target.value})),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs focus:border-emerald-500 focus:outline-none transition-colors",type:"text",placeholder:"default: updatedAt"},null,40,$S)])])):fe("",!0)])):fe("",!0),l.value===U(te).MONGODB?(F(),G("div",MS,[d[106]||(d[106]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Advanced Schema Options",-1)),p("div",null,[d[89]||(d[89]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Collection Name",-1)),p("input",{value:o.value.data.schemaCollectionName||"",onInput:d[7]||(d[7]=h=>w("schemaCollectionName",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs focus:border-emerald-500 focus:outline-none transition-colors",type:"text",placeholder:"default model name plural"},null,40,AS)]),p("div",kS,[p("div",null,[d[90]||(d[90]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Strict",-1)),p("select",{value:o.value.data.schemaStrictMode||"",onChange:d[8]||(d[8]=h=>w("schemaStrictMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(f,h=>p("option",{key:h.value,value:h.value},de(h.label),9,DS)),64))],40,OS)]),p("div",null,[d[91]||(d[91]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Strict Query",-1)),p("select",{value:o.value.data.schemaStrictQueryMode||"",onChange:d[9]||(d[9]=h=>w("schemaStrictQueryMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(u,h=>p("option",{key:`strict-query-${h.value}`,value:h.value},de(h.label),9,LS)),64))],40,PS)]),p("div",null,[d[92]||(d[92]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Auto Index",-1)),p("select",{value:o.value.data.schemaAutoIndexMode||"",onChange:d[10]||(d[10]=h=>w("schemaAutoIndexMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(u,h=>p("option",{key:`auto-index-${h.value}`,value:h.value},de(h.label),9,BS)),64))],40,RS)]),p("div",null,[d[93]||(d[93]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Auto Create",-1)),p("select",{value:o.value.data.schemaAutoCreateMode||"",onChange:d[11]||(d[11]=h=>w("schemaAutoCreateMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(u,h=>p("option",{key:`auto-create-${h.value}`,value:h.value},de(h.label),9,zS)),64))],40,FS)]),p("div",null,[d[94]||(d[94]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"id Virtual",-1)),p("select",{value:o.value.data.schemaIdVirtualMode||"",onChange:d[12]||(d[12]=h=>w("schemaIdVirtualMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(u,h=>p("option",{key:`id-virtual-${h.value}`,value:h.value},de(h.label),9,HS)),64))],40,VS)]),p("div",null,[d[95]||(d[95]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"_id Field",-1)),p("select",{value:o.value.data.schemaUnderscoreIdMode||"",onChange:d[13]||(d[13]=h=>w("schemaUnderscoreIdMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(u,h=>p("option",{key:`id-field-${h.value}`,value:h.value},de(h.label),9,jS)),64))],40,US)]),p("div",null,[d[96]||(d[96]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Minimize",-1)),p("select",{value:o.value.data.schemaMinimizeMode||"",onChange:d[14]||(d[14]=h=>w("schemaMinimizeMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(u,h=>p("option",{key:`minimize-${h.value}`,value:h.value},de(h.label),9,YS)),64))],40,GS)]),p("div",null,[d[97]||(d[97]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Optimistic Concurrency",-1)),p("select",{value:o.value.data.schemaOptimisticConcurrencyMode||"",onChange:d[15]||(d[15]=h=>w("schemaOptimisticConcurrencyMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(u,h=>p("option",{key:`optimistic-${h.value}`,value:h.value},de(h.label),9,WS)),64))],40,KS)])]),p("div",XS,[p("div",null,[d[99]||(d[99]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Version Key",-1)),p("select",{value:o.value.data.schemaVersionKeyMode||"",onChange:d[16]||(d[16]=h=>w("schemaVersionKeyMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[...d[98]||(d[98]=[p("option",{value:""},"Default",-1),p("option",{value:"disable"},"Disable",-1),p("option",{value:"custom"},"Custom",-1)])],40,qS)]),o.value.data.schemaVersionKeyMode==="custom"?(F(),G("div",ZS,[d[100]||(d[100]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Version Key Name",-1)),p("input",{value:o.value.data.schemaVersionKeyName||"",onInput:d[17]||(d[17]=h=>w("schemaVersionKeyName",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"e.g. version"},null,40,JS)])):fe("",!0)]),p("div",QS,[p("div",null,[d[101]||(d[101]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Read Preference",-1)),p("select",{value:o.value.data.schemaReadPreference||"",onChange:d[18]||(d[18]=h=>w("schemaReadPreference",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(g,h=>p("option",{key:`read-${h.value}`,value:h.value},de(h.label),9,t2)),64))],40,e2)]),p("div",null,[d[102]||(d[102]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"skipVersioning",-1)),p("select",{value:o.value.data.schemaSkipVersioningMode||"",onChange:d[19]||(d[19]=h=>w("schemaSkipVersioningMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(u,h=>p("option",{key:`skip-version-${h.value}`,value:h.value},de(h.label),9,o2)),64))],40,n2)])]),p("div",s2,[d[103]||(d[103]=p("label",{class:"block text-[10px] text-gray-400 uppercase"},"Write Concern",-1)),p("div",r2,[p("input",{value:o.value.data.schemaWriteConcernW||"",onInput:d[20]||(d[20]=h=>w("schemaWriteConcernW",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"w (1/majority)"},null,40,i2),p("select",{value:o.value.data.schemaWriteConcernJMode||"",onChange:d[21]||(d[21]=h=>w("schemaWriteConcernJMode",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(u,h=>p("option",{key:`write-j-${h.value}`,value:h.value},"j: "+de(h.label),9,a2)),64))],40,l2),p("input",{value:o.value.data.schemaWriteConcernWtimeout||"",onInput:d[22]||(d[22]=h=>w("schemaWriteConcernWtimeout",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",min:"0",placeholder:"wtimeout ms"},null,40,u2)])]),p("div",c2,[p("div",d2,[d[104]||(d[104]=p("span",{class:"text-sm text-gray-300"},"Capped Collection",-1)),p("button",{onClick:d[23]||(d[23]=h=>w("schemaCappedEnabled",!o.value.data.schemaCappedEnabled)),class:ge(["w-10 h-5 rounded-full relative transition-colors",o.value.data.schemaCappedEnabled?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.data.schemaCappedEnabled?"translate-x-5":""])},null,2)],2)]),o.value.data.schemaCappedEnabled?(F(),G("div",f2,[p("input",{value:o.value.data.schemaCappedSize||"",onInput:d[24]||(d[24]=h=>w("schemaCappedSize",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",min:"1",placeholder:"size bytes"},null,40,p2),p("input",{value:o.value.data.schemaCappedMax||"",onInput:d[25]||(d[25]=h=>w("schemaCappedMax",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",min:"1",placeholder:"max docs"},null,40,h2),p("select",{value:o.value.data.schemaCappedAutoIndexIdMode||"",onChange:d[26]||(d[26]=h=>w("schemaCappedAutoIndexIdMode",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(u,h=>p("option",{key:`capped-id-${h.value}`,value:h.value},"autoIndexId: "+de(h.label),9,m2)),64))],40,g2)])):fe("",!0)]),p("div",v2,[d[105]||(d[105]=p("label",{class:"block text-[10px] text-gray-400 uppercase"},"Collation",-1)),p("div",y2,[p("input",{value:o.value.data.schemaCollationLocale||"",onInput:d[27]||(d[27]=h=>w("schemaCollationLocale",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"locale (e.g. en)"},null,40,b2),p("input",{value:o.value.data.schemaCollationStrength||"",onInput:d[28]||(d[28]=h=>w("schemaCollationStrength",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",min:"1",max:"5",placeholder:"strength 1-5"},null,40,x2),p("select",{value:o.value.data.schemaCollationCaseLevelMode||"",onChange:d[29]||(d[29]=h=>w("schemaCollationCaseLevelMode",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(u,h=>p("option",{key:`collation-case-level-${h.value}`,value:h.value},"caseLevel: "+de(h.label),9,_2)),64))],40,w2),p("select",{value:o.value.data.schemaCollationCaseFirst||"",onChange:d[30]||(d[30]=h=>w("schemaCollationCaseFirst",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(v,h=>p("option",{key:`collation-case-first-${h.value}`,value:h.value},"caseFirst: "+de(h.label),9,E2)),64))],40,S2),p("select",{value:o.value.data.schemaCollationNumericOrderingMode||"",onChange:d[31]||(d[31]=h=>w("schemaCollationNumericOrderingMode",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs col-span-2"},[(F(),G(ue,null,Ee(u,h=>p("option",{key:`collation-numeric-${h.value}`,value:h.value},"numericOrdering: "+de(h.label),9,I2)),64))],40,C2)])])])):fe("",!0),p("div",N2,[p("button",{onClick:O,class:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-900/30 hover:bg-red-900/50 text-red-500 border border-red-900/50 rounded transition-colors text-sm"},[oe(U(Ln),{size:16}),Ye(" Delete "+de(a.value.singular),1)])])])):r.value?(F(),G("div",T2,[p("div",null,[d[107]||(d[107]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-2"},"Field Name",-1)),p("input",{value:o.value.name,onInput:M,class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-3 py-2 text-white text-sm focus:border-emerald-500 focus:outline-none transition-colors",type:"text"},null,40,$2)]),p("div",null,[d[108]||(d[108]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-2"},"Type",-1)),p("select",{value:o.value.type,onChange:W,class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-3 py-2 text-white text-sm focus:border-emerald-500 focus:outline-none transition-colors appearance-none"},[(F(!0),G(ue,null,Ee(c.value,h=>(F(),G("option",{key:h,value:h},de(h),9,A2))),128))],40,M2)]),p("div",k2,[d[123]||(d[123]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Field Options",-1)),l.value===U(te).MONGODB?(F(),G("div",O2,[p("div",D2,[d[109]||(d[109]=p("span",{class:"text-sm text-gray-300"},"Required",-1)),p("button",{onClick:d[32]||(d[32]=h=>L("required")),class:ge(["w-10 h-5 rounded-full relative transition-colors",o.value.required?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.required?"translate-x-5":""])},null,2)],2)]),p("div",P2,[d[110]||(d[110]=p("span",{class:"text-sm text-gray-300"},"Unique",-1)),p("button",{onClick:d[33]||(d[33]=h=>L("unique")),class:ge(["w-10 h-5 rounded-full relative transition-colors",o.value.unique?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.unique?"translate-x-5":""])},null,2)],2)]),p("div",L2,[d[111]||(d[111]=p("span",{class:"text-sm text-gray-300"},"Index",-1)),p("button",{onClick:d[34]||(d[34]=h=>L("index")),class:ge(["w-10 h-5 rounded-full relative transition-colors",o.value.index?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.index?"translate-x-5":""])},null,2)],2)]),p("div",R2,[d[112]||(d[112]=p("span",{class:"text-sm text-gray-300"},"Sparse",-1)),p("button",{onClick:d[35]||(d[35]=h=>L("sparse")),class:ge(["w-10 h-5 rounded-full relative transition-colors",o.value.sparse?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.sparse?"translate-x-5":""])},null,2)],2)]),p("div",B2,[d[113]||(d[113]=p("span",{class:"text-sm text-gray-300"},"Immutable",-1)),p("button",{onClick:d[36]||(d[36]=h=>L("immutable")),class:ge(["w-10 h-5 rounded-full relative transition-colors",o.value.immutable?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.immutable?"translate-x-5":""])},null,2)],2)])])):(F(),G("div",F2,[p("div",z2,[d[114]||(d[114]=p("span",{class:"text-sm text-gray-300"},"Primary Key",-1)),p("button",{onClick:d[37]||(d[37]=h=>L("primaryKey")),class:ge(["w-10 h-5 rounded-full relative transition-colors",o.value.primaryKey?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.primaryKey?"translate-x-5":""])},null,2)],2)]),p("div",V2,[d[115]||(d[115]=p("span",{class:"text-sm text-gray-300"},"Auto Increment",-1)),p("button",{onClick:d[38]||(d[38]=h=>L("autoIncrement")),class:ge(["w-10 h-5 rounded-full relative transition-colors",o.value.autoIncrement?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.autoIncrement?"translate-x-5":""])},null,2)],2)]),p("div",H2,[d[116]||(d[116]=p("span",{class:"text-sm text-gray-300"},"Nullable",-1)),p("button",{onClick:d[39]||(d[39]=h=>L("nullable")),class:ge(["w-10 h-5 rounded-full relative transition-colors",o.value.nullable?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.nullable?"translate-x-5":""])},null,2)],2)]),p("div",U2,[d[117]||(d[117]=p("span",{class:"text-sm text-gray-300"},"Unique",-1)),p("button",{onClick:d[40]||(d[40]=h=>L("unique")),class:ge(["w-10 h-5 rounded-full relative transition-colors",o.value.unique?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.unique?"translate-x-5":""])},null,2)],2)]),p("div",j2,[d[118]||(d[118]=p("span",{class:"text-sm text-gray-300"},"Index",-1)),p("button",{onClick:d[41]||(d[41]=h=>L("index")),class:ge(["w-10 h-5 rounded-full relative transition-colors",o.value.index?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.index?"translate-x-5":""])},null,2)],2)]),p("div",G2,[d[119]||(d[119]=p("span",{class:"text-sm text-gray-300"},"Unsigned",-1)),p("button",{onClick:d[42]||(d[42]=h=>L("unsigned")),class:ge(["w-10 h-5 rounded-full relative transition-colors",o.value.unsigned?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.unsigned?"translate-x-5":""])},null,2)],2)])])),l.value===U(te).MONGODB?(F(),G("div",Y2,[p("div",null,[d[120]||(d[120]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Alias",-1)),p("input",{value:o.value.alias||"",onInput:d[43]||(d[43]=h=>I("alias",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"optional alias"},null,40,K2)]),p("div",null,[d[121]||(d[121]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Select",-1)),p("select",{value:o.value.selectMode||"",onChange:d[44]||(d[44]=h=>I("selectMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(u,h=>p("option",{key:`field-select-${h.value}`,value:h.value},de(h.label),9,X2)),64))],40,W2)])])):(F(),G("div",q2,[d[122]||(d[122]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Default Value",-1)),p("input",{value:o.value.defaultValue||"",onInput:d[45]||(d[45]=h=>I("defaultValue",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"default value"},null,40,Z2)]))]),l.value!==U(te).MONGODB?(F(),G("div",J2,[d[134]||(d[134]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"SQL Constraints",-1)),p("div",Q2,[d[124]||(d[124]=p("span",{class:"text-sm text-gray-300"},"Foreign Key",-1)),p("button",{onClick:d[46]||(d[46]=h=>L("foreignKey")),class:ge(["w-10 h-5 rounded-full relative transition-colors",o.value.foreignKey?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.foreignKey?"translate-x-5":""])},null,2)],2)]),o.value.foreignKey?(F(),G("div",eE,[p("div",null,[d[126]||(d[126]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Reference Table",-1)),p("select",{value:o.value.referencesTable||"",onChange:d[47]||(d[47]=h=>B(h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[d[125]||(d[125]=p("option",{value:""},"Select table...",-1)),(F(!0),G(ue,null,Ee(C.value,h=>(F(),G("option",{key:h.id,value:h.data.label},de(h.data.label),9,nE))),128))],40,tE)]),p("div",null,[d[128]||(d[128]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Reference Column",-1)),p("select",{value:o.value.referencesColumnId||"",onChange:d[48]||(d[48]=h=>R(h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[d[127]||(d[127]=p("option",{value:""},"Select column...",-1)),(F(!0),G(ue,null,Ee(m.value,h=>(F(),G("option",{key:h.id,value:h.id},de(h.name),9,sE))),128))],40,oE)]),p("div",null,[d[129]||(d[129]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"FK Constraint Name",-1)),p("input",{value:o.value.fkConstraintName||"",onInput:d[49]||(d[49]=h=>I("fkConstraintName",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"optional"},null,40,rE)]),p("div",null,[d[130]||(d[130]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"On Delete",-1)),p("select",{value:o.value.onDelete||"",onChange:d[50]||(d[50]=h=>I("onDelete",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(x,h=>p("option",{key:`on-delete-${h.value}`,value:h.value},de(h.label),9,lE)),64))],40,iE)]),p("div",null,[d[131]||(d[131]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"On Update",-1)),p("select",{value:o.value.onUpdate||"",onChange:d[51]||(d[51]=h=>I("onUpdate",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(x,h=>p("option",{key:`on-update-${h.value}`,value:h.value},de(h.label),9,uE)),64))],40,aE)])])):fe("",!0),p("div",cE,[d[132]||(d[132]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Check Constraint Expression",-1)),p("input",{value:o.value.checkExpression||"",onInput:d[52]||(d[52]=h=>I("checkExpression",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"e.g. amount > 0"},null,40,dE),p("input",{value:o.value.checkConstraintName||"",onInput:d[53]||(d[53]=h=>I("checkConstraintName",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"check constraint name (optional)"},null,40,fE)]),o.value.index?(F(),G("div",pE,[d[133]||(d[133]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Index Name",-1)),p("input",{value:o.value.indexName||"",onInput:d[54]||(d[54]=h=>I("indexName",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"optional"},null,40,hE)])):fe("",!0)])):fe("",!0),o.value.type==="String"&&l.value===U(te).MONGODB?(F(),G("div",gE,[d[140]||(d[140]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"String Options",-1)),p("div",mE,[p("div",vE,[d[135]||(d[135]=p("span",{class:"truncate text-xs text-gray-300"},"Trim",-1)),p("button",{onClick:d[55]||(d[55]=h=>L("trim")),class:ge(["shrink-0 w-8 h-4 rounded-full relative transition-colors",o.value.trim?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-0.5 left-0.5 bg-white w-3 h-3 rounded-full transition-transform",o.value.trim?"translate-x-4":""])},null,2)],2)]),p("div",yE,[d[136]||(d[136]=p("span",{class:"truncate text-xs text-gray-300"},"Lowercase",-1)),p("button",{onClick:d[56]||(d[56]=h=>L("lowercase")),class:ge(["shrink-0 w-8 h-4 rounded-full relative transition-colors",o.value.lowercase?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-0.5 left-0.5 bg-white w-3 h-3 rounded-full transition-transform",o.value.lowercase?"translate-x-4":""])},null,2)],2)]),p("div",bE,[d[137]||(d[137]=p("span",{class:"truncate text-xs text-gray-300"},"Uppercase",-1)),p("button",{onClick:d[57]||(d[57]=h=>L("uppercase")),class:ge(["shrink-0 w-8 h-4 rounded-full relative transition-colors",o.value.uppercase?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ge(["absolute top-0.5 left-0.5 bg-white w-3 h-3 rounded-full transition-transform",o.value.uppercase?"translate-x-4":""])},null,2)],2)])]),p("div",xE,[p("input",{value:o.value.minLength||"",onInput:d[58]||(d[58]=h=>I("minLength",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",min:"0",placeholder:"minLength"},null,40,wE),p("input",{value:o.value.maxLength||"",onInput:d[59]||(d[59]=h=>I("maxLength",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",min:"0",placeholder:"maxLength"},null,40,_E)]),p("div",SE,[p("input",{value:o.value.matchPattern||"",onInput:d[60]||(d[60]=h=>I("matchPattern",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"regex pattern"},null,40,EE),p("input",{value:o.value.matchFlags||"",onInput:d[61]||(d[61]=h=>I("matchFlags",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"flags (e.g. i)"},null,40,CE)]),p("div",null,[d[138]||(d[138]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Default",-1)),p("input",{value:o.value.defaultString||"",onInput:d[62]||(d[62]=h=>I("defaultString",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"default string"},null,40,IE)]),p("div",NE,[p("div",{class:"flex items-center justify-between"},[d[139]||(d[139]=p("label",{class:"block text-[10px] text-gray-400 uppercase"},"Enum Values",-1)),p("button",{onClick:z,class:"px-2 py-1 text-xs rounded bg-[#2d2d2d] hover:bg-[#3d3d3d] text-gray-300"},"Add")]),(F(!0),G(ue,null,Ee(V(),(h,J)=>(F(),G("div",{key:`enum-${J}`,class:"flex gap-2"},[p("input",{value:h,onInput:ne=>T(J,ne.target.value),class:"flex-1 bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"enum value"},null,40,TE),p("button",{onClick:ne=>Q(J),class:"px-2 py-1 text-xs rounded bg-red-900/30 hover:bg-red-900/50 text-red-300"},"Remove",8,$E)]))),128))])])):fe("",!0),o.value.type==="ENUM"&&l.value===U(te).MYSQL?(F(),G("div",ME,[p("div",{class:"flex items-center justify-between"},[d[141]||(d[141]=p("label",{class:"block text-[10px] text-gray-400 uppercase"},"Enum Values",-1)),p("button",{onClick:z,class:"px-2 py-1 text-xs rounded bg-[#2d2d2d] hover:bg-[#3d3d3d] text-gray-300"},"Add")]),(F(!0),G(ue,null,Ee(V(),(h,J)=>(F(),G("div",{key:`enum-${J}`,class:"flex gap-2"},[p("input",{value:h,onInput:ne=>T(J,ne.target.value),class:"flex-1 bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"value"},null,40,AE),p("button",{onClick:ne=>Q(J),class:"px-2 py-1 text-xs rounded bg-red-900/30 hover:bg-red-900/50 text-red-300"},"Remove",8,kE)]))),128))])):fe("",!0),l.value!==U(te).MONGODB&&["VARCHAR","CHAR","DECIMAL","FLOAT"].includes(o.value.type)?(F(),G("div",OE,[d[142]||(d[142]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Length / Parameters",-1)),p("input",{value:o.value.typeParams||"",onInput:d[63]||(d[63]=h=>I("typeParams",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"e.g. 255 or 10,2"},null,40,DE)])):fe("",!0),o.value.type==="Number"&&l.value===U(te).MONGODB?(F(),G("div",PE,[d[143]||(d[143]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Number Options",-1)),p("div",LE,[p("input",{value:o.value.min||"",onInput:d[64]||(d[64]=h=>I("min",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",placeholder:"min"},null,40,RE),p("input",{value:o.value.max||"",onInput:d[65]||(d[65]=h=>I("max",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",placeholder:"max"},null,40,BE),p("input",{value:o.value.defaultNumber||"",onInput:d[66]||(d[66]=h=>I("defaultNumber",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",placeholder:"default"},null,40,FE)])])):fe("",!0),o.value.type==="Boolean"&&l.value===U(te).MONGODB?(F(),G("div",zE,[d[145]||(d[145]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Boolean Options",-1)),p("div",null,[d[144]||(d[144]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Default",-1)),p("select",{value:o.value.defaultBooleanMode||"",onChange:d[67]||(d[67]=h=>I("defaultBooleanMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(F(),G(ue,null,Ee(u,h=>p("option",{key:`bool-default-${h.value}`,value:h.value},de(h.label),9,HE)),64))],40,VE)])])):fe("",!0),o.value.type==="Date"&&l.value===U(te).MONGODB?(F(),G("div",UE,[d[147]||(d[147]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Date Options",-1)),p("div",jE,[p("select",{value:o.value.defaultDateMode||"",onChange:d[68]||(d[68]=h=>I("defaultDateMode",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[...d[146]||(d[146]=[p("option",{value:""},"Default: none",-1),p("option",{value:"now"},"Default: Date.now",-1),p("option",{value:"custom"},"Default: custom date",-1)])],40,GE),o.value.defaultDateMode==="custom"?(F(),G("input",{key:0,value:o.value.defaultDateValue||"",onInput:d[69]||(d[69]=h=>I("defaultDateValue",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"datetime-local"},null,40,YE)):fe("",!0)]),p("div",KE,[p("input",{value:o.value.minDate||"",onInput:d[70]||(d[70]=h=>I("minDate",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"datetime-local",placeholder:"min date"},null,40,WE),p("input",{value:o.value.maxDate||"",onInput:d[71]||(d[71]=h=>I("maxDate",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"datetime-local",placeholder:"max date"},null,40,XE),p("input",{value:o.value.expiresSeconds||"",onInput:d[72]||(d[72]=h=>I("expiresSeconds",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",min:"0",placeholder:"expires sec"},null,40,qE)])])):fe("",!0),o.value.type==="ObjectId"&&l.value===U(te).MONGODB?(F(),G("div",ZE,[d[149]||(d[149]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"ObjectId Options",-1)),p("select",{value:o.value.ref||"",onChange:d[73]||(d[73]=h=>I("ref",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-3 py-2 text-white text-sm"},[d[148]||(d[148]=p("option",{value:""},"Reference collection...",-1)),(F(!0),G(ue,null,Ee(U(t).collections,h=>(F(),G("option",{key:h.id,value:h.data.label},de(h.data.label),9,QE))),128))],40,JE),p("input",{value:o.value.defaultObjectId||"",onInput:d[74]||(d[74]=h=>I("defaultObjectId",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"default objectId (optional)"},null,40,eC)])):fe("",!0),o.value.type==="Map"&&l.value===U(te).MONGODB?(F(),G("div",tC,[d[151]||(d[151]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Map Options",-1)),p("select",{value:o.value.mapOfType||"",onChange:d[75]||(d[75]=h=>I("mapOfType",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[d[150]||(d[150]=p("option",{value:""},"Map value type (default Mixed)",-1)),(F(),G(ue,null,Ee(S,h=>p("option",{key:`map-${h}`,value:h},de(h),9,oC)),64))],40,nC)])):fe("",!0),o.value.type==="Array"&&l.value===U(te).MONGODB?(F(),G("div",sC,[d[153]||(d[153]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Array Options",-1)),p("select",{value:o.value.arrayOfType||"",onChange:d[76]||(d[76]=h=>I("arrayOfType",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[d[152]||(d[152]=p("option",{value:""},"Array item type (default Mixed)",-1)),(F(),G(ue,null,Ee(S,h=>p("option",{key:`arr-${h}`,value:h},de(h),9,iC)),64))],40,rC)])):fe("",!0),p("div",lC,[p("button",{onClick:O,class:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-900/30 hover:bg-red-900/50 text-red-500 border border-red-900/50 rounded transition-colors text-sm"},[oe(U(Ln),{size:16}),d[154]||(d[154]=Ye(" Delete Field ",-1))])])])):fe("",!0)]))}},uC={key:0,class:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4"},cC={class:"bg-[#1e1e1e] border border-gray-700 rounded-lg shadow-2xl w-full max-w-md flex flex-col overflow-hidden animate-in fade-in zoom-in duration-200"},dC={class:"px-6 py-4 border-b border-gray-700 flex justify-between items-center bg-[#252525]"},fC={class:"flex items-center gap-2"},pC=["disabled"],hC={class:"p-6 space-y-4"},gC={class:"flex items-center justify-between"},mC={class:"flex gap-3"},vC=["disabled"],yC=["disabled"],bC={class:"max-h-[40vh] overflow-y-auto space-y-1 pr-2 custom-scrollbar"},xC=["checked","onChange","disabled"],wC={class:"text-sm text-gray-200 font-medium truncate"},_C={class:"p-3 rounded bg-blue-500/10 border border-blue-500/20 flex gap-3"},SC={class:"px-6 py-4 border-t border-gray-700 bg-[#252525] flex justify-end gap-3"},EC=["disabled"],CC=["disabled"],IC={__name:"MigrationSyncModal",props:{isOpen:Boolean},emits:["close"],setup(e,{emit:t}){const n=e,o=t,s=It(),r=zt(),i=ie(()=>s.collections.filter(S=>S.databaseId===s.activeDatabaseId)),l=ye(new Set),a=ye(!1),c=()=>{l.value=new Set(i.value.map(S=>S.id))};_e(()=>n.isOpen,S=>{S&&c()});const u=S=>{l.value.has(S)?l.value.delete(S):l.value.add(S)},f=()=>{l.value=new Set(i.value.map(S=>S.id))},g=()=>{l.value.clear()},v=async()=>{if(l.value.size===0){r.showToast("Please select at least one table to sync","error");return}a.value=!0;try{const S=await s.saveProject(Array.from(l.value));S.success&&(o("close"),r.showToast(S.response?.message||"Sync successful","success"))}catch{r.showToast("Failed to sync migrations","error")}finally{a.value=!1}};return(S,x)=>e.isOpen?(F(),G("div",uC,[p("div",cC,[p("div",dC,[p("div",fC,[oe(U(wd),{size:18,class:"text-emerald-500"}),x[2]||(x[2]=p("h2",{class:"text-lg font-bold text-white"},"Sync to Migrations",-1))]),p("button",{onClick:x[0]||(x[0]=N=>S.$emit("close")),class:"text-gray-400 hover:text-white transition-colors",disabled:a.value},[oe(U(Lr),{size:20})],8,pC)]),p("div",hC,[p("div",gC,[x[3]||(x[3]=p("span",{class:"text-xs font-bold text-gray-500 uppercase tracking-wider"},"Select Tables to Sync",-1)),p("div",mC,[p("button",{onClick:f,class:"text-xs text-emerald-400 hover:text-emerald-300 transition-colors",disabled:a.value},"Select All",8,vC),p("button",{onClick:g,class:"text-xs text-red-400 hover:text-red-300 transition-colors",disabled:a.value},"Clear All",8,yC)])]),p("div",bC,[(F(!0),G(ue,null,Ee(i.value,N=>(F(),G("label",{key:N.id,class:"flex items-center gap-3 p-3 rounded bg-[#2a2a2a]/50 hover:bg-[#2a2a2a] cursor-pointer transition-colors border border-transparent hover:border-gray-700"},[p("input",{type:"checkbox",checked:l.value.has(N.id),onChange:C=>u(N.id),class:"rounded border-gray-600 bg-gray-700 text-emerald-500 focus:ring-emerald-500 focus:ring-offset-0",disabled:a.value},null,40,xC),p("span",wC,de(N.data.label),1)]))),128))]),p("div",_C,[oe(U(gd),{size:18,class:"text-blue-400 shrink-0"}),x[4]||(x[4]=p("p",{class:"text-[11px] text-blue-300 leading-relaxed"}," This action will generate or update Laravel migration files for the selected tables. Existing migrations for these tables may be overwritten or appended. ",-1))])]),p("div",SC,[p("button",{onClick:x[1]||(x[1]=N=>S.$emit("close")),class:"px-4 py-2 rounded bg-gray-700 hover:bg-gray-600 text-white text-sm font-semibold transition-colors",disabled:a.value}," Cancel ",8,EC),p("button",{onClick:v,class:"px-6 py-2 rounded bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-bold flex items-center gap-2 transition-all shadow-lg shadow-emerald-900/20 disabled:opacity-50 disabled:cursor-not-allowed",disabled:a.value||l.value.size===0},[a.value?(F(),G(ue,{key:0},[x[5]||(x[5]=p("div",{class:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"},null,-1)),x[6]||(x[6]=p("span",null,"Syncing...",-1))],64)):(F(),G(ue,{key:1},[oe(U(dm),{size:18}),p("span",null,"Start Sync ("+de(l.value.size)+")",1)],64))],8,CC)])])])):fe("",!0)}},NC=ms(IC,[["__scopeId","data-v-36c10686"]]),TC={class:"pointer-events-none fixed inset-0 z-[120]"},$C={class:"absolute top-4 right-4 space-y-2"},MC={class:"w-full max-w-md rounded-xl border border-gray-700 bg-[#1e1e1e] text-gray-100 shadow-2xl"},AC={class:"flex items-center justify-between border-b border-gray-700 px-4 py-3"},kC={class:"font-semibold"},OC={class:"space-y-3 px-4 py-4"},DC={class:"text-sm text-gray-300"},PC=["value","placeholder"],LC={class:"flex justify-end gap-2 border-t border-gray-700 px-4 py-3"},RC=["disabled"],BC={__name:"UiLayer",setup(e){const t=zt(),n=ie(()=>t.modal.kind==="prompt"&&t.modal.inputRequired&&!String(t.modal.inputValue||"").trim()),o=()=>{t.modal.kind==="alert"?t.resolveModal(!0):t.resolveModal(t.modal.kind==="prompt"?null:!1)},s=()=>{if(t.modal.kind==="prompt"){t.resolveModal(String(t.modal.inputValue||"").trim());return}t.resolveModal(!0)},r=()=>{t.resolveModal(t.modal.kind==="prompt"?null:!1)};return(i,l)=>(F(),G("div",TC,[p("div",$C,[oe(vl,{name:"toast"},{default:ht(()=>[(F(!0),G(ue,null,Ee(U(t).toasts,a=>(F(),G("div",{key:a.id,class:ge(["pointer-events-auto min-w-[260px] max-w-[360px] rounded-lg border px-3 py-2 text-sm shadow-lg backdrop-blur",a.type==="error"?"bg-red-900/40 border-red-700 text-red-200":a.type==="success"?"bg-emerald-900/35 border-emerald-700 text-emerald-200":"bg-[#1e1e1e]/95 border-gray-700 text-gray-200"])},de(a.message),3))),128))]),_:1})]),U(t).modal.isOpen?(F(),G("div",{key:0,class:"pointer-events-auto absolute inset-0 bg-black/50 flex items-center justify-center p-4",onClick:dt(o,["self"])},[p("div",MC,[p("div",AC,[p("h3",kC,de(U(t).modal.title),1),p("button",{class:"rounded p-1 text-gray-400 hover:bg-[#2a2a2a] hover:text-white",onClick:r},[oe(U(Lr),{size:16})])]),p("div",OC,[p("p",DC,de(U(t).modal.message),1),U(t).modal.kind==="prompt"?(F(),G("input",{key:0,value:U(t).modal.inputValue,onInput:l[0]||(l[0]=a=>U(t).setModalInputValue(a.target.value)),placeholder:U(t).modal.inputPlaceholder,class:"w-full rounded border border-gray-600 bg-[#2a2a2a] px-3 py-2 text-sm text-white focus:border-emerald-500 focus:outline-none",type:"text",onKeydown:l[1]||(l[1]=Dr(a=>!n.value&&s(),["enter"]))},null,40,PC)):fe("",!0)]),p("div",LC,[U(t).modal.kind!=="alert"?(F(),G("button",{key:0,class:"rounded border border-gray-600 bg-[#2d2d2d] px-3 py-1.5 text-sm text-gray-200 hover:bg-[#3a3a3a]",onClick:r},de(U(t).modal.cancelText),1)):fe("",!0),p("button",{class:"rounded border border-emerald-700 bg-emerald-600 px-3 py-1.5 text-sm text-white hover:bg-emerald-700 disabled:cursor-not-allowed disabled:opacity-60",disabled:n.value,onClick:s},de(U(t).modal.confirmText),9,RC)])])])):fe("",!0)]))}},FC=ms(BC,[["__scopeId","data-v-9c87af23"]]),zC={class:"flex h-screen w-screen overflow-hidden bg-[#1a1a1a] text-white font-sans antialiased"},VC={class:"flex-1 h-full w-full relative flex"},HC={class:"flex-1 relative h-full"},UC=["disabled"],jC=["disabled"],GC={key:1,class:"flex-shrink-0 w-px h-6 bg-gray-700/50 mx-0.5"},YC={class:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 bg-[#2d2d2d] hover:bg-[#3d3d3d] text-gray-300 hover:text-white rounded text-sm font-medium transition-colors border border-gray-600/30 whitespace-nowrap"},KC=["title"],WC={__name:"App",setup(e){const t=ye(!1),n=ye(!1),o=ye(!0),s=ye(null),r=ye(null),i=ye([]),l=ye(!0),a=It(),c=zt(),u=ie(()=>Nn(a.activeDatabaseType)),f=ie(()=>a.selectedItemType==="collection"||a.selectedItemType==="field"||a.selectedItemType==="edge"),g=ie(()=>a.activeCollections.filter(V=>V.selected)),v=ie(()=>g.value.length>1),S=ie(()=>l.value?"left-[1.05rem] top-4":"left-4 top-16"),x=()=>{c.showToast("AI Assistant: Analysis complete! Consider indexing 'email' in Users.","success")},N=()=>{r.value=null,i.value=[],t.value=!0},C=V=>{i.value=[],r.value=V,t.value=!0},A=V=>{r.value=null,i.value=V,t.value=!0},m=()=>{const V=g.value.map(z=>z.id);V.length<2||A(V)},w=async()=>{const V=g.value.map(T=>T.id);V.length<2||!await c.openConfirm({title:`Delete Selected ${u.value.plural}`,message:`Delete ${V.length} selected ${u.value.pluralLower}? This action cannot be undone immediately.`,confirmText:"Delete"})||(a.removeCollections(V),c.showToast(`${V.length} ${u.value.pluralLower} deleted.`,"success"))},I=()=>{a.undo()},H=()=>{a.redo()},X=async()=>{if(a.autoArrangeActiveDatabase()){c.showToast(`${u.value.plural} arranged automatically.`,"success"),c.isPackageMode&&a.bridgeMode==="remote"&&await a.saveLayout();return}c.showToast(`Need at least 2 ${u.value.pluralLower} to arrange.`,"error")},B=()=>{l.value=!l.value},R=async()=>{if(!(!c.isPackageMode||a.bridgeMode!=="remote"))try{const V=await fetch(`${window.location.origin}/visual-migrator/api/schema?check_hash=true`);if(!V.ok)return;const z=await V.json();if(z.hash&&z.hash!==s.value){if(s.value!==null){if(a.isDirty){c.showToast("New migrations detected. Save your changes to see them.","info");return}c.showToast("New migrations detected! Updating diagram...","info")}s.value=z.hash,await a.fetchRemoteSchema()}}catch{}};return ct(()=>{a.initializeDatabases(),a.clearSelections(),a.initializeHistory(),c.isPackageMode&&(R(),zg(R,5e3,{immediate:!1}))}),(V,z)=>(F(),G("div",zC,[l.value?(F(),Ve(yv,{key:0,onToggleSidebar:B,onExportCollection:C})):fe("",!0),p("main",VC,[p("div",HC,[oe(H_),l.value?fe("",!0):(F(),G("button",{key:0,onClick:B,class:"absolute top-4 left-4 z-20 flex items-center gap-2 px-3 py-1.5 bg-[#1e1e1e]/90 backdrop-blur border border-gray-700 rounded-lg text-gray-300 hover:text-white hover:bg-[#2a2a2a] transition-colors",title:"Show Sidebar"},[oe(U(mm),{size:16}),z[4]||(z[4]=Ye(" Menu ",-1))])),v.value?(F(),G("div",{key:1,class:ge([S.value,"absolute z-20 bg-[#1e1e1e]/90 backdrop-blur border border-gray-700 rounded-lg shadow-2xl p-2 flex gap-2"])},[p("button",{onClick:m,class:"flex items-center gap-2 px-3 py-1.5 bg-[#2d2d2d] hover:bg-[#3d3d3d] text-gray-300 hover:text-white rounded text-sm font-medium transition-colors border border-gray-600/50"},[oe(U(md),{size:16}),Ye(" Export Selected "+de(u.value.plural),1)]),p("button",{onClick:w,class:"flex items-center gap-2 px-3 py-1.5 bg-red-900/25 hover:bg-red-900/40 text-red-300 hover:text-red-200 rounded text-sm font-medium transition-colors border border-red-800/60"},[oe(U(Ln),{size:16}),Ye(" Delete Selected "+de(u.value.plural),1)])],2)):fe("",!0),p("div",{class:ge(["absolute top-4 right-4 z-50 flex items-center bg-[#1e1e1e]/95 backdrop-blur-md border border-gray-700/50 rounded-lg shadow-2xl transition-all duration-500 ease-in-out h-[42px] overflow-hidden",o.value?"max-w-[2000px] pr-1":"max-w-[42px]"])},[p("div",{class:ge(["flex items-center flex-nowrap gap-1.5 overflow-hidden transition-all duration-500 ease-in-out",o.value?"max-w-[1200px] opacity-100 px-2":"max-w-0 opacity-0 px-0 invisible"])},[p("button",{onClick:I,disabled:!U(a).canUndo||!U(a).isDirty,class:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 bg-[#2d2d2d] hover:bg-[#3d3d3d] disabled:hover:bg-[#2d2d2d] text-gray-300 hover:text-white disabled:text-gray-500 rounded text-sm font-medium transition-colors border border-gray-600/30 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",title:"Undo (Ctrl/Cmd+Z)"},[oe(U(xm),{size:16}),z[5]||(z[5]=Ye(" Undo ",-1))],8,UC),p("button",{onClick:H,disabled:!U(a).canRedo||!U(a).isDirty,class:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 bg-[#2d2d2d] hover:bg-[#3d3d3d] disabled:hover:bg-[#2d2d2d] text-gray-300 hover:text-white disabled:text-gray-500 rounded text-sm font-medium transition-colors border border-gray-600/30 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",title:"Redo (Ctrl/Cmd+Shift+Z / Ctrl+Y)"},[oe(U(vm),{size:16}),z[6]||(z[6]=Ye(" Redo ",-1))],8,jC),z[12]||(z[12]=p("div",{class:"flex-shrink-0 w-px h-6 bg-gray-700/50 mx-0.5"},null,-1)),p("button",{onClick:X,class:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 bg-[#2d2d2d] hover:bg-[#3d3d3d] text-gray-300 hover:text-white rounded text-sm font-medium transition-colors border border-gray-600/30 whitespace-nowrap",title:"Auto Arrange"},[oe(U(hm),{size:16}),z[7]||(z[7]=Ye(" Auto Arrange ",-1))]),z[13]||(z[13]=p("div",{class:"flex-shrink-0 w-px h-6 bg-gray-700/50 mx-0.5"},null,-1)),p("button",{onClick:x,class:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white rounded text-sm font-medium transition-all shadow-lg shadow-purple-900/20 whitespace-nowrap border border-purple-500/20"},[oe(U(bm),{size:16}),z[8]||(z[8]=Ye(" AI Analyze ",-1))]),z[14]||(z[14]=p("div",{class:"flex-shrink-0 w-px h-6 bg-gray-700/50 mx-0.5"},null,-1)),U(c).isPackageMode&&U(a).bridgeMode==="remote"?(F(),G("button",{key:0,onClick:z[0]||(z[0]=T=>n.value=!0),class:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded text-sm font-bold transition-all shadow-lg shadow-emerald-900/20 whitespace-nowrap border border-emerald-500/30"},[oe(U(wd),{size:16}),z[9]||(z[9]=Ye(" Save to Migrations ",-1))])):fe("",!0),U(c).isPackageMode&&U(a).bridgeMode==="remote"?(F(),G("div",GC)):fe("",!0),p("button",{onClick:N,class:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 bg-[#2d2d2d] hover:bg-[#3d3d3d] text-gray-300 hover:text-white rounded text-sm font-medium transition-colors border border-gray-600/30 whitespace-nowrap"},[oe(U(bd),{size:16}),z[10]||(z[10]=Ye(" Export ",-1))]),p("button",YC,[oe(U(ym),{size:16}),z[11]||(z[11]=Ye(" Share ",-1))])],2),p("button",{onClick:z[1]||(z[1]=T=>o.value=!o.value),class:"flex items-center justify-center w-8 h-8 m-1 rounded hover:bg-white/10 text-gray-400 hover:text-white transition-all cursor-pointer relative group shrink-0",title:o.value?"Collapse Menu":"Expand Menu"},[z[15]||(z[15]=p("div",{class:"absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 rounded transition-opacity"},null,-1)),oe(U(xd),{size:20})],8,KC)],2)]),f.value?(F(),Ve(aC,{key:0})):fe("",!0),oe(sS,{isOpen:t.value,collectionId:r.value,collectionIds:i.value,onClose:z[2]||(z[2]=T=>t.value=!1)},null,8,["isOpen","collectionId","collectionIds"]),oe(NC,{"is-open":n.value,onClose:z[3]||(z[3]=T=>n.value=!1)},null,8,["is-open"]),oe(FC)])]))}},zf=wg(WC),XC=Eg();zf.use(XC);zf.mount("#app");window.MongoDiagram={init:(e={})=>{const t=It();t.initBridge(e),e.autoFetch!==!1&&t.fetchRemoteSchema(),console.log("Mongo Diagram initialized in remote mode:",t.apiBaseUrl)},getStore:()=>It()};
