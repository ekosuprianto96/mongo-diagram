(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Zi(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Le={},to=[],Bt=()=>{},Au=()=>!1,fs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ji=e=>e.startsWith("onUpdate:"),Ke=Object.assign,Qi=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Af=Object.prototype.hasOwnProperty,ke=(e,t)=>Af.call(e,t),ge=Array.isArray,no=e=>cr(e)==="[object Map]",ps=e=>cr(e)==="[object Set]",kl=e=>cr(e)==="[object Date]",be=e=>typeof e=="function",je=e=>typeof e=="string",St=e=>typeof e=="symbol",De=e=>e!==null&&typeof e=="object",Ou=e=>(De(e)||be(e))&&be(e.then)&&be(e.catch),Du=Object.prototype.toString,cr=e=>Du.call(e),Of=e=>cr(e).slice(8,-1),ku=e=>cr(e)==="[object Object]",hs=e=>je(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Lo=Zi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gs=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},Df=/-\w/g,yt=gs(e=>e.replace(Df,t=>t.slice(1).toUpperCase())),kf=/\B([A-Z])/g,_n=gs(e=>e.replace(kf,"-$1").toLowerCase()),ms=gs(e=>e.charAt(0).toUpperCase()+e.slice(1)),Us=gs(e=>e?`on${ms(e)}`:""),Qt=(e,t)=>!Object.is(e,t),kr=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Pu=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},vs=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Pf=e=>{const t=je(e)?Number(e):NaN;return isNaN(t)?e:t};let Pl;const ys=()=>Pl||(Pl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ze(e){if(ge(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],r=je(o)?Ff(o):Ze(o);if(r)for(const s in r)t[s]=r[s]}return t}else if(je(e)||De(e))return e}const Lf=/;(?![^(]*\))/g,Rf=/:([^]+)/,Bf=/\/\*[^]*?\*\//g;function Ff(e){const t={};return e.replace(Bf,"").split(Lf).forEach(n=>{if(n){const o=n.split(Rf);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function ve(e){let t="";if(je(e))t=e;else if(ge(e))for(let n=0;n<e.length;n++){const o=ve(e[n]);o&&(t+=o+" ")}else if(De(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const zf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Vf=Zi(zf);function Lu(e){return!!e||e===""}function Hf(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=Rn(e[o],t[o]);return n}function Rn(e,t){if(e===t)return!0;let n=kl(e),o=kl(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=St(e),o=St(t),n||o)return e===t;if(n=ge(e),o=ge(t),n||o)return n&&o?Hf(e,t):!1;if(n=De(e),o=De(t),n||o){if(!n||!o)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const i in e){const l=e.hasOwnProperty(i),a=t.hasOwnProperty(i);if(l&&!a||!l&&a||!Rn(e[i],t[i]))return!1}}return String(e)===String(t)}function Uf(e,t){return e.findIndex(n=>Rn(n,t))}const Ru=e=>!!(e&&e.__v_isRef===!0),fe=e=>je(e)?e:e==null?"":ge(e)||De(e)&&(e.toString===Du||!be(e.toString))?Ru(e)?fe(e.value):JSON.stringify(e,Bu,2):String(e),Bu=(e,t)=>Ru(t)?Bu(e,t.value):no(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,r],s)=>(n[js(o,s)+" =>"]=r,n),{})}:ps(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>js(n))}:St(t)?js(t):De(t)&&!ge(t)&&!ku(t)?String(t):t,js=(e,t="")=>{var n;return St(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let nt;class Fu{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.__v_skip=!0,this.parent=nt,!t&&nt&&(this.index=(nt.scopes||(nt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=nt;try{return nt=this,t()}finally{nt=n}}}on(){++this._on===1&&(this.prevScope=nt,nt=this)}off(){this._on>0&&--this._on===0&&(nt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function bs(e){return new Fu(e)}function xs(){return nt}function Ro(e,t=!1){nt&&nt.cleanups.push(e)}let Be;const Gs=new WeakSet;class zu{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,nt&&nt.active&&nt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Gs.has(this)&&(Gs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Hu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ll(this),Uu(this);const t=Be,n=wt;Be=this,wt=!0;try{return this.fn()}finally{ju(this),Be=t,wt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)nl(t);this.deps=this.depsTail=void 0,Ll(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Gs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){yi(this)&&this.run()}get dirty(){return yi(this)}}let Vu=0,Bo,Fo;function Hu(e,t=!1){if(e.flags|=8,t){e.next=Fo,Fo=e;return}e.next=Bo,Bo=e}function el(){Vu++}function tl(){if(--Vu>0)return;if(Fo){let t=Fo;for(Fo=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Bo;){let t=Bo;for(Bo=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function Uu(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ju(e){let t,n=e.depsTail,o=n;for(;o;){const r=o.prevDep;o.version===-1?(o===n&&(n=r),nl(o),jf(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=r}e.deps=t,e.depsTail=n}function yi(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Gu(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Gu(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Xo)||(e.globalVersion=Xo,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!yi(e))))return;e.flags|=2;const t=e.dep,n=Be,o=wt;Be=e,wt=!0;try{Uu(e);const r=e.fn(e._value);(t.version===0||Qt(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{Be=n,wt=o,ju(e),e.flags&=-3}}function nl(e,t=!1){const{dep:n,prevSub:o,nextSub:r}=e;if(o&&(o.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)nl(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function jf(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let wt=!0;const Yu=[];function nn(){Yu.push(wt),wt=!1}function on(){const e=Yu.pop();wt=e===void 0?!0:e}function Ll(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Be;Be=void 0;try{t()}finally{Be=n}}}let Xo=0;class Gf{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ws{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Be||!wt||Be===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Be)n=this.activeLink=new Gf(Be,this),Be.deps?(n.prevDep=Be.depsTail,Be.depsTail.nextDep=n,Be.depsTail=n):Be.deps=Be.depsTail=n,Ku(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=Be.depsTail,n.nextDep=void 0,Be.depsTail.nextDep=n,Be.depsTail=n,Be.deps===n&&(Be.deps=o)}return n}trigger(t){this.version++,Xo++,this.notify(t)}notify(t){el();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{tl()}}}function Ku(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Ku(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Gr=new WeakMap,On=Symbol(""),bi=Symbol(""),qo=Symbol("");function ot(e,t,n){if(wt&&Be){let o=Gr.get(e);o||Gr.set(e,o=new Map);let r=o.get(n);r||(o.set(n,r=new ws),r.map=o,r.key=n),r.track()}}function Kt(e,t,n,o,r,s){const i=Gr.get(e);if(!i){Xo++;return}const l=a=>{a&&a.trigger()};if(el(),t==="clear")i.forEach(l);else{const a=ge(e),c=a&&hs(n);if(a&&n==="length"){const u=Number(o);i.forEach((f,g)=>{(g==="length"||g===qo||!St(g)&&g>=u)&&l(f)})}else switch((n!==void 0||i.has(void 0))&&l(i.get(n)),c&&l(i.get(qo)),t){case"add":a?c&&l(i.get("length")):(l(i.get(On)),no(e)&&l(i.get(bi)));break;case"delete":a||(l(i.get(On)),no(e)&&l(i.get(bi)));break;case"set":no(e)&&l(i.get(On));break}}tl()}function Yf(e,t){const n=Gr.get(e);return n&&n.get(t)}function Yn(e){const t=Te(e);return t===e?t:(ot(t,"iterate",qo),gt(e)?t:t.map(Et))}function _s(e){return ot(e=Te(e),"iterate",qo),e}function hn(e,t){return rn(e)?uo(en(e)?Et(t):t):Et(t)}const Kf={__proto__:null,[Symbol.iterator](){return Ys(this,Symbol.iterator,e=>hn(this,e))},concat(...e){return Yn(this).concat(...e.map(t=>ge(t)?Yn(t):t))},entries(){return Ys(this,"entries",e=>(e[1]=hn(this,e[1]),e))},every(e,t){return Ht(this,"every",e,t,void 0,arguments)},filter(e,t){return Ht(this,"filter",e,t,n=>n.map(o=>hn(this,o)),arguments)},find(e,t){return Ht(this,"find",e,t,n=>hn(this,n),arguments)},findIndex(e,t){return Ht(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ht(this,"findLast",e,t,n=>hn(this,n),arguments)},findLastIndex(e,t){return Ht(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ht(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ks(this,"includes",e)},indexOf(...e){return Ks(this,"indexOf",e)},join(e){return Yn(this).join(e)},lastIndexOf(...e){return Ks(this,"lastIndexOf",e)},map(e,t){return Ht(this,"map",e,t,void 0,arguments)},pop(){return wo(this,"pop")},push(...e){return wo(this,"push",e)},reduce(e,...t){return Rl(this,"reduce",e,t)},reduceRight(e,...t){return Rl(this,"reduceRight",e,t)},shift(){return wo(this,"shift")},some(e,t){return Ht(this,"some",e,t,void 0,arguments)},splice(...e){return wo(this,"splice",e)},toReversed(){return Yn(this).toReversed()},toSorted(e){return Yn(this).toSorted(e)},toSpliced(...e){return Yn(this).toSpliced(...e)},unshift(...e){return wo(this,"unshift",e)},values(){return Ys(this,"values",e=>hn(this,e))}};function Ys(e,t,n){const o=_s(e),r=o[t]();return o!==e&&!gt(e)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.done||(s.value=n(s.value)),s}),r}const Wf=Array.prototype;function Ht(e,t,n,o,r,s){const i=_s(e),l=i!==e&&!gt(e),a=i[t];if(a!==Wf[t]){const f=a.apply(e,s);return l?Et(f):f}let c=n;i!==e&&(l?c=function(f,g){return n.call(this,hn(e,f),g,e)}:n.length>2&&(c=function(f,g){return n.call(this,f,g,e)}));const u=a.call(i,c,o);return l&&r?r(u):u}function Rl(e,t,n,o){const r=_s(e);let s=n;return r!==e&&(gt(e)?n.length>3&&(s=function(i,l,a){return n.call(this,i,l,a,e)}):s=function(i,l,a){return n.call(this,i,hn(e,l),a,e)}),r[t](s,...o)}function Ks(e,t,n){const o=Te(e);ot(o,"iterate",qo);const r=o[t](...n);return(r===-1||r===!1)&&Ss(n[0])?(n[0]=Te(n[0]),o[t](...n)):r}function wo(e,t,n=[]){nn(),el();const o=Te(e)[t].apply(e,n);return tl(),on(),o}const Xf=Zi("__proto__,__v_isRef,__isVue"),Wu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(St));function qf(e){St(e)||(e=String(e));const t=Te(this);return ot(t,"has",e),t.hasOwnProperty(e)}class Xu{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return s;if(n==="__v_raw")return o===(r?s?ip:Qu:s?Ju:Zu).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const i=ge(t);if(!r){let a;if(i&&(a=Kf[n]))return a;if(n==="hasOwnProperty")return qf}const l=Reflect.get(t,n,ze(t)?t:o);if((St(n)?Wu.has(n):Xf(n))||(r||ot(t,"get",n),s))return l;if(ze(l)){const a=i&&hs(n)?l:l.value;return r&&De(a)?ao(a):a}return De(l)?r?ao(l):dr(l):l}}class qu extends Xu{constructor(t=!1){super(!1,t)}set(t,n,o,r){let s=t[n];const i=ge(t)&&hs(n);if(!this._isShallow){const c=rn(s);if(!gt(o)&&!rn(o)&&(s=Te(s),o=Te(o)),!i&&ze(s)&&!ze(o))return c||(s.value=o),!0}const l=i?Number(n)<t.length:ke(t,n),a=Reflect.set(t,n,o,ze(t)?t:r);return t===Te(r)&&(l?Qt(o,s)&&Kt(t,"set",n,o):Kt(t,"add",n,o)),a}deleteProperty(t,n){const o=ke(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&o&&Kt(t,"delete",n,void 0),r}has(t,n){const o=Reflect.has(t,n);return(!St(n)||!Wu.has(n))&&ot(t,"has",n),o}ownKeys(t){return ot(t,"iterate",ge(t)?"length":On),Reflect.ownKeys(t)}}class Zf extends Xu{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Jf=new qu,Qf=new Zf,ep=new qu(!0);const xi=e=>e,vr=e=>Reflect.getPrototypeOf(e);function tp(e,t,n){return function(...o){const r=this.__v_raw,s=Te(r),i=no(s),l=e==="entries"||e===Symbol.iterator&&i,a=e==="keys"&&i,c=r[e](...o),u=n?xi:t?uo:Et;return!t&&ot(s,"iterate",a?bi:On),Ke(Object.create(c),{next(){const{value:f,done:g}=c.next();return g?{value:f,done:g}:{value:l?[u(f[0]),u(f[1])]:u(f),done:g}}})}}function yr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function np(e,t){const n={get(r){const s=this.__v_raw,i=Te(s),l=Te(r);e||(Qt(r,l)&&ot(i,"get",r),ot(i,"get",l));const{has:a}=vr(i),c=t?xi:e?uo:Et;if(a.call(i,r))return c(s.get(r));if(a.call(i,l))return c(s.get(l));s!==i&&s.get(r)},get size(){const r=this.__v_raw;return!e&&ot(Te(r),"iterate",On),r.size},has(r){const s=this.__v_raw,i=Te(s),l=Te(r);return e||(Qt(r,l)&&ot(i,"has",r),ot(i,"has",l)),r===l?s.has(r):s.has(r)||s.has(l)},forEach(r,s){const i=this,l=i.__v_raw,a=Te(l),c=t?xi:e?uo:Et;return!e&&ot(a,"iterate",On),l.forEach((u,f)=>r.call(s,c(u),c(f),i))}};return Ke(n,e?{add:yr("add"),set:yr("set"),delete:yr("delete"),clear:yr("clear")}:{add(r){!t&&!gt(r)&&!rn(r)&&(r=Te(r));const s=Te(this);return vr(s).has.call(s,r)||(s.add(r),Kt(s,"add",r,r)),this},set(r,s){!t&&!gt(s)&&!rn(s)&&(s=Te(s));const i=Te(this),{has:l,get:a}=vr(i);let c=l.call(i,r);c||(r=Te(r),c=l.call(i,r));const u=a.call(i,r);return i.set(r,s),c?Qt(s,u)&&Kt(i,"set",r,s):Kt(i,"add",r,s),this},delete(r){const s=Te(this),{has:i,get:l}=vr(s);let a=i.call(s,r);a||(r=Te(r),a=i.call(s,r)),l&&l.call(s,r);const c=s.delete(r);return a&&Kt(s,"delete",r,void 0),c},clear(){const r=Te(this),s=r.size!==0,i=r.clear();return s&&Kt(r,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=tp(r,e,t)}),n}function ol(e,t){const n=np(e,t);return(o,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?o:Reflect.get(ke(n,r)&&r in o?n:o,r,s)}const op={get:ol(!1,!1)},rp={get:ol(!1,!0)},sp={get:ol(!0,!1)};const Zu=new WeakMap,Ju=new WeakMap,Qu=new WeakMap,ip=new WeakMap;function lp(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ap(e){return e.__v_skip||!Object.isExtensible(e)?0:lp(Of(e))}function dr(e){return rn(e)?e:rl(e,!1,Jf,op,Zu)}function up(e){return rl(e,!1,ep,rp,Ju)}function ao(e){return rl(e,!0,Qf,sp,Qu)}function rl(e,t,n,o,r){if(!De(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=ap(e);if(s===0)return e;const i=r.get(e);if(i)return i;const l=new Proxy(e,s===2?o:n);return r.set(e,l),l}function en(e){return rn(e)?en(e.__v_raw):!!(e&&e.__v_isReactive)}function rn(e){return!!(e&&e.__v_isReadonly)}function gt(e){return!!(e&&e.__v_isShallow)}function Ss(e){return e?!!e.__v_raw:!1}function Te(e){const t=e&&e.__v_raw;return t?Te(t):e}function bn(e){return!ke(e,"__v_skip")&&Object.isExtensible(e)&&Pu(e,"__v_skip",!0),e}const Et=e=>De(e)?dr(e):e,uo=e=>De(e)?ao(e):e;function ze(e){return e?e.__v_isRef===!0:!1}function xe(e){return ec(e,!1)}function qt(e){return ec(e,!0)}function ec(e,t){return ze(e)?e:new cp(e,t)}class cp{constructor(t,n){this.dep=new ws,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Te(t),this._value=n?t:Et(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||gt(t)||rn(t);t=o?t:Te(t),Qt(t,n)&&(this._rawValue=t,this._value=o?t:Et(t),this.dep.trigger())}}function z(e){return ze(e)?e.value:e}function _e(e){return be(e)?e():z(e)}const dp={get:(e,t,n)=>t==="__v_raw"?e:z(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const r=e[t];return ze(r)&&!ze(n)?(r.value=n,!0):Reflect.set(e,t,n,o)}};function tc(e){return en(e)?e:new Proxy(e,dp)}class fp{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new ws,{get:o,set:r}=t(n.track.bind(n),n.trigger.bind(n));this._get=o,this._set=r}get value(){return this._value=this._get()}set value(t){this._set(t)}}function nc(e){return new fp(e)}function oc(e){const t=ge(e)?new Array(e.length):{};for(const n in e)t[n]=rc(e,n);return t}class pp{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0,this._raw=Te(t);let r=!0,s=t;if(!ge(t)||!hs(String(n)))do r=!Ss(s)||gt(s);while(r&&(s=s.__v_raw));this._shallow=r}get value(){let t=this._object[this._key];return this._shallow&&(t=z(t)),this._value=t===void 0?this._defaultValue:t}set value(t){if(this._shallow&&ze(this._raw[this._key])){const n=this._object[this._key];if(ze(n)){n.value=t;return}}this._object[this._key]=t}get dep(){return Yf(this._raw,this._key)}}class hp{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Pe(e,t,n){return ze(e)?e:be(e)?new hp(e):De(e)&&arguments.length>1?rc(e,t,n):xe(e)}function rc(e,t,n){return new pp(e,t,n)}class gp{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ws(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Xo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Be!==this)return Hu(this,!0),!0}get value(){const t=this.dep.track();return Gu(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function mp(e,t,n=!1){let o,r;return be(e)?o=e:(o=e.get,r=e.set),new gp(o,r,n)}const br={},Yr=new WeakMap;let $n;function vp(e,t=!1,n=$n){if(n){let o=Yr.get(n);o||Yr.set(n,o=[]),o.push(e)}}function yp(e,t,n=Le){const{immediate:o,deep:r,once:s,scheduler:i,augmentJob:l,call:a}=n,c=w=>r?w:gt(w)||r===!1||r===0?Wt(w,1):Wt(w);let u,f,g,m,N=!1,y=!1;if(ze(e)?(f=()=>e.value,N=gt(e)):en(e)?(f=()=>c(e),N=!0):ge(e)?(y=!0,N=e.some(w=>en(w)||gt(w)),f=()=>e.map(w=>{if(ze(w))return w.value;if(en(w))return c(w);if(be(w))return a?a(w,2):w()})):be(e)?t?f=a?()=>a(e,2):e:f=()=>{if(g){nn();try{g()}finally{on()}}const w=$n;$n=u;try{return a?a(e,3,[m]):e(m)}finally{$n=w}}:f=Bt,t&&r){const w=f,A=r===!0?1/0:r;f=()=>Wt(w(),A)}const S=xs(),C=()=>{u.stop(),S&&S.active&&Qi(S.effects,u)};if(s&&t){const w=t;t=(...A)=>{w(...A),C()}}let T=y?new Array(e.length).fill(br):br;const v=w=>{if(!(!(u.flags&1)||!u.dirty&&!w))if(t){const A=u.run();if(r||N||(y?A.some((R,G)=>Qt(R,T[G])):Qt(A,T))){g&&g();const R=$n;$n=u;try{const G=[A,T===br?void 0:y&&T[0]===br?[]:T,m];T=A,a?a(t,3,G):t(...G)}finally{$n=R}}}else u.run()};return l&&l(v),u=new zu(f),u.scheduler=i?()=>i(v,!1):v,m=w=>vp(w,!1,u),g=u.onStop=()=>{const w=Yr.get(u);if(w){if(a)a(w,4);else for(const A of w)A();Yr.delete(u)}},t?o?v(!0):T=u.run():i?i(v.bind(null,!0),!0):u.run(),C.pause=u.pause.bind(u),C.resume=u.resume.bind(u),C.stop=C,C}function Wt(e,t=1/0,n){if(t<=0||!De(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,ze(e))Wt(e.value,t,n);else if(ge(e))for(let o=0;o<e.length;o++)Wt(e[o],t,n);else if(ps(e)||no(e))e.forEach(o=>{Wt(o,t,n)});else if(ku(e)){for(const o in e)Wt(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&Wt(e[o],t,n)}return e}function fr(e,t,n,o){try{return o?e(...o):e()}catch(r){Es(r,t,n)}}function Ct(e,t,n,o){if(be(e)){const r=fr(e,t,n,o);return r&&Ou(r)&&r.catch(s=>{Es(s,t,n)}),r}if(ge(e)){const r=[];for(let s=0;s<e.length;s++)r.push(Ct(e[s],t,n,o));return r}}function Es(e,t,n,o=!0){const r=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||Le;if(t){let l=t.parent;const a=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const u=l.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,a,c)===!1)return}l=l.parent}if(s){nn(),fr(s,null,10,[e,a,c]),on();return}}bp(e,n,r,o,i)}function bp(e,t,n,o=!0,r=!1){if(r)throw e;console.error(e)}const lt=[];let Dt=-1;const oo=[];let gn=null,Zn=0;const sc=Promise.resolve();let Kr=null;function ut(e){const t=Kr||sc;return e?t.then(this?e.bind(this):e):t}function xp(e){let t=Dt+1,n=lt.length;for(;t<n;){const o=t+n>>>1,r=lt[o],s=Zo(r);s<e||s===e&&r.flags&2?t=o+1:n=o}return t}function sl(e){if(!(e.flags&1)){const t=Zo(e),n=lt[lt.length-1];!n||!(e.flags&2)&&t>=Zo(n)?lt.push(e):lt.splice(xp(t),0,e),e.flags|=1,ic()}}function ic(){Kr||(Kr=sc.then(ac))}function wp(e){ge(e)?oo.push(...e):gn&&e.id===-1?gn.splice(Zn+1,0,e):e.flags&1||(oo.push(e),e.flags|=1),ic()}function Bl(e,t,n=Dt+1){for(;n<lt.length;n++){const o=lt[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;lt.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function lc(e){if(oo.length){const t=[...new Set(oo)].sort((n,o)=>Zo(n)-Zo(o));if(oo.length=0,gn){gn.push(...t);return}for(gn=t,Zn=0;Zn<gn.length;Zn++){const n=gn[Zn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}gn=null,Zn=0}}const Zo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ac(e){try{for(Dt=0;Dt<lt.length;Dt++){const t=lt[Dt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),fr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Dt<lt.length;Dt++){const t=lt[Dt];t&&(t.flags&=-2)}Dt=-1,lt.length=0,lc(),Kr=null,(lt.length||oo.length)&&ac()}}let Je=null,uc=null;function Wr(e){const t=Je;return Je=e,uc=e&&e.type.__scopeId||null,t}function ht(e,t=Je,n){if(!t||e._n)return e;const o=(...r)=>{o._d&&Zr(-1);const s=Wr(t);let i;try{i=e(...r)}finally{Wr(s),o._d&&Zr(1)}return i};return o._n=!0,o._c=!0,o._d=!0,o}function Bn(e,t){if(Je===null)return e;const n=$s(Je),o=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[s,i,l,a=Le]=t[r];s&&(be(s)&&(s={mounted:s,updated:s}),s.deep&&Wt(i),o.push({dir:s,instance:n,value:i,oldValue:void 0,arg:l,modifiers:a}))}return e}function Nn(e,t,n,o){const r=e.dirs,s=t&&t.dirs;for(let i=0;i<r.length;i++){const l=r[i];s&&(l.oldValue=s[i].value);let a=l.dir[o];a&&(nn(),Ct(a,n,8,[e.el,l,e,t]),on())}}function Fn(e,t){if(rt){let n=rt.provides;const o=rt.parent&&rt.parent.provides;o===n&&(n=rt.provides=Object.create(o)),n[e]=t}}function _t(e,t,n=!1){const o=Nt();if(o||Dn){let r=Dn?Dn._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&be(t)?t.call(o&&o.proxy):t}}function _p(){return!!(Nt()||Dn)}const Sp=Symbol.for("v-scx"),Ep=()=>_t(Sp);function Se(e,t,n){return cc(e,t,n)}function cc(e,t,n=Le){const{immediate:o,deep:r,flush:s,once:i}=n,l=Ke({},n),a=t&&o||!t&&s!=="post";let c;if(er){if(s==="sync"){const m=Ep();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!a){const m=()=>{};return m.stop=Bt,m.resume=Bt,m.pause=Bt,m}}const u=rt;l.call=(m,N,y)=>Ct(m,u,N,y);let f=!1;s==="post"?l.scheduler=m=>{tt(m,u&&u.suspense)}:s!=="sync"&&(f=!0,l.scheduler=(m,N)=>{N?m():sl(m)}),l.augmentJob=m=>{t&&(m.flags|=4),f&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const g=yp(e,t,l);return er&&(c?c.push(g):a&&g()),g}function Cp(e,t,n){const o=this.proxy,r=je(e)?e.includes(".")?dc(o,e):()=>o[e]:e.bind(o,o);let s;be(t)?s=t:(s=t.handler,n=t);const i=pr(this),l=cc(r,s.bind(o),n);return i(),l}function dc(e,t){const n=t.split(".");return()=>{let o=e;for(let r=0;r<n.length&&o;r++)o=o[n[r]];return o}}const fc=Symbol("_vte"),Np=e=>e.__isTeleport,zo=e=>e&&(e.disabled||e.disabled===""),Fl=e=>e&&(e.defer||e.defer===""),zl=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Vl=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,wi=(e,t)=>{const n=e&&e.to;return je(n)?t?t(n):null:n},pc={name:"Teleport",__isTeleport:!0,process(e,t,n,o,r,s,i,l,a,c){const{mc:u,pc:f,pbc:g,o:{insert:m,querySelector:N,createText:y,createComment:S}}=c,C=zo(t.props);let{shapeFlag:T,children:v,dynamicChildren:w}=t;if(e==null){const A=t.el=y(""),R=t.anchor=y("");m(A,n,o),m(R,n,o);const G=(V,X)=>{T&16&&u(v,V,X,r,s,i,l,a)},j=()=>{const V=t.target=wi(t.props,N),X=_i(V,t,y,m);V&&(i!=="svg"&&zl(V)?i="svg":i!=="mathml"&&Vl(V)&&(i="mathml"),r&&r.isCE&&(r.ce._teleportTargets||(r.ce._teleportTargets=new Set)).add(V),C||(G(V,X),Pr(t,!1)))};C&&(G(n,R),Pr(t,!0)),Fl(t.props)?(t.el.__isMounted=!1,tt(()=>{j(),delete t.el.__isMounted},s)):j()}else{if(Fl(t.props)&&e.el.__isMounted===!1){tt(()=>{pc.process(e,t,n,o,r,s,i,l,a,c)},s);return}t.el=e.el,t.targetStart=e.targetStart;const A=t.anchor=e.anchor,R=t.target=e.target,G=t.targetAnchor=e.targetAnchor,j=zo(e.props),V=j?n:R,X=j?A:G;if(i==="svg"||zl(R)?i="svg":(i==="mathml"||Vl(R))&&(i="mathml"),w?(g(e.dynamicChildren,w,V,r,s,i,l),ul(e,t,!0)):a||f(e,t,V,X,r,s,i,l,!1),C)j?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):xr(t,n,A,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const W=t.target=wi(t.props,N);W&&xr(t,W,null,c,0)}else j&&xr(t,R,G,c,1);Pr(t,C)}},remove(e,t,n,{um:o,o:{remove:r}},s){const{shapeFlag:i,children:l,anchor:a,targetStart:c,targetAnchor:u,target:f,props:g}=e;if(f&&(r(c),r(u)),s&&r(a),i&16){const m=s||!zo(g);for(let N=0;N<l.length;N++){const y=l[N];o(y,t,n,m,!!y.dynamicChildren)}}},move:xr,hydrate:Ip};function xr(e,t,n,{o:{insert:o},m:r},s=2){s===0&&o(e.targetAnchor,t,n);const{el:i,anchor:l,shapeFlag:a,children:c,props:u}=e,f=s===2;if(f&&o(i,t,n),(!f||zo(u))&&a&16)for(let g=0;g<c.length;g++)r(c[g],t,n,2);f&&o(l,t,n)}function Ip(e,t,n,o,r,s,{o:{nextSibling:i,parentNode:l,querySelector:a,insert:c,createText:u}},f){function g(S,C){let T=C;for(;T;){if(T&&T.nodeType===8){if(T.data==="teleport start anchor")t.targetStart=T;else if(T.data==="teleport anchor"){t.targetAnchor=T,S._lpa=t.targetAnchor&&i(t.targetAnchor);break}}T=i(T)}}function m(S,C){C.anchor=f(i(S),C,l(S),n,o,r,s)}const N=t.target=wi(t.props,a),y=zo(t.props);if(N){const S=N._lpa||N.firstChild;t.shapeFlag&16&&(y?(m(e,t),g(N,S),t.targetAnchor||_i(N,t,u,c,l(e)===N?e:null)):(t.anchor=i(e),g(N,S),t.targetAnchor||_i(N,t,u,c),f(S&&i(S),t,N,n,o,r,s))),Pr(t,y)}else y&&t.shapeFlag&16&&(m(e,t),t.targetStart=e,t.targetAnchor=i(e));return t.anchor&&i(t.anchor)}const Tp=pc;function Pr(e,t){const n=e.ctx;if(n&&n.ut){let o,r;for(t?(o=e.el,r=e.anchor):(o=e.targetStart,r=e.targetAnchor);o&&o!==r;)o.nodeType===1&&o.setAttribute("data-v-owner",n.uid),o=o.nextSibling;n.ut()}}function _i(e,t,n,o,r=null){const s=t.targetStart=n(""),i=t.targetAnchor=n("");return s[fc]=i,e&&(o(s,e,r),o(i,e,r)),i}const cn=Symbol("_leaveCb"),_o=Symbol("_enterCb");function $p(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ct(()=>{e.isMounted=!0}),Ns(()=>{e.isUnmounting=!0}),e}const vt=[Function,Array],Mp={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:vt,onEnter:vt,onAfterEnter:vt,onEnterCancelled:vt,onBeforeLeave:vt,onLeave:vt,onAfterLeave:vt,onLeaveCancelled:vt,onBeforeAppear:vt,onAppear:vt,onAfterAppear:vt,onAppearCancelled:vt};function Ap(e,t){const{leavingVNodes:n}=e;let o=n.get(t.type);return o||(o=Object.create(null),n.set(t.type,o)),o}function Si(e,t,n,o,r){const{appear:s,mode:i,persisted:l=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:g,onLeave:m,onAfterLeave:N,onLeaveCancelled:y,onBeforeAppear:S,onAppear:C,onAfterAppear:T,onAppearCancelled:v}=t,w=String(e.key),A=Ap(n,e),R=(V,X)=>{V&&Ct(V,o,9,X)},G=(V,X)=>{const W=X[1];R(V,X),ge(V)?V.every($=>$.length<=1)&&W():V.length<=1&&W()},j={mode:i,persisted:l,beforeEnter(V){let X=a;if(!n.isMounted)if(s)X=S||a;else return;V[cn]&&V[cn](!0);const W=A[w];W&&Qn(e,W)&&W.el[cn]&&W.el[cn](),R(X,[V])},enter(V){let X=c,W=u,$=f;if(!n.isMounted)if(s)X=C||c,W=T||u,$=v||f;else return;let Q=!1;V[_o]=K=>{Q||(Q=!0,K?R($,[V]):R(W,[V]),j.delayedLeave&&j.delayedLeave(),V[_o]=void 0)};const M=V[_o].bind(null,!1);X?G(X,[V,M]):M()},leave(V,X){const W=String(e.key);if(V[_o]&&V[_o](!0),n.isUnmounting)return X();R(g,[V]);let $=!1;V[cn]=M=>{$||($=!0,X(),M?R(y,[V]):R(N,[V]),V[cn]=void 0,A[W]===e&&delete A[W])};const Q=V[cn].bind(null,!1);A[W]=e,m?G(m,[V,Q]):Q()},clone(V){return Si(V,t,n,o)}};return j}function Jo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Jo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function hc(e,t=!1,n){let o=[],r=0;for(let s=0;s<e.length;s++){let i=e[s];const l=n==null?i.key:String(n)+String(i.key!=null?i.key:s);i.type===ue?(i.patchFlag&128&&r++,o=o.concat(hc(i.children,t,l))):(t||i.type!==zt)&&o.push(l!=null?zn(i,{key:l}):i)}if(r>1)for(let s=0;s<o.length;s++)o[s].patchFlag=-2;return o}function He(e,t){return be(e)?Ke({name:e.name},t,{setup:e}):e}function gc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Hl(e,t){let n;return!!((n=Object.getOwnPropertyDescriptor(e,t))&&!n.configurable)}const Xr=new WeakMap;function Vo(e,t,n,o,r=!1){if(ge(e)){e.forEach((y,S)=>Vo(y,t&&(ge(t)?t[S]:t),n,o,r));return}if(ro(o)&&!r){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&Vo(e,t,n,o.component.subTree);return}const s=o.shapeFlag&4?$s(o.component):o.el,i=r?null:s,{i:l,r:a}=e,c=t&&t.r,u=l.refs===Le?l.refs={}:l.refs,f=l.setupState,g=Te(f),m=f===Le?Au:y=>Hl(u,y)?!1:ke(g,y),N=(y,S)=>!(S&&Hl(u,S));if(c!=null&&c!==a){if(Ul(t),je(c))u[c]=null,m(c)&&(f[c]=null);else if(ze(c)){const y=t;N(c,y.k)&&(c.value=null),y.k&&(u[y.k]=null)}}if(be(a))fr(a,l,12,[i,u]);else{const y=je(a),S=ze(a);if(y||S){const C=()=>{if(e.f){const T=y?m(a)?f[a]:u[a]:N()||!e.k?a.value:u[e.k];if(r)ge(T)&&Qi(T,s);else if(ge(T))T.includes(s)||T.push(s);else if(y)u[a]=[s],m(a)&&(f[a]=u[a]);else{const v=[s];N(a,e.k)&&(a.value=v),e.k&&(u[e.k]=v)}}else y?(u[a]=i,m(a)&&(f[a]=i)):S&&(N(a,e.k)&&(a.value=i),e.k&&(u[e.k]=i))};if(i){const T=()=>{C(),Xr.delete(e)};T.id=-1,Xr.set(e,T),tt(T,n)}else Ul(e),C()}}}function Ul(e){const t=Xr.get(e);t&&(t.flags|=8,Xr.delete(e))}ys().requestIdleCallback;ys().cancelIdleCallback;const ro=e=>!!e.type.__asyncLoader,mc=e=>e.type.__isKeepAlive;function Op(e,t){vc(e,"a",t)}function Dp(e,t){vc(e,"da",t)}function vc(e,t,n=rt){const o=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Cs(t,o,n),n){let r=n.parent;for(;r&&r.parent;)mc(r.parent.vnode)&&kp(o,t,n,r),r=r.parent}}function kp(e,t,n,o){const r=Cs(t,e,o,!0);Sn(()=>{Qi(o[t],r)},n)}function Cs(e,t,n=rt,o=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...i)=>{nn();const l=pr(n),a=Ct(t,n,e,i);return l(),on(),a});return o?r.unshift(s):r.push(s),s}}const ln=e=>(t,n=rt)=>{(!er||e==="sp")&&Cs(e,(...o)=>t(...o),n)},yc=ln("bm"),ct=ln("m"),Pp=ln("bu"),bc=ln("u"),Ns=ln("bum"),Sn=ln("um"),Lp=ln("sp"),Rp=ln("rtg"),Bp=ln("rtc");function Fp(e,t=rt){Cs("ec",e,t)}const xc="components";function il(e,t){return _c(xc,e,!0,t)||e}const wc=Symbol.for("v-ndc");function Jn(e){return je(e)?_c(xc,e,!1)||e:e||wc}function _c(e,t,n=!0,o=!1){const r=Je||rt;if(r){const s=r.type;{const l=Ch(s,!1);if(l&&(l===t||l===yt(t)||l===ms(yt(t))))return s}const i=jl(r[e]||s[e],t)||jl(r.appContext[e],t);return!i&&o?s:i}}function jl(e,t){return e&&(e[t]||e[yt(t)]||e[ms(yt(t))])}function Ee(e,t,n,o){let r;const s=n&&n[o],i=ge(e);if(i||je(e)){const l=i&&en(e);let a=!1,c=!1;l&&(a=!gt(e),c=rn(e),e=_s(e)),r=new Array(e.length);for(let u=0,f=e.length;u<f;u++)r[u]=t(a?c?uo(Et(e[u])):Et(e[u]):e[u],u,void 0,s&&s[u])}else if(typeof e=="number"){r=new Array(e);for(let l=0;l<e;l++)r[l]=t(l+1,l,void 0,s&&s[l])}else if(De(e))if(e[Symbol.iterator])r=Array.from(e,(l,a)=>t(l,a,void 0,s&&s[a]));else{const l=Object.keys(e);r=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const u=l[a];r[a]=t(e[u],u,a,s&&s[a])}}else r=[];return n&&(n[o]=r),r}function Ue(e,t,n={},o,r){if(Je.ce||Je.parent&&ro(Je.parent)&&Je.parent.ce){const c=Object.keys(n).length>0;return t!=="default"&&(n.name=t),B(),Ve(ue,null,[le("slot",n,o&&o())],c?-2:64)}let s=e[t];s&&s._c&&(s._d=!1),B();const i=s&&Sc(s(n)),l=n.key||i&&i.key,a=Ve(ue,{key:(l&&!St(l)?l:`_${t}`)+(!i&&o?"_fb":"")},i||(o?o():[]),i&&e._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function Sc(e){return e.some(t=>Qo(t)?!(t.type===zt||t.type===ue&&!Sc(t.children)):!0)?e:null}const Ei=e=>e?Uc(e)?$s(e):Ei(e.parent):null,Ho=Ke(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ei(e.parent),$root:e=>Ei(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Nc(e),$forceUpdate:e=>e.f||(e.f=()=>{sl(e.update)}),$nextTick:e=>e.n||(e.n=ut.bind(e.proxy)),$watch:e=>Cp.bind(e)}),Ws=(e,t)=>e!==Le&&!e.__isScriptSetup&&ke(e,t),zp={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:r,props:s,accessCache:i,type:l,appContext:a}=e;if(t[0]!=="$"){const g=i[t];if(g!==void 0)switch(g){case 1:return o[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(Ws(o,t))return i[t]=1,o[t];if(r!==Le&&ke(r,t))return i[t]=2,r[t];if(ke(s,t))return i[t]=3,s[t];if(n!==Le&&ke(n,t))return i[t]=4,n[t];Ci&&(i[t]=0)}}const c=Ho[t];let u,f;if(c)return t==="$attrs"&&ot(e.attrs,"get",""),c(e);if((u=l.__cssModules)&&(u=u[t]))return u;if(n!==Le&&ke(n,t))return i[t]=4,n[t];if(f=a.config.globalProperties,ke(f,t))return f[t]},set({_:e},t,n){const{data:o,setupState:r,ctx:s}=e;return Ws(r,t)?(r[t]=n,!0):o!==Le&&ke(o,t)?(o[t]=n,!0):ke(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:r,props:s,type:i}},l){let a;return!!(n[l]||e!==Le&&l[0]!=="$"&&ke(e,l)||Ws(t,l)||ke(s,l)||ke(o,l)||ke(Ho,l)||ke(r.config.globalProperties,l)||(a=i.__cssModules)&&a[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ke(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Vp(){return Ec().slots}function Hp(){return Ec().attrs}function Ec(e){const t=Nt();return t.setupContext||(t.setupContext=Gc(t))}function Gl(e){return ge(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function Up(e,t){const n={};for(const o in e)t.includes(o)||Object.defineProperty(n,o,{enumerable:!0,get:()=>e[o]});return n}let Ci=!0;function jp(e){const t=Nc(e),n=e.proxy,o=e.ctx;Ci=!1,t.beforeCreate&&Yl(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:i,watch:l,provide:a,inject:c,created:u,beforeMount:f,mounted:g,beforeUpdate:m,updated:N,activated:y,deactivated:S,beforeDestroy:C,beforeUnmount:T,destroyed:v,unmounted:w,render:A,renderTracked:R,renderTriggered:G,errorCaptured:j,serverPrefetch:V,expose:X,inheritAttrs:W,components:$,directives:Q,filters:M}=t;if(c&&Gp(c,o,null),i)for(const D in i){const P=i[D];be(P)&&(o[D]=P.bind(n))}if(r){const D=r.call(n,n);De(D)&&(e.data=dr(D))}if(Ci=!0,s)for(const D in s){const P=s[D],d=be(P)?P.bind(n,n):be(P.get)?P.get.bind(n,n):Bt,h=!be(P)&&be(P.set)?P.set.bind(n):Bt,J=se({get:d,set:h});Object.defineProperty(o,D,{enumerable:!0,configurable:!0,get:()=>J.value,set:ne=>J.value=ne})}if(l)for(const D in l)Cc(l[D],o,n,D);if(a){const D=be(a)?a.call(n):a;Reflect.ownKeys(D).forEach(P=>{Fn(P,D[P])})}u&&Yl(u,e,"c");function L(D,P){ge(P)?P.forEach(d=>D(d.bind(n))):P&&D(P.bind(n))}if(L(yc,f),L(ct,g),L(Pp,m),L(bc,N),L(Op,y),L(Dp,S),L(Fp,j),L(Bp,R),L(Rp,G),L(Ns,T),L(Sn,w),L(Lp,V),ge(X))if(X.length){const D=e.exposed||(e.exposed={});X.forEach(P=>{Object.defineProperty(D,P,{get:()=>n[P],set:d=>n[P]=d,enumerable:!0})})}else e.exposed||(e.exposed={});A&&e.render===Bt&&(e.render=A),W!=null&&(e.inheritAttrs=W),$&&(e.components=$),Q&&(e.directives=Q),V&&gc(e)}function Gp(e,t,n=Bt){ge(e)&&(e=Ni(e));for(const o in e){const r=e[o];let s;De(r)?"default"in r?s=_t(r.from||o,r.default,!0):s=_t(r.from||o):s=_t(r),ze(s)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:i=>s.value=i}):t[o]=s}}function Yl(e,t,n){Ct(ge(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function Cc(e,t,n,o){let r=o.includes(".")?dc(n,o):()=>n[o];if(je(e)){const s=t[e];be(s)&&Se(r,s)}else if(be(e))Se(r,e.bind(n));else if(De(e))if(ge(e))e.forEach(s=>Cc(s,t,n,o));else{const s=be(e.handler)?e.handler.bind(n):t[e.handler];be(s)&&Se(r,s,e)}}function Nc(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:i}}=e.appContext,l=s.get(t);let a;return l?a=l:!r.length&&!n&&!o?a=t:(a={},r.length&&r.forEach(c=>qr(a,c,i,!0)),qr(a,t,i)),De(t)&&s.set(t,a),a}function qr(e,t,n,o=!1){const{mixins:r,extends:s}=t;s&&qr(e,s,n,!0),r&&r.forEach(i=>qr(e,i,n,!0));for(const i in t)if(!(o&&i==="expose")){const l=Yp[i]||n&&n[i];e[i]=l?l(e[i],t[i]):t[i]}return e}const Yp={data:Kl,props:Wl,emits:Wl,methods:Ao,computed:Ao,beforeCreate:st,created:st,beforeMount:st,mounted:st,beforeUpdate:st,updated:st,beforeDestroy:st,beforeUnmount:st,destroyed:st,unmounted:st,activated:st,deactivated:st,errorCaptured:st,serverPrefetch:st,components:Ao,directives:Ao,watch:Wp,provide:Kl,inject:Kp};function Kl(e,t){return t?e?function(){return Ke(be(e)?e.call(this,this):e,be(t)?t.call(this,this):t)}:t:e}function Kp(e,t){return Ao(Ni(e),Ni(t))}function Ni(e){if(ge(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function st(e,t){return e?[...new Set([].concat(e,t))]:t}function Ao(e,t){return e?Ke(Object.create(null),e,t):t}function Wl(e,t){return e?ge(e)&&ge(t)?[...new Set([...e,...t])]:Ke(Object.create(null),Gl(e),Gl(t??{})):t}function Wp(e,t){if(!e)return t;if(!t)return e;const n=Ke(Object.create(null),e);for(const o in t)n[o]=st(e[o],t[o]);return n}function Ic(){return{app:null,config:{isNativeTag:Au,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Xp=0;function qp(e,t){return function(o,r=null){be(o)||(o=Ke({},o)),r!=null&&!De(r)&&(r=null);const s=Ic(),i=new WeakSet,l=[];let a=!1;const c=s.app={_uid:Xp++,_component:o,_props:r,_container:null,_context:s,_instance:null,version:Th,get config(){return s.config},set config(u){},use(u,...f){return i.has(u)||(u&&be(u.install)?(i.add(u),u.install(c,...f)):be(u)&&(i.add(u),u(c,...f))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,f){return f?(s.components[u]=f,c):s.components[u]},directive(u,f){return f?(s.directives[u]=f,c):s.directives[u]},mount(u,f,g){if(!a){const m=c._ceVNode||le(o,r);return m.appContext=s,g===!0?g="svg":g===!1&&(g=void 0),e(m,u,g),a=!0,c._container=u,u.__vue_app__=c,$s(m.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Ct(l,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,f){return s.provides[u]=f,c},runWithContext(u){const f=Dn;Dn=c;try{return u()}finally{Dn=f}}};return c}}let Dn=null;const Zp=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${yt(t)}Modifiers`]||e[`${_n(t)}Modifiers`];function Jp(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||Le;let r=n;const s=t.startsWith("update:"),i=s&&Zp(o,t.slice(7));i&&(i.trim&&(r=n.map(u=>je(u)?u.trim():u)),i.number&&(r=n.map(vs)));let l,a=o[l=Us(t)]||o[l=Us(yt(t))];!a&&s&&(a=o[l=Us(_n(t))]),a&&Ct(a,e,6,r);const c=o[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Ct(c,e,6,r)}}const Qp=new WeakMap;function Tc(e,t,n=!1){const o=n?Qp:t.emitsCache,r=o.get(e);if(r!==void 0)return r;const s=e.emits;let i={},l=!1;if(!be(e)){const a=c=>{const u=Tc(c,t,!0);u&&(l=!0,Ke(i,u))};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!s&&!l?(De(e)&&o.set(e,null),null):(ge(s)?s.forEach(a=>i[a]=null):Ke(i,s),De(e)&&o.set(e,i),i)}function Is(e,t){return!e||!fs(t)?!1:(t=t.slice(2).replace(/Once$/,""),ke(e,t[0].toLowerCase()+t.slice(1))||ke(e,_n(t))||ke(e,t))}function Xl(e){const{type:t,vnode:n,proxy:o,withProxy:r,propsOptions:[s],slots:i,attrs:l,emit:a,render:c,renderCache:u,props:f,data:g,setupState:m,ctx:N,inheritAttrs:y}=e,S=Wr(e);let C,T;try{if(n.shapeFlag&4){const w=r||o,A=w;C=Pt(c.call(A,w,u,f,m,g,N)),T=l}else{const w=t;C=Pt(w.length>1?w(f,{attrs:l,slots:i,emit:a}):w(f,null)),T=t.props?l:eh(l)}}catch(w){Uo.length=0,Es(w,e,1),C=le(zt)}let v=C;if(T&&y!==!1){const w=Object.keys(T),{shapeFlag:A}=v;w.length&&A&7&&(s&&w.some(Ji)&&(T=th(T,s)),v=zn(v,T,!1,!0))}return n.dirs&&(v=zn(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(n.dirs):n.dirs),n.transition&&Jo(v,n.transition),C=v,Wr(S),C}const eh=e=>{let t;for(const n in e)(n==="class"||n==="style"||fs(n))&&((t||(t={}))[n]=e[n]);return t},th=(e,t)=>{const n={};for(const o in e)(!Ji(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function nh(e,t,n){const{props:o,children:r,component:s}=e,{props:i,children:l,patchFlag:a}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return o?ql(o,i,c):!!i;if(a&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const g=u[f];if($c(i,o,g)&&!Is(c,g))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:o===i?!1:o?i?ql(o,i,c):!0:!!i;return!1}function ql(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let r=0;r<o.length;r++){const s=o[r];if($c(t,e,s)&&!Is(n,s))return!0}return!1}function $c(e,t,n){const o=e[n],r=t[n];return n==="style"&&De(o)&&De(r)?!Rn(o,r):o!==r}function oh({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const Mc={},Ac=()=>Object.create(Mc),Oc=e=>Object.getPrototypeOf(e)===Mc;function rh(e,t,n,o=!1){const r={},s=Ac();e.propsDefaults=Object.create(null),Dc(e,t,r,s);for(const i in e.propsOptions[0])i in r||(r[i]=void 0);n?e.props=o?r:up(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function sh(e,t,n,o){const{props:r,attrs:s,vnode:{patchFlag:i}}=e,l=Te(r),[a]=e.propsOptions;let c=!1;if((o||i>0)&&!(i&16)){if(i&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let g=u[f];if(Is(e.emitsOptions,g))continue;const m=t[g];if(a)if(ke(s,g))m!==s[g]&&(s[g]=m,c=!0);else{const N=yt(g);r[N]=Ii(a,l,N,m,e,!1)}else m!==s[g]&&(s[g]=m,c=!0)}}}else{Dc(e,t,r,s)&&(c=!0);let u;for(const f in l)(!t||!ke(t,f)&&((u=_n(f))===f||!ke(t,u)))&&(a?n&&(n[f]!==void 0||n[u]!==void 0)&&(r[f]=Ii(a,l,f,void 0,e,!0)):delete r[f]);if(s!==l)for(const f in s)(!t||!ke(t,f))&&(delete s[f],c=!0)}c&&Kt(e.attrs,"set","")}function Dc(e,t,n,o){const[r,s]=e.propsOptions;let i=!1,l;if(t)for(let a in t){if(Lo(a))continue;const c=t[a];let u;r&&ke(r,u=yt(a))?!s||!s.includes(u)?n[u]=c:(l||(l={}))[u]=c:Is(e.emitsOptions,a)||(!(a in o)||c!==o[a])&&(o[a]=c,i=!0)}if(s){const a=Te(n),c=l||Le;for(let u=0;u<s.length;u++){const f=s[u];n[f]=Ii(r,a,f,c[f],e,!ke(c,f))}}return i}function Ii(e,t,n,o,r,s){const i=e[n];if(i!=null){const l=ke(i,"default");if(l&&o===void 0){const a=i.default;if(i.type!==Function&&!i.skipFactory&&be(a)){const{propsDefaults:c}=r;if(n in c)o=c[n];else{const u=pr(r);o=c[n]=a.call(null,t),u()}}else o=a;r.ce&&r.ce._setProp(n,o)}i[0]&&(s&&!l?o=!1:i[1]&&(o===""||o===_n(n))&&(o=!0))}return o}const ih=new WeakMap;function kc(e,t,n=!1){const o=n?ih:t.propsCache,r=o.get(e);if(r)return r;const s=e.props,i={},l=[];let a=!1;if(!be(e)){const u=f=>{a=!0;const[g,m]=kc(f,t,!0);Ke(i,g),m&&l.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!a)return De(e)&&o.set(e,to),to;if(ge(s))for(let u=0;u<s.length;u++){const f=yt(s[u]);Zl(f)&&(i[f]=Le)}else if(s)for(const u in s){const f=yt(u);if(Zl(f)){const g=s[u],m=i[f]=ge(g)||be(g)?{type:g}:Ke({},g),N=m.type;let y=!1,S=!0;if(ge(N))for(let C=0;C<N.length;++C){const T=N[C],v=be(T)&&T.name;if(v==="Boolean"){y=!0;break}else v==="String"&&(S=!1)}else y=be(N)&&N.name==="Boolean";m[0]=y,m[1]=S,(y||ke(m,"default"))&&l.push(f)}}const c=[i,l];return De(e)&&o.set(e,c),c}function Zl(e){return e[0]!=="$"&&!Lo(e)}const ll=e=>e==="_"||e==="_ctx"||e==="$stable",al=e=>ge(e)?e.map(Pt):[Pt(e)],lh=(e,t,n)=>{if(t._n)return t;const o=ht((...r)=>al(t(...r)),n);return o._c=!1,o},Pc=(e,t,n)=>{const o=e._ctx;for(const r in e){if(ll(r))continue;const s=e[r];if(be(s))t[r]=lh(r,s,o);else if(s!=null){const i=al(s);t[r]=()=>i}}},Lc=(e,t)=>{const n=al(t);e.slots.default=()=>n},Rc=(e,t,n)=>{for(const o in t)(n||!ll(o))&&(e[o]=t[o])},ah=(e,t,n)=>{const o=e.slots=Ac();if(e.vnode.shapeFlag&32){const r=t._;r?(Rc(o,t,n),n&&Pu(o,"_",r,!0)):Pc(t,o)}else t&&Lc(e,t)},uh=(e,t,n)=>{const{vnode:o,slots:r}=e;let s=!0,i=Le;if(o.shapeFlag&32){const l=t._;l?n&&l===1?s=!1:Rc(r,t,n):(s=!t.$stable,Pc(t,r)),i=t}else t&&(Lc(e,t),i={default:1});if(s)for(const l in r)!ll(l)&&i[l]==null&&delete r[l]},tt=hh;function ch(e){return dh(e)}function dh(e,t){const n=ys();n.__VUE__=!0;const{insert:o,remove:r,patchProp:s,createElement:i,createText:l,createComment:a,setText:c,setElementText:u,parentNode:f,nextSibling:g,setScopeId:m=Bt,insertStaticContent:N}=e,y=(E,k,b,x=null,_=null,I=null,O=void 0,U=null,H=!!k.dynamicChildren)=>{if(E===k)return;E&&!Qn(E,k)&&(x=ce(E),ne(E,_,I,!0),E=null),k.patchFlag===-2&&(H=!1,k.dynamicChildren=null);const{type:F,ref:Z,shapeFlag:q}=k;switch(F){case Ts:S(E,k,b,x);break;case zt:C(E,k,b,x);break;case Lr:E==null&&T(k,b,x,O);break;case ue:$(E,k,b,x,_,I,O,U,H);break;default:q&1?A(E,k,b,x,_,I,O,U,H):q&6?Q(E,k,b,x,_,I,O,U,H):(q&64||q&128)&&F.process(E,k,b,x,_,I,O,U,H,ye)}Z!=null&&_?Vo(Z,E&&E.ref,I,k||E,!k):Z==null&&E&&E.ref!=null&&Vo(E.ref,null,I,E,!0)},S=(E,k,b,x)=>{if(E==null)o(k.el=l(k.children),b,x);else{const _=k.el=E.el;k.children!==E.children&&c(_,k.children)}},C=(E,k,b,x)=>{E==null?o(k.el=a(k.children||""),b,x):k.el=E.el},T=(E,k,b,x)=>{[E.el,E.anchor]=N(E.children,k,b,x,E.el,E.anchor)},v=({el:E,anchor:k},b,x)=>{let _;for(;E&&E!==k;)_=g(E),o(E,b,x),E=_;o(k,b,x)},w=({el:E,anchor:k})=>{let b;for(;E&&E!==k;)b=g(E),r(E),E=b;r(k)},A=(E,k,b,x,_,I,O,U,H)=>{if(k.type==="svg"?O="svg":k.type==="math"&&(O="mathml"),E==null)R(k,b,x,_,I,O,U,H);else{const F=E.el&&E.el._isVueCE?E.el:null;try{F&&F._beginPatch(),V(E,k,_,I,O,U,H)}finally{F&&F._endPatch()}}},R=(E,k,b,x,_,I,O,U)=>{let H,F;const{props:Z,shapeFlag:q,transition:ee,dirs:re}=E;if(H=E.el=i(E.type,I,Z&&Z.is,Z),q&8?u(H,E.children):q&16&&j(E.children,H,null,x,_,Xs(E,I),O,U),re&&Nn(E,null,x,"created"),G(H,E,E.scopeId,O,x),Z){for(const Ne in Z)Ne!=="value"&&!Lo(Ne)&&s(H,Ne,null,Z[Ne],I,x);"value"in Z&&s(H,"value",null,Z.value,I),(F=Z.onVnodeBeforeMount)&&At(F,x,E)}re&&Nn(E,null,x,"beforeMount");const we=fh(_,ee);we&&ee.beforeEnter(H),o(H,k,b),((F=Z&&Z.onVnodeMounted)||we||re)&&tt(()=>{F&&At(F,x,E),we&&ee.enter(H),re&&Nn(E,null,x,"mounted")},_)},G=(E,k,b,x,_)=>{if(b&&m(E,b),x)for(let I=0;I<x.length;I++)m(E,x[I]);if(_){let I=_.subTree;if(k===I||zc(I.type)&&(I.ssContent===k||I.ssFallback===k)){const O=_.vnode;G(E,O,O.scopeId,O.slotScopeIds,_.parent)}}},j=(E,k,b,x,_,I,O,U,H=0)=>{for(let F=H;F<E.length;F++){const Z=E[F]=U?Gt(E[F]):Pt(E[F]);y(null,Z,k,b,x,_,I,O,U)}},V=(E,k,b,x,_,I,O)=>{const U=k.el=E.el;let{patchFlag:H,dynamicChildren:F,dirs:Z}=k;H|=E.patchFlag&16;const q=E.props||Le,ee=k.props||Le;let re;if(b&&In(b,!1),(re=ee.onVnodeBeforeUpdate)&&At(re,b,k,E),Z&&Nn(k,E,b,"beforeUpdate"),b&&In(b,!0),(q.innerHTML&&ee.innerHTML==null||q.textContent&&ee.textContent==null)&&u(U,""),F?X(E.dynamicChildren,F,U,b,x,Xs(k,_),I):O||P(E,k,U,null,b,x,Xs(k,_),I,!1),H>0){if(H&16)W(U,q,ee,b,_);else if(H&2&&q.class!==ee.class&&s(U,"class",null,ee.class,_),H&4&&s(U,"style",q.style,ee.style,_),H&8){const we=k.dynamicProps;for(let Ne=0;Ne<we.length;Ne++){const Oe=we[Ne],Qe=q[Oe],et=ee[Oe];(et!==Qe||Oe==="value")&&s(U,Oe,Qe,et,_,b)}}H&1&&E.children!==k.children&&u(U,k.children)}else!O&&F==null&&W(U,q,ee,b,_);((re=ee.onVnodeUpdated)||Z)&&tt(()=>{re&&At(re,b,k,E),Z&&Nn(k,E,b,"updated")},x)},X=(E,k,b,x,_,I,O)=>{for(let U=0;U<k.length;U++){const H=E[U],F=k[U],Z=H.el&&(H.type===ue||!Qn(H,F)||H.shapeFlag&198)?f(H.el):b;y(H,F,Z,null,x,_,I,O,!0)}},W=(E,k,b,x,_)=>{if(k!==b){if(k!==Le)for(const I in k)!Lo(I)&&!(I in b)&&s(E,I,k[I],null,_,x);for(const I in b){if(Lo(I))continue;const O=b[I],U=k[I];O!==U&&I!=="value"&&s(E,I,U,O,_,x)}"value"in b&&s(E,"value",k.value,b.value,_)}},$=(E,k,b,x,_,I,O,U,H)=>{const F=k.el=E?E.el:l(""),Z=k.anchor=E?E.anchor:l("");let{patchFlag:q,dynamicChildren:ee,slotScopeIds:re}=k;re&&(U=U?U.concat(re):re),E==null?(o(F,b,x),o(Z,b,x),j(k.children||[],b,Z,_,I,O,U,H)):q>0&&q&64&&ee&&E.dynamicChildren&&E.dynamicChildren.length===ee.length?(X(E.dynamicChildren,ee,b,_,I,O,U),(k.key!=null||_&&k===_.subTree)&&ul(E,k,!0)):P(E,k,b,Z,_,I,O,U,H)},Q=(E,k,b,x,_,I,O,U,H)=>{k.slotScopeIds=U,E==null?k.shapeFlag&512?_.ctx.activate(k,b,x,O,H):M(k,b,x,_,I,O,H):K(E,k,H)},M=(E,k,b,x,_,I,O)=>{const U=E.component=wh(E,x,_);if(mc(E)&&(U.ctx.renderer=ye),_h(U,!1,O),U.asyncDep){if(_&&_.registerDep(U,L,O),!E.el){const H=U.subTree=le(zt);C(null,H,k,b),E.placeholder=H.el}}else L(U,E,k,b,_,I,O)},K=(E,k,b)=>{const x=k.component=E.component;if(nh(E,k,b))if(x.asyncDep&&!x.asyncResolved){D(x,k,b);return}else x.next=k,x.update();else k.el=E.el,x.vnode=k},L=(E,k,b,x,_,I,O)=>{const U=()=>{if(E.isMounted){let{next:q,bu:ee,u:re,parent:we,vnode:Ne}=E;{const $t=Bc(E);if($t){q&&(q.el=Ne.el,D(E,q,O)),$t.asyncDep.then(()=>{tt(()=>{E.isUnmounted||F()},_)});return}}let Oe=q,Qe;In(E,!1),q?(q.el=Ne.el,D(E,q,O)):q=Ne,ee&&kr(ee),(Qe=q.props&&q.props.onVnodeBeforeUpdate)&&At(Qe,we,q,Ne),In(E,!0);const et=Xl(E),Tt=E.subTree;E.subTree=et,y(Tt,et,f(Tt.el),ce(Tt),E,_,I),q.el=et.el,Oe===null&&oh(E,et.el),re&&tt(re,_),(Qe=q.props&&q.props.onVnodeUpdated)&&tt(()=>At(Qe,we,q,Ne),_)}else{let q;const{el:ee,props:re}=k,{bm:we,m:Ne,parent:Oe,root:Qe,type:et}=E,Tt=ro(k);In(E,!1),we&&kr(we),!Tt&&(q=re&&re.onVnodeBeforeMount)&&At(q,Oe,k),In(E,!0);{Qe.ce&&Qe.ce._hasShadowRoot()&&Qe.ce._injectChildStyle(et);const $t=E.subTree=Xl(E);y(null,$t,b,x,E,_,I),k.el=$t.el}if(Ne&&tt(Ne,_),!Tt&&(q=re&&re.onVnodeMounted)){const $t=k;tt(()=>At(q,Oe,$t),_)}(k.shapeFlag&256||Oe&&ro(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&E.a&&tt(E.a,_),E.isMounted=!0,k=b=x=null}};E.scope.on();const H=E.effect=new zu(U);E.scope.off();const F=E.update=H.run.bind(H),Z=E.job=H.runIfDirty.bind(H);Z.i=E,Z.id=E.uid,H.scheduler=()=>sl(Z),In(E,!0),F()},D=(E,k,b)=>{k.component=E;const x=E.vnode.props;E.vnode=k,E.next=null,sh(E,k.props,x,b),uh(E,k.children,b),nn(),Bl(E),on()},P=(E,k,b,x,_,I,O,U,H=!1)=>{const F=E&&E.children,Z=E?E.shapeFlag:0,q=k.children,{patchFlag:ee,shapeFlag:re}=k;if(ee>0){if(ee&128){h(F,q,b,x,_,I,O,U,H);return}else if(ee&256){d(F,q,b,x,_,I,O,U,H);return}}re&8?(Z&16&&oe(F,_,I),q!==F&&u(b,q)):Z&16?re&16?h(F,q,b,x,_,I,O,U,H):oe(F,_,I,!0):(Z&8&&u(b,""),re&16&&j(q,b,x,_,I,O,U,H))},d=(E,k,b,x,_,I,O,U,H)=>{E=E||to,k=k||to;const F=E.length,Z=k.length,q=Math.min(F,Z);let ee;for(ee=0;ee<q;ee++){const re=k[ee]=H?Gt(k[ee]):Pt(k[ee]);y(E[ee],re,b,null,_,I,O,U,H)}F>Z?oe(E,_,I,!0,!1,q):j(k,b,x,_,I,O,U,H,q)},h=(E,k,b,x,_,I,O,U,H)=>{let F=0;const Z=k.length;let q=E.length-1,ee=Z-1;for(;F<=q&&F<=ee;){const re=E[F],we=k[F]=H?Gt(k[F]):Pt(k[F]);if(Qn(re,we))y(re,we,b,null,_,I,O,U,H);else break;F++}for(;F<=q&&F<=ee;){const re=E[q],we=k[ee]=H?Gt(k[ee]):Pt(k[ee]);if(Qn(re,we))y(re,we,b,null,_,I,O,U,H);else break;q--,ee--}if(F>q){if(F<=ee){const re=ee+1,we=re<Z?k[re].el:x;for(;F<=ee;)y(null,k[F]=H?Gt(k[F]):Pt(k[F]),b,we,_,I,O,U,H),F++}}else if(F>ee)for(;F<=q;)ne(E[F],_,I,!0),F++;else{const re=F,we=F,Ne=new Map;for(F=we;F<=ee;F++){const pt=k[F]=H?Gt(k[F]):Pt(k[F]);pt.key!=null&&Ne.set(pt.key,F)}let Oe,Qe=0;const et=ee-we+1;let Tt=!1,$t=0;const xo=new Array(et);for(F=0;F<et;F++)xo[F]=0;for(F=re;F<=q;F++){const pt=E[F];if(Qe>=et){ne(pt,_,I,!0);continue}let Mt;if(pt.key!=null)Mt=Ne.get(pt.key);else for(Oe=we;Oe<=ee;Oe++)if(xo[Oe-we]===0&&Qn(pt,k[Oe])){Mt=Oe;break}Mt===void 0?ne(pt,_,I,!0):(xo[Mt-we]=F+1,Mt>=$t?$t=Mt:Tt=!0,y(pt,k[Mt],b,null,_,I,O,U,H),Qe++)}const Al=Tt?ph(xo):to;for(Oe=Al.length-1,F=et-1;F>=0;F--){const pt=we+F,Mt=k[pt],Ol=k[pt+1],Dl=pt+1<Z?Ol.el||Fc(Ol):x;xo[F]===0?y(null,Mt,b,Dl,_,I,O,U,H):Tt&&(Oe<0||F!==Al[Oe]?J(Mt,b,Dl,2):Oe--)}}},J=(E,k,b,x,_=null)=>{const{el:I,type:O,transition:U,children:H,shapeFlag:F}=E;if(F&6){J(E.component.subTree,k,b,x);return}if(F&128){E.suspense.move(k,b,x);return}if(F&64){O.move(E,k,b,ye);return}if(O===ue){o(I,k,b);for(let q=0;q<H.length;q++)J(H[q],k,b,x);o(E.anchor,k,b);return}if(O===Lr){v(E,k,b);return}if(x!==2&&F&1&&U)if(x===0)U.beforeEnter(I),o(I,k,b),tt(()=>U.enter(I),_);else{const{leave:q,delayLeave:ee,afterLeave:re}=U,we=()=>{E.ctx.isUnmounted?r(I):o(I,k,b)},Ne=()=>{I._isLeaving&&I[cn](!0),q(I,()=>{we(),re&&re()})};ee?ee(I,we,Ne):Ne()}else o(I,k,b)},ne=(E,k,b,x=!1,_=!1)=>{const{type:I,props:O,ref:U,children:H,dynamicChildren:F,shapeFlag:Z,patchFlag:q,dirs:ee,cacheIndex:re}=E;if(q===-2&&(_=!1),U!=null&&(nn(),Vo(U,null,b,E,!0),on()),re!=null&&(k.renderCache[re]=void 0),Z&256){k.ctx.deactivate(E);return}const we=Z&1&&ee,Ne=!ro(E);let Oe;if(Ne&&(Oe=O&&O.onVnodeBeforeUnmount)&&At(Oe,k,E),Z&6)ie(E.component,b,x);else{if(Z&128){E.suspense.unmount(b,x);return}we&&Nn(E,null,k,"beforeUnmount"),Z&64?E.type.remove(E,k,b,ye,x):F&&!F.hasOnce&&(I!==ue||q>0&&q&64)?oe(F,k,b,!1,!0):(I===ue&&q&384||!_&&Z&16)&&oe(H,k,b),x&&he(E)}(Ne&&(Oe=O&&O.onVnodeUnmounted)||we)&&tt(()=>{Oe&&At(Oe,k,E),we&&Nn(E,null,k,"unmounted")},b)},he=E=>{const{type:k,el:b,anchor:x,transition:_}=E;if(k===ue){me(b,x);return}if(k===Lr){w(E);return}const I=()=>{r(b),_&&!_.persisted&&_.afterLeave&&_.afterLeave()};if(E.shapeFlag&1&&_&&!_.persisted){const{leave:O,delayLeave:U}=_,H=()=>O(b,I);U?U(E.el,I,H):H()}else I()},me=(E,k)=>{let b;for(;E!==k;)b=g(E),r(E),E=b;r(k)},ie=(E,k,b)=>{const{bum:x,scope:_,job:I,subTree:O,um:U,m:H,a:F}=E;Jl(H),Jl(F),x&&kr(x),_.stop(),I&&(I.flags|=8,ne(O,E,k,b)),U&&tt(U,k),tt(()=>{E.isUnmounted=!0},k)},oe=(E,k,b,x=!1,_=!1,I=0)=>{for(let O=I;O<E.length;O++)ne(E[O],k,b,x,_)},ce=E=>{if(E.shapeFlag&6)return ce(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const k=g(E.anchor||E.el),b=k&&k[fc];return b?g(b):k};let Ce=!1;const Ae=(E,k,b)=>{let x;E==null?k._vnode&&(ne(k._vnode,null,null,!0),x=k._vnode.component):y(k._vnode||null,E,k,null,null,null,b),k._vnode=E,Ce||(Ce=!0,Bl(x),lc(),Ce=!1)},ye={p:y,um:ne,m:J,r:he,mt:M,mc:j,pc:P,pbc:X,n:ce,o:e};return{render:Ae,hydrate:void 0,createApp:qp(Ae)}}function Xs({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function In({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function fh(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ul(e,t,n=!1){const o=e.children,r=t.children;if(ge(o)&&ge(r))for(let s=0;s<o.length;s++){const i=o[s];let l=r[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[s]=Gt(r[s]),l.el=i.el),!n&&l.patchFlag!==-2&&ul(i,l)),l.type===Ts&&(l.patchFlag===-1&&(l=r[s]=Gt(l)),l.el=i.el),l.type===zt&&!l.el&&(l.el=i.el)}}function ph(e){const t=e.slice(),n=[0];let o,r,s,i,l;const a=e.length;for(o=0;o<a;o++){const c=e[o];if(c!==0){if(r=n[n.length-1],e[r]<c){t[o]=r,n.push(o);continue}for(s=0,i=n.length-1;s<i;)l=s+i>>1,e[n[l]]<c?s=l+1:i=l;c<e[n[s]]&&(s>0&&(t[o]=n[s-1]),n[s]=o)}}for(s=n.length,i=n[s-1];s-- >0;)n[s]=i,i=t[i];return n}function Bc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Bc(t)}function Jl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Fc(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Fc(t.subTree):null}const zc=e=>e.__isSuspense;function hh(e,t){t&&t.pendingBranch?ge(e)?t.effects.push(...e):t.effects.push(e):wp(e)}const ue=Symbol.for("v-fgt"),Ts=Symbol.for("v-txt"),zt=Symbol.for("v-cmt"),Lr=Symbol.for("v-stc"),Uo=[];let at=null;function B(e=!1){Uo.push(at=e?null:[])}function gh(){Uo.pop(),at=Uo[Uo.length-1]||null}let co=1;function Zr(e,t=!1){co+=e,e<0&&at&&t&&(at.hasOnce=!0)}function Vc(e){return e.dynamicChildren=co>0?at||to:null,gh(),co>0&&at&&at.push(e),e}function Y(e,t,n,o,r,s){return Vc(p(e,t,n,o,r,s,!0))}function Ve(e,t,n,o,r){return Vc(le(e,t,n,o,r,!0))}function Qo(e){return e?e.__v_isVNode===!0:!1}function Qn(e,t){return e.type===t.type&&e.key===t.key}const Hc=({key:e})=>e??null,Rr=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?je(e)||ze(e)||be(e)?{i:Je,r:e,k:t,f:!!n}:e:null);function p(e,t=null,n=null,o=0,r=null,s=e===ue?0:1,i=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Hc(t),ref:t&&Rr(t),scopeId:uc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:o,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Je};return l?(cl(a,n),s&128&&e.normalize(a)):n&&(a.shapeFlag|=je(n)?8:16),co>0&&!i&&at&&(a.patchFlag>0||s&6)&&a.patchFlag!==32&&at.push(a),a}const le=mh;function mh(e,t=null,n=null,o=0,r=null,s=!1){if((!e||e===wc)&&(e=zt),Qo(e)){const l=zn(e,t,!0);return n&&cl(l,n),co>0&&!s&&at&&(l.shapeFlag&6?at[at.indexOf(e)]=l:at.push(l)),l.patchFlag=-2,l}if(Nh(e)&&(e=e.__vccOpts),t){t=vh(t);let{class:l,style:a}=t;l&&!je(l)&&(t.class=ve(l)),De(a)&&(Ss(a)&&!ge(a)&&(a=Ke({},a)),t.style=Ze(a))}const i=je(e)?1:zc(e)?128:Np(e)?64:De(e)?4:be(e)?2:0;return p(e,t,n,o,r,i,s,!0)}function vh(e){return e?Ss(e)||Oc(e)?Ke({},e):e:null}function zn(e,t,n=!1,o=!1){const{props:r,ref:s,patchFlag:i,children:l,transition:a}=e,c=t?dl(r||{},t):r,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Hc(c),ref:t&&t.ref?n&&s?ge(s)?s.concat(Rr(t)):[s,Rr(t)]:Rr(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ue?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&zn(e.ssContent),ssFallback:e.ssFallback&&zn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&o&&Jo(u,a.clone(u)),u}function We(e=" ",t=0){return le(Ts,null,e,t)}function yh(e,t){const n=le(Lr,null,e);return n.staticCount=t,n}function pe(e="",t=!1){return t?(B(),Ve(zt,null,e)):le(zt,null,e)}function Pt(e){return e==null||typeof e=="boolean"?le(zt):ge(e)?le(ue,null,e.slice()):Qo(e)?Gt(e):le(Ts,null,String(e))}function Gt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:zn(e)}function cl(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(ge(t))n=16;else if(typeof t=="object")if(o&65){const r=t.default;r&&(r._c&&(r._d=!1),cl(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!Oc(t)?t._ctx=Je:r===3&&Je&&(Je.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else be(t)?(t={default:t,_ctx:Je},n=32):(t=String(t),o&64?(n=16,t=[We(t)]):n=8);e.children=t,e.shapeFlag|=n}function dl(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(r==="class")t.class!==o.class&&(t.class=ve([t.class,o.class]));else if(r==="style")t.style=Ze([t.style,o.style]);else if(fs(r)){const s=t[r],i=o[r];i&&s!==i&&!(ge(s)&&s.includes(i))&&(t[r]=s?[].concat(s,i):i)}else r!==""&&(t[r]=o[r])}return t}function At(e,t,n,o=null){Ct(e,t,7,[n,o])}const bh=Ic();let xh=0;function wh(e,t,n){const o=e.type,r=(t?t.appContext:e.appContext)||bh,s={uid:xh++,vnode:e,type:o,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Fu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kc(o,r),emitsOptions:Tc(o,r),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:o.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Jp.bind(null,s),e.ce&&e.ce(s),s}let rt=null;const Nt=()=>rt||Je;let Jr,Ti;{const e=ys(),t=(n,o)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(o),s=>{r.length>1?r.forEach(i=>i(s)):r[0](s)}};Jr=t("__VUE_INSTANCE_SETTERS__",n=>rt=n),Ti=t("__VUE_SSR_SETTERS__",n=>er=n)}const pr=e=>{const t=rt;return Jr(e),e.scope.on(),()=>{e.scope.off(),Jr(t)}},Ql=()=>{rt&&rt.scope.off(),Jr(null)};function Uc(e){return e.vnode.shapeFlag&4}let er=!1;function _h(e,t=!1,n=!1){t&&Ti(t);const{props:o,children:r}=e.vnode,s=Uc(e);rh(e,o,s,t),ah(e,r,n||t);const i=s?Sh(e,t):void 0;return t&&Ti(!1),i}function Sh(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,zp);const{setup:o}=n;if(o){nn();const r=e.setupContext=o.length>1?Gc(e):null,s=pr(e),i=fr(o,e,0,[e.props,r]),l=Ou(i);if(on(),s(),(l||e.sp)&&!ro(e)&&gc(e),l){if(i.then(Ql,Ql),t)return i.then(a=>{ea(e,a)}).catch(a=>{Es(a,e,0)});e.asyncDep=i}else ea(e,i)}else jc(e)}function ea(e,t,n){be(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:De(t)&&(e.setupState=tc(t)),jc(e)}function jc(e,t,n){const o=e.type;e.render||(e.render=o.render||Bt);{const r=pr(e);nn();try{jp(e)}finally{on(),r()}}}const Eh={get(e,t){return ot(e,"get",""),e[t]}};function Gc(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Eh),slots:e.slots,emit:e.emit,expose:t}}function $s(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(tc(bn(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Ho)return Ho[n](e)},has(t,n){return n in t||n in Ho}})):e.proxy}function Ch(e,t=!0){return be(e)?e.displayName||e.name:e.name||t&&e.__name}function Nh(e){return be(e)&&"__vccOpts"in e}const se=(e,t)=>mp(e,t,er);function $e(e,t,n){try{Zr(-1);const o=arguments.length;return o===2?De(t)&&!ge(t)?Qo(t)?le(e,null,[t]):le(e,t):le(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&Qo(n)&&(n=[n]),le(e,t,n))}finally{Zr(1)}}function Ih(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let o=0;o<n.length;o++)if(Qt(n[o],t[o]))return!1;return co>0&&at&&at.push(e),!0}const Th="3.5.28";let $i;const ta=typeof window<"u"&&window.trustedTypes;if(ta)try{$i=ta.createPolicy("vue",{createHTML:e=>e})}catch{}const Yc=$i?e=>$i.createHTML(e):e=>e,$h="http://www.w3.org/2000/svg",Mh="http://www.w3.org/1998/Math/MathML",jt=typeof document<"u"?document:null,na=jt&&jt.createElement("template"),Ah={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const r=t==="svg"?jt.createElementNS($h,e):t==="mathml"?jt.createElementNS(Mh,e):n?jt.createElement(e,{is:n}):jt.createElement(e);return e==="select"&&o&&o.multiple!=null&&r.setAttribute("multiple",o.multiple),r},createText:e=>jt.createTextNode(e),createComment:e=>jt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>jt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,r,s){const i=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{na.innerHTML=Yc(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const l=na.content;if(o==="svg"||o==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},an="transition",So="animation",fo=Symbol("_vtc"),Kc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Oh=Ke({},Mp,Kc),Tn=(e,t=[])=>{ge(e)?e.forEach(n=>n(...t)):e&&e(...t)},oa=e=>e?ge(e)?e.some(t=>t.length>1):e.length>1:!1;function Dh(e){const t={};for(const $ in e)$ in Kc||(t[$]=e[$]);if(e.css===!1)return t;const{name:n="v",type:o,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:a=s,appearActiveClass:c=i,appearToClass:u=l,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:g=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=e,N=kh(r),y=N&&N[0],S=N&&N[1],{onBeforeEnter:C,onEnter:T,onEnterCancelled:v,onLeave:w,onLeaveCancelled:A,onBeforeAppear:R=C,onAppear:G=T,onAppearCancelled:j=v}=t,V=($,Q,M,K)=>{$._enterCancelled=K,dn($,Q?u:l),dn($,Q?c:i),M&&M()},X=($,Q)=>{$._isLeaving=!1,dn($,f),dn($,m),dn($,g),Q&&Q()},W=$=>(Q,M)=>{const K=$?G:T,L=()=>V(Q,$,M);Tn(K,[Q,L]),ra(()=>{dn(Q,$?a:s),Ot(Q,$?u:l),oa(K)||sa(Q,o,y,L)})};return Ke(t,{onBeforeEnter($){Tn(C,[$]),Ot($,s),Ot($,i)},onBeforeAppear($){Tn(R,[$]),Ot($,a),Ot($,c)},onEnter:W(!1),onAppear:W(!0),onLeave($,Q){$._isLeaving=!0;const M=()=>X($,Q);Ot($,f),$._enterCancelled?(Ot($,g),Mi($)):(Mi($),Ot($,g)),ra(()=>{$._isLeaving&&(dn($,f),Ot($,m),oa(w)||sa($,o,S,M))}),Tn(w,[$,M])},onEnterCancelled($){V($,!1,void 0,!0),Tn(v,[$])},onAppearCancelled($){V($,!0,void 0,!0),Tn(j,[$])},onLeaveCancelled($){X($),Tn(A,[$])}})}function kh(e){if(e==null)return null;if(De(e))return[qs(e.enter),qs(e.leave)];{const t=qs(e);return[t,t]}}function qs(e){return Pf(e)}function Ot(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[fo]||(e[fo]=new Set)).add(t)}function dn(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const n=e[fo];n&&(n.delete(t),n.size||(e[fo]=void 0))}function ra(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Ph=0;function sa(e,t,n,o){const r=e._endId=++Ph,s=()=>{r===e._endId&&o()};if(n!=null)return setTimeout(s,n);const{type:i,timeout:l,propCount:a}=Wc(e,t);if(!i)return o();const c=i+"end";let u=0;const f=()=>{e.removeEventListener(c,g),s()},g=m=>{m.target===e&&++u>=a&&f()};setTimeout(()=>{u<a&&f()},l+1),e.addEventListener(c,g)}function Wc(e,t){const n=window.getComputedStyle(e),o=N=>(n[N]||"").split(", "),r=o(`${an}Delay`),s=o(`${an}Duration`),i=ia(r,s),l=o(`${So}Delay`),a=o(`${So}Duration`),c=ia(l,a);let u=null,f=0,g=0;t===an?i>0&&(u=an,f=i,g=s.length):t===So?c>0&&(u=So,f=c,g=a.length):(f=Math.max(i,c),u=f>0?i>c?an:So:null,g=u?u===an?s.length:a.length:0);const m=u===an&&/\b(?:transform|all)(?:,|$)/.test(o(`${an}Property`).toString());return{type:u,timeout:f,propCount:g,hasTransform:m}}function ia(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,o)=>la(n)+la(e[o])))}function la(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Mi(e){return(e?e.ownerDocument:document).body.offsetHeight}function Lh(e,t,n){const o=e[fo];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Qr=Symbol("_vod"),Xc=Symbol("_vsh"),qc={name:"show",beforeMount(e,{value:t},{transition:n}){e[Qr]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Eo(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),Eo(e,!0),o.enter(e)):o.leave(e,()=>{Eo(e,!1)}):Eo(e,t))},beforeUnmount(e,{value:t}){Eo(e,t)}};function Eo(e,t){e.style.display=t?e[Qr]:"none",e[Xc]=!t}const Rh=Symbol(""),Bh=/(?:^|;)\s*display\s*:/;function Fh(e,t,n){const o=e.style,r=je(n);let s=!1;if(n&&!r){if(t)if(je(t))for(const i of t.split(";")){const l=i.slice(0,i.indexOf(":")).trim();n[l]==null&&Br(o,l,"")}else for(const i in t)n[i]==null&&Br(o,i,"");for(const i in n)i==="display"&&(s=!0),Br(o,i,n[i])}else if(r){if(t!==n){const i=o[Rh];i&&(n+=";"+i),o.cssText=n,s=Bh.test(n)}}else t&&e.removeAttribute("style");Qr in e&&(e[Qr]=s?o.display:"",e[Xc]&&(o.display="none"))}const aa=/\s*!important$/;function Br(e,t,n){if(ge(n))n.forEach(o=>Br(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=zh(e,t);aa.test(n)?e.setProperty(_n(o),n.replace(aa,""),"important"):e[o]=n}}const ua=["Webkit","Moz","ms"],Zs={};function zh(e,t){const n=Zs[t];if(n)return n;let o=yt(t);if(o!=="filter"&&o in e)return Zs[t]=o;o=ms(o);for(let r=0;r<ua.length;r++){const s=ua[r]+o;if(s in e)return Zs[t]=s}return t}const ca="http://www.w3.org/1999/xlink";function da(e,t,n,o,r,s=Vf(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(ca,t.slice(6,t.length)):e.setAttributeNS(ca,t,n):n==null||s&&!Lu(n)?e.removeAttribute(t):e.setAttribute(t,s?"":St(n)?String(n):n)}function fa(e,t,n,o,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Yc(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?e.getAttribute("value")||"":e.value,a=n==null?e.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in e))&&(e.value=a),n==null&&e.removeAttribute(t),e._value=n;return}let i=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Lu(n):n==null&&l==="string"?(n="",i=!0):l==="number"&&(n=0,i=!0)}try{e[t]=n}catch{}i&&e.removeAttribute(r||t)}function yn(e,t,n,o){e.addEventListener(t,n,o)}function Vh(e,t,n,o){e.removeEventListener(t,n,o)}const pa=Symbol("_vei");function Hh(e,t,n,o,r=null){const s=e[pa]||(e[pa]={}),i=s[t];if(o&&i)i.value=o;else{const[l,a]=Uh(t);if(o){const c=s[t]=Yh(o,r);yn(e,l,c,a)}else i&&(Vh(e,l,i,a),s[t]=void 0)}}const ha=/(?:Once|Passive|Capture)$/;function Uh(e){let t;if(ha.test(e)){t={};let o;for(;o=e.match(ha);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):_n(e.slice(2)),t]}let Js=0;const jh=Promise.resolve(),Gh=()=>Js||(jh.then(()=>Js=0),Js=Date.now());function Yh(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;Ct(Kh(o,n.value),t,5,[o])};return n.value=e,n.attached=Gh(),n}function Kh(e,t){if(ge(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>r=>!r._stopped&&o&&o(r))}else return t}const ga=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Wh=(e,t,n,o,r,s)=>{const i=r==="svg";t==="class"?Lh(e,o,i):t==="style"?Fh(e,n,o):fs(t)?Ji(t)||Hh(e,t,n,o,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Xh(e,t,o,i))?(fa(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&da(e,t,o,i,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!je(o))?fa(e,yt(t),o,s,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),da(e,t,o,i))};function Xh(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&ga(t)&&be(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return ga(t)&&je(n)?!1:t in e}const Zc=new WeakMap,Jc=new WeakMap,es=Symbol("_moveCb"),ma=Symbol("_enterCb"),qh=e=>(delete e.props.mode,e),Zh=qh({name:"TransitionGroup",props:Ke({},Oh,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Nt(),o=$p();let r,s;return bc(()=>{if(!r.length)return;const i=e.moveClass||`${e.name||"v"}-move`;if(!tg(r[0].el,n.vnode.el,i)){r=[];return}r.forEach(Jh),r.forEach(Qh);const l=r.filter(eg);Mi(n.vnode.el),l.forEach(a=>{const c=a.el,u=c.style;Ot(c,i),u.transform=u.webkitTransform=u.transitionDuration="";const f=c[es]=g=>{g&&g.target!==c||(!g||g.propertyName.endsWith("transform"))&&(c.removeEventListener("transitionend",f),c[es]=null,dn(c,i))};c.addEventListener("transitionend",f)}),r=[]}),()=>{const i=Te(e),l=Dh(i);let a=i.tag||ue;if(r=[],s)for(let c=0;c<s.length;c++){const u=s[c];u.el&&u.el instanceof Element&&(r.push(u),Jo(u,Si(u,l,o,n)),Zc.set(u,Qc(u.el)))}s=t.default?hc(t.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null&&Jo(u,Si(u,l,o,n))}return le(a,null,s)}}}),fl=Zh;function Jh(e){const t=e.el;t[es]&&t[es](),t[ma]&&t[ma]()}function Qh(e){Jc.set(e,Qc(e.el))}function eg(e){const t=Zc.get(e),n=Jc.get(e),o=t.left-n.left,r=t.top-n.top;if(o||r){const s=e.el,i=s.style,l=s.getBoundingClientRect();let a=1,c=1;return s.offsetWidth&&(a=l.width/s.offsetWidth),s.offsetHeight&&(c=l.height/s.offsetHeight),(!Number.isFinite(a)||a===0)&&(a=1),(!Number.isFinite(c)||c===0)&&(c=1),Math.abs(a-1)<.01&&(a=1),Math.abs(c-1)<.01&&(c=1),i.transform=i.webkitTransform=`translate(${o/a}px,${r/c}px)`,i.transitionDuration="0s",e}}function Qc(e){const t=e.getBoundingClientRect();return{left:t.left,top:t.top}}function tg(e,t,n){const o=e.cloneNode(),r=e[fo];r&&r.forEach(l=>{l.split(/\s+/).forEach(a=>a&&o.classList.remove(a))}),n.split(/\s+/).forEach(l=>l&&o.classList.add(l)),o.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(o);const{hasTransform:i}=Wc(o);return s.removeChild(o),i}const po=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ge(t)?n=>kr(t,n):t};function ng(e){e.target.composing=!0}function va(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const tn=Symbol("_assign");function ya(e,t,n){return t&&(e=e.trim()),n&&(e=vs(e)),e}const pl={created(e,{modifiers:{lazy:t,trim:n,number:o}},r){e[tn]=po(r);const s=o||r.props&&r.props.type==="number";yn(e,t?"change":"input",i=>{i.target.composing||e[tn](ya(e.value,n,s))}),(n||s)&&yn(e,"change",()=>{e.value=ya(e.value,n,s)}),t||(yn(e,"compositionstart",ng),yn(e,"compositionend",va),yn(e,"change",va))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:r,number:s}},i){if(e[tn]=po(i),e.composing)return;const l=(s||e.type==="number")&&!/^0\d/.test(e.value)?vs(e.value):e.value,a=t??"";l!==a&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||r&&e.value.trim()===a)||(e.value=a))}},og={created(e,{value:t},n){e.checked=Rn(t,n.props.value),e[tn]=po(n),yn(e,"change",()=>{e[tn](tr(e))})},beforeUpdate(e,{value:t,oldValue:n},o){e[tn]=po(o),t!==n&&(e.checked=Rn(t,o.props.value))}},rg={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const r=ps(t);yn(e,"change",()=>{const s=Array.prototype.filter.call(e.options,i=>i.selected).map(i=>n?vs(tr(i)):tr(i));e[tn](e.multiple?r?new Set(s):s:s[0]),e._assigning=!0,ut(()=>{e._assigning=!1})}),e[tn]=po(o)},mounted(e,{value:t}){ba(e,t)},beforeUpdate(e,t,n){e[tn]=po(n)},updated(e,{value:t}){e._assigning||ba(e,t)}};function ba(e,t){const n=e.multiple,o=ge(t);if(!(n&&!o&&!ps(t))){for(let r=0,s=e.options.length;r<s;r++){const i=e.options[r],l=tr(i);if(n)if(o){const a=typeof l;a==="string"||a==="number"?i.selected=t.some(c=>String(c)===String(l)):i.selected=Uf(t,l)>-1}else i.selected=t.has(l);else if(Rn(tr(i),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function tr(e){return"_value"in e?e._value:e.value}const sg=["ctrl","shift","alt","meta"],ig={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>sg.some(n=>e[`${n}Key`]&&!t.includes(n))},dt=(e,t)=>{if(!e)return e;const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=((r,...s)=>{for(let i=0;i<t.length;i++){const l=ig[t[i]];if(l&&l(r,t))return}return e(r,...s)}))},lg={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ms=(e,t)=>{const n=e._withKeys||(e._withKeys={}),o=t.join(".");return n[o]||(n[o]=(r=>{if(!("key"in r))return;const s=_n(r.key);if(t.some(i=>i===s||lg[i]===s))return e(r)}))},ag=Ke({patchProp:Wh},Ah);let xa;function ug(){return xa||(xa=ch(ag))}const cg=((...e)=>{const t=ug().createApp(...e),{mount:n}=t;return t.mount=o=>{const r=fg(o);if(!r)return;const s=t._component;!be(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const i=n(r,!1,dg(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),i},t});function dg(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function fg(e){return je(e)?document.querySelector(e):e}let ed;const As=e=>ed=e,td=Symbol();function Ai(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var jo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(jo||(jo={}));function pg(){const e=bs(!0),t=e.run(()=>xe({}));let n=[],o=[];const r=bn({install(s){As(r),r._a=s,s.provide(td,r),s.config.globalProperties.$pinia=r,o.forEach(i=>n.push(i)),o=[]},use(s){return this._a?n.push(s):o.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}const nd=()=>{};function wa(e,t,n,o=nd){e.add(t);const r=()=>{e.delete(t)&&o()};return!n&&xs()&&Ro(r),r}function Kn(e,...t){e.forEach(n=>{n(...t)})}const hg=e=>e(),_a=Symbol(),Qs=Symbol();function Oi(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,o)=>e.set(o,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const o=t[n],r=e[n];Ai(r)&&Ai(o)&&e.hasOwnProperty(n)&&!ze(o)&&!en(o)?e[n]=Oi(r,o):e[n]=o}return e}const gg=Symbol();function mg(e){return!Ai(e)||!Object.prototype.hasOwnProperty.call(e,gg)}const{assign:fn}=Object;function vg(e){return!!(ze(e)&&e.effect)}function yg(e,t,n,o){const{state:r,actions:s,getters:i}=t,l=n.state.value[e];let a;function c(){l||(n.state.value[e]=r?r():{});const u=oc(n.state.value[e]);return fn(u,s,Object.keys(i||{}).reduce((f,g)=>(f[g]=bn(se(()=>{As(n);const m=n._s.get(e);return i[g].call(m,m)})),f),{}))}return a=od(e,c,t,n,o,!0),a}function od(e,t,n={},o,r,s){let i;const l=fn({actions:{}},n),a={deep:!0};let c,u,f=new Set,g=new Set,m;const N=o.state.value[e];!s&&!N&&(o.state.value[e]={});let y;function S(j){let V;c=u=!1,typeof j=="function"?(j(o.state.value[e]),V={type:jo.patchFunction,storeId:e,events:m}):(Oi(o.state.value[e],j),V={type:jo.patchObject,payload:j,storeId:e,events:m});const X=y=Symbol();ut().then(()=>{y===X&&(c=!0)}),u=!0,Kn(f,V,o.state.value[e])}const C=s?function(){const{state:V}=n,X=V?V():{};this.$patch(W=>{fn(W,X)})}:nd;function T(){i.stop(),f.clear(),g.clear(),o._s.delete(e)}const v=(j,V="")=>{if(_a in j)return j[Qs]=V,j;const X=function(){As(o);const W=Array.from(arguments),$=new Set,Q=new Set;function M(D){$.add(D)}function K(D){Q.add(D)}Kn(g,{args:W,name:X[Qs],store:A,after:M,onError:K});let L;try{L=j.apply(this&&this.$id===e?this:A,W)}catch(D){throw Kn(Q,D),D}return L instanceof Promise?L.then(D=>(Kn($,D),D)).catch(D=>(Kn(Q,D),Promise.reject(D))):(Kn($,L),L)};return X[_a]=!0,X[Qs]=V,X},w={_p:o,$id:e,$onAction:wa.bind(null,g),$patch:S,$reset:C,$subscribe(j,V={}){const X=wa(f,j,V.detached,()=>W()),W=i.run(()=>Se(()=>o.state.value[e],$=>{(V.flush==="sync"?u:c)&&j({storeId:e,type:jo.direct,events:m},$)},fn({},a,V)));return X},$dispose:T},A=dr(w);o._s.set(e,A);const G=(o._a&&o._a.runWithContext||hg)(()=>o._e.run(()=>(i=bs()).run(()=>t({action:v}))));for(const j in G){const V=G[j];if(ze(V)&&!vg(V)||en(V))s||(N&&mg(V)&&(ze(V)?V.value=N[j]:Oi(V,N[j])),o.state.value[e][j]=V);else if(typeof V=="function"){const X=v(V,j);G[j]=X,l.actions[j]=V}}return fn(A,G),fn(Te(A),G),Object.defineProperty(A,"$state",{get:()=>o.state.value[e],set:j=>{S(V=>{fn(V,j)})}}),o._p.forEach(j=>{fn(A,i.run(()=>j({store:A,app:o._a,pinia:o,options:l})))}),N&&s&&n.hydrate&&n.hydrate(A.$state,N),c=!0,u=!0,A}function rd(e,t,n){let o;const r=typeof t=="function";o=r?n:t;function s(i,l){const a=_p();return i=i||(a?_t(td,null):null),i&&As(i),i=ed,i._s.has(e)||(r?od(e,t,o,i):yg(e,o,i)),i._s.get(e)}return s.$id=e,s}const bg=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const xg=Object.prototype.toString,wg=e=>xg.call(e)==="[object Object]",_g=()=>{};function Sg(...e){if(e.length!==1)return Pe(...e);const t=e[0];return typeof t=="function"?ao(nc(()=>({get:t,set:_g}))):xe(t)}function Eg(e,t){function n(...o){return new Promise((r,s)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(s)})}return n}const sd=e=>e();function Cg(e=sd,t={}){const{initialState:n="active"}=t,o=Sg(n==="active");function r(){o.value=!1}function s(){o.value=!0}return{isActive:ao(o),pause:r,resume:s,eventFilter:(...l)=>{o.value&&e(...l)}}}function ei(e){return Array.isArray(e)?e:[e]}function Ng(e){return Nt()}function Ig(e,t,n={}){const{eventFilter:o=sd,...r}=n;return Se(e,Eg(o,t),r)}function Tg(e,t,n={}){const{eventFilter:o,initialState:r="active",...s}=n,{eventFilter:i,pause:l,resume:a,isActive:c}=Cg(o,{initialState:r});return{stop:Ig(e,t,{...s,eventFilter:i}),pause:l,resume:a,isActive:c}}function $g(e,t=!0,n){Ng()?ct(e,n):t?e():ut(e)}function Mg(e,t,n){return Se(e,t,{...n,immediate:!0})}const Oo=bg?window:void 0;function Ag(e){var t;const n=_e(e);return(t=n?.$el)!==null&&t!==void 0?t:n}function Sa(...e){const t=(o,r,s,i)=>(o.addEventListener(r,s,i),()=>o.removeEventListener(r,s,i)),n=se(()=>{const o=ei(_e(e[0])).filter(r=>r!=null);return o.every(r=>typeof r!="string")?o:void 0});return Mg(()=>{var o,r;return[(o=(r=n.value)===null||r===void 0?void 0:r.map(s=>Ag(s)))!==null&&o!==void 0?o:[Oo].filter(s=>s!=null),ei(_e(n.value?e[1]:e[0])),ei(z(n.value?e[2]:e[1])),_e(n.value?e[3]:e[2])]},([o,r,s,i],l,a)=>{if(!o?.length||!r?.length||!s?.length)return;const c=wg(i)?{...i}:i,u=o.flatMap(f=>r.flatMap(g=>s.map(m=>t(f,g,m,c))));a(()=>{u.forEach(f=>f())})},{flush:"post"})}const wr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_r="__vueuse_ssr_handlers__",Og=Dg();function Dg(){return _r in wr||(wr[_r]=wr[_r]||{}),wr[_r]}function kg(e,t){return Og[e]||t}function Pg(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Lg={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},Ea="vueuse-storage";function Rg(e,t,n,o={}){var r;const{flush:s="pre",deep:i=!0,listenToStorageChanges:l=!0,writeDefaults:a=!0,mergeDefaults:c=!1,shallow:u,window:f=Oo,eventFilter:g,onError:m=M=>{console.error(M)},initOnMounted:N}=o,y=(u?qt:xe)(typeof t=="function"?t():t),S=se(()=>_e(e));if(!n)try{n=kg("getDefaultStorage",()=>Oo?.localStorage)()}catch(M){m(M)}if(!n)return y;const C=_e(t),T=Pg(C),v=(r=o.serializer)!==null&&r!==void 0?r:Lg[T],{pause:w,resume:A}=Tg(y,M=>X(M),{flush:s,deep:i,eventFilter:g});Se(S,()=>$(),{flush:s});let R=!1;const G=M=>{N&&!R||$(M)},j=M=>{N&&!R||Q(M)};f&&l&&(n instanceof Storage?Sa(f,"storage",G,{passive:!0}):Sa(f,Ea,j)),N?$g(()=>{R=!0,$()}):$();function V(M,K){if(f){const L={key:S.value,oldValue:M,newValue:K,storageArea:n};f.dispatchEvent(n instanceof Storage?new StorageEvent("storage",L):new CustomEvent(Ea,{detail:L}))}}function X(M){try{const K=n.getItem(S.value);if(M==null)V(K,null),n.removeItem(S.value);else{const L=v.write(M);K!==L&&(n.setItem(S.value,L),V(K,L))}}catch(K){m(K)}}function W(M){const K=M?M.newValue:n.getItem(S.value);if(K==null)return a&&C!=null&&n.setItem(S.value,v.write(C)),C;if(!M&&c){const L=v.read(K);return typeof c=="function"?c(L,C):T==="object"&&!Array.isArray(L)?{...C,...L}:L}else return typeof K!="string"?K:v.read(K)}function $(M){if(!(M&&M.storageArea!==n)){if(M&&M.key==null){y.value=C;return}if(!(M&&M.key!==S.value)){w();try{const K=v.write(y.value);(M===void 0||M?.newValue!==K)&&(y.value=W(M))}catch(K){m(K)}finally{M?ut(A):A()}}}}function Q(M){$(M.detail)}return y}const bo=rd("ui",{state:()=>({modal:{isOpen:!1,kind:"alert",title:"Notice",message:"",confirmText:"OK",cancelText:"Cancel",inputValue:"",inputPlaceholder:"",inputRequired:!1,resolve:null},toasts:[]}),actions:{showToast(e,t="info",n=2600){const o=`toast-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;this.toasts.push({id:o,message:e,type:t}),setTimeout(()=>{this.removeToast(o)},n)},removeToast(e){this.toasts=this.toasts.filter(t=>t.id!==e)},closeModal(){this.modal.isOpen=!1,this.modal.resolve=null},resolveModal(e){typeof this.modal.resolve=="function"&&this.modal.resolve(e),this.closeModal()},openAlert({title:e="Notice",message:t="",confirmText:n="OK"}={}){return new Promise(o=>{this.modal={...this.modal,isOpen:!0,kind:"alert",title:e,message:t,confirmText:n,cancelText:"Cancel",inputValue:"",inputPlaceholder:"",inputRequired:!1,resolve:o}})},openConfirm({title:e="Confirm",message:t="",confirmText:n="Confirm",cancelText:o="Cancel"}={}){return new Promise(r=>{this.modal={...this.modal,isOpen:!0,kind:"confirm",title:e,message:t,confirmText:n,cancelText:o,inputValue:"",inputPlaceholder:"",inputRequired:!1,resolve:r}})},openPrompt({title:e="Input Needed",message:t="",confirmText:n="Save",cancelText:o="Cancel",placeholder:r="",value:s="",required:i=!1}={}){return new Promise(l=>{this.modal={...this.modal,isOpen:!0,kind:"prompt",title:e,message:t,confirmText:n,cancelText:o,inputValue:s,inputPlaceholder:r,inputRequired:i,resolve:l}})},setModalInputValue(e){this.modal.inputValue=e}}}),te={MONGODB:"MongoDB",MYSQL:"MySQL",POSTGRESQL:"PostgreSQL"},Bg={[te.MONGODB]:["String","Number","ObjectId","Date","Boolean","Array","Object","Map","Buffer","Mixed"],[te.MYSQL]:["INT","BIGINT","TINYINT","SMALLINT","DECIMAL","FLOAT","DOUBLE","VARCHAR","TEXT","CHAR","LONGTEXT","DATE","DATETIME","TIMESTAMP","TIME","YEAR","BOOLEAN","JSON","ENUM","BLOB"],[te.POSTGRESQL]:["INT","BIGINT","SMALLINT","DECIMAL","REAL","DOUBLE PRECISION","SERIAL","BIGSERIAL","VARCHAR","TEXT","CHAR","DATE","TIMESTAMP","TIME","INTERVAL","BOOLEAN","JSON","JSONB","UUID","BYTEA","XML"]},hl={[te.MONGODB]:{name:"_id",type:"ObjectId",key:!0},[te.MYSQL]:{name:"id",type:"INT",primaryKey:!0,autoIncrement:!0},[te.POSTGRESQL]:{name:"id",type:"SERIAL",primaryKey:!0}},id="mongo-architect-schema";let ti=!1;const Fg=e=>{if(typeof window>"u")return;const t={databases:e.databases,activeDatabaseId:e.activeDatabaseId,collections:e.collections,edges:e.edges,selectedItemId:e.selectedItemId,selectedItemType:e.selectedItemType,selectedCollectionId:e.selectedCollectionId,clipboard:e.clipboard};try{return window.localStorage.setItem(id,JSON.stringify(t)),{ok:!0}}catch(n){return{ok:!1,error:n}}},zg=e=>{if(!e)return!1;if(e?.name==="QuotaExceededError"||e?.code===22||e?.code===1014)return!0;const t=String(e?.message||"").toLowerCase();return t.includes("quota")||t.includes("storage")},ld=(e,t)=>{const n=Number.parseInt(e??"",10);return Number.isFinite(n)&&n>0?n:t},ni=ld("100",100),Vg=ld("600000",1e3*60*10),Ie={past:[],future:[],isRestoring:!1},Co=e=>{const t=Date.now()-Vg;return e.filter(n=>n.createdAt>=t)},mn=(e,t)=>{for(const n of e){if(n.id===t)return{field:n,list:e};if(n.children&&n.children.length>0){const o=mn(n.children,t);if(o)return o}}return null},Ca=(e,t)=>!e||!t?!1:!!mn(e.data?.fields||[],t),Di=e=>e&&typeof e=="object"&&e.__raw?e.__raw:Array.isArray(e)?`[${e.map(t=>Di(t)).join(", ")}]`:e&&typeof e=="object"?`{ ${Object.entries(e).map(([n,o])=>`${n}: ${Di(o)}`).join(", ")} }`:JSON.stringify(e),oi=e=>e==="ObjectId"?"Schema.Types.ObjectId":e,it=e=>{if(e===!0||e===!1)return e;if(e==="true")return!0;if(e==="false")return!1},Wn=e=>{if(e===""||e===null||e===void 0)return;const t=Number(e);return Number.isFinite(t)?t:void 0},Hg=e=>{const t=[];t.push(`type: ${oi(e.type)}`),e.ref&&e.type==="ObjectId"&&t.push(`ref: ${JSON.stringify(e.ref)}`),e.required&&t.push("required: true"),e.unique&&t.push("unique: true"),e.index&&t.push("index: true"),e.sparse&&t.push("sparse: true"),e.immutable&&t.push("immutable: true"),typeof e.alias=="string"&&e.alias.trim()&&t.push(`alias: ${JSON.stringify(e.alias.trim())}`);const n=it(e.selectMode);if(typeof n=="boolean"&&t.push(`select: ${n}`),e.type==="String"){e.trim&&t.push("trim: true"),e.lowercase&&t.push("lowercase: true"),e.uppercase&&t.push("uppercase: true");const o=Wn(e.minLength);typeof o=="number"&&o>=0&&t.push(`minLength: ${o}`);const r=Wn(e.maxLength);typeof r=="number"&&r>=0&&t.push(`maxLength: ${r}`);const s=String(e.matchPattern||"").trim();if(s){const a=String(e.matchFlags||"");t.push(`match: new RegExp(${JSON.stringify(s)}, ${JSON.stringify(a)})`)}const i=Array.isArray(e.enumValues)?e.enumValues.filter(a=>String(a).trim().length>0).map(a=>String(a).trim()):[];i.length>0&&t.push(`enum: ${Di(i)}`);const l=String(e.defaultString??"").trim();l&&t.push(`default: ${JSON.stringify(l)}`)}if(e.type==="Number"){const o=Wn(e.min);typeof o=="number"&&t.push(`min: ${o}`);const r=Wn(e.max);typeof r=="number"&&t.push(`max: ${r}`);const s=Wn(e.defaultNumber);typeof s=="number"&&t.push(`default: ${s}`)}if(e.type==="Boolean"){const o=it(e.defaultBooleanMode);typeof o=="boolean"&&t.push(`default: ${o}`)}if(e.type==="Date"){const o=e.defaultDateMode;if(o==="now")t.push("default: Date.now");else if(o==="custom"){const l=String(e.defaultDateValue||"").trim();l&&t.push(`default: new Date(${JSON.stringify(l)})`)}const r=String(e.minDate||"").trim();r&&t.push(`min: new Date(${JSON.stringify(r)})`);const s=String(e.maxDate||"").trim();s&&t.push(`max: new Date(${JSON.stringify(s)})`);const i=Wn(e.expiresSeconds);typeof i=="number"&&i>=0&&t.push(`expires: ${i}`)}if(e.type==="ObjectId"){const o=String(e.defaultObjectId||"").trim();o&&t.push(`default: ${JSON.stringify(o)}`)}if(e.type==="Map"){const o=String(e.mapOfType||"").trim();o&&t.push(`of: ${oi(o)}`)}if(e.type==="Array"){const o=String(e.arrayOfType||"").trim();o&&t.push(`of: ${oi(o)}`)}return t},Go=(e,t=1)=>{let n="";const o="  ".repeat(t);return e.forEach(r=>{if(r.name==="_id")return;if(r.children&&r.children.length>0){r.type==="Array"?(n+=`${o}${r.name}: [{
`,n+=Go(r.children,t+1),n+=`${o}}],
`):(n+=`${o}${r.name}: {
`,n+=Go(r.children,t+1),n+=`${o}},
`);return}const s=Hg(r);n+=`${o}${r.name}: { ${s.join(", ")} },
`}),n},ri=(e={})=>{const t={};e.timestampsEnabled&&(e.createdAtName||e.updatedAtName?(t.timestamps={},e.createdAtName&&(t.timestamps.createdAt=e.createdAtName),e.updatedAtName&&(t.timestamps.updatedAt=e.updatedAtName)):t.timestamps=!0);const n=String(e.schemaCollectionName||"").trim();n&&(t.collection=n);const o=e.schemaStrictMode;if(o==="throw")t.strict="throw";else{const v=it(o);typeof v=="boolean"&&(t.strict=v)}const r=it(e.schemaStrictQueryMode);typeof r=="boolean"&&(t.strictQuery=r);const s=it(e.schemaAutoIndexMode);typeof s=="boolean"&&(t.autoIndex=s);const i=it(e.schemaAutoCreateMode);typeof i=="boolean"&&(t.autoCreate=i);const l=it(e.schemaIdVirtualMode);typeof l=="boolean"&&(t.id=l);const a=it(e.schemaUnderscoreIdMode);typeof a=="boolean"&&(t._id=a);const c=it(e.schemaMinimizeMode);typeof c=="boolean"&&(t.minimize=c);const u=it(e.schemaSkipVersioningMode);typeof u=="boolean"&&(t.skipVersioning=u);const f=it(e.schemaOptimisticConcurrencyMode);typeof f=="boolean"&&(t.optimisticConcurrency=f);const g=e.schemaVersionKeyMode;if(g==="disable")t.versionKey=!1;else if(g==="custom"){const v=String(e.schemaVersionKeyName||"").trim();v&&(t.versionKey=v)}if(e.schemaCappedEnabled){const v={},w=Number(e.schemaCappedSize||0),A=Number(e.schemaCappedMax||0),R=it(e.schemaCappedAutoIndexIdMode);w>0&&(v.size=w),A>0&&(v.max=A),typeof R=="boolean"&&(v.autoIndexId=R),Object.keys(v).length>0?t.capped=v:t.capped=!0}const m=String(e.schemaReadPreference||"").trim();m&&(t.read=m);const N={},y=String(e.schemaWriteConcernW||"").trim(),S=it(e.schemaWriteConcernJMode),C=Number(e.schemaWriteConcernWtimeout||0);if(y){const v=Number(y);N.w=Number.isFinite(v)&&y!==""?v:y}typeof S=="boolean"&&(N.j=S),C>0&&(N.wtimeout=C),Object.keys(N).length>0&&(t.writeConcern=N);const T=String(e.schemaCollationLocale||"").trim();if(T){const v={locale:T},w=Number(e.schemaCollationStrength||0),A=it(e.schemaCollationCaseLevelMode),R=String(e.schemaCollationCaseFirst||"").trim(),G=it(e.schemaCollationNumericOrderingMode);w>=1&&w<=5&&(v.strength=w),typeof A=="boolean"&&(v.caseLevel=A),R&&(v.caseFirst=R),typeof G=="boolean"&&(v.numericOrdering=G),t.collation=v}return t},si=e=>Object.keys(e).length>0?`, ${JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:")}`:"",Ug=1,jg=new Set(Object.values(te)),No=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),Gg=(e=[])=>e.map(t=>{const n=JSON.parse(JSON.stringify(t));return delete n.selected,n}),Yg=(e=[])=>e.map(t=>{const n=JSON.parse(JSON.stringify(t));return delete n.selected,n}),Kg=e=>{if(!No(e))return{ok:!1,message:"Invalid project file structure: root must be an object."};if(!Array.isArray(e.databases)||e.databases.length===0)return{ok:!1,message:"Invalid project file structure: databases is required and must be a non-empty array."};if(!Array.isArray(e.collections)||!Array.isArray(e.edges))return{ok:!1,message:"Invalid project file structure: collections and edges must be arrays."};const t=new Set;for(const n of e.databases){if(!No(n)||typeof n.id!="string"||!n.id.trim())return{ok:!1,message:"Invalid project file structure: each database must have a valid id."};if(typeof n.name!="string"||!n.name.trim())return{ok:!1,message:"Invalid project file structure: each database must have a valid name."};if(n.type&&!jg.has(n.type))return{ok:!1,message:`Invalid database type "${n.type}".`};t.add(n.id)}if(e.activeDatabaseId&&!t.has(e.activeDatabaseId))return{ok:!1,message:"Invalid project file structure: activeDatabaseId must exist in databases."};for(const n of e.collections){if(!No(n)||typeof n.id!="string"||!n.id.trim())return{ok:!1,message:"Invalid project file structure: each collection must have a valid id."};if(!No(n.data)||!Array.isArray(n.data.fields))return{ok:!1,message:"Invalid project file structure: each collection must include data.fields array."};if(n.databaseId&&!t.has(n.databaseId))return{ok:!1,message:`Invalid project file structure: collection "${n.id}" references unknown databaseId.`}}for(const n of e.edges){if(!No(n)||typeof n.id!="string"||!n.id.trim())return{ok:!1,message:"Invalid project file structure: each edge must have a valid id."};if(typeof n.source!="string"||typeof n.target!="string")return{ok:!1,message:`Invalid project file structure: edge "${n.id}" must include source and target.`};if(n.databaseId&&!t.has(n.databaseId))return{ok:!1,message:`Invalid project file structure: edge "${n.id}" references unknown databaseId.`}}return{ok:!0}},En=rd("schema",{state:()=>Rg(id,{databases:[{id:"db-main",name:"MainDB"}],activeDatabaseId:"db-main",collections:[{id:"1",databaseId:"db-main",type:"collection",position:{x:250,y:5},data:{label:"Users",fields:[{id:"f1",name:"_id",type:"ObjectId",key:!0},{id:"f2",name:"username",type:"String"},{id:"f3",name:"email",type:"String"},{id:"f-addr",name:"address",type:"Object",children:[{id:"f-city",name:"city",type:"String"},{id:"f-zip",name:"zip",type:"Number"}]}]}},{id:"2",databaseId:"db-main",type:"collection",position:{x:100,y:250},data:{label:"Posts",fields:[{id:"f4",name:"_id",type:"ObjectId",key:!0},{id:"f5",name:"title",type:"String"},{id:"f6",name:"author_id",type:"ObjectId",ref:"Users"}]}}],edges:[{id:"e1-2",databaseId:"db-main",source:"1",target:"2",sourceHandle:"f1",targetHandle:"f6",animated:!0,style:{stroke:"#10b981"}}],selectedItemId:null,selectedItemType:null,selectedCollectionId:null,clipboard:null,canUndo:!1,canRedo:!1,isDirty:!1}),getters:{activeDatabase:e=>e.databases.find(t=>t.id===e.activeDatabaseId)||null,activeCollections:e=>e.collections.filter(t=>t.databaseId===e.activeDatabaseId),activeEdges:e=>e.edges.filter(t=>t.databaseId===e.activeDatabaseId),selectedItem:e=>{if(!e.selectedItemId)return null;if(e.selectedItemType==="collection")return e.collections.find(t=>t.id===e.selectedItemId);if(e.selectedItemType==="field"&&e.selectedCollectionId){const t=e.collections.find(n=>n.id===e.selectedCollectionId);if(t){const n=mn(t.data.fields,e.selectedItemId);return n?n.field:null}}return e.selectedItemType==="edge"&&e.edges.find(t=>t.id===e.selectedItemId)||null},getCollectionCode:e=>t=>{const n=e.collections.find(s=>s.id===t);if(!n)return"";let o=`const mongoose = require('mongoose');
const { Schema } = mongoose;

`;const r=si(ri(n.data));return o+=`const ${n.data.label}Schema = new Schema({
`,o+=Go(n.data.fields),o+=`}${r});

`,o+=`const ${n.data.label} = mongoose.model('${n.data.label}', ${n.data.label}Schema);

`,o},activeDatabaseType:e=>e.databases.find(n=>n.id===e.activeDatabaseId)?.type||te.MONGODB,mongooseSchemaCode:e=>{let t=`const mongoose = require('mongoose');
const { Schema } = mongoose;

`;return e.collections.filter(n=>n.databaseId===e.activeDatabaseId).forEach(n=>{const o=si(ri(n.data));t+=`const ${n.data.label}Schema = new Schema({
`,t+=Go(n.data.fields),t+=`}${o});

`,t+=`const ${n.data.label} = mongoose.model('${n.data.label}', ${n.data.label}Schema);

`}),t},getCollectionsCode:e=>(t=[])=>{if(!Array.isArray(t)||t.length===0)return"";const n=new Set(t);let o=`const mongoose = require('mongoose');
const { Schema } = mongoose;

`;return e.collections.filter(r=>n.has(r.id)).forEach(r=>{const s=si(ri(r.data));o+=`const ${r.data.label}Schema = new Schema({
`,o+=Go(r.data.fields),o+=`}${s});

`,o+=`const ${r.data.label} = mongoose.model('${r.data.label}', ${r.data.label}Schema);

`}),o}},actions:{pruneInvalidEdges(e=null){const t=e?this.collections.filter(r=>r.databaseId===e):this.collections,n=new Map(t.map(r=>[r.id,r])),o=this.edges.filter(r=>{if(e&&r.databaseId!==e)return!0;const s=n.get(r.source),i=n.get(r.target);return!(!s||!i||r.sourceHandle&&!Ca(s,r.sourceHandle)||r.targetHandle&&!Ca(i,r.targetHandle))});o.length===this.edges.length&&o.every((r,s)=>r===this.edges[s])||(this.edges=o)},persistState(){const e=Fg(this);if(e?.ok)return ti=!1,!0;if(zg(e?.error)&&!ti){ti=!0;const t=bo();t.openAlert({title:"Storage Full",message:"Browser local storage is full. Please export your current project now to avoid data loss, then remove old data/import only what you need.",confirmText:"I Understand"}),t.showToast("Storage full. Export your project now.","error",5e3)}return!1},initializeDatabases(){(!Array.isArray(this.databases)||this.databases.length===0)&&(this.databases=[{id:"db-main",name:"MainDB"}]),(!this.activeDatabaseId||!this.databases.some(n=>n.id===this.activeDatabaseId))&&(this.activeDatabaseId=this.databases[0].id);const e=new Set(this.databases.map(n=>n.id)),t=this.activeDatabaseId;this.collections.forEach(n=>{(!n.databaseId||!e.has(n.databaseId))&&(n.databaseId=t)}),this.databases.forEach(n=>{n.type||(n.type=te.MONGODB)}),this.edges.forEach(n=>{if(!n.databaseId||!e.has(n.databaseId)){const o=this.collections.find(r=>r.id===n.source);n.databaseId=o?.databaseId||t}}),this.pruneInvalidEdges(),this.persistState()},addDatabase(e="New Database",t=te.MONGODB){const n=`db-${Date.now()}`;return this.databases.push({id:n,name:String(e).trim()||"New Database",type:t}),this.activeDatabaseId=n,this.clearSelections(),n},setActiveDatabase(e){this.databases.some(t=>t.id===e)&&(this.activeDatabaseId=e,this.pruneInvalidEdges(e),this.clearSelections())},updateDatabaseName(e,t){const n=this.databases.find(o=>o.id===e);n&&(n.name=String(t).trim()||n.name,this.persistState())},removeDatabase(e){return this.databases.length<=1?{success:!1,message:"At least one database is required."}:this.databases.some(n=>n.id===e)?(this.recordHistory(),this.databases=this.databases.filter(n=>n.id!==e),this.collections=this.collections.filter(n=>n.databaseId!==e),this.edges=this.edges.filter(n=>n.databaseId!==e),this.activeDatabaseId===e&&(this.activeDatabaseId=this.databases[0].id),this.clearSelections(),this.syncHistoryState(),{success:!0}):{success:!1,message:"Database not found."}},syncHistoryState(){Ie.past=Co(Ie.past),Ie.future=Co(Ie.future),this.canUndo=Ie.past.length>0,this.canRedo=Ie.future.length>0,this.isDirty=this.canUndo||this.canRedo,this.persistState()},initializeHistory(){Ie.past=[],Ie.future=[],Ie.isRestoring=!1,this.syncHistoryState()},getHistorySnapshot(){return JSON.stringify({databases:this.databases,activeDatabaseId:this.activeDatabaseId,collections:this.collections,edges:this.edges})},applyHistorySnapshot(e){const t=JSON.parse(e);this.databases=t.databases||this.databases,this.activeDatabaseId=t.activeDatabaseId||this.activeDatabaseId,this.collections=t.collections||[],this.edges=t.edges||[],this.initializeDatabases(),this.selectItem(null,null,null)},recordHistory(){if(Ie.isRestoring)return;const e=this.getHistorySnapshot();Ie.past[Ie.past.length-1]?.snapshot!==e&&(Ie.past=Co(Ie.past),Ie.past.push({snapshot:e,createdAt:Date.now()}),Ie.past.length>ni&&Ie.past.shift(),Ie.future=[],this.syncHistoryState())},undo(){if(!Ie.past.length)return!1;const e=this.getHistorySnapshot(),t=Ie.past.pop()?.snapshot;return t?(Ie.future=Co(Ie.future),Ie.future.push({snapshot:e,createdAt:Date.now()}),Ie.future.length>ni&&Ie.future.shift(),Ie.isRestoring=!0,this.applyHistorySnapshot(t),Ie.isRestoring=!1,this.syncHistoryState(),!0):!1},redo(){if(!Ie.future.length)return!1;const e=this.getHistorySnapshot(),t=Ie.future.pop()?.snapshot;return t?(Ie.past=Co(Ie.past),Ie.past.push({snapshot:e,createdAt:Date.now()}),Ie.past.length>ni&&Ie.past.shift(),Ie.isRestoring=!0,this.applyHistorySnapshot(t),Ie.isRestoring=!1,this.syncHistoryState(),!0):!1},clearSelections(){this.collections.forEach(e=>{e.selected=!1}),this.edges.forEach(e=>{e.selected=!1}),this.selectItem(null,null,null),this.syncHistoryState()},setCollectionSelection(e,t=!1){const n=this.collections.find(i=>i.id===e);if(!n||n.databaseId!==this.activeDatabaseId)return;if(!t){this.collections.forEach(i=>{i.selected=i.id===e}),this.edges.forEach(i=>{i.selected=!1}),this.selectItem(e,"collection");return}const o=this.collections.filter(i=>i.selected&&i.databaseId===this.activeDatabaseId);if(n.selected&&o.length===1){this.selectItem(n.id,"collection");return}n.selected=!n.selected;const s=this.collections.filter(i=>i.selected&&i.databaseId===this.activeDatabaseId);s.length===1?this.selectItem(s[0].id,"collection"):this.selectItem(null,null,null)},exportProject(){return JSON.stringify({version:Ug,exportedAt:new Date().toISOString(),databases:this.databases,activeDatabaseId:this.activeDatabaseId,collections:Gg(this.collections),edges:Yg(this.edges)},null,2)},importProject(e){let t;try{t=typeof e=="string"?JSON.parse(e):e}catch{return{success:!1,message:"Invalid JSON format."}}const n=Kg(t);return n.ok?(this.recordHistory(),Array.isArray(t.databases)&&t.databases.length>0&&(this.databases=t.databases),this.collections=t.collections,this.edges=t.edges,this.activeDatabaseId=t.activeDatabaseId||this.databases[0]?.id||"db-main",this.initializeDatabases(),this.pruneInvalidEdges(),this.selectItem(null,null,null),this.clipboard=null,this.syncHistoryState(),{success:!0}):{success:!1,message:n.message||"Invalid project file structure."}},selectItem(e,t,n=null){this.selectedItemId=e,this.selectedItemType=t,this.selectedCollectionId=n},updateCollectionProps(e,t){const n=this.collections.find(o=>o.id===e);n&&(this.recordHistory(),Object.assign(n.data,t),this.syncHistoryState())},updateFieldProps(e,t,n){const o=this.collections.find(r=>r.id===e);if(o){const r=mn(o.data.fields,t);r&&(this.recordHistory(),Object.assign(r.field,n),this.syncHistoryState())}},addCollection(e){this.recordHistory(),e.databaseId=e.databaseId||this.activeDatabaseId,this.collections.push(e),this.pruneInvalidEdges(e.databaseId),this.syncHistoryState()},updateCollectionPosition(e,t){const n=this.collections.findIndex(o=>o.id===e);n!==-1&&(this.recordHistory(),this.collections[n].position=t,this.syncHistoryState())},autoArrangeActiveDatabase(){const e=this.activeDatabaseId,t=this.collections.filter(y=>y.databaseId===e);if(t.length<2)return!1;const n=new Set(t.map(y=>y.id)),o=new Map,r=new Map,s=new Map;t.forEach(y=>{o.set(y.id,[]),r.set(y.id,0),s.set(y.id,0)}),this.activeEdges.forEach(y=>{!n.has(y.source)||!n.has(y.target)||y.source!==y.target&&(o.get(y.source).push(y.target),r.set(y.target,(r.get(y.target)||0)+1))});const i=t.map(y=>y.id).filter(y=>(r.get(y)||0)===0),l=new Set;for(;i.length>0;){const y=i.shift();if(l.has(y))continue;l.add(y),(o.get(y)||[]).forEach(C=>{const T=Math.max(s.get(C)||0,(s.get(y)||0)+1);s.set(C,T),r.set(C,(r.get(C)||0)-1),(r.get(C)||0)===0&&i.push(C)})}const a=Math.max(...Array.from(s.values()));t.forEach(y=>{l.has(y.id)||s.set(y.id,a+1)});const c=new Map;t.forEach(y=>{const S=s.get(y.id)||0;c.has(S)||c.set(S,[]),c.get(S).push(y)}),Array.from(c.values()).forEach(y=>{y.sort((S,C)=>{const T=(o.get(S.id)||[]).length,v=(o.get(C.id)||[]).length;return T!==v?v-T:String(S.data?.label||"").localeCompare(String(C.data?.label||""))})});const u=80,f=60,g=380,m=260;return this.recordHistory(),Array.from(c.entries()).sort((y,S)=>y[0]-S[0]).forEach(([y,S])=>{S.forEach((C,T)=>{const v=this.collections.find(w=>w.id===C.id);v&&(v.position={x:u+y*g,y:f+T*m})})}),this.syncHistoryState(),!0},addField(e,t){const n=this.collections.find(o=>o.id===e);n&&(this.recordHistory(),n.data.fields.push(t),this.syncHistoryState())},addChildField(e,t,n){const o=this.collections.find(r=>r.id===e);if(o){const r=mn(o.data.fields,t);r&&(this.recordHistory(),r.field.children||(r.field.children=[]),r.field.children.push(n),this.syncHistoryState())}},removeField(e,t){const n=this.collections.find(o=>o.id===e);if(n){this.recordHistory();const o=r=>{const s=r.findIndex(i=>i.id===t);if(s!==-1)return r.splice(s,1),!0;for(const i of r)if(i.children&&i.children.length>0&&o(i.children))return!0;return!1};o(n.data.fields),this.pruneInvalidEdges(n.databaseId),this.selectedItemId===t&&this.selectItem(null,null),this.syncHistoryState()}},removeCollection(e){this.recordHistory();const n=this.collections.find(o=>o.id===e)?.databaseId||this.activeDatabaseId;this.collections=this.collections.filter(o=>o.id!==e),this.edges=this.edges.filter(o=>o.source!==e&&o.target!==e),this.pruneInvalidEdges(n),this.selectedItemId===e&&this.selectItem(null,null),this.syncHistoryState()},removeCollections(e=[]){if(!Array.isArray(e)||e.length===0)return;this.recordHistory();const t=new Set(e),n=new Set(this.collections.filter(o=>t.has(o.id)).map(o=>o.databaseId));this.collections=this.collections.filter(o=>!t.has(o.id)),this.edges=this.edges.filter(o=>!t.has(o.source)&&!t.has(o.target)),n.forEach(o=>this.pruneInvalidEdges(o)),this.selectItem(null,null,null),this.syncHistoryState()},reorderField(e,t,n,o){const r=this.collections.find(i=>i.id===e);if(!r)return;let s=r.data.fields;if(t){const i=mn(r.data.fields,t);if(i&&i.field.children)s=i.field.children;else return}if(o>=0&&o<s.length){this.recordHistory();const[i]=s.splice(n,1);s.splice(o,0,i),this.syncHistoryState()}},removeEdge(e){this.recordHistory(),this.edges=this.edges.filter(t=>t.id!==e),this.selectedItemId===e&&this.selectItem(null,null),this.syncHistoryState()},updateEdgeProps(e,t={}){const n=this.edges.find(i=>i.id===e);if(!n)return;this.recordHistory(),Object.assign(n,t);const o=this.collections.find(i=>i.id===n.target),r=this.collections.find(i=>i.id===n.source),s=r?mn(r.data?.fields||[],n.sourceHandle):null;if(o&&n.targetHandle){const i=mn(o.data?.fields||[],n.targetHandle);i?.field&&(i.field.foreignKey=!0,i.field.referencesTable=r?.data?.label||i.field.referencesTable||"",i.field.referencesColumnId=n.sourceHandle||i.field.referencesColumnId||"",i.field.referencesColumn=s?.field?.name||i.field.referencesColumn||"",Object.prototype.hasOwnProperty.call(t,"onDelete")&&(i.field.onDelete=String(t.onDelete||"")),Object.prototype.hasOwnProperty.call(t,"onUpdate")&&(i.field.onUpdate=String(t.onUpdate||"")),Object.prototype.hasOwnProperty.call(t,"constraintName")&&(i.field.fkConstraintName=String(t.constraintName||"")))}this.syncHistoryState()},copyNode(e){const t=this.collections.find(n=>n.id===e);t&&(this.clipboard=JSON.parse(JSON.stringify(t)))},pasteNode(){if(!this.clipboard)return;this.recordHistory();const e=`col-${Date.now()}`,t=JSON.parse(JSON.stringify(this.clipboard));t.id=e,t.position={x:t.position.x+20,y:t.position.y+20};const n=o=>{o.forEach(r=>{r.id=`f-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,r.children&&n(r.children)})};n(t.data.fields),this.collections.push(t),this.selectItem(e,"collection"),this.syncHistoryState()}}});const Wg=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const Na=e=>e==="";const Xg=(...e)=>e.filter((t,n,o)=>!!t&&t.trim()!==""&&o.indexOf(t)===n).join(" ").trim();const Ia=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const qg=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,o)=>o?o.toUpperCase():n.toLowerCase());const Zg=e=>{const t=qg(e);return t.charAt(0).toUpperCase()+t.slice(1)};var Io={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const Jg=({name:e,iconNode:t,absoluteStrokeWidth:n,"absolute-stroke-width":o,strokeWidth:r,"stroke-width":s,size:i=Io.width,color:l=Io.stroke,...a},{slots:c})=>$e("svg",{...Io,...a,width:i,height:i,stroke:l,"stroke-width":Na(n)||Na(o)||n===!0||o===!0?Number(r||s||Io["stroke-width"])*24/Number(i):r||s||Io["stroke-width"],class:Xg("lucide",a.class,...e?[`lucide-${Ia(Zg(e))}-icon`,`lucide-${Ia(e)}`]:["lucide-icon"]),...!c.default&&!Wg(a)&&{"aria-hidden":"true"}},[...t.map(u=>$e(...u)),...c.default?[c.default()]:[]]);const qe=(e,t)=>(n,{slots:o,attrs:r})=>$e(Jg,{...r,...n,iconNode:t,name:e},o);const Qg=qe("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const ad=qe("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);const ud=qe("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const cd=qe("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const dd=qe("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);const em=qe("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const tm=qe("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const nm=qe("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const om=qe("network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);const rm=qe("panel-left-close",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);const sm=qe("panel-left-open",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]]);const ts=qe("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const im=qe("redo-2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);const lm=qe("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const am=qe("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);const kn=qe("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);const um=qe("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);const cm=qe("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);const gl=qe("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),dm={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4"},fm={class:"bg-[#1e1e1e] border border-gray-700 rounded-lg shadow-2xl w-full max-w-md overflow-hidden"},pm={class:"px-6 py-4 border-b border-gray-700 flex justify-between items-center bg-[#252525]"},hm={class:"p-6 space-y-4"},gm={class:"grid grid-cols-1 gap-2"},mm=["value"],vm={class:"text-white text-sm"},ym={class:"px-6 py-4 border-t border-gray-700 bg-[#252525] flex justify-end gap-3"},bm={__name:"CreateDatabaseModal",props:{isOpen:Boolean},emits:["close","create"],setup(e,{emit:t}){const n=t,o=xe("New Database"),r=xe(te.MONGODB),s=()=>{o.value.trim()&&(n("create",{name:o.value,type:r.value}),o.value="New Database",r.value=te.MONGODB)};return(i,l)=>e.isOpen?(B(),Y("div",dm,[p("div",fm,[p("div",pm,[l[4]||(l[4]=p("h2",{class:"text-xl font-bold text-white"},"Create Database",-1)),p("button",{onClick:l[0]||(l[0]=a=>i.$emit("close")),class:"text-gray-400 hover:text-white transition-colors"},[le(z(gl),{size:20})])]),p("div",hm,[p("div",null,[l[5]||(l[5]=p("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Database Name",-1)),Bn(p("input",{"onUpdate:modelValue":l[1]||(l[1]=a=>o.value=a),type:"text",class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-3 py-2 text-white text-sm focus:border-emerald-500 focus:outline-none transition-colors",placeholder:"Enter database name",onKeyup:Ms(s,["enter"])},null,544),[[pl,o.value]])]),p("div",null,[l[6]||(l[6]=p("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Database Type",-1)),p("div",gm,[(B(!0),Y(ue,null,Ee(Object.values(z(te)),a=>(B(),Y("label",{key:a,class:ve(["flex items-center gap-3 p-3 rounded border cursor-pointer hover:bg-[#2a2a2a] transition-all",r.value===a?"border-emerald-500 bg-[#2a2a2a]":"border-gray-700 bg-[#1e1e1e]"])},[Bn(p("input",{type:"radio",name:"dbType",value:a,"onUpdate:modelValue":l[2]||(l[2]=c=>r.value=c),class:"text-emerald-500 focus:ring-emerald-500 bg-gray-700 border-gray-600"},null,8,mm),[[og,r.value]]),p("span",vm,fe(a),1)],2))),128))])])]),p("div",ym,[p("button",{onClick:l[3]||(l[3]=a=>i.$emit("close")),class:"px-4 py-2 rounded bg-gray-700 hover:bg-gray-600 text-white font-medium transition-colors text-sm"}," Cancel "),p("button",{onClick:s,class:"px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-700 text-white font-medium transition-colors text-sm"}," Create Database ")])])])):pe("",!0)}},Vn=(e,t)=>{const o=String(e??"").normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/[^a-zA-Z0-9]+/g,"_").replace(/^_+|_+$/g,"").replace(/_+/g,"_").toLowerCase()||t;return/^[0-9]/.test(o)?`n_${o}`:o},Fr=(e,t)=>{if(!t.has(e))return t.add(e),e;let n=2,o=`${e}_${n}`;for(;t.has(o);)n+=1,o=`${e}_${n}`;return t.add(o),o},ki=(e,t)=>{const n=String(e||"").trim();return Vn(n||t,t)},Ta=e=>{const t=String(e||"").trim().toUpperCase();return new Set(["CASCADE","RESTRICT","SET NULL","NO ACTION","SET DEFAULT"]).has(t)?t:""},fd=e=>String(e||"").trim().toLowerCase(),xm=(e,t)=>{if(!t){const i=String(e.referencesColumn||"").trim();return i?Vn(i,"id"):"id"}const n=t.columnsByFieldId.get(e.referencesColumnId);if(n)return n;const o=fd(e.referencesColumn),r=t.columnsByFieldName.get(o);if(r)return r;const s=String(e.referencesColumn||"").trim();return s?Vn(s,"id"):"id"},$a=e=>String(e||"").trim().toLowerCase(),pd=(e,t)=>{if(!e||!e.collections)return"";const n=e.collections.map(a=>wm(a,t)).filter(Boolean),o=new Map;n.forEach(a=>{const c=$a(a.sourceLabel);o.has(c)||o.set(c,a)});const r=n.map(a=>a.createTableSql).filter(Boolean),s=n.flatMap(a=>a.indexStatements),i=new Set,l=n.flatMap(a=>a.foreignKeys.map((c,u)=>{const f=o.get($a(c.referencesTable)),g=f?f.tableName:Vn(c.referencesTable,"reference_table"),m=xm(c,f),N=ki(c.constraintName,`fk_${a.tableName}_${c.columnName}_${u+1}`),y=Fr(N,i);let S=`ALTER TABLE ${a.tableName} ADD CONSTRAINT ${y} FOREIGN KEY (${c.columnName}) REFERENCES ${g} (${m})`;return c.onDelete&&(S+=` ON DELETE ${c.onDelete}`),c.onUpdate&&(S+=` ON UPDATE ${c.onUpdate}`),`${S};`}));return[...r,...s,...l].join(`

`)},wm=(e,t)=>{const n=Vn(e?.data?.label,"untitled_table"),o=e?.data?.fields||[];if(o.length===0)return{sourceLabel:String(e?.data?.label||""),tableName:n,createTableSql:`-- Table ${n} has no fields`,indexStatements:[],foreignKeys:[],columnsByFieldId:new Map,columnsByFieldName:new Map};const r=[],s=[],i=new Set,l=[],a=[],c=[],u=new Set,f=new Set,g=new Map,m=new Map;o.forEach((y,S)=>{const C=Vn(y?.name,`column_${S+1}`),T=Fr(C,i),v=_m(y,t,T);r.push(v),g.set(y.id,T);const w=fd(y.name);w&&!m.has(w)&&m.set(w,T),y.primaryKey&&s.push(T),y.foreignKey&&y.referencesTable&&(y.referencesColumn||y.referencesColumnId)&&c.push({columnName:T,referencesTable:y.referencesTable,referencesColumn:y.referencesColumn,referencesColumnId:y.referencesColumnId,constraintName:y.fkConstraintName,onDelete:Ta(y.onDelete),onUpdate:Ta(y.onUpdate)});const A=String(y.checkExpression||"").trim();if(A){const R=String(y.checkConstraintName||"").trim().length>0,G=ki(y.checkConstraintName,`chk_${n}_${T}`);let j=`CHECK (${A})`;R&&(j=`CONSTRAINT ${Fr(G,f)} ${j}`),l.push(j)}if(y.index&&!y.primaryKey&&!y.unique){const R=ki(y.indexName,`idx_${n}_${T}`),G=Fr(R,u);a.push(`CREATE INDEX ${G} ON ${n} (${T});`)}}),s.length>0&&r.push(`PRIMARY KEY (${s.join(", ")})`);const N=`CREATE TABLE ${n} (
${[...r,...l].map(y=>"  "+y).join(`,
`)}
);`;return{sourceLabel:String(e?.data?.label||""),tableName:n,createTableSql:N,indexStatements:a,foreignKeys:c,columnsByFieldId:g,columnsByFieldName:m}},_m=(e,t,n)=>{const o=n||Vn(e?.name,"column"),r=Sm(e,t);let s=`${o} ${r}`;if(e.unsigned&&t===te.MYSQL&&Em(r)&&(s+=" UNSIGNED"),!e.nullable&&!e.primaryKey&&(s+=" NOT NULL"),e.autoIncrement&&(t===te.MYSQL?s+=" AUTO_INCREMENT":t===te.POSTGRESQL&&(s+=" GENERATED BY DEFAULT AS IDENTITY")),e.unique&&(s+=" UNIQUE"),e.defaultValue!==void 0&&e.defaultValue!==null&&e.defaultValue!==""){const i=Cm(e.defaultValue);s+=` DEFAULT ${i}`}return s},Sm=(e,t)=>{const n=e.type,o=e.typeParams?`(${e.typeParams})`:"";if(["VARCHAR","CHAR","TEXT","LONGTEXT","INT","BIGINT","TINYINT","SMALLINT","DECIMAL","FLOAT","DOUBLE","REAL","DOUBLE PRECISION","SERIAL","BIGSERIAL","BOOLEAN","DATE","DATETIME","TIMESTAMP","TIME","YEAR","INTERVAL","JSON","JSONB","BLOB","BYTEA","XML","ENUM","UUID"].includes(n))return n==="ENUM"&&e.enumValues&&e.enumValues.length>0?`ENUM(${e.enumValues.map(i=>`'${i}'`).join(", ")})`:`${n}${o}`;switch(n){case"String":return"VARCHAR(255)";case"Number":return"INT";case"Boolean":return"BOOLEAN";case"Date":return t===te.POSTGRESQL?"TIMESTAMP":"DATETIME";case"ObjectId":return t===te.POSTGRESQL?"UUID":"VARCHAR(24)";case"Array":case"Object":case"Map":case"Mixed":return t===te.POSTGRESQL?"JSONB":"JSON";case"Buffer":return"BLOB";default:return"VARCHAR(255)"}},Em=e=>["INT","BIGINT","TINYINT","SMALLINT","DECIMAL","FLOAT","DOUBLE"].some(t=>e.toUpperCase().startsWith(t)),Cm=e=>{if(typeof e=="number")return e;if(typeof e=="boolean")return e?"TRUE":"FALSE";const t=String(e).trim();return t!==""&&!Number.isNaN(Number(t))?t:t.toLowerCase()==="true"||t.toLowerCase()==="false"?t.toUpperCase():t.toUpperCase()==="CURRENT_TIMESTAMP"||t.toUpperCase()==="NOW()"?t:`'${t}'`},Pi=(e,t)=>{const o=String(e??"").normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/[^a-zA-Z0-9]+/g,"_").replace(/^_+|_+$/g,"").replace(/_+/g,"_").toLowerCase()||t;return/^[0-9]/.test(o)?`n_${o}`:o},ml=(e,t="Model")=>{const n=String(e??"").replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/[^a-zA-Z0-9]+/g," ").trim().split(/\s+/).filter(Boolean);if(n.length===0)return t;const o=n.map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join("");return/^[0-9]/.test(o)?`M${o}`:o},Ma=(e,t="field")=>{const n=ml(e,t);return n.charAt(0).toLowerCase()+n.slice(1)},Li=(e,t)=>{if(!t.has(e))return t.add(e),e;let n=2,o=`${e}${n}`;for(;t.has(o);)n+=1,o=`${e}${n}`;return t.add(o),o},Aa=e=>String(e||"").trim().toLowerCase(),Oa=e=>{const t=String(e||"").trim().toUpperCase();return{CASCADE:"Cascade",RESTRICT:"Restrict","SET NULL":"SetNull","NO ACTION":"NoAction","SET DEFAULT":"SetDefault"}[t]||""},Nm=e=>{const t=String(e?.type||"").toUpperCase();return{INT:"Int",INTEGER:"Int",BIGINT:"BigInt",SMALLINT:"Int",TINYINT:"Int",SERIAL:"Int",BIGSERIAL:"BigInt",DECIMAL:"Decimal",NUMERIC:"Decimal",FLOAT:"Float",DOUBLE:"Float",REAL:"Float",BOOLEAN:"Boolean",BOOL:"Boolean",VARCHAR:"String",CHAR:"String",TEXT:"String",LONGTEXT:"String",ENUM:"String",DATE:"DateTime",DATETIME:"DateTime",TIMESTAMP:"DateTime",TIME:"DateTime",JSON:"Json",JSONB:"Json",UUID:"String",BLOB:"Bytes",BYTEA:"Bytes",XML:"String"}[t]||"String"},Im=e=>e===te.MYSQL?"mysql":e===te.POSTGRESQL?"postgresql":"mongodb",Tm=(e,t)=>{if(!t)return"id";if(e.referencesColumnId&&t.fieldNameById.has(e.referencesColumnId))return t.fieldNameById.get(e.referencesColumnId);const n=Pi(e.referencesColumn,"id");return t.fieldNameByColumn.has(n)?t.fieldNameByColumn.get(n):"id"},$m=(e,t)=>{const n=String(e?.data?.label||"").trim(),o=Pi(n,`table_${t+1}`),r=ml(n||o,`Model${t+1}`),s=Array.isArray(e?.data?.fields)?e.data.fields:[],i=new Set,l=new Map,a=new Map,c=s.map((u,f)=>{const g=Pi(u?.name,`column_${f+1}`),m=Li(g,i);return l.set(u.id,m),a.has(g)||a.set(g,m),{...u,columnName:g,fieldName:m}});return{id:e?.id,sourceLabel:n,tableName:o,modelName:r,fields:c,fieldNameById:l,fieldNameByColumn:a}},hd=(e,t)=>{const n=Array.isArray(e?.collections)?e.collections:[],o=Im(t),r=n.map((f,g)=>$m(f,g)),s=new Map(r.map(f=>[Aa(f.sourceLabel),f])),i=new Map,l=new Map(r.map(f=>[f.modelName,new Set])),a=r.map(f=>{const g=[],m=[];return f.fields.forEach(y=>{const S=Nm(y),C=y.nullable===!0,T=C?"?":"",v=[];y.primaryKey&&v.push("@id"),y.autoIncrement&&v.push("@default(autoincrement())"),y.unique&&!y.primaryKey&&v.push("@unique");const w=String(y.defaultValue||"").trim();if(w&&!y.autoIncrement&&(w.toUpperCase()==="CURRENT_TIMESTAMP"||w.toLowerCase()==="now()"?v.push("@default(now())"):Number.isNaN(Number(w))?w.toLowerCase()==="true"||w.toLowerCase()==="false"?v.push(`@default(${w.toLowerCase()})`):v.push(`@default(${JSON.stringify(w)})`):v.push(`@default(${w})`)),g.push(`  ${y.fieldName} ${S}${T}${v.length?` ${v.join(" ")}`:""}`),!(y.foreignKey&&y.referencesTable&&(y.referencesColumn||y.referencesColumnId)))return;const A=s.get(Aa(y.referencesTable));if(!A)return;const R=Tm(y,A),G=ml(`${f.modelName}_${A.modelName}_${y.fieldName}`,`${f.modelName}${A.modelName}${y.fieldName}`),j=Ma(A.modelName,"relation"),V=Li(j,l.get(f.modelName)),X=Oa(y.onDelete),W=Oa(y.onUpdate),$=[`"${G}"`,`fields: [${y.fieldName}]`,`references: [${R}]`];X&&$.push(`onDelete: ${X}`),W&&$.push(`onUpdate: ${W}`),m.push(`  ${V} ${A.modelName}${C?"?":""} @relation(${$.join(", ")})`);const Q=Ma(f.modelName,"items");i.has(A.modelName)||i.set(A.modelName,[]),i.get(A.modelName).push({baseName:Q,relationName:G,modelName:f.modelName})}),(i.get(f.modelName)||[]).forEach(y=>{const S=Li(y.baseName,l.get(f.modelName));m.push(`  ${S} ${y.modelName}[] @relation("${y.relationName}")`)}),g.push(...m),g.push(`
  @@map(${JSON.stringify(f.tableName)})`),`model ${f.modelName} {
${g.join(`
`)}
}`}),c=["datasource db {",`  provider = ${JSON.stringify(o)}`,'  url      = env("DATABASE_URL")',"}"].join(`
`);return[["generator client {",'  provider = "prisma-client-js"',"}"].join(`
`),c,...a].join(`

`)},To=(e,t)=>{const o=String(e??"").normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/[^a-zA-Z0-9]+/g,"_").replace(/^_+|_+$/g,"").replace(/_+/g,"_").toLowerCase()||t;return/^[0-9]/.test(o)?`n_${o}`:o},Mm=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"",Am=(e,t)=>{const n=String(e?.type||"").toUpperCase();return String(e?.typeParams||"").trim(),e.primaryKey&&e.autoIncrement?"$table->id()":n==="INT"||n==="INTEGER"?"$table->integer":n==="BIGINT"?"$table->bigInteger":n==="SMALLINT"?"$table->smallInteger":n==="TINYINT"?"$table->tinyInteger":n==="VARCHAR"?"$table->string":n==="CHAR"?"$table->char":n==="TEXT"||n==="LONGTEXT"?"$table->text":n==="DECIMAL"?"$table->decimal":n==="FLOAT"||n==="DOUBLE"||n==="REAL"?"$table->double":n==="BOOLEAN"?"$table->boolean":n==="DATE"?"$table->date":n==="DATETIME"||n==="TIMESTAMP"?"$table->timestamp":n==="TIME"?"$table->time":n==="JSON"||n==="JSONB"?"$table->json":n==="UUID"?"$table->uuid":n==="BLOB"||n==="BYTEA"?"$table->binary":n==="ENUM"?"$table->enum":t===te.POSTGRESQL&&n==="SERIAL"?"$table->integer":t===te.POSTGRESQL&&n==="BIGSERIAL"?"$table->bigInteger":"$table->string"},Om=e=>{const t=String(e??"").trim();return t?t.toUpperCase()==="CURRENT_TIMESTAMP"||t.toLowerCase()==="now()"?"->useCurrent()":Number.isNaN(Number(t))?t.toLowerCase()==="true"||t.toLowerCase()==="false"?`->default(${t.toLowerCase()})`:`->default('${t.replace(/'/g,"\\'")}')`:`->default(${t})`:null},gd=(e,t)=>{const o=(Array.isArray(e?.collections)?e.collections:[]).map((s,i)=>{const l=To(s?.data?.label,`table_${i+1}`),a=Array.isArray(s?.data?.fields)?s.data.fields:[],c=new Map(a.map((u,f)=>[u.id,To(u?.name,`column_${f+1}`)]));return{collection:s,tableName:l,fields:a,fieldMap:c}}),r=new Map(o.map(s=>[String(s.collection?.data?.label||"").trim().toLowerCase(),s]));return o.map((s,i)=>{`${s.tableName.split("_").map(Mm).join("")}`;const l=`${new Date().toISOString().split("T")[0].replace(/-/g,"_")}_${String(i+1).padStart(6,"0")}_create_${s.tableName}_table.php`,a=[];return s.fields.forEach((u,f)=>{const g=s.fieldMap.get(u.id)||To(u?.name,`column_${f+1}`),m=Am(u,t);let N="";if(m==="$table->id()"){N=`            ${m};`,a.push(N);return}if(m==="$table->decimal"){const[S,C]=String(u.typeParams||"10,2").split(",").map(T=>Number.parseInt(T.trim(),10));N=`            ${m}('${g}', ${Number.isFinite(S)?S:10}, ${Number.isFinite(C)?C:2})`}else if(m==="$table->enum"){const S=Array.isArray(u.enumValues)&&u.enumValues.length>0?`[${u.enumValues.map(C=>`'${String(C).replace(/'/g,"\\'")}'`).join(", ")}]`:"['value1', 'value2']";N=`            ${m}('${g}', ${S})`}else if(m==="$table->string"&&String(u?.type||"").toUpperCase()==="VARCHAR"){const S=Number.parseInt(String(u.typeParams||"255"),10);N=`            ${m}('${g}', ${Number.isFinite(S)?S:255})`}else N=`            ${m}('${g}')`;u.unsigned&&t===te.MYSQL&&(N+="->unsigned()"),u.nullable&&(N+="->nullable()"),u.unique&&(N+="->unique()"),u.index&&(N+="->index()");const y=Om(u.defaultValue);if(y&&(N+=y),N+=";",a.push(N),u.primaryKey&&!u.autoIncrement&&a.push(`            $table->primary('${g}');`),u.foreignKey&&u.referencesTable&&(u.referencesColumn||u.referencesColumnId)){const S=r.get(String(u.referencesTable).trim().toLowerCase()),C=S?S.tableName:To(u.referencesTable,"reference_table"),T=u.referencesColumnId&&S?.fieldMap.has(u.referencesColumnId)?S.fieldMap.get(u.referencesColumnId):To(u.referencesColumn,"id");let v=`            $table->foreign('${g}')`;v+=`->references('${T}')`,v+=`->on('${C}')`,u.onDelete&&(v+=`->onDelete('${String(u.onDelete).toLowerCase().replace(/\s+/g," ")}')`),u.onUpdate&&(v+=`->onUpdate('${String(u.onUpdate).toLowerCase().replace(/\s+/g," ")}')`),v+=";",a.push(v)}}),`// ${l}
<?php

use Illuminate\\Database\\Migrations\\Migration;
use Illuminate\\Database\\Schema\\Blueprint;
use Illuminate\\Support\\Facades\\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('${s.tableName}', function (Blueprint $table) {
${a.join(`
`)}
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('${s.tableName}');
    }
};
`}).join(`

`)},ii=(e,t)=>{const o=String(e??"").normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/[^a-zA-Z0-9]+/g,"_").replace(/^_+|_+$/g,"").replace(/_+/g,"_").toLowerCase()||t;return/^[0-9]/.test(o)?`n_${o}`:o},md=(e,t="Entity")=>{const n=String(e??"").replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/[^a-zA-Z0-9]+/g," ").trim().split(/\s+/).filter(Boolean);if(n.length===0)return t;const o=n.map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join("");return/^[0-9]/.test(o)?`E${o}`:o},Da=(e,t="field")=>{const n=md(e,t);return n.charAt(0).toLowerCase()+n.slice(1)},Dm=e=>{const t=String(e||"").toUpperCase();return["INT","INTEGER","BIGINT","SMALLINT","TINYINT","SERIAL","BIGSERIAL","DECIMAL","FLOAT","DOUBLE","REAL"].includes(t)?"number":["BOOLEAN","BOOL"].includes(t)?"boolean":["BLOB","BYTEA"].includes(t)?"Buffer":["DATE","DATETIME","TIMESTAMP","TIME"].includes(t)?"Date":["JSON","JSONB"].includes(t)?"Record<string, unknown>":"string"},ka=e=>{const t=String(e||"").trim().toUpperCase();return new Set(["RESTRICT","CASCADE","SET NULL","NO ACTION","SET DEFAULT"]).has(t)?t:"NO ACTION"},vd=(e,t)=>{const o=(Array.isArray(e?.collections)?e.collections:[]).map((s,i)=>{const l=ii(s?.data?.label,`table_${i+1}`),a=md(s?.data?.label,`Entity${i+1}`),c=Array.isArray(s?.data?.fields)?s.data.fields:[],u=new Map(c.map((f,g)=>[f.id,ii(f.name,`column_${g+1}`)]));return{collection:s,tableName:l,className:a,fields:c,columnNameByFieldId:u}}),r=new Map(o.map(s=>[String(s.collection?.data?.label||"").trim().toLowerCase(),s]));return o.map(s=>{const i=new Set(["Entity","Column","PrimaryGeneratedColumn","PrimaryColumn","Index"]),l=[];s.fields.forEach((u,f)=>{const g=Da(u.name,`field${f+1}`),m=s.columnNameByFieldId.get(u.id)||ii(u.name,`column_${f+1}`),N=String(u.type||"varchar").toLowerCase(),y=Dm(u.type);if(u.primaryKey)u.autoIncrement?l.push("  @PrimaryGeneratedColumn()"):l.push(`  @PrimaryColumn({ name: '${m}', type: '${N}' })`);else{const S=[`name: '${m}'`,`type: '${N}'`];if(u.nullable&&S.push("nullable: true"),u.unique&&S.push("unique: true"),u.defaultValue!==void 0&&u.defaultValue!==null&&String(u.defaultValue).trim()!==""&&S.push(`default: ${JSON.stringify(String(u.defaultValue))}`),u.typeParams&&["varchar","char"].includes(N)){const C=Number.parseInt(String(u.typeParams),10);Number.isFinite(C)&&C>0&&S.push(`length: ${C}`)}if(u.typeParams&&N==="decimal"){const[C,T]=String(u.typeParams).split(",").map(v=>Number.parseInt(v.trim(),10));Number.isFinite(C)&&S.push(`precision: ${C}`),Number.isFinite(T)&&S.push(`scale: ${T}`)}u.index&&l.push("  @Index()"),l.push(`  @Column({ ${S.join(", ")} })`)}if(l.push(`  ${g}${u.nullable?"?":""}: ${y};`),l.push(""),u.foreignKey&&u.referencesTable&&(u.referencesColumn||u.referencesColumnId)){const S=r.get(String(u.referencesTable).trim().toLowerCase());if(S){i.add("ManyToOne"),i.add("JoinColumn");const C=Da(S.className,"relation"),T=ka(u.onDelete),v=ka(u.onUpdate);l.push(`  @ManyToOne(() => ${S.className}, { onDelete: '${T}', onUpdate: '${v}' })`),l.push(`  @JoinColumn({ name: '${m}' })`),l.push(`  ${C}${u.nullable?"?":""}: ${S.className};`),l.push("")}}}),i.delete("PrimaryGeneratedColumn"),s.fields.some(u=>u.primaryKey&&u.autoIncrement)||i.delete("PrimaryGeneratedColumn"),s.fields.some(u=>u.primaryKey&&!u.autoIncrement)||i.delete("PrimaryColumn"),s.fields.some(u=>!u.primaryKey)||i.delete("Column"),s.fields.some(u=>u.index)||i.delete("Index"),Array.from(l).some(u=>u.includes("@ManyToOne"))||(i.delete("ManyToOne"),i.delete("JoinColumn"));const a=`import { ${Array.from(i).join(", ")} } from 'typeorm';`,c=l.join(`
`).trimEnd();return`${a}

@Entity({ name: '${s.tableName}' })
export class ${s.className} {
${c?`${c}
`:""}}
`}).join(`

`)},Pa={INIT:"init",PER_MODEL:"per_model"},La=(e,t)=>{const o=String(e??"").normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/[^a-zA-Z0-9]+/g,"_").replace(/^_+|_+$/g,"").replace(/_+/g,"_").toLowerCase()||t;return/^[0-9]/.test(o)?`n_${o}`:o},km=(e,t="Model")=>{const n=String(e??"").replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/[^a-zA-Z0-9]+/g," ").trim().split(/\s+/).filter(Boolean);if(!n.length)return t;const o=n.map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join("");return/^[0-9]/.test(o)?`M${o}`:o},Ra=(e,t)=>{if(!t.has(e))return t.add(e),e;let n=2,o=`${e}_${n}`;for(;t.has(o);)n++,o=`${e}_${n}`;return t.add(o),o},Pm=(e,t)=>{const n=String(e?.type||"").toUpperCase(),o=String(e?.typeParams||"").trim(),r={TEXT:"DataTypes.TEXT",LONGTEXT:"DataTypes.TEXT",INT:"DataTypes.INTEGER",INTEGER:"DataTypes.INTEGER",BIGINT:"DataTypes.BIGINT",SMALLINT:"DataTypes.SMALLINT",TINYINT:"DataTypes.TINYINT",BOOLEAN:"DataTypes.BOOLEAN",BOOL:"DataTypes.BOOLEAN",DATE:"DataTypes.DATEONLY",DATETIME:"DataTypes.DATE",TIMESTAMP:"DataTypes.DATE",TIME:"DataTypes.TIME",JSON:"DataTypes.JSON",JSONB:"DataTypes.JSON",UUID:"DataTypes.UUID",BLOB:"DataTypes.BLOB",BYTEA:"DataTypes.BLOB",REAL:"DataTypes.REAL",DOUBLE:"DataTypes.DOUBLE",FLOAT:"DataTypes.FLOAT"};if(r[n])return r[n];if(n==="VARCHAR")return`DataTypes.STRING(${Number(o)||255})`;if(n==="CHAR")return`DataTypes.CHAR(${Number(o)||1})`;if(n==="DECIMAL"){const[s,i]=o.split(",").map(Number);return s&&i?`DataTypes.DECIMAL(${s}, ${i})`:s?`DataTypes.DECIMAL(${s})`:"DataTypes.DECIMAL"}return t===te.POSTGRESQL&&n==="INTERVAL","DataTypes.STRING"},Lm=e=>{if(e==null||e==="")return null;const t=String(e).trim();return/^CURRENT_TIMESTAMP$/i.test(t)||/^now\(\)$/i.test(t)?"DataTypes.NOW":!isNaN(Number(t))||t==="true"||t==="false"?t:JSON.stringify(t)},Rm=(e,t,n)=>{const o=[];o.push(`type: ${Pm(e,n)}`),o.push(`field: "${t}"`),e.primaryKey&&o.push("primaryKey: true"),e.autoIncrement&&o.push("autoIncrement: true"),e.primaryKey||o.push(`allowNull: ${e.nullable===!0}`),e.unique&&o.push("unique: true");const r=Lm(e.defaultValue);return r&&o.push(`defaultValue: ${r}`),`{
      ${o.join(`,
      `)}
    }`},Bm=(e=[],t)=>{const n=new Set,o=new Set,r=e.map((i,l)=>{const a=Ra(La(i?.data?.label,`table_${l+1}`),n),c=Ra(km(i?.data?.label,`Model${l+1}`),o),u=i?.data?.fields??[];return{modelName:c,tableName:a,fields:u}});return{modelBlocks:r.map(i=>{const l=i.fields.map((a,c)=>{const u=La(a?.name,`column_${c+1}`),f=Rm(a,u,t);return`    ${u}: ${f}`});return{modelName:i.modelName,tableName:i.tableName,fieldsCode:l.join(`,
`)}}),modelNames:r.map(i=>i.modelName)}},Fm=e=>`import { DataTypes } from 'sequelize';

export function initSequelizeModels(sequelize) {
${e.modelBlocks.map(n=>`
  const ${n.modelName} = sequelize.define("${n.modelName}", {
${n.fieldsCode}
  }, {
    tableName: "${n.tableName}",
    timestamps: false
  });
  `).join(`
`)}

  return {
    ${e.modelNames.join(`,
    `)}
  };
}
`,zm=e=>{const t=e.modelBlocks.map(r=>`
// models/${r.modelName}.js
import { DataTypes } from 'sequelize';

export default function define${r.modelName}(sequelize) {
  const ${r.modelName} = sequelize.define("${r.modelName}", {
${r.fieldsCode}
  }, {
    tableName: "${r.tableName}",
    timestamps: false
  });

  return ${r.modelName};
}
`),n=e.modelNames.map(r=>`import define${r} from './${r}.js';`).join(`
`),o=e.modelNames.map(r=>`  const ${r} = define${r}(sequelize);`).join(`
`);return`
${t.join(`
`)}

// models/index.js
${n}

export function initModels(sequelize) {
${o}

  return {
    ${e.modelNames.join(`,
    `)}
  };
}
`},yd=(e,t,n=Pa.INIT)=>{const o=e?.collections??[],r=Bm(o,t);return n===Pa.PER_MODEL?zm(r):Fm(r)},Fe={MONGOOSE:"mongoose",SQL:"sql",PRISMA:"prisma",LARAVEL:"laravel",TYPEORM:"typeorm",SEQUELIZE:"sequelize"},Ba={[te.MONGODB]:{singular:"Collection",plural:"Collections"},[te.MYSQL]:{singular:"Table",plural:"Tables"},[te.POSTGRESQL]:{singular:"Table",plural:"Tables"}},Fa={[te.MONGODB]:"String",[te.MYSQL]:"VARCHAR",[te.POSTGRESQL]:"VARCHAR"},za={[te.MONGODB]:[{value:Fe.MONGOOSE,label:"Mongoose",language:"javascript"}],[te.MYSQL]:[{value:Fe.SQL,label:"SQL",language:"sql"},{value:Fe.PRISMA,label:"Prisma",language:"plaintext"},{value:Fe.LARAVEL,label:"Laravel",language:"php"},{value:Fe.TYPEORM,label:"TypeORM",language:"typescript"},{value:Fe.SEQUELIZE,label:"Sequelize",language:"javascript"}],[te.POSTGRESQL]:[{value:Fe.SQL,label:"SQL",language:"sql"},{value:Fe.PRISMA,label:"Prisma",language:"plaintext"},{value:Fe.LARAVEL,label:"Laravel",language:"php"},{value:Fe.TYPEORM,label:"TypeORM",language:"typescript"},{value:Fe.SEQUELIZE,label:"Sequelize",language:"javascript"}]},Cn=e=>{const t=Ba[e]||Ba[te.MONGODB];return{singular:t.singular,plural:t.plural,singularLower:t.singular.toLowerCase(),pluralLower:t.plural.toLowerCase()}},bd=(e,t=[])=>{const{singularLower:n}=Cn(e),o=`new_${n}`,r=new Set((t||[]).map(l=>String(l||"").trim().toLowerCase()).filter(Boolean));let s=1,i=`${o}_${s}`;for(;r.has(i);)s+=1,i=`${o}_${s}`;return i},xd=e=>Fa[e]||Fa[te.MONGODB],Hn=e=>za[e]||za[te.MONGODB],vl=e=>Hn(e)[0].value,Vm=()=>({type:te.MONGODB,getDefaultField:()=>({...hl[te.MONGODB]}),getExportTargets:()=>Hn(te.MONGODB),getLanguage:(e=Fe.MONGOOSE)=>Hn(te.MONGODB).find(n=>n.value===e)?.language||"javascript",getDefaultExportTarget:()=>vl(te.MONGODB),getEntityTerms:()=>Cn(te.MONGODB),generateCode:({target:e=Fe.MONGOOSE,store:t,collectionId:n=null,collectionIds:o=[]})=>!t||e!==Fe.MONGOOSE?"":o.length>0?t.getCollectionsCode(o):n?t.getCollectionCode(n):t.mongooseSchemaCode}),Hm=()=>({type:te.MYSQL,getDefaultField:()=>({...hl[te.MYSQL]}),getExportTargets:()=>Hn(te.MYSQL),getLanguage:(e=Fe.SQL)=>Hn(te.MYSQL).find(n=>n.value===e)?.language||"sql",getDefaultExportTarget:()=>vl(te.MYSQL),getEntityTerms:()=>Cn(te.MYSQL),generateCode:({target:e=Fe.SQL,collections:t=[]})=>e===Fe.PRISMA?hd({collections:t},te.MYSQL):e===Fe.LARAVEL?gd({collections:t},te.MYSQL):e===Fe.TYPEORM?vd({collections:t},te.MYSQL):e===Fe.SEQUELIZE?yd({collections:t},te.MYSQL):pd({collections:t},te.MYSQL)}),Um=()=>({type:te.POSTGRESQL,getDefaultField:()=>({...hl[te.POSTGRESQL]}),getExportTargets:()=>Hn(te.POSTGRESQL),getLanguage:(e=Fe.SQL)=>Hn(te.POSTGRESQL).find(n=>n.value===e)?.language||"sql",getDefaultExportTarget:()=>vl(te.POSTGRESQL),getEntityTerms:()=>Cn(te.POSTGRESQL),generateCode:({target:e=Fe.SQL,collections:t=[]})=>e===Fe.PRISMA?hd({collections:t},te.POSTGRESQL):e===Fe.LARAVEL?gd({collections:t},te.POSTGRESQL):e===Fe.TYPEORM?vd({collections:t},te.POSTGRESQL):e===Fe.SEQUELIZE?yd({collections:t},te.POSTGRESQL):pd({collections:t},te.POSTGRESQL)}),Va={[te.MONGODB]:Vm,[te.MYSQL]:Hm,[te.POSTGRESQL]:Um},yl=e=>(Va[e]||Va[te.MONGODB])(),jm={class:"w-64 bg-[#1e1e1e] border-r border-gray-700 flex flex-col h-full"},Gm={class:"p-4 border-b border-gray-700 flex items-center gap-2"},Ym={class:"p-4 space-y-4 flex-1 overflow-y-auto"},Km={class:"space-y-2"},Wm={class:"flex min-w-0 gap-2"},Xm=["value"],qm=["value"],Zm={class:"space-y-2"},Jm={class:"flex items-center justify-between"},Qm={class:"text-xs font-bold text-gray-500 uppercase tracking-wider"},ev=["onClick"],tv={class:"text-sm truncate flex-1"},nv={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},ov=["onClick"],rv=["onClick","title"],sv={class:"space-y-2"},iv={__name:"Sidebar",emits:["export-collection","toggle-sidebar"],setup(e,{emit:t}){const n=En(),o=bo(),r=xe(null),s=xe(!1),i=se(()=>Cn(n.activeDatabaseType)),l="v2.4.0",a=()=>{if(!n.activeDatabaseId)return;n.autoArrangeActiveDatabase()?o.showToast("Auto-layout applied.","success"):o.showToast("Not enough items to layout.","info")},c=()=>{if(!n.activeDatabaseId)return;const v=Date.now().toString(),A={...yl(n.activeDatabaseType).getDefaultField(),id:`f-${Date.now()}-1`},R=bd(n.activeDatabaseType,n.activeCollections.map(G=>G?.data?.label));n.addCollection({id:v,type:"collection",position:{x:Math.random()*400,y:Math.random()*400},data:{label:R,fields:[A]}}),n.selectItem(v,"collection")},u=()=>{s.value=!0},f=({name:v,type:w})=>{n.addDatabase(v,w),o.showToast(`Database "${v}" (${w}) created.`,"success"),s.value=!1},g=v=>{n.setActiveDatabase(v.target.value)},m=async()=>{const v=n.activeDatabase;if(!v||!await o.openConfirm({title:"Delete Database",message:`Delete database "${v.name}" and all its ${i.value.pluralLower}?`,confirmText:"Delete"}))return;const A=n.removeDatabase(v.id);if(!A.success&&A.message){o.showToast(A.message,"error");return}o.showToast(`Database "${v.name}" deleted.`,"success")},N=(v,w)=>{const A=v.shiftKey||v.metaKey||v.ctrlKey;n.setCollectionSelection(w,A)},y=async v=>{await o.openConfirm({title:`Delete ${i.value.singular}`,message:`Are you sure you want to delete this ${i.value.singularLower}?`,confirmText:"Delete"})&&(n.removeCollection(v),o.showToast(`${i.value.singular} deleted.`,"success"))},S=()=>{const v=n.exportProject(),w=new Blob([v],{type:"application/json"}),A=URL.createObjectURL(w),R=document.createElement("a");R.href=A,R.download=`mongo-diagram-project-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(R),R.click(),R.remove(),URL.revokeObjectURL(A)},C=()=>{r.value?.click()},T=async v=>{const w=v.target.files?.[0];if(w)try{const A=await w.text(),R=n.importProject(A);if(!R.success){o.showToast(`Import failed: ${R.message}`,"error");return}o.showToast("Project imported successfully.","success")}catch{o.showToast("Import failed: unable to read file.","error")}finally{v.target.value=""}};return(v,w)=>(B(),Y(ue,null,[p("aside",jm,[p("div",Gm,[w[2]||(w[2]=p("div",{class:"w-8 h-8 rounded bg-emerald-500 flex items-center justify-center text-white font-bold"}," M ",-1)),w[3]||(w[3]=p("h1",{class:"text-white font-bold text-lg flex-1"},"Mongo Diagram",-1)),p("button",{onClick:w[0]||(w[0]=A=>v.$emit("toggle-sidebar")),class:"p-1.5 rounded hover:bg-[#2a2a2a] text-gray-400 hover:text-white transition-colors",title:"Hide Sidebar"},[le(z(rm),{size:16})])]),p("div",Ym,[p("div",Km,[w[4]||(w[4]=p("p",{class:"text-xs font-bold text-gray-500 uppercase tracking-wider"},"Database",-1)),p("div",Wm,[p("select",{value:z(n).activeDatabaseId,onChange:g,class:"min-w-0 flex-1 bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1.5 text-white text-sm focus:border-emerald-500 focus:outline-none"},[(B(!0),Y(ue,null,Ee(z(n).databases,A=>(B(),Y("option",{key:A.id,value:A.id},fe(A.name),9,qm))),128))],40,Xm),p("button",{onClick:u,class:"shrink-0 px-2 py-1.5 rounded bg-[#2d2d2d] hover:bg-[#3d3d3d] text-gray-300 border border-gray-600/70",title:"Create Database"},[le(z(ts),{size:14})]),p("button",{onClick:m,class:"shrink-0 px-2 py-1.5 rounded bg-red-900/30 hover:bg-red-900/50 text-red-300 border border-red-900/60",title:"Delete Active Database"},[le(z(kn),{size:14})])])]),p("div",Zm,[p("div",Jm,[p("p",Qm,fe(i.value.plural),1),p("button",{onClick:a,class:"p-1 hover:bg-[#2a2a2a] rounded text-gray-500 hover:text-white transition-colors",title:"Auto Layout / Arrange Nodes"},[le(z(nm),{size:14})])]),(B(!0),Y(ue,null,Ee(z(n).activeCollections,A=>(B(),Y("div",{key:A.id,onClick:R=>N(R,A.id),class:ve(["flex items-center gap-2 p-2 rounded cursor-pointer transition-colors group",A.selected||z(n).selectedItemId===A.id?"bg-[#2a2a2a] text-emerald-400":"hover:bg-[#2a2a2a] text-gray-300 hover:text-white"])},[le(z(cd),{size:16}),p("span",tv,fe(A.data.label),1),p("div",nv,[p("button",{onClick:dt(R=>v.$emit("export-collection",A.id),["stop"]),class:"p-1 hover:bg-gray-700 rounded text-gray-400 hover:text-white",title:"Export Code"},[le(z(ad),{size:12})],8,ov),p("button",{onClick:dt(R=>y(A.id),["stop"]),class:"p-1 hover:bg-red-900/50 rounded text-gray-400 hover:text-red-400",title:`Delete ${i.value.singular}`},[le(z(kn),{size:12})],8,rv)])],10,ev))),128)),p("button",{onClick:c,class:"w-full mt-2 flex items-center justify-center gap-2 p-2 bg-[#2d2d2d] hover:bg-[#3d3d3d] rounded text-sm text-gray-300 transition-colors border border-gray-600 border-dashed"},[le(z(ts),{size:16}),We(" New "+fe(i.value.singular),1)])]),p("div",sv,[w[7]||(w[7]=p("p",{class:"text-xs font-bold text-gray-500 uppercase tracking-wider"},"Project",-1)),p("button",{onClick:S,class:"w-full flex items-center gap-2 p-2 rounded hover:bg-[#2a2a2a] text-gray-300 hover:text-white transition-colors text-left"},[le(z(dd),{size:16}),w[5]||(w[5]=p("span",{class:"text-sm"},"Export Project (.json)",-1))]),p("button",{onClick:C,class:"w-full flex items-center gap-2 p-2 rounded hover:bg-[#2a2a2a] text-gray-300 hover:text-white transition-colors text-left"},[le(z(cm),{size:16}),w[6]||(w[6]=p("span",{class:"text-sm"},"Import Project (.json)",-1))]),p("input",{ref_key:"importInput",ref:r,type:"file",accept:".json,application/json",class:"hidden",onChange:T},null,544)])]),p("div",{class:"p-4 border-t border-gray-700 text-xs text-gray-500 text-center"},fe(l))]),le(bm,{"is-open":s.value,onClose:w[1]||(w[1]=A=>s.value=!1),onCreate:f},null,8,["is-open"])],64))}};function nr(e){return xs()?(Ro(e),!0):!1}function Xt(e){return typeof e=="function"?e():z(e)}const lv=typeof window<"u"&&typeof document<"u",av=e=>typeof e<"u",uv=Object.prototype.toString,cv=e=>uv.call(e)==="[object Object]",dv=()=>{};function fv(e,t){function n(...o){return new Promise((r,s)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(s)})}return n}const wd=e=>e();function pv(e=wd){const t=xe(!0);function n(){t.value=!1}function o(){t.value=!0}return{isActive:ao(t),pause:n,resume:o,eventFilter:(...s)=>{t.value&&e(...s)}}}function Ha(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function hv(e,t,n={}){const{eventFilter:o=wd,...r}=n;return Se(e,fv(o,t),r)}function Xn(e,t,n={}){const{eventFilter:o,...r}=n,{eventFilter:s,pause:i,resume:l,isActive:a}=pv(o);return{stop:hv(e,t,{...r,eventFilter:s}),pause:i,resume:l,isActive:a}}function gv(e,t={}){if(!ze(e))return oc(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=nc(()=>({get(){return e.value[o]},set(r){var s;if((s=Xt(t.replaceRef))!=null?s:!0)if(Array.isArray(e.value)){const l=[...e.value];l[o]=r,e.value=l}else{const l={...e.value,[o]:r};Object.setPrototypeOf(l,Object.getPrototypeOf(e.value)),e.value=l}else e.value[o]=r}}));return n}function Ri(e,t=!1){function n(f,{flush:g="sync",deep:m=!1,timeout:N,throwOnTimeout:y}={}){let S=null;const T=[new Promise(v=>{S=Se(e,w=>{f(w)!==t&&(S?.(),v(w))},{flush:g,deep:m,immediate:!0})})];return N!=null&&T.push(Ha(N,y).then(()=>Xt(e)).finally(()=>S?.())),Promise.race(T)}function o(f,g){if(!ze(f))return n(w=>w===f,g);const{flush:m="sync",deep:N=!1,timeout:y,throwOnTimeout:S}=g??{};let C=null;const v=[new Promise(w=>{C=Se([e,f],([A,R])=>{t!==(A===R)&&(C?.(),w(A))},{flush:m,deep:N,immediate:!0})})];return y!=null&&v.push(Ha(y,S).then(()=>Xt(e)).finally(()=>(C?.(),Xt(e)))),Promise.race(v)}function r(f){return n(g=>!!g,f)}function s(f){return o(null,f)}function i(f){return o(void 0,f)}function l(f){return n(Number.isNaN,f)}function a(f,g){return n(m=>{const N=Array.from(m);return N.includes(f)||N.includes(Xt(f))},g)}function c(f){return u(1,f)}function u(f=1,g){let m=-1;return n(()=>(m+=1,m>=f),g)}return Array.isArray(Xt(e))?{toMatch:n,toContains:a,changed:c,changedTimes:u,get not(){return Ri(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:s,toBeNaN:l,toBeUndefined:i,changed:c,changedTimes:u,get not(){return Ri(e,!t)}}}function Bi(e){return Ri(e)}function mv(e){var t;const n=Xt(e);return(t=n?.$el)!=null?t:n}const _d=lv?window:void 0;function Sd(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=_d):[t,n,o,r]=e,!t)return dv;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const s=[],i=()=>{s.forEach(u=>u()),s.length=0},l=(u,f,g,m)=>(u.addEventListener(f,g,m),()=>u.removeEventListener(f,g,m)),a=Se(()=>[mv(t),Xt(r)],([u,f])=>{if(i(),!u)return;const g=cv(f)?{...f}:f;s.push(...n.flatMap(m=>o.map(N=>l(u,m,N,g))))},{immediate:!0,flush:"post"}),c=()=>{a(),i()};return nr(c),c}function vv(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Ua(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=_d,eventName:s="keydown",passive:i=!1,dedupe:l=!1}=o,a=vv(t);return Sd(r,s,u=>{u.repeat&&Xt(l)||a(u)&&n(u)},i)}function yv(e){return JSON.parse(JSON.stringify(e))}function li(e,t,n,o={}){var r,s,i;const{clone:l=!1,passive:a=!1,eventName:c,deep:u=!1,defaultValue:f,shouldEmit:g}=o,m=Nt(),N=n||m?.emit||((r=m?.$emit)==null?void 0:r.bind(m))||((i=(s=m?.proxy)==null?void 0:s.$emit)==null?void 0:i.bind(m?.proxy));let y=c;t||(t="modelValue"),y=y||`update:${t.toString()}`;const S=v=>l?typeof l=="function"?l(v):yv(v):v,C=()=>av(e[t])?S(e[t]):f,T=v=>{g?g(v)&&N(y,v):N(y,v)};if(a){const v=C(),w=xe(v);let A=!1;return Se(()=>e[t],R=>{A||(A=!0,w.value=S(R),ut(()=>A=!1))}),Se(w,R=>{!A&&(R!==e[t]||u)&&T(R)},{deep:u}),w}else return se({get(){return C()},set(v){T(v)}})}var bv={value:()=>{}};function Os(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new zr(n)}function zr(e){this._=e}function xv(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}zr.prototype=Os.prototype={constructor:zr,on:function(e,t){var n=this._,o=xv(e+"",n),r,s=-1,i=o.length;if(arguments.length<2){for(;++s<i;)if((r=(e=o[s]).type)&&(r=wv(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(r=(e=o[s]).type)n[r]=ja(n[r],e.name,t);else if(t==null)for(r in n)n[r]=ja(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new zr(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,s;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],o=0,r=s.length;o<r;++o)s[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,s=o.length;r<s;++r)o[r].value.apply(t,n)}};function wv(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function ja(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=bv,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Fi="http://www.w3.org/1999/xhtml";const Ga={svg:"http://www.w3.org/2000/svg",xhtml:Fi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ds(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ga.hasOwnProperty(t)?{space:Ga[t],local:e}:e}function _v(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Fi&&t.documentElement.namespaceURI===Fi?t.createElement(e):t.createElementNS(n,e)}}function Sv(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ed(e){var t=Ds(e);return(t.local?Sv:_v)(t)}function Ev(){}function bl(e){return e==null?Ev:function(){return this.querySelector(e)}}function Cv(e){typeof e!="function"&&(e=bl(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,l=o[r]=new Array(i),a,c,u=0;u<i;++u)(a=s[u])&&(c=e.call(a,a.__data__,u,s))&&("__data__"in a&&(c.__data__=a.__data__),l[u]=c);return new mt(o,this._parents)}function Nv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Iv(){return[]}function Cd(e){return e==null?Iv:function(){return this.querySelectorAll(e)}}function Tv(e){return function(){return Nv(e.apply(this,arguments))}}function $v(e){typeof e=="function"?e=Tv(e):e=Cd(e);for(var t=this._groups,n=t.length,o=[],r=[],s=0;s<n;++s)for(var i=t[s],l=i.length,a,c=0;c<l;++c)(a=i[c])&&(o.push(e.call(a,a.__data__,c,i)),r.push(a));return new mt(o,r)}function Nd(e){return function(){return this.matches(e)}}function Id(e){return function(t){return t.matches(e)}}var Mv=Array.prototype.find;function Av(e){return function(){return Mv.call(this.children,e)}}function Ov(){return this.firstElementChild}function Dv(e){return this.select(e==null?Ov:Av(typeof e=="function"?e:Id(e)))}var kv=Array.prototype.filter;function Pv(){return Array.from(this.children)}function Lv(e){return function(){return kv.call(this.children,e)}}function Rv(e){return this.selectAll(e==null?Pv:Lv(typeof e=="function"?e:Id(e)))}function Bv(e){typeof e!="function"&&(e=Nd(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,l=o[r]=[],a,c=0;c<i;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&l.push(a);return new mt(o,this._parents)}function Td(e){return new Array(e.length)}function Fv(){return new mt(this._enter||this._groups.map(Td),this._parents)}function ns(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ns.prototype={constructor:ns,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function zv(e){return function(){return e}}function Vv(e,t,n,o,r,s){for(var i=0,l,a=t.length,c=s.length;i<c;++i)(l=t[i])?(l.__data__=s[i],o[i]=l):n[i]=new ns(e,s[i]);for(;i<a;++i)(l=t[i])&&(r[i]=l)}function Hv(e,t,n,o,r,s,i){var l,a,c=new Map,u=t.length,f=s.length,g=new Array(u),m;for(l=0;l<u;++l)(a=t[l])&&(g[l]=m=i.call(a,a.__data__,l,t)+"",c.has(m)?r[l]=a:c.set(m,a));for(l=0;l<f;++l)m=i.call(e,s[l],l,s)+"",(a=c.get(m))?(o[l]=a,a.__data__=s[l],c.delete(m)):n[l]=new ns(e,s[l]);for(l=0;l<u;++l)(a=t[l])&&c.get(g[l])===a&&(r[l]=a)}function Uv(e){return e.__data__}function jv(e,t){if(!arguments.length)return Array.from(this,Uv);var n=t?Hv:Vv,o=this._parents,r=this._groups;typeof e!="function"&&(e=zv(e));for(var s=r.length,i=new Array(s),l=new Array(s),a=new Array(s),c=0;c<s;++c){var u=o[c],f=r[c],g=f.length,m=Gv(e.call(u,u&&u.__data__,c,o)),N=m.length,y=l[c]=new Array(N),S=i[c]=new Array(N),C=a[c]=new Array(g);n(u,f,y,S,C,m,t);for(var T=0,v=0,w,A;T<N;++T)if(w=y[T]){for(T>=v&&(v=T+1);!(A=S[v])&&++v<N;);w._next=A||null}}return i=new mt(i,o),i._enter=l,i._exit=a,i}function Gv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Yv(){return new mt(this._exit||this._groups.map(Td),this._parents)}function Kv(e,t,n){var o=this.enter(),r=this,s=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),o&&r?o.merge(r).order():r}function Wv(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,s=o.length,i=Math.min(r,s),l=new Array(r),a=0;a<i;++a)for(var c=n[a],u=o[a],f=c.length,g=l[a]=new Array(f),m,N=0;N<f;++N)(m=c[N]||u[N])&&(g[N]=m);for(;a<r;++a)l[a]=n[a];return new mt(l,this._parents)}function Xv(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,s=o[r],i;--r>=0;)(i=o[r])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function qv(e){e||(e=Zv);function t(f,g){return f&&g?e(f.__data__,g.__data__):!f-!g}for(var n=this._groups,o=n.length,r=new Array(o),s=0;s<o;++s){for(var i=n[s],l=i.length,a=r[s]=new Array(l),c,u=0;u<l;++u)(c=i[u])&&(a[u]=c);a.sort(t)}return new mt(r,this._parents).order()}function Zv(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Jv(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Qv(){return Array.from(this)}function ey(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length;r<s;++r){var i=o[r];if(i)return i}return null}function ty(){let e=0;for(const t of this)++e;return e}function ny(){return!this.node()}function oy(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],s=0,i=r.length,l;s<i;++s)(l=r[s])&&e.call(l,l.__data__,s,r);return this}function ry(e){return function(){this.removeAttribute(e)}}function sy(e){return function(){this.removeAttributeNS(e.space,e.local)}}function iy(e,t){return function(){this.setAttribute(e,t)}}function ly(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ay(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function uy(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function cy(e,t){var n=Ds(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?sy:ry:typeof t=="function"?n.local?uy:ay:n.local?ly:iy)(n,t))}function $d(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function dy(e){return function(){this.style.removeProperty(e)}}function fy(e,t,n){return function(){this.style.setProperty(e,t,n)}}function py(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function hy(e,t,n){return arguments.length>1?this.each((t==null?dy:typeof t=="function"?py:fy)(e,t,n??"")):ho(this.node(),e)}function ho(e,t){return e.style.getPropertyValue(t)||$d(e).getComputedStyle(e,null).getPropertyValue(t)}function gy(e){return function(){delete this[e]}}function my(e,t){return function(){this[e]=t}}function vy(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function yy(e,t){return arguments.length>1?this.each((t==null?gy:typeof t=="function"?vy:my)(e,t)):this.node()[e]}function Md(e){return e.trim().split(/^|\s+/)}function xl(e){return e.classList||new Ad(e)}function Ad(e){this._node=e,this._names=Md(e.getAttribute("class")||"")}Ad.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Od(e,t){for(var n=xl(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function Dd(e,t){for(var n=xl(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function by(e){return function(){Od(this,e)}}function xy(e){return function(){Dd(this,e)}}function wy(e,t){return function(){(t.apply(this,arguments)?Od:Dd)(this,e)}}function _y(e,t){var n=Md(e+"");if(arguments.length<2){for(var o=xl(this.node()),r=-1,s=n.length;++r<s;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?wy:t?by:xy)(n,t))}function Sy(){this.textContent=""}function Ey(e){return function(){this.textContent=e}}function Cy(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ny(e){return arguments.length?this.each(e==null?Sy:(typeof e=="function"?Cy:Ey)(e)):this.node().textContent}function Iy(){this.innerHTML=""}function Ty(e){return function(){this.innerHTML=e}}function $y(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function My(e){return arguments.length?this.each(e==null?Iy:(typeof e=="function"?$y:Ty)(e)):this.node().innerHTML}function Ay(){this.nextSibling&&this.parentNode.appendChild(this)}function Oy(){return this.each(Ay)}function Dy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ky(){return this.each(Dy)}function Py(e){var t=typeof e=="function"?e:Ed(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ly(){return null}function Ry(e,t){var n=typeof e=="function"?e:Ed(e),o=t==null?Ly:typeof t=="function"?t:bl(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function By(){var e=this.parentNode;e&&e.removeChild(this)}function Fy(){return this.each(By)}function zy(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Vy(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Hy(e){return this.select(e?Vy:zy)}function Uy(e){return arguments.length?this.property("__data__",e):this.node().__data__}function jy(e){return function(t){e.call(this,t,this.__data__)}}function Gy(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Yy(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++o]=s;++o?t.length=o:delete this.__on}}}function Ky(e,t,n){return function(){var o=this.__on,r,s=jy(t);if(o){for(var i=0,l=o.length;i<l;++i)if((r=o[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},o?o.push(r):this.__on=[r]}}function Wy(e,t,n){var o=Gy(e+""),r,s=o.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,c=l.length,u;a<c;++a)for(r=0,u=l[a];r<s;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value}return}for(l=t?Ky:Yy,r=0;r<s;++r)this.each(l(o[r],t,n));return this}function kd(e,t,n){var o=$d(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Xy(e,t){return function(){return kd(this,e,t)}}function qy(e,t){return function(){return kd(this,e,t.apply(this,arguments))}}function Zy(e,t){return this.each((typeof t=="function"?qy:Xy)(e,t))}function*Jy(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length,i;r<s;++r)(i=o[r])&&(yield i)}var Pd=[null];function mt(e,t){this._groups=e,this._parents=t}function hr(){return new mt([[document.documentElement]],Pd)}function Qy(){return this}mt.prototype=hr.prototype={constructor:mt,select:Cv,selectAll:$v,selectChild:Dv,selectChildren:Rv,filter:Bv,data:jv,enter:Fv,exit:Yv,join:Kv,merge:Wv,selection:Qy,order:Xv,sort:qv,call:Jv,nodes:Qv,node:ey,size:ty,empty:ny,each:oy,attr:cy,style:hy,property:yy,classed:_y,text:Ny,html:My,raise:Oy,lower:ky,append:Py,insert:Ry,remove:Fy,clone:Hy,datum:Uy,on:Wy,dispatch:Zy,[Symbol.iterator]:Jy};function bt(e){return typeof e=="string"?new mt([[document.querySelector(e)]],[document.documentElement]):new mt([[e]],Pd)}function e0(e){let t;for(;t=e.sourceEvent;)e=t;return e}function kt(e,t){if(e=e0(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const t0={passive:!1},or={capture:!0,passive:!1};function ai(e){e.stopImmediatePropagation()}function so(e){e.preventDefault(),e.stopImmediatePropagation()}function Ld(e){var t=e.document.documentElement,n=bt(e).on("dragstart.drag",so,or);"onselectstart"in t?n.on("selectstart.drag",so,or):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Rd(e,t){var n=e.document.documentElement,o=bt(e).on("dragstart.drag",null);t&&(o.on("click.drag",so,or),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Sr=e=>()=>e;function zi(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:s,x:i,y:l,dx:a,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}zi.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function n0(e){return!e.ctrlKey&&!e.button}function o0(){return this.parentNode}function r0(e,t){return t??{x:e.x,y:e.y}}function s0(){return navigator.maxTouchPoints||"ontouchstart"in this}function i0(){var e=n0,t=o0,n=r0,o=s0,r={},s=Os("start","drag","end"),i=0,l,a,c,u,f=0;function g(w){w.on("mousedown.drag",m).filter(o).on("touchstart.drag",S).on("touchmove.drag",C,t0).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(w,A){if(!(u||!e.call(this,w,A))){var R=v(this,t.call(this,w,A),w,A,"mouse");R&&(bt(w.view).on("mousemove.drag",N,or).on("mouseup.drag",y,or),Ld(w.view),ai(w),c=!1,l=w.clientX,a=w.clientY,R("start",w))}}function N(w){if(so(w),!c){var A=w.clientX-l,R=w.clientY-a;c=A*A+R*R>f}r.mouse("drag",w)}function y(w){bt(w.view).on("mousemove.drag mouseup.drag",null),Rd(w.view,c),so(w),r.mouse("end",w)}function S(w,A){if(e.call(this,w,A)){var R=w.changedTouches,G=t.call(this,w,A),j=R.length,V,X;for(V=0;V<j;++V)(X=v(this,G,w,A,R[V].identifier,R[V]))&&(ai(w),X("start",w,R[V]))}}function C(w){var A=w.changedTouches,R=A.length,G,j;for(G=0;G<R;++G)(j=r[A[G].identifier])&&(so(w),j("drag",w,A[G]))}function T(w){var A=w.changedTouches,R=A.length,G,j;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),G=0;G<R;++G)(j=r[A[G].identifier])&&(ai(w),j("end",w,A[G]))}function v(w,A,R,G,j,V){var X=s.copy(),W=kt(V||R,A),$,Q,M;if((M=n.call(w,new zi("beforestart",{sourceEvent:R,target:g,identifier:j,active:i,x:W[0],y:W[1],dx:0,dy:0,dispatch:X}),G))!=null)return $=M.x-W[0]||0,Q=M.y-W[1]||0,function K(L,D,P){var d=W,h;switch(L){case"start":r[j]=K,h=i++;break;case"end":delete r[j],--i;case"drag":W=kt(P||D,A),h=i;break}X.call(L,w,new zi(L,{sourceEvent:D,subject:M,target:g,identifier:j,active:h,x:W[0]+$,y:W[1]+Q,dx:W[0]-d[0],dy:W[1]-d[1],dispatch:X}),G)}}return g.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Sr(!!w),g):e},g.container=function(w){return arguments.length?(t=typeof w=="function"?w:Sr(w),g):t},g.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Sr(w),g):n},g.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:Sr(!!w),g):o},g.on=function(){var w=s.on.apply(s,arguments);return w===s?g:w},g.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,g):Math.sqrt(f)},g}function wl(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Bd(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function gr(){}var rr=.7,os=1/rr,io="\\s*([+-]?\\d+)\\s*",sr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l0=/^#([0-9a-f]{3,8})$/,a0=new RegExp(`^rgb\\(${io},${io},${io}\\)$`),u0=new RegExp(`^rgb\\(${Ft},${Ft},${Ft}\\)$`),c0=new RegExp(`^rgba\\(${io},${io},${io},${sr}\\)$`),d0=new RegExp(`^rgba\\(${Ft},${Ft},${Ft},${sr}\\)$`),f0=new RegExp(`^hsl\\(${sr},${Ft},${Ft}\\)$`),p0=new RegExp(`^hsla\\(${sr},${Ft},${Ft},${sr}\\)$`),Ya={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wl(gr,Un,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ka,formatHex:Ka,formatHex8:h0,formatHsl:g0,formatRgb:Wa,toString:Wa});function Ka(){return this.rgb().formatHex()}function h0(){return this.rgb().formatHex8()}function g0(){return Fd(this).formatHsl()}function Wa(){return this.rgb().formatRgb()}function Un(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=l0.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Xa(t):n===3?new ft(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Er(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Er(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=a0.exec(e))?new ft(t[1],t[2],t[3],1):(t=u0.exec(e))?new ft(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=c0.exec(e))?Er(t[1],t[2],t[3],t[4]):(t=d0.exec(e))?Er(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=f0.exec(e))?Ja(t[1],t[2]/100,t[3]/100,1):(t=p0.exec(e))?Ja(t[1],t[2]/100,t[3]/100,t[4]):Ya.hasOwnProperty(e)?Xa(Ya[e]):e==="transparent"?new ft(NaN,NaN,NaN,0):null}function Xa(e){return new ft(e>>16&255,e>>8&255,e&255,1)}function Er(e,t,n,o){return o<=0&&(e=t=n=NaN),new ft(e,t,n,o)}function m0(e){return e instanceof gr||(e=Un(e)),e?(e=e.rgb(),new ft(e.r,e.g,e.b,e.opacity)):new ft}function Vi(e,t,n,o){return arguments.length===1?m0(e):new ft(e,t,n,o??1)}function ft(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}wl(ft,Vi,Bd(gr,{brighter(e){return e=e==null?os:Math.pow(os,e),new ft(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?rr:Math.pow(rr,e),new ft(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ft(Pn(this.r),Pn(this.g),Pn(this.b),rs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qa,formatHex:qa,formatHex8:v0,formatRgb:Za,toString:Za}));function qa(){return`#${An(this.r)}${An(this.g)}${An(this.b)}`}function v0(){return`#${An(this.r)}${An(this.g)}${An(this.b)}${An((isNaN(this.opacity)?1:this.opacity)*255)}`}function Za(){const e=rs(this.opacity);return`${e===1?"rgb(":"rgba("}${Pn(this.r)}, ${Pn(this.g)}, ${Pn(this.b)}${e===1?")":`, ${e})`}`}function rs(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function An(e){return e=Pn(e),(e<16?"0":"")+e.toString(16)}function Ja(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new xt(e,t,n,o)}function Fd(e){if(e instanceof xt)return new xt(e.h,e.s,e.l,e.opacity);if(e instanceof gr||(e=Un(e)),!e)return new xt;if(e instanceof xt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),s=Math.max(t,n,o),i=NaN,l=s-r,a=(s+r)/2;return l?(t===s?i=(n-o)/l+(n<o)*6:n===s?i=(o-t)/l+2:i=(t-n)/l+4,l/=a<.5?s+r:2-s-r,i*=60):l=a>0&&a<1?0:i,new xt(i,l,a,e.opacity)}function y0(e,t,n,o){return arguments.length===1?Fd(e):new xt(e,t,n,o??1)}function xt(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}wl(xt,y0,Bd(gr,{brighter(e){return e=e==null?os:Math.pow(os,e),new xt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rr:Math.pow(rr,e),new xt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new ft(ui(e>=240?e-240:e+120,r,o),ui(e,r,o),ui(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new xt(Qa(this.h),Cr(this.s),Cr(this.l),rs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=rs(this.opacity);return`${e===1?"hsl(":"hsla("}${Qa(this.h)}, ${Cr(this.s)*100}%, ${Cr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Qa(e){return e=(e||0)%360,e<0?e+360:e}function Cr(e){return Math.max(0,Math.min(1,e||0))}function ui(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const _l=e=>()=>e;function b0(e,t){return function(n){return e+n*t}}function x0(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function w0(e){return(e=+e)==1?zd:function(t,n){return n-t?x0(t,n,e):_l(isNaN(t)?n:t)}}function zd(e,t){var n=t-e;return n?b0(e,n):_l(isNaN(e)?t:e)}const ss=(function e(t){var n=w0(t);function o(r,s){var i=n((r=Vi(r)).r,(s=Vi(s)).r),l=n(r.g,s.g),a=n(r.b,s.b),c=zd(r.opacity,s.opacity);return function(u){return r.r=i(u),r.g=l(u),r.b=a(u),r.opacity=c(u),r+""}}return o.gamma=e,o})(1);function _0(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),r;return function(s){for(r=0;r<n;++r)o[r]=e[r]*(1-s)+t[r]*s;return o}}function S0(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function E0(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,r=new Array(o),s=new Array(n),i;for(i=0;i<o;++i)r[i]=Yo(e[i],t[i]);for(;i<n;++i)s[i]=t[i];return function(l){for(i=0;i<o;++i)s[i]=r[i](l);return s}}function C0(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function Lt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function N0(e,t){var n={},o={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Yo(e[r],t[r]):o[r]=t[r];return function(s){for(r in n)o[r]=n[r](s);return o}}var Hi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ci=new RegExp(Hi.source,"g");function I0(e){return function(){return e}}function T0(e){return function(t){return e(t)+""}}function Vd(e,t){var n=Hi.lastIndex=ci.lastIndex=0,o,r,s,i=-1,l=[],a=[];for(e=e+"",t=t+"";(o=Hi.exec(e))&&(r=ci.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),l[i]?l[i]+=s:l[++i]=s),(o=o[0])===(r=r[0])?l[i]?l[i]+=r:l[++i]=r:(l[++i]=null,a.push({i,x:Lt(o,r)})),n=ci.lastIndex;return n<t.length&&(s=t.slice(n),l[i]?l[i]+=s:l[++i]=s),l.length<2?a[0]?T0(a[0].x):I0(t):(t=a.length,function(c){for(var u=0,f;u<t;++u)l[(f=a[u]).i]=f.x(c);return l.join("")})}function Yo(e,t){var n=typeof t,o;return t==null||n==="boolean"?_l(t):(n==="number"?Lt:n==="string"?(o=Un(t))?(t=o,ss):Vd:t instanceof Un?ss:t instanceof Date?C0:S0(t)?_0:Array.isArray(t)?E0:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?N0:Lt)(e,t)}var eu=180/Math.PI,Ui={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Hd(e,t,n,o,r,s){var i,l,a;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(a=e*n+t*o)&&(n-=e*a,o-=t*a),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,a/=l),e*o<t*n&&(e=-e,t=-t,a=-a,i=-i),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*eu,skewX:Math.atan(a)*eu,scaleX:i,scaleY:l}}var Nr;function $0(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ui:Hd(t.a,t.b,t.c,t.d,t.e,t.f)}function M0(e){return e==null||(Nr||(Nr=document.createElementNS("http://www.w3.org/2000/svg","g")),Nr.setAttribute("transform",e),!(e=Nr.transform.baseVal.consolidate()))?Ui:(e=e.matrix,Hd(e.a,e.b,e.c,e.d,e.e,e.f))}function Ud(e,t,n,o){function r(c){return c.length?c.pop()+" ":""}function s(c,u,f,g,m,N){if(c!==f||u!==g){var y=m.push("translate(",null,t,null,n);N.push({i:y-4,x:Lt(c,f)},{i:y-2,x:Lt(u,g)})}else(f||g)&&m.push("translate("+f+t+g+n)}function i(c,u,f,g){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),g.push({i:f.push(r(f)+"rotate(",null,o)-2,x:Lt(c,u)})):u&&f.push(r(f)+"rotate("+u+o)}function l(c,u,f,g){c!==u?g.push({i:f.push(r(f)+"skewX(",null,o)-2,x:Lt(c,u)}):u&&f.push(r(f)+"skewX("+u+o)}function a(c,u,f,g,m,N){if(c!==f||u!==g){var y=m.push(r(m)+"scale(",null,",",null,")");N.push({i:y-4,x:Lt(c,f)},{i:y-2,x:Lt(u,g)})}else(f!==1||g!==1)&&m.push(r(m)+"scale("+f+","+g+")")}return function(c,u){var f=[],g=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,g),i(c.rotate,u.rotate,f,g),l(c.skewX,u.skewX,f,g),a(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,g),c=u=null,function(m){for(var N=-1,y=g.length,S;++N<y;)f[(S=g[N]).i]=S.x(m);return f.join("")}}}var A0=Ud($0,"px, ","px)","deg)"),O0=Ud(M0,", ",")",")"),D0=1e-12;function tu(e){return((e=Math.exp(e))+1/e)/2}function k0(e){return((e=Math.exp(e))-1/e)/2}function P0(e){return((e=Math.exp(2*e))-1)/(e+1)}const Vr=(function e(t,n,o){function r(s,i){var l=s[0],a=s[1],c=s[2],u=i[0],f=i[1],g=i[2],m=u-l,N=f-a,y=m*m+N*N,S,C;if(y<D0)C=Math.log(g/c)/t,S=function(G){return[l+G*m,a+G*N,c*Math.exp(t*G*C)]};else{var T=Math.sqrt(y),v=(g*g-c*c+o*y)/(2*c*n*T),w=(g*g-c*c-o*y)/(2*g*n*T),A=Math.log(Math.sqrt(v*v+1)-v),R=Math.log(Math.sqrt(w*w+1)-w);C=(R-A)/t,S=function(G){var j=G*C,V=tu(A),X=c/(n*T)*(V*P0(t*j+A)-k0(A));return[l+X*m,a+X*N,c*V/tu(t*j+A)]}}return S.duration=C*1e3*t/Math.SQRT2,S}return r.rho=function(s){var i=Math.max(.001,+s),l=i*i,a=l*l;return e(i,l,a)},r})(Math.SQRT2,2,4);var go=0,Do=0,$o=0,jd=1e3,is,ko,ls=0,jn=0,ks=0,ir=typeof performance=="object"&&performance.now?performance:Date,Gd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Sl(){return jn||(Gd(L0),jn=ir.now()+ks)}function L0(){jn=0}function as(){this._call=this._time=this._next=null}as.prototype=Yd.prototype={constructor:as,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Sl():+n)+(t==null?0:+t),!this._next&&ko!==this&&(ko?ko._next=this:is=this,ko=this),this._call=e,this._time=n,ji()},stop:function(){this._call&&(this._call=null,this._time=1/0,ji())}};function Yd(e,t,n){var o=new as;return o.restart(e,t,n),o}function R0(){Sl(),++go;for(var e=is,t;e;)(t=jn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--go}function nu(){jn=(ls=ir.now())+ks,go=Do=0;try{R0()}finally{go=0,F0(),jn=0}}function B0(){var e=ir.now(),t=e-ls;t>jd&&(ks-=t,ls=e)}function F0(){for(var e,t=is,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:is=n);ko=e,ji(o)}function ji(e){if(!go){Do&&(Do=clearTimeout(Do));var t=e-jn;t>24?(e<1/0&&(Do=setTimeout(nu,e-ir.now()-ks)),$o&&($o=clearInterval($o))):($o||(ls=ir.now(),$o=setInterval(B0,jd)),go=1,Gd(nu))}}function ou(e,t,n){var o=new as;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var z0=Os("start","end","cancel","interrupt"),V0=[],Kd=0,ru=1,Gi=2,Hr=3,su=4,Yi=5,Ur=6;function Ps(e,t,n,o,r,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;H0(e,n,{name:t,index:o,group:r,on:z0,tween:V0,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Kd})}function El(e,t){var n=It(e,t);if(n.state>Kd)throw new Error("too late; already scheduled");return n}function Vt(e,t){var n=It(e,t);if(n.state>Hr)throw new Error("too late; already running");return n}function It(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function H0(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Yd(s,0,n.time);function s(c){n.state=ru,n.timer.restart(i,n.delay,n.time),n.delay<=c&&i(c-n.delay)}function i(c){var u,f,g,m;if(n.state!==ru)return a();for(u in o)if(m=o[u],m.name===n.name){if(m.state===Hr)return ou(i);m.state===su?(m.state=Ur,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete o[u]):+u<t&&(m.state=Ur,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete o[u])}if(ou(function(){n.state===Hr&&(n.state=su,n.timer.restart(l,n.delay,n.time),l(c))}),n.state=Gi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Gi){for(n.state=Hr,r=new Array(g=n.tween.length),u=0,f=-1;u<g;++u)(m=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=m);r.length=f+1}}function l(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(a),n.state=Yi,1),f=-1,g=r.length;++f<g;)r[f].call(e,u);n.state===Yi&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=Ur,n.timer.stop(),delete o[t];for(var c in o)return;delete e.__transition}}function jr(e,t){var n=e.__transition,o,r,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((o=n[i]).name!==t){s=!1;continue}r=o.state>Gi&&o.state<Yi,o.state=Ur,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[i]}s&&delete e.__transition}}function U0(e){return this.each(function(){jr(this,e)})}function j0(e,t){var n,o;return function(){var r=Vt(this,e),s=r.tween;if(s!==n){o=n=s;for(var i=0,l=o.length;i<l;++i)if(o[i].name===t){o=o.slice(),o.splice(i,1);break}}r.tween=o}}function G0(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var s=Vt(this,e),i=s.tween;if(i!==o){r=(o=i).slice();for(var l={name:t,value:n},a=0,c=r.length;a<c;++a)if(r[a].name===t){r[a]=l;break}a===c&&r.push(l)}s.tween=r}}function Y0(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=It(this.node(),n).tween,r=0,s=o.length,i;r<s;++r)if((i=o[r]).name===e)return i.value;return null}return this.each((t==null?j0:G0)(n,e,t))}function Cl(e,t,n){var o=e._id;return e.each(function(){var r=Vt(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return It(r,o).value[t]}}function Wd(e,t){var n;return(typeof t=="number"?Lt:t instanceof Un?ss:(n=Un(t))?(t=n,ss):Vd)(e,t)}function K0(e){return function(){this.removeAttribute(e)}}function W0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function X0(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttribute(e);return i===r?null:i===o?s:s=t(o=i,n)}}function q0(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===r?null:i===o?s:s=t(o=i,n)}}function Z0(e,t,n){var o,r,s;return function(){var i,l=n(this),a;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),a=l+"",i===a?null:i===o&&a===r?s:(r=a,s=t(o=i,l)))}}function J0(e,t,n){var o,r,s;return function(){var i,l=n(this),a;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),a=l+"",i===a?null:i===o&&a===r?s:(r=a,s=t(o=i,l)))}}function Q0(e,t){var n=Ds(e),o=n==="transform"?O0:Wd;return this.attrTween(e,typeof t=="function"?(n.local?J0:Z0)(n,o,Cl(this,"attr."+e,t)):t==null?(n.local?W0:K0)(n):(n.local?q0:X0)(n,o,t))}function eb(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function tb(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function nb(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&tb(e,s)),n}return r._value=t,r}function ob(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&eb(e,s)),n}return r._value=t,r}function rb(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Ds(e);return this.tween(n,(o.local?nb:ob)(o,t))}function sb(e,t){return function(){El(this,e).delay=+t.apply(this,arguments)}}function ib(e,t){return t=+t,function(){El(this,e).delay=t}}function lb(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sb:ib)(t,e)):It(this.node(),t).delay}function ab(e,t){return function(){Vt(this,e).duration=+t.apply(this,arguments)}}function ub(e,t){return t=+t,function(){Vt(this,e).duration=t}}function cb(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ab:ub)(t,e)):It(this.node(),t).duration}function db(e,t){if(typeof t!="function")throw new Error;return function(){Vt(this,e).ease=t}}function fb(e){var t=this._id;return arguments.length?this.each(db(t,e)):It(this.node(),t).ease}function pb(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Vt(this,e).ease=n}}function hb(e){if(typeof e!="function")throw new Error;return this.each(pb(this._id,e))}function gb(e){typeof e!="function"&&(e=Nd(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,l=o[r]=[],a,c=0;c<i;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&l.push(a);return new sn(o,this._parents,this._name,this._id)}function mb(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,s=Math.min(o,r),i=new Array(o),l=0;l<s;++l)for(var a=t[l],c=n[l],u=a.length,f=i[l]=new Array(u),g,m=0;m<u;++m)(g=a[m]||c[m])&&(f[m]=g);for(;l<o;++l)i[l]=t[l];return new sn(i,this._parents,this._name,this._id)}function vb(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function yb(e,t,n){var o,r,s=vb(t)?El:Vt;return function(){var i=s(this,e),l=i.on;l!==o&&(r=(o=l).copy()).on(t,n),i.on=r}}function bb(e,t){var n=this._id;return arguments.length<2?It(this.node(),n).on.on(e):this.each(yb(n,e,t))}function xb(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function wb(){return this.on("end.remove",xb(this._id))}function _b(e){var t=this._name,n=this._id;typeof e!="function"&&(e=bl(e));for(var o=this._groups,r=o.length,s=new Array(r),i=0;i<r;++i)for(var l=o[i],a=l.length,c=s[i]=new Array(a),u,f,g=0;g<a;++g)(u=l[g])&&(f=e.call(u,u.__data__,g,l))&&("__data__"in u&&(f.__data__=u.__data__),c[g]=f,Ps(c[g],t,n,g,c,It(u,n)));return new sn(s,this._parents,t,n)}function Sb(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Cd(e));for(var o=this._groups,r=o.length,s=[],i=[],l=0;l<r;++l)for(var a=o[l],c=a.length,u,f=0;f<c;++f)if(u=a[f]){for(var g=e.call(u,u.__data__,f,a),m,N=It(u,n),y=0,S=g.length;y<S;++y)(m=g[y])&&Ps(m,t,n,y,g,N);s.push(g),i.push(u)}return new sn(s,i,t,n)}var Eb=hr.prototype.constructor;function Cb(){return new Eb(this._groups,this._parents)}function Nb(e,t){var n,o,r;return function(){var s=ho(this,e),i=(this.style.removeProperty(e),ho(this,e));return s===i?null:s===n&&i===o?r:r=t(n=s,o=i)}}function Xd(e){return function(){this.style.removeProperty(e)}}function Ib(e,t,n){var o,r=n+"",s;return function(){var i=ho(this,e);return i===r?null:i===o?s:s=t(o=i,n)}}function Tb(e,t,n){var o,r,s;return function(){var i=ho(this,e),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(e),ho(this,e))),i===a?null:i===o&&a===r?s:(r=a,s=t(o=i,l))}}function $b(e,t){var n,o,r,s="style."+t,i="end."+s,l;return function(){var a=Vt(this,e),c=a.on,u=a.value[s]==null?l||(l=Xd(t)):void 0;(c!==n||r!==u)&&(o=(n=c).copy()).on(i,r=u),a.on=o}}function Mb(e,t,n){var o=(e+="")=="transform"?A0:Wd;return t==null?this.styleTween(e,Nb(e,o)).on("end.style."+e,Xd(e)):typeof t=="function"?this.styleTween(e,Tb(e,o,Cl(this,"style."+e,t))).each($b(this._id,e)):this.styleTween(e,Ib(e,o,t),n).on("end.style."+e,null)}function Ab(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Ob(e,t,n){var o,r;function s(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&Ab(e,i,n)),o}return s._value=t,s}function Db(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Ob(e,t,n??""))}function kb(e){return function(){this.textContent=e}}function Pb(e){return function(){var t=e(this);this.textContent=t??""}}function Lb(e){return this.tween("text",typeof e=="function"?Pb(Cl(this,"text",e)):kb(e==null?"":e+""))}function Rb(e){return function(t){this.textContent=e.call(this,t)}}function Bb(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Rb(r)),t}return o._value=e,o}function Fb(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Bb(e))}function zb(){for(var e=this._name,t=this._id,n=qd(),o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],l=i.length,a,c=0;c<l;++c)if(a=i[c]){var u=It(a,t);Ps(a,e,n,c,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new sn(o,this._parents,e,n)}function Vb(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(s,i){var l={value:i},a={value:function(){--r===0&&s()}};n.each(function(){var c=Vt(this,o),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(a)),c.on=t}),r===0&&s()})}var Hb=0;function sn(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function qd(){return++Hb}var Ut=hr.prototype;sn.prototype={constructor:sn,select:_b,selectAll:Sb,selectChild:Ut.selectChild,selectChildren:Ut.selectChildren,filter:gb,merge:mb,selection:Cb,transition:zb,call:Ut.call,nodes:Ut.nodes,node:Ut.node,size:Ut.size,empty:Ut.empty,each:Ut.each,on:bb,attr:Q0,attrTween:rb,style:Mb,styleTween:Db,text:Lb,textTween:Fb,remove:wb,tween:Y0,delay:lb,duration:cb,ease:fb,easeVarying:hb,end:Vb,[Symbol.iterator]:Ut[Symbol.iterator]};function Ub(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var jb={time:null,delay:0,duration:250,ease:Ub};function Gb(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Yb(e){var t,n;e instanceof sn?(t=e._id,e=e._name):(t=qd(),(n=jb).time=Sl(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],l=i.length,a,c=0;c<l;++c)(a=i[c])&&Ps(a,e,t,c,i,n||Gb(a,t));return new sn(o,this._parents,e,t)}hr.prototype.interrupt=U0;hr.prototype.transition=Yb;const Ir=e=>()=>e;function Kb(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Zt(e,t,n){this.k=e,this.x=t,this.y=n}Zt.prototype={constructor:Zt,scale:function(e){return e===1?this:new Zt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Zt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var mo=new Zt(1,0,0);Zt.prototype;function di(e){e.stopImmediatePropagation()}function Mo(e){e.preventDefault(),e.stopImmediatePropagation()}function Wb(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Xb(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function iu(){return this.__zoom||mo}function qb(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Zb(){return navigator.maxTouchPoints||"ontouchstart"in this}function Jb(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Qb(){var e=Wb,t=Xb,n=Jb,o=qb,r=Zb,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,a=Vr,c=Os("start","zoom","end"),u,f,g,m=500,N=150,y=0,S=10;function C(M){M.property("__zoom",iu).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",V).on("dblclick.zoom",X).filter(r).on("touchstart.zoom",W).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(M,K,L,D){var P=M.selection?M.selection():M;P.property("__zoom",iu),M!==P?A(M,K,L,D):P.interrupt().each(function(){R(this,arguments).event(D).start().zoom(null,typeof K=="function"?K.apply(this,arguments):K).end()})},C.scaleBy=function(M,K,L,D){C.scaleTo(M,function(){var P=this.__zoom.k,d=typeof K=="function"?K.apply(this,arguments):K;return P*d},L,D)},C.scaleTo=function(M,K,L,D){C.transform(M,function(){var P=t.apply(this,arguments),d=this.__zoom,h=L==null?w(P):typeof L=="function"?L.apply(this,arguments):L,J=d.invert(h),ne=typeof K=="function"?K.apply(this,arguments):K;return n(v(T(d,ne),h,J),P,i)},L,D)},C.translateBy=function(M,K,L,D){C.transform(M,function(){return n(this.__zoom.translate(typeof K=="function"?K.apply(this,arguments):K,typeof L=="function"?L.apply(this,arguments):L),t.apply(this,arguments),i)},null,D)},C.translateTo=function(M,K,L,D,P){C.transform(M,function(){var d=t.apply(this,arguments),h=this.__zoom,J=D==null?w(d):typeof D=="function"?D.apply(this,arguments):D;return n(mo.translate(J[0],J[1]).scale(h.k).translate(typeof K=="function"?-K.apply(this,arguments):-K,typeof L=="function"?-L.apply(this,arguments):-L),d,i)},D,P)};function T(M,K){return K=Math.max(s[0],Math.min(s[1],K)),K===M.k?M:new Zt(K,M.x,M.y)}function v(M,K,L){var D=K[0]-L[0]*M.k,P=K[1]-L[1]*M.k;return D===M.x&&P===M.y?M:new Zt(M.k,D,P)}function w(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function A(M,K,L,D){M.on("start.zoom",function(){R(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(D).end()}).tween("zoom",function(){var P=this,d=arguments,h=R(P,d).event(D),J=t.apply(P,d),ne=L==null?w(J):typeof L=="function"?L.apply(P,d):L,he=Math.max(J[1][0]-J[0][0],J[1][1]-J[0][1]),me=P.__zoom,ie=typeof K=="function"?K.apply(P,d):K,oe=a(me.invert(ne).concat(he/me.k),ie.invert(ne).concat(he/ie.k));return function(ce){if(ce===1)ce=ie;else{var Ce=oe(ce),Ae=he/Ce[2];ce=new Zt(Ae,ne[0]-Ce[0]*Ae,ne[1]-Ce[1]*Ae)}h.zoom(null,ce)}})}function R(M,K,L){return!L&&M.__zooming||new G(M,K)}function G(M,K){this.that=M,this.args=K,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,K),this.taps=0}G.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,K){return this.mouse&&M!=="mouse"&&(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var K=bt(this.that).datum();c.call(M,this.that,new Kb(M,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:c}),K)}};function j(M,...K){if(!e.apply(this,arguments))return;var L=R(this,K).event(M),D=this.__zoom,P=Math.max(s[0],Math.min(s[1],D.k*Math.pow(2,o.apply(this,arguments)))),d=kt(M);if(L.wheel)(L.mouse[0][0]!==d[0]||L.mouse[0][1]!==d[1])&&(L.mouse[1]=D.invert(L.mouse[0]=d)),clearTimeout(L.wheel);else{if(D.k===P)return;L.mouse=[d,D.invert(d)],jr(this),L.start()}Mo(M),L.wheel=setTimeout(h,N),L.zoom("mouse",n(v(T(D,P),L.mouse[0],L.mouse[1]),L.extent,i));function h(){L.wheel=null,L.end()}}function V(M,...K){if(g||!e.apply(this,arguments))return;var L=M.currentTarget,D=R(this,K,!0).event(M),P=bt(M.view).on("mousemove.zoom",ne,!0).on("mouseup.zoom",he,!0),d=kt(M,L),h=M.clientX,J=M.clientY;Ld(M.view),di(M),D.mouse=[d,this.__zoom.invert(d)],jr(this),D.start();function ne(me){if(Mo(me),!D.moved){var ie=me.clientX-h,oe=me.clientY-J;D.moved=ie*ie+oe*oe>y}D.event(me).zoom("mouse",n(v(D.that.__zoom,D.mouse[0]=kt(me,L),D.mouse[1]),D.extent,i))}function he(me){P.on("mousemove.zoom mouseup.zoom",null),Rd(me.view,D.moved),Mo(me),D.event(me).end()}}function X(M,...K){if(e.apply(this,arguments)){var L=this.__zoom,D=kt(M.changedTouches?M.changedTouches[0]:M,this),P=L.invert(D),d=L.k*(M.shiftKey?.5:2),h=n(v(T(L,d),D,P),t.apply(this,K),i);Mo(M),l>0?bt(this).transition().duration(l).call(A,h,D,M):bt(this).call(C.transform,h,D,M)}}function W(M,...K){if(e.apply(this,arguments)){var L=M.touches,D=L.length,P=R(this,K,M.changedTouches.length===D).event(M),d,h,J,ne;for(di(M),h=0;h<D;++h)J=L[h],ne=kt(J,this),ne=[ne,this.__zoom.invert(ne),J.identifier],P.touch0?!P.touch1&&P.touch0[2]!==ne[2]&&(P.touch1=ne,P.taps=0):(P.touch0=ne,d=!0,P.taps=1+!!u);u&&(u=clearTimeout(u)),d&&(P.taps<2&&(f=ne[0],u=setTimeout(function(){u=null},m)),jr(this),P.start())}}function $(M,...K){if(this.__zooming){var L=R(this,K).event(M),D=M.changedTouches,P=D.length,d,h,J,ne;for(Mo(M),d=0;d<P;++d)h=D[d],J=kt(h,this),L.touch0&&L.touch0[2]===h.identifier?L.touch0[0]=J:L.touch1&&L.touch1[2]===h.identifier&&(L.touch1[0]=J);if(h=L.that.__zoom,L.touch1){var he=L.touch0[0],me=L.touch0[1],ie=L.touch1[0],oe=L.touch1[1],ce=(ce=ie[0]-he[0])*ce+(ce=ie[1]-he[1])*ce,Ce=(Ce=oe[0]-me[0])*Ce+(Ce=oe[1]-me[1])*Ce;h=T(h,Math.sqrt(ce/Ce)),J=[(he[0]+ie[0])/2,(he[1]+ie[1])/2],ne=[(me[0]+oe[0])/2,(me[1]+oe[1])/2]}else if(L.touch0)J=L.touch0[0],ne=L.touch0[1];else return;L.zoom("touch",n(v(h,J,ne),L.extent,i))}}function Q(M,...K){if(this.__zooming){var L=R(this,K).event(M),D=M.changedTouches,P=D.length,d,h;for(di(M),g&&clearTimeout(g),g=setTimeout(function(){g=null},m),d=0;d<P;++d)h=D[d],L.touch0&&L.touch0[2]===h.identifier?delete L.touch0:L.touch1&&L.touch1[2]===h.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(h=kt(h,this),Math.hypot(f[0]-h[0],f[1]-h[1])<S)){var J=bt(this).on("dblclick.zoom");J&&J.apply(this,arguments)}}}return C.wheelDelta=function(M){return arguments.length?(o=typeof M=="function"?M:Ir(+M),C):o},C.filter=function(M){return arguments.length?(e=typeof M=="function"?M:Ir(!!M),C):e},C.touchable=function(M){return arguments.length?(r=typeof M=="function"?M:Ir(!!M),C):r},C.extent=function(M){return arguments.length?(t=typeof M=="function"?M:Ir([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),C):t},C.scaleExtent=function(M){return arguments.length?(s[0]=+M[0],s[1]=+M[1],C):[s[0],s[1]]},C.translateExtent=function(M){return arguments.length?(i[0][0]=+M[0][0],i[1][0]=+M[1][0],i[0][1]=+M[0][1],i[1][1]=+M[1][1],C):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},C.constrain=function(M){return arguments.length?(n=M,C):n},C.duration=function(M){return arguments.length?(l=+M,C):l},C.interpolate=function(M){return arguments.length?(a=M,C):a},C.on=function(){var M=c.on.apply(c,arguments);return M===c?C:M},C.clickDistance=function(M){return arguments.length?(y=(M=+M)*M,C):Math.sqrt(y)},C.tapDistance=function(M){return arguments.length?(S=+M,C):S},C}var de=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(de||{}),Nl=(e=>(e.Partial="partial",e.Full="full",e))(Nl||{}),Mn=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Mn||{}),xn=(e=>(e.Strict="strict",e.Loose="loose",e))(xn||{}),Yt=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Yt||{}),Ko=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Ko||{}),Zd=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(Zd||{});const e1=["INPUT","SELECT","TEXTAREA"],t1=typeof document<"u"?document:null;function Ki(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,r=typeof o?.hasAttribute=="function"?o.hasAttribute("contenteditable"):!1,s=typeof o?.closest=="function"?o.closest(".nokey"):null;return e1.includes(o?.nodeName)||r||!!s}function n1(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function lu(e,t,n,o){const r=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(i=>i.trim().toLowerCase());if(r.length===1)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const s=r.every((i,l)=>n.has(i)&&Array.from(n.values())[l]===r[l]);return o&&n.delete(e.toLowerCase()),s}function o1(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=r1(n.code,e);return Array.isArray(e)?e.some(r=>lu(n[o],r,t,n.type==="keyup")):lu(n[o],e,t,n.type==="keyup")}}function r1(e,t){return t.includes(e)?"code":"key"}function Wo(e,t){const n=se(()=>_e(t?.target)??t1),o=qt(_e(e)===!0);let r=!1;const s=new Set;let i=a(_e(e));Se(()=>_e(e),(c,u)=>{typeof u=="boolean"&&typeof c!="boolean"&&l(),i=a(c)},{immediate:!0}),Sd(["blur","contextmenu"],l),Ua((...c)=>i(...c),c=>{var u,f;const g=_e(t?.actInsideInputWithModifier)??!0,m=_e(t?.preventDefault)??!1;if(r=n1(c),(!r||r&&!g)&&Ki(c))return;const y=((f=(u=c.composedPath)==null?void 0:u.call(c))==null?void 0:f[0])||c.target,S=y?.nodeName==="BUTTON"||y?.nodeName==="A";!m&&(r||!S)&&c.preventDefault(),o.value=!0},{eventName:"keydown",target:n}),Ua((...c)=>i(...c),c=>{const u=_e(t?.actInsideInputWithModifier)??!0;if(o.value){if((!r||r&&!u)&&Ki(c))return;r=!1,o.value=!1}},{eventName:"keyup",target:n});function l(){r=!1,s.clear(),o.value=_e(e)===!0}function a(c){return c===null?(l(),()=>!1):typeof c=="boolean"?(l(),o.value=c,()=>!1):Array.isArray(c)||typeof c=="string"?o1(c,s):c}return o}const Jd="vue-flow__node-desc",Qd="vue-flow__edge-desc",s1="vue-flow__aria-live",ef=["Enter"," ","Escape"],lo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function us(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function cs(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Ls(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Gn(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function tf(e,t){return{x:Gn(e.x,t[0][0],t[1][0]),y:Gn(e.y,t[0][1],t[1][1])}}function au(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function wn(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function Ln(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!wn(e)}function Po(e){return Ln(e)&&"computedPosition"in e}function Tr(e){return!Number.isNaN(e)&&Number.isFinite(e)}function i1(e){return Tr(e.width)&&Tr(e.height)&&Tr(e.x)&&Tr(e.y)}function l1(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:bn({width:0,height:0}),computedPosition:bn({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Ge(e.data)?e.data:{},events:bn(Ge(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function nf(e,t,n){var o,r;const s={id:e.id.toString(),type:e.type??t?.type??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(r=e.targetHandle)==null?void 0:r.toString(),updatable:e.updatable??n?.updatable,selectable:e.selectable??n?.selectable,focusable:e.focusable??n?.focusable,data:Ge(e.data)?e.data:{},events:bn(Ge(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??n?.interactionWidth,...n??{}};return Object.assign(t??s,e,{id:e.id.toString()})}function of(e,t,n,o){const r=typeof e=="string"?e:e.id,s=new Set,i=o==="source"?"target":"source";for(const l of n)l[i]===r&&s.add(l[o]);return t.filter(l=>s.has(l.id))}function a1(...e){if(e.length===3){const[s,i,l]=e;return of(s,i,l,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(s=>wn(s)&&s.source===o).map(s=>n.find(i=>Ln(i)&&i.id===s.target))}function u1(...e){if(e.length===3){const[s,i,l]=e;return of(s,i,l,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(s=>wn(s)&&s.target===o).map(s=>n.find(i=>Ln(i)&&i.id===s.source))}function rf({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function c1(e,t){return t.some(n=>wn(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function lr({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function ar({x:e,y:t},{x:n,y:o,zoom:r},s=!1,i=[1,1]){const l={x:(e-n)/r,y:(t-o)/r};return s?Rs(l,i):l}function d1(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function sf({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function f1({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function lf(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=d1(t,sf({...o.computedPosition,...o.dimensions}))}return f1(t)}function af(e,t,n={x:0,y:0,zoom:1},o=!1,r=!1){const s={...ar(t,n),width:t.width/n.zoom,height:t.height/n.zoom},i=[];for(const l of e){const{dimensions:a,selectable:c=!0,hidden:u=!1}=l,f=a.width??l.width??null,g=a.height??l.height??null;if(r&&!c||u)continue;const m=cs(s,us(l)),N=f===null||g===null,y=o&&m>0,S=(f??0)*(g??0);(N||y||m>=S||l.dragging)&&i.push(l)}return i}function uf(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function qn(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return mr(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function p1(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=qn(e,n),r=qn(e,t);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof e=="object"){const o=qn(e.top??e.y??0,n),r=qn(e.bottom??e.y??0,n),s=qn(e.left??e.x??0,t),i=qn(e.right??e.x??0,t);return{top:o,right:i,bottom:r,left:s,x:s+i,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function h1(e,t,n,o,r,s){const{x:i,y:l}=lr(e,{x:t,y:n,zoom:o}),{x:a,y:c}=lr({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:o}),u=r-a,f=s-c;return{left:Math.floor(i),top:Math.floor(l),right:Math.floor(u),bottom:Math.floor(f)}}function uu(e,t,n,o,r,s=.1){const i=p1(s,t,n),l=(t-i.x)/e.width,a=(n-i.y)/e.height,c=Math.min(l,a),u=Gn(c,o,r),f=e.x+e.width/2,g=e.y+e.height/2,m=t/2-f*u,N=n/2-g*u,y=h1(e,m,N,u,t,n),S={left:Math.min(y.left-i.left,0),top:Math.min(y.top-i.top,0),right:Math.min(y.right-i.right,0),bottom:Math.min(y.bottom-i.bottom,0)};return{x:m-S.left+S.right,y:N-S.top+S.bottom,zoom:u}}function g1(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function cf(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:cf(n,t):!1}function ur(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function cu(e){const t=e.ctrlKey&&ds()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t}function du(e,t,n){return e<t?Gn(Math.abs(e-t),1,t)/t:e>n?-Gn(Math.abs(e-n),1,t)/t:0}function df(e,t,n=15,o=40){const r=du(e.x,o,t.width-o)*n,s=du(e.y,o,t.height-o)*n;return[r,s]}function fi(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let r={};if(typeof t.style=="function"?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,n>0)if(typeof r.width=="string"){const s=Number(r.width.replace("px",""));r.width=`${s+n}px`}else r.width+=n;if(o>0)if(typeof r.height=="string"){const s=Number(r.height.replace("px",""));r.height=`${s+o}px`}else r.height+=o;if(e.position.x<0){const s=Math.abs(e.position.x);if(t.position.x=t.position.x-s,typeof r.width=="string"){const i=Number(r.width.replace("px",""));r.width=`${i+s}px`}else r.width+=s;e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);if(t.position.y=t.position.y-s,typeof r.height=="string"){const i=Number(r.height.replace("px",""));r.height=`${i+s}px`}else r.height+=s;e.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),typeof t.style=="function"?t.style=s=>{const i=t.style;return{...i(s),...r}}:t.style={...t.style,...r}}}}function fu(e,t){var n,o;const r=e.filter(i=>i.type==="add"||i.type==="remove");for(const i of r)if(i.type==="add")t.findIndex(a=>a.id===i.item.id)===-1&&t.push(i.item);else if(i.type==="remove"){const l=t.findIndex(a=>a.id===i.id);l!==-1&&t.splice(l,1)}const s=t.map(i=>i.id);for(const i of t)for(const l of e)if(l.id===i.id)switch(l.type){case"select":i.selected=l.selected;break;case"position":if(Po(i)&&(typeof l.position<"u"&&(i.position=l.position),typeof l.dragging<"u"&&(i.dragging=l.dragging),i.expandParent&&i.parentNode)){const a=t[s.indexOf(i.parentNode)];a&&Po(a)&&fi(i,a)}break;case"dimensions":if(Po(i)&&(typeof l.dimensions<"u"&&(i.dimensions=l.dimensions),typeof l.updateStyle<"u"&&l.updateStyle&&(i.style={...i.style||{},width:`${(n=l.dimensions)==null?void 0:n.width}px`,height:`${(o=l.dimensions)==null?void 0:o.height}px`}),typeof l.resizing<"u"&&(i.resizing=l.resizing),i.expandParent&&i.parentNode)){const a=t[s.indexOf(i.parentNode)];a&&Po(a)&&(!!a.dimensions.width&&!!a.dimensions.height?fi(i,a):ut(()=>{fi(i,a)}))}break}return t}function pn(e,t){return{id:e,type:"select",selected:t}}function pu(e){return{item:e,type:"add"}}function hu(e){return{id:e,type:"remove"}}function gu(e,t,n,o,r){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:r||null,type:"remove"}}function vn(e,t=new Set,n=!1){const o=[];for(const[r,s]of e){const i=t.has(r);!(s.selected===void 0&&!i)&&s.selected!==i&&(n&&(s.selected=i),o.push(pn(s.id,i)))}return o}const mu=()=>{};function ae(e){const t=new Set;let n=mu,o=()=>!1;const r=()=>t.size>0||o(),s=g=>{n=g},i=()=>{n=mu},l=g=>{o=g},a=()=>{o=()=>!1},c=g=>{t.delete(g)};return{on:g=>{t.add(g);const m=()=>c(g);return nr(m),{off:m}},off:c,trigger:g=>{const m=[n];return r()?m.push(...t):e&&m.push(e),Promise.allSettled(m.map(N=>N(g)))},hasListeners:r,listeners:t,setEmitter:s,removeEmitter:i,setHasEmitListeners:l,removeHasEmitListeners:a}}function vu(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function m1(e,t,n,o){var r,s;const i=new Map;for(const[l,a]of e)(a.selected||a.id===o)&&(!a.parentNode||!cf(a,e))&&(a.draggable||t&&typeof a.draggable>"u")&&e.get(l)&&i.set(l,{id:a.id,position:a.position||{x:0,y:0},distance:{x:n.x-((r=a.computedPosition)==null?void 0:r.x)||0,y:n.y-((s=a.computedPosition)==null?void 0:s.y)||0},from:{x:a.computedPosition.x,y:a.computedPosition.y},extent:a.extent,parentNode:a.parentNode,dimensions:{...a.dimensions},expandParent:a.expandParent});return Array.from(i.values())}function pi({id:e,dragItems:t,findNode:n}){const o=[];for(const r of t){const s=n(r.id);s&&o.push(s)}return[e?o.find(r=>r.id===e):o[0],o]}function ff(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function v1(e,t,n){const[o,r,s,i]=typeof e!="string"?ff(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+i,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-r,n.computedPosition.y+n.dimensions.height-s]]:!1}function y1(e,t,n,o){let r=e.extent||n;if((r==="parent"||!Array.isArray(r)&&r?.range==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const s=v1(r,e,o);s&&(r=s)}else t(new Xe(Ye.NODE_EXTENT_INVALID,e.id)),r=n;else if(Array.isArray(r)){const s=o?.computedPosition.x||0,i=o?.computedPosition.y||0;r=[[r[0][0]+s,r[0][1]+i],[r[1][0]+s,r[1][1]+i]]}else if(r!=="parent"&&r?.range&&Array.isArray(r.range)){const[s,i,l,a]=ff(r.padding),c=o?.computedPosition.x||0,u=o?.computedPosition.y||0;r=[[r.range[0][0]+c+a,r.range[0][1]+u+s],[r.range[1][0]+c-i,r.range[1][1]+u-l]]}return r==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:r}function b1({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Il(e,t,n,o,r){const s=b1(e.dimensions,y1(e,n,o,r)),i=tf(t,s);return{position:{x:i.x-(r?.computedPosition.x||0),y:i.y-(r?.computedPosition.y||0)},computedPosition:i}}function vo(e,t,n=de.Left,o=!1){const r=(t?.x??0)+e.computedPosition.x,s=(t?.y??0)+e.computedPosition.y,{width:i,height:l}=t??S1(e);if(o)return{x:r+i/2,y:s+l/2};switch(t?.position??n){case de.Top:return{x:r+i/2,y:s};case de.Right:return{x:r+i,y:s+l/2};case de.Bottom:return{x:r+i/2,y:s+l};case de.Left:return{x:r,y:s+l/2}}}function yu(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function x1({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:s,width:i,height:l,viewport:a}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+s)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u=sf({x:(0-a.x)/a.zoom,y:(0-a.y)/a.zoom,width:i/a.zoom,height:l/a.zoom}),f=Math.max(0,Math.min(u.x2,c.x2)-Math.max(u.x,c.x)),g=Math.max(0,Math.min(u.y2,c.y2)-Math.max(u.y,c.y));return Math.ceil(f*g)>0}function w1(e,t,n=!1){const o=typeof e.zIndex=="number";let r=o?e.zIndex:0;const s=t(e.source),i=t(e.target);return!s||!i?0:(n&&(r=o?e.zIndex:Math.max(s.computedPosition.z||0,i.computedPosition.z||0)),r)}var Ye=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Ye||{});const bu={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Xe extends Error{constructor(t,...n){var o;super((o=bu[t])==null?void 0:o.call(bu,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function Tl(e){return"clientX"in e}function _1(e){return"sourceEvent"in e}function Rt(e,t){const n=Tl(e);let o,r;return n?(o=e.clientX,r=e.clientY):"touches"in e&&e.touches.length>0?(o=e.touches[0].clientX,r=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(o=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY):(o=0,r=0),{x:o-(t?.left??0),y:r-(t?.top??0)}}const ds=()=>{var e;return typeof navigator<"u"&&((e=navigator?.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function S1(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function Rs(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const E1=()=>!0;function hi(e){e?.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function C1(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())cs(r,us(s))>0&&o.push(s);return o}const N1=250;function I1(e,t,n,o){var r,s;let i=[],l=Number.POSITIVE_INFINITY;const a=C1(e,n,t+N1);for(const c of a){const u=[...((r=c.handleBounds)==null?void 0:r.source)??[],...((s=c.handleBounds)==null?void 0:s.target)??[]];for(const f of u){if(o.nodeId===f.nodeId&&o.type===f.type&&o.id===f.id)continue;const{x:g,y:m}=vo(c,f,f.position,!0),N=Math.sqrt((g-e.x)**2+(m-e.y)**2);N>t||(N<l?(i=[{...f,x:g,y:m}],l=N):N===l&&i.push({...f,x:g,y:m}))}}if(!i.length)return null;if(i.length>1){const c=o.type==="source"?"target":"source";return i.find(u=>u.type===c)??i[0]}return i[0]}function xu(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:s,doc:i,lib:l,flowId:a,isValidConnection:c=E1},u,f,g,m){const N=s==="target",y=t?i.querySelector(`.${l}-flow__handle[data-id="${a}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:S,y:C}=Rt(e),T=i.elementFromPoint(S,C),v=T?.classList.contains(`${l}-flow__handle`)?T:y,w={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const A=pf(void 0,v),R=v.getAttribute("data-nodeid"),G=v.getAttribute("data-handleid"),j=v.classList.contains("connectable"),V=v.classList.contains("connectableend");if(!R||!A)return w;const X={source:N?R:o,sourceHandle:N?G:r,target:N?o:R,targetHandle:N?r:G};w.connection=X;const $=j&&V&&(n===xn.Strict?N&&A==="source"||!N&&A==="target":R!==o||G!==r);w.isValid=$&&c(X,{nodes:f,edges:u,sourceNode:g(X.source),targetNode:g(X.target)}),w.toHandle=hf(R,A,G,m,n,!0)}return w}function pf(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function T1(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function $1(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function hf(e,t,n,o,r,s=!1){var i,l,a;const c=o.get(e);if(!c)return null;const u=r===xn.Strict?(i=c.handleBounds)==null?void 0:i[t]:[...((l=c.handleBounds)==null?void 0:l.source)??[],...((a=c.handleBounds)==null?void 0:a.target)??[]],f=(n?u?.find(g=>g.id===n):u?.[0])??null;return f&&s?{...f,...vo(c,f,f.position,!0)}:f}const Wi={[de.Left]:de.Right,[de.Right]:de.Left,[de.Top]:de.Bottom,[de.Bottom]:de.Top},M1=["production","prod"];function mr(e,...t){gf()&&console.warn(`[Vue Flow]: ${e}`,...t)}function gf(){return!M1.includes("production")}function wu(e,t,n,o,r){const s=t.querySelectorAll(`.vue-flow__handle.${e}`);return s?.length?Array.from(s).map(i=>{const l=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:r,position:i.getAttribute("data-handlepos"),x:(l.left-n.left)/o,y:(l.top-n.top)/o,...Ls(i)}}):null}function Xi(e,t,n,o,r,s=!1,i){r.value=!1,e.selected?(s||e.selected&&t)&&(o([e]),ut(()=>{i.blur()})):n([e])}function Ge(e){return typeof z(e)<"u"}function A1(e,t,n,o){if(!e||!e.source||!e.target)return n(new Xe(Ye.EDGE_INVALID,e?.id??"[ID UNKNOWN]")),!1;let r;return wn(e)?r=e:r={...e,id:rf(e)},r=nf(r,void 0,o),c1(r,t)?!1:r}function O1(e,t,n,o,r){if(!t.source||!t.target)return r(new Xe(Ye.EDGE_INVALID,e.id)),!1;if(!n)return r(new Xe(Ye.EDGE_NOT_FOUND,e.id)),!1;const{id:s,...i}=e;return{...i,id:o?rf(t):s,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function _u(e,t,n){const o={},r=[];for(let s=0;s<e.length;++s){const i=e[s];if(!Ln(i)){n(new Xe(Ye.NODE_INVALID,i?.id)||`[ID UNKNOWN|INDEX ${s}]`);continue}const l=l1(i,t(i.id),i.parentNode);i.parentNode&&(o[i.parentNode]=!0),r[s]=l}for(const s of r){const i=t(s.parentNode)||r.find(l=>l.id===s.parentNode);s.parentNode&&!i&&n(new Xe(Ye.NODE_MISSING_PARENT,s.id,s.parentNode)),(s.parentNode||o[s.id])&&(o[s.id]&&(s.isParent=!0),i&&(i.isParent=!0))}return r}function Su(e,t,n,o,r,s){let i=r;const l=o.get(i)||new Map;o.set(i,l.set(n,t)),i=`${r}-${e}`;const a=o.get(i)||new Map;if(o.set(i,a.set(n,t)),s){i=`${r}-${e}-${s}`;const c=o.get(i)||new Map;o.set(i,c.set(n,t))}}function gi(e,t,n){e.clear();for(const o of n){const{source:r,target:s,sourceHandle:i=null,targetHandle:l=null}=o,a={edgeId:o.id,source:r,target:s,sourceHandle:i,targetHandle:l},c=`${r}-${i}--${s}-${l}`,u=`${s}-${l}--${r}-${i}`;Su("source",a,u,e,r,i),Su("target",a,c,e,s,l)}}function Eu(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function mi(e,t,n,o,r,s,i,l){const a=[];for(const c of e){const u=wn(c)?c:A1(c,l,r,s);if(!u)continue;const f=n(u.source),g=n(u.target);if(!f||!g){r(new Xe(Ye.EDGE_SOURCE_TARGET_MISSING,u.id,u.source,u.target));continue}if(!f){r(new Xe(Ye.EDGE_SOURCE_MISSING,u.id,u.source));continue}if(!g){r(new Xe(Ye.EDGE_TARGET_MISSING,u.id,u.target));continue}if(t&&!t(u,{edges:l,nodes:i,sourceNode:f,targetNode:g})){r(new Xe(Ye.EDGE_INVALID,u.id));continue}const m=o(u.id);a.push({...nf(u,m,s),sourceNode:f,targetNode:g})}return a}const Cu=Symbol("vueFlow"),mf=Symbol("nodeId"),vf=Symbol("nodeRef"),D1=Symbol("edgeId"),k1=Symbol("edgeRef"),Bs=Symbol("slots");function yf(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:r,nodeLookup:s,nodeExtent:i,nodeDragThreshold:l,viewport:a,autoPanOnNodeDrag:c,autoPanSpeed:u,nodesDraggable:f,panBy:g,findNode:m,multiSelectionActive:N,nodesSelectionActive:y,selectNodesOnDrag:S,removeSelectedElements:C,addSelectedNodes:T,updateNodePositions:v,emits:w}=Re(),{onStart:A,onDrag:R,onStop:G,onClick:j,el:V,disabled:X,id:W,selectable:$,dragHandle:Q}=e,M=qt(!1);let K=[],L,D=null,P={x:void 0,y:void 0},d={x:0,y:0},h=null,J=!1,ne=!1,he=0,me=!1;const ie=R1(),oe=({x:E,y:k})=>{P={x:E,y:k};let b=!1;if(K=K.map(x=>{const _={x:E-x.distance.x,y:k-x.distance.y},{computedPosition:I}=Il(x,n.value?Rs(_,o.value):_,w.error,i.value,x.parentNode?m(x.parentNode):void 0);return b=b||x.position.x!==I.x||x.position.y!==I.y,x.position=I,x}),ne=ne||b,!!b&&(v(K,!0,!0),M.value=!0,h)){const[x,_]=pi({id:W,dragItems:K,findNode:m});R({event:h,node:x,nodes:_})}},ce=()=>{if(!D)return;const[E,k]=df(d,D,u.value);if(E!==0||k!==0){const b={x:(P.x??0)-E/a.value.zoom,y:(P.y??0)-k/a.value.zoom};g({x:E,y:k})&&oe(b)}he=requestAnimationFrame(ce)},Ce=(E,k)=>{J=!0;const b=m(W);!S.value&&!N.value&&b&&(b.selected||C()),b&&_e($)&&S.value&&Xi(b,N.value,T,C,y,!1,k);const x=ie(E.sourceEvent);if(P=x,K=m1(s.value,f.value,x,W),K.length){const[_,I]=pi({id:W,dragItems:K,findNode:m});A({event:E.sourceEvent,node:_,nodes:I})}},Ae=(E,k)=>{var b;E.sourceEvent.type==="touchmove"&&E.sourceEvent.touches.length>1||(ne=!1,l.value===0&&Ce(E,k),P=ie(E.sourceEvent),D=((b=t.value)==null?void 0:b.getBoundingClientRect())||null,d=Rt(E.sourceEvent,D))},ye=(E,k)=>{const b=ie(E.sourceEvent);if(!me&&J&&c.value&&(me=!0,ce()),!J){const x=b.xSnapped-(P.x??0),_=b.ySnapped-(P.y??0);Math.sqrt(x*x+_*_)>l.value&&Ce(E,k)}(P.x!==b.xSnapped||P.y!==b.ySnapped)&&K.length&&J&&(h=E.sourceEvent,d=Rt(E.sourceEvent,D),oe(b))},Me=E=>{let k=!1;if(!J&&!M.value&&!N.value){const b=E.sourceEvent,x=ie(b),_=x.xSnapped-(P.x??0),I=x.ySnapped-(P.y??0),O=Math.sqrt(_*_+I*I);O!==0&&O<=l.value&&(j?.(b),k=!0)}if(K.length&&!k){ne&&(v(K,!1,!1),ne=!1);const[b,x]=pi({id:W,dragItems:K,findNode:m});G({event:E.sourceEvent,node:b,nodes:x})}K=[],M.value=!1,me=!1,J=!1,P={x:void 0,y:void 0},cancelAnimationFrame(he)};return Se([()=>_e(X),V],([E,k],b,x)=>{if(k){const _=bt(k);E||(L=i0().on("start",I=>Ae(I,k)).on("drag",I=>ye(I,k)).on("end",I=>Me(I)).filter(I=>{const O=I.target,U=_e(Q);return!I.button&&(!r.value||!vu(O,`.${r.value}`,k)&&(!U||vu(O,U,k)))}),_.call(L)),x(()=>{_.on(".drag",null),L&&(L.on("start",null),L.on("drag",null),L.on("end",null))})}}),M}function P1(){return{doubleClick:ae(),click:ae(),mouseEnter:ae(),mouseMove:ae(),mouseLeave:ae(),contextMenu:ae(),updateStart:ae(),update:ae(),updateEnd:ae()}}function L1(e,t){const n=P1();return n.doubleClick.on(o=>{var r,s;t.edgeDoubleClick(o),(s=(r=e.events)==null?void 0:r.doubleClick)==null||s.call(r,o)}),n.click.on(o=>{var r,s;t.edgeClick(o),(s=(r=e.events)==null?void 0:r.click)==null||s.call(r,o)}),n.mouseEnter.on(o=>{var r,s;t.edgeMouseEnter(o),(s=(r=e.events)==null?void 0:r.mouseEnter)==null||s.call(r,o)}),n.mouseMove.on(o=>{var r,s;t.edgeMouseMove(o),(s=(r=e.events)==null?void 0:r.mouseMove)==null||s.call(r,o)}),n.mouseLeave.on(o=>{var r,s;t.edgeMouseLeave(o),(s=(r=e.events)==null?void 0:r.mouseLeave)==null||s.call(r,o)}),n.contextMenu.on(o=>{var r,s;t.edgeContextMenu(o),(s=(r=e.events)==null?void 0:r.contextMenu)==null||s.call(r,o)}),n.updateStart.on(o=>{var r,s;t.edgeUpdateStart(o),(s=(r=e.events)==null?void 0:r.updateStart)==null||s.call(r,o)}),n.update.on(o=>{var r,s;t.edgeUpdate(o),(s=(r=e.events)==null?void 0:r.update)==null||s.call(r,o)}),n.updateEnd.on(o=>{var r,s;t.edgeUpdateEnd(o),(s=(r=e.events)==null?void 0:r.updateEnd)==null||s.call(r,o)}),Object.entries(n).reduce((o,[r,s])=>(o.emit[r]=s.trigger,o.on[r]=s.on,o),{emit:{},on:{}})}function R1(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:o}=Re();return r=>{var s;const i=((s=o.value)==null?void 0:s.getBoundingClientRect())??{left:0,top:0},l=_1(r)?r.sourceEvent:r,{x:a,y:c}=Rt(l,i),u=ar({x:a,y:c},e.value),{x:f,y:g}=n.value?Rs(u,t.value):u;return{xSnapped:f,ySnapped:g,...u}}}function $r(){return!0}function bf({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:r,onEdgeUpdate:s,onEdgeUpdateEnd:i}){const{id:l,vueFlowRef:a,connectionMode:c,connectionRadius:u,connectOnClick:f,connectionClickStartHandle:g,nodesConnectable:m,autoPanOnConnect:N,autoPanSpeed:y,findNode:S,panBy:C,startConnection:T,updateConnection:v,endConnection:w,emits:A,viewport:R,edges:G,nodes:j,isValidConnection:V,nodeLookup:X}=Re();let W=null,$=!1,Q=null;function M(L){var D;const P=_e(n)==="target",d=Tl(L),h=au(L.target),J=L.currentTarget;if(J&&(d&&L.button===0||!d)){let ne=function(Z){b=Rt(Z,Me),oe=I1(ar(b,R.value,!1,[1,1]),u.value,X.value,I),x||(_(),x=!0);const q=xu(Z,{handle:oe,connectionMode:c.value,fromNodeId:_e(t),fromHandleId:_e(e),fromType:P?"target":"source",isValidConnection:ie,doc:h,lib:"vue",flowId:l,nodeLookup:X.value},G.value,j.value,S,X.value);Q=q.handleDomNode,W=q.connection,$=$1(!!oe,q.isValid);const ee={...F,isValid:$,to:q.toHandle&&$?lr({x:q.toHandle.x,y:q.toHandle.y},R.value):b,toHandle:q.toHandle,toPosition:$&&q.toHandle?q.toHandle.position:Wi[I.position],toNode:q.toHandle?X.value.get(q.toHandle.nodeId):null};if($&&oe&&F?.toHandle&&ee.toHandle&&F.toHandle.type===ee.toHandle.type&&F.toHandle.nodeId===ee.toHandle.nodeId&&F.toHandle.id===ee.toHandle.id&&F.to.x===ee.to.x&&F.to.y===ee.to.y)return;const re=oe??q.toHandle;if(v(re&&$?lr({x:re.x,y:re.y},R.value):b,re,T1(!!re,$)),F=ee,!oe&&!$&&!Q)return hi(k);W&&W.source!==W.target&&Q&&(hi(k),k=Q,Q.classList.add("connecting","vue-flow__handle-connecting"),Q.classList.toggle("valid",!!$),Q.classList.toggle("vue-flow__handle-valid",!!$))},he=function(Z){"touches"in Z&&Z.touches.length>0||((oe||Q)&&W&&$&&(s?s(Z,W):A.connect(W)),A.connectEnd(Z),r&&i?.(Z),hi(k),cancelAnimationFrame(ce),w(Z),x=!1,$=!1,W=null,Q=null,h.removeEventListener("mousemove",ne),h.removeEventListener("mouseup",he),h.removeEventListener("touchmove",ne),h.removeEventListener("touchend",he))};const me=S(_e(t));let ie=_e(o)||V.value||$r;!ie&&me&&(ie=(P?me.isValidSourcePos:me.isValidTargetPos)||$r);let oe,ce=0;const{x:Ce,y:Ae}=Rt(L),ye=pf(_e(r),J),Me=(D=a.value)==null?void 0:D.getBoundingClientRect();if(!Me||!ye)return;const E=hf(_e(t),ye,_e(e),X.value,c.value);if(!E)return;let k,b=Rt(L,Me),x=!1;const _=()=>{if(!N.value)return;const[Z,q]=df(b,Me,y.value);C({x:Z,y:q}),ce=requestAnimationFrame(_)},I={...E,nodeId:_e(t),type:ye,position:E.position},O=X.value.get(_e(t)),H={inProgress:!0,isValid:null,from:vo(O,I,de.Left,!0),fromHandle:I,fromPosition:I.position,fromNode:O,to:b,toHandle:null,toPosition:Wi[I.position],toNode:null};T({nodeId:_e(t),id:_e(e),type:ye,position:J?.getAttribute("data-handlepos")||de.Top,...b},{x:Ce-Me.left,y:Ae-Me.top}),A.connectStart({event:L,nodeId:_e(t),handleId:_e(e),handleType:ye});let F=H;h.addEventListener("mousemove",ne),h.addEventListener("mouseup",he),h.addEventListener("touchmove",ne),h.addEventListener("touchend",he)}}function K(L){var D,P;if(!f.value)return;const d=_e(n)==="target";if(!g.value){A.clickConnectStart({event:L,nodeId:_e(t),handleId:_e(e)}),T({nodeId:_e(t),type:_e(n),id:_e(e),position:de.Top,...Rt(L)},void 0,!0);return}let h=_e(o)||V.value||$r;const J=S(_e(t));if(!h&&J&&(h=(d?J.isValidSourcePos:J.isValidTargetPos)||$r),J&&(typeof J.connectable>"u"?m.value:J.connectable)===!1)return;const ne=au(L.target),he=xu(L,{handle:{nodeId:_e(t),id:_e(e),type:_e(n),position:de.Top,...Rt(L)},connectionMode:c.value,fromNodeId:g.value.nodeId,fromHandleId:g.value.id??null,fromType:g.value.type,isValidConnection:h,doc:ne,lib:"vue",flowId:l,nodeLookup:X.value},G.value,j.value,S,X.value),me=((D=he.connection)==null?void 0:D.source)===((P=he.connection)==null?void 0:P.target);he.isValid&&he.connection&&!me&&A.connect(he.connection),A.clickConnectEnd(L),w(L,!0)}return{handlePointerDown:M,handleClick:K}}function B1(){return _t(mf,"")}function xf(e){const t=e??B1()??"",n=_t(vf,xe(null)),{findNode:o,edges:r,emits:s}=Re(),i=o(t);return i||s.error(new Xe(Ye.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:i,parentNode:se(()=>o(i.parentNode)),connectedEdges:se(()=>uf([i],r.value))}}function F1(){return{doubleClick:ae(),click:ae(),mouseEnter:ae(),mouseMove:ae(),mouseLeave:ae(),contextMenu:ae(),dragStart:ae(),drag:ae(),dragStop:ae()}}function z1(e,t){const n=F1();return n.doubleClick.on(o=>{var r,s;t.nodeDoubleClick(o),(s=(r=e.events)==null?void 0:r.doubleClick)==null||s.call(r,o)}),n.click.on(o=>{var r,s;t.nodeClick(o),(s=(r=e.events)==null?void 0:r.click)==null||s.call(r,o)}),n.mouseEnter.on(o=>{var r,s;t.nodeMouseEnter(o),(s=(r=e.events)==null?void 0:r.mouseEnter)==null||s.call(r,o)}),n.mouseMove.on(o=>{var r,s;t.nodeMouseMove(o),(s=(r=e.events)==null?void 0:r.mouseMove)==null||s.call(r,o)}),n.mouseLeave.on(o=>{var r,s;t.nodeMouseLeave(o),(s=(r=e.events)==null?void 0:r.mouseLeave)==null||s.call(r,o)}),n.contextMenu.on(o=>{var r,s;t.nodeContextMenu(o),(s=(r=e.events)==null?void 0:r.contextMenu)==null||s.call(r,o)}),n.dragStart.on(o=>{var r,s;t.nodeDragStart(o),(s=(r=e.events)==null?void 0:r.dragStart)==null||s.call(r,o)}),n.drag.on(o=>{var r,s;t.nodeDrag(o),(s=(r=e.events)==null?void 0:r.drag)==null||s.call(r,o)}),n.dragStop.on(o=>{var r,s;t.nodeDragStop(o),(s=(r=e.events)==null?void 0:r.dragStop)==null||s.call(r,o)}),Object.entries(n).reduce((o,[r,s])=>(o.emit[r]=s.trigger,o.on[r]=s.on,o),{emit:{},on:{}})}function wf(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:r,snapToGrid:s,nodesDraggable:i,emits:l}=Re();return(a,c=!1)=>{const u=s.value?r.value[0]:5,f=s.value?r.value[1]:5,g=c?4:1,m=a.x*u*g,N=a.y*f*g,y=[];for(const S of e.value)if(S.draggable||i&&typeof S.draggable>"u"){const C={x:S.computedPosition.x+m,y:S.computedPosition.y+N},{position:T}=Il(S,C,l.error,t.value,S.parentNode?o(S.parentNode):void 0);y.push({id:S.id,position:T,from:S.position,distance:{x:a.x,y:a.y},dimensions:S.dimensions})}n(y,!0,!1)}}const Mr=.1,V1=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function un(){return mr("Viewport not initialized yet."),Promise.resolve(!1)}const H1={zoomIn:un,zoomOut:un,zoomTo:un,fitView:un,setCenter:un,fitBounds:un,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:un,setTransform:un,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function U1(e){function t(o,r){return new Promise(s=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(r?.interpolate==="linear"?Yo:Vr).scaleBy(vi(e.d3Selection,r?.duration,r?.ease,()=>{s(!0)}),o):s(!1)})}function n(o,r,s,i){return new Promise(l=>{var a;const{x:c,y:u}=tf({x:-o,y:-r},e.translateExtent),f=mo.translate(-c,-u).scale(s);e.d3Selection&&e.d3Zoom?(a=e.d3Zoom)==null||a.interpolate(i?.interpolate==="linear"?Yo:Vr).transform(vi(e.d3Selection,i?.duration,i?.ease,()=>{l(!0)}),f):l(!1)})}return se(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:r=>t(1.2,r),zoomOut:r=>t(1/1.2,r),zoomTo:(r,s)=>new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(s?.interpolate==="linear"?Yo:Vr).scaleTo(vi(e.d3Selection,s?.duration,s?.ease,()=>{i(!0)}),r):i(!1)}),setViewport:(r,s)=>n(r.x,r.y,r.zoom,s),setTransform:(r,s)=>n(r.x,r.y,r.zoom,s),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(r={padding:Mr,includeHiddenNodes:!1,duration:0})=>{var s,i;const l=[];for(const g of e.nodes)g.dimensions.width&&g.dimensions.height&&(r?.includeHiddenNodes||!g.hidden)&&(!((s=r.nodes)!=null&&s.length)||(i=r.nodes)!=null&&i.length&&r.nodes.includes(g.id))&&l.push(g);if(!l.length)return Promise.resolve(!1);const a=lf(l),{x:c,y:u,zoom:f}=uu(a,e.dimensions.width,e.dimensions.height,r.minZoom??e.minZoom,r.maxZoom??e.maxZoom,r.padding??Mr);return n(c,u,f,r)},setCenter:(r,s,i)=>{const l=typeof i?.zoom<"u"?i.zoom:e.maxZoom,a=e.dimensions.width/2-r*l,c=e.dimensions.height/2-s*l;return n(a,c,l,i)},fitBounds:(r,s={padding:Mr})=>{const{x:i,y:l,zoom:a}=uu(r,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,s.padding??Mr);return n(i,l,a,s)},project:r=>ar(r,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:r=>{if(e.vueFlowRef){const{x:s,y:i}=e.vueFlowRef.getBoundingClientRect(),l={x:r.x-s,y:r.y-i};return ar(l,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:r=>{if(e.vueFlowRef){const{x:s,y:i}=e.vueFlowRef.getBoundingClientRect(),l={x:r.x+s,y:r.y+i};return lr(l,e.viewport)}return{x:0,y:0}}}:H1)}function vi(e,t=0,n=V1,o=()=>{}){const r=typeof t=="number"&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e}function j1(e,t,n){const o=bs(!0);return o.run(()=>{const r=()=>{o.run(()=>{let y,S,C=!!(n.nodes.value.length||n.edges.value.length);y=Xn([e.modelValue,()=>{var T,v;return(v=(T=e.modelValue)==null?void 0:T.value)==null?void 0:v.length}],([T])=>{T&&Array.isArray(T)&&(S?.pause(),n.setElements(T),!S&&!C&&T.length?C=!0:S?.resume())}),S=Xn([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([T,v])=>{var w;(w=e.modelValue)!=null&&w.value&&Array.isArray(e.modelValue.value)&&(y?.pause(),e.modelValue.value=[...T,...v],ut(()=>{y?.resume()}))},{immediate:C}),Ro(()=>{y?.stop(),S?.stop()})})},s=()=>{o.run(()=>{let y,S,C=!!n.nodes.value.length;y=Xn([e.nodes,()=>{var T,v;return(v=(T=e.nodes)==null?void 0:T.value)==null?void 0:v.length}],([T])=>{T&&Array.isArray(T)&&(S?.pause(),n.setNodes(T),!S&&!C&&T.length?C=!0:S?.resume())}),S=Xn([n.nodes,()=>n.nodes.value.length],([T])=>{var v;(v=e.nodes)!=null&&v.value&&Array.isArray(e.nodes.value)&&(y?.pause(),e.nodes.value=[...T],ut(()=>{y?.resume()}))},{immediate:C}),Ro(()=>{y?.stop(),S?.stop()})})},i=()=>{o.run(()=>{let y,S,C=!!n.edges.value.length;y=Xn([e.edges,()=>{var T,v;return(v=(T=e.edges)==null?void 0:T.value)==null?void 0:v.length}],([T])=>{T&&Array.isArray(T)&&(S?.pause(),n.setEdges(T),!S&&!C&&T.length?C=!0:S?.resume())}),S=Xn([n.edges,()=>n.edges.value.length],([T])=>{var v;(v=e.edges)!=null&&v.value&&Array.isArray(e.edges.value)&&(y?.pause(),e.edges.value=[...T],ut(()=>{y?.resume()}))},{immediate:C}),Ro(()=>{y?.stop(),S?.stop()})})},l=()=>{o.run(()=>{Se(()=>t.maxZoom,()=>{t.maxZoom&&Ge(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},a=()=>{o.run(()=>{Se(()=>t.minZoom,()=>{t.minZoom&&Ge(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},c=()=>{o.run(()=>{Se(()=>t.translateExtent,()=>{t.translateExtent&&Ge(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},u=()=>{o.run(()=>{Se(()=>t.nodeExtent,()=>{t.nodeExtent&&Ge(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},f=()=>{o.run(()=>{Se(()=>t.applyDefault,()=>{Ge(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},g=()=>{o.run(()=>{const y=async S=>{let C=S;typeof t.autoConnect=="function"&&(C=await t.autoConnect(S)),C!==!1&&n.addEdges([C])};Se(()=>t.autoConnect,()=>{Ge(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),Se(n.autoConnect,(S,C,T)=>{S?n.onConnect(y):n.hooks.value.connect.off(y),T(()=>{n.hooks.value.connect.off(y)})},{immediate:!0})})},m=()=>{const y=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const S of Object.keys(t)){const C=S;if(!y.includes(C)){const T=Pe(()=>t[C]),v=n[C];ze(v)&&o.run(()=>{Se(T,w=>{Ge(w)&&(v.value=w)},{immediate:!0})})}}};r(),s(),i(),a(),l(),c(),u(),f(),g(),m()}),()=>o.stop()}function G1(){return{edgesChange:ae(),nodesChange:ae(),nodeDoubleClick:ae(),nodeClick:ae(),nodeMouseEnter:ae(),nodeMouseMove:ae(),nodeMouseLeave:ae(),nodeContextMenu:ae(),nodeDragStart:ae(),nodeDrag:ae(),nodeDragStop:ae(),nodesInitialized:ae(),miniMapNodeClick:ae(),miniMapNodeDoubleClick:ae(),miniMapNodeMouseEnter:ae(),miniMapNodeMouseMove:ae(),miniMapNodeMouseLeave:ae(),connect:ae(),connectStart:ae(),connectEnd:ae(),clickConnectStart:ae(),clickConnectEnd:ae(),paneReady:ae(),init:ae(),move:ae(),moveStart:ae(),moveEnd:ae(),selectionDragStart:ae(),selectionDrag:ae(),selectionDragStop:ae(),selectionContextMenu:ae(),selectionStart:ae(),selectionEnd:ae(),viewportChangeStart:ae(),viewportChange:ae(),viewportChangeEnd:ae(),paneScroll:ae(),paneClick:ae(),paneContextMenu:ae(),paneMouseEnter:ae(),paneMouseMove:ae(),paneMouseLeave:ae(),edgeContextMenu:ae(),edgeMouseEnter:ae(),edgeMouseMove:ae(),edgeMouseLeave:ae(),edgeDoubleClick:ae(),edgeClick:ae(),edgeUpdateStart:ae(),edgeUpdate:ae(),edgeUpdateEnd:ae(),updateNodeInternals:ae(),error:ae(e=>mr(e.message))}}function Y1(e,t){const n=Nt();yc(()=>{for(const[r,s]of Object.entries(t.value)){const i=l=>{e(r,l)};s.setEmitter(i),nr(s.removeEmitter),s.setHasEmitListeners(()=>o(r)),nr(s.removeHasEmitListeners)}});function o(r){var s;const i=K1(r);return!!((s=n?.vnode.props)==null?void 0:s[i])}}function K1(e){const[t,...n]=e.split(":");return`on${t.replace(/(?:^|-)(\w)/g,(r,s)=>s.toUpperCase())}${n.length?`:${n.join(":")}`:""}`}function _f(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Nl.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Ko.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Mn.Bezier,style:{}},connectionMode:xn.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:ds()?"Meta":"Control",zoomActivationKeyCode:ds()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:G1(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const W1=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function X1(e,t,n){const o=U1(e),r=b=>{const x=b??[];e.hooks.updateNodeInternals.trigger(x)},s=b=>u1(b,e.nodes,e.edges),i=b=>a1(b,e.nodes,e.edges),l=b=>uf(b,e.edges),a=({id:b,type:x,nodeId:_})=>{var I;const O=b?`-${x}-${b}`:`-${x}`;return Array.from(((I=e.connectionLookup.get(`${_}${O}`))==null?void 0:I.values())??[])},c=b=>{if(b)return t.value.get(b)},u=b=>{if(b)return n.value.get(b)},f=(b,x,_)=>{var I,O;const U=[];for(const H of b){const F={id:H.id,type:"position",dragging:_,from:H.from};if(x&&(F.position=H.position,H.parentNode)){const Z=c(H.parentNode);F.position={x:F.position.x-(((I=Z?.computedPosition)==null?void 0:I.x)??0),y:F.position.y-(((O=Z?.computedPosition)==null?void 0:O.y)??0)}}U.push(F)}U?.length&&e.hooks.nodesChange.trigger(U)},g=b=>{if(!e.vueFlowRef)return;const x=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!x)return;const _=window.getComputedStyle(x),{m22:I}=new window.DOMMatrixReadOnly(_.transform),O=[];for(const U of b){const H=U,F=c(H.id);if(F){const Z=Ls(H.nodeElement);if(!!(Z.width&&Z.height&&(F.dimensions.width!==Z.width||F.dimensions.height!==Z.height||H.forceUpdate))){const ee=H.nodeElement.getBoundingClientRect();F.dimensions=Z,F.handleBounds.source=wu("source",H.nodeElement,ee,I,F.id),F.handleBounds.target=wu("target",H.nodeElement,ee,I,F.id),O.push({id:F.id,type:"dimensions",dimensions:Z})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),O.length&&e.hooks.nodesChange.trigger(O)},m=(b,x)=>{const _=new Set,I=new Set;for(const H of b)Ln(H)?_.add(H.id):wn(H)&&I.add(H.id);const O=vn(t.value,_,!0),U=vn(n.value,I);if(e.multiSelectionActive){for(const H of _)O.push(pn(H,x));for(const H of I)U.push(pn(H,x))}O.length&&e.hooks.nodesChange.trigger(O),U.length&&e.hooks.edgesChange.trigger(U)},N=b=>{if(e.multiSelectionActive){const x=b.map(_=>pn(_.id,!0));e.hooks.nodesChange.trigger(x);return}e.hooks.nodesChange.trigger(vn(t.value,new Set(b.map(x=>x.id)),!0)),e.hooks.edgesChange.trigger(vn(n.value))},y=b=>{if(e.multiSelectionActive){const x=b.map(_=>pn(_.id,!0));e.hooks.edgesChange.trigger(x);return}e.hooks.edgesChange.trigger(vn(n.value,new Set(b.map(x=>x.id)))),e.hooks.nodesChange.trigger(vn(t.value,new Set,!0))},S=b=>{m(b,!0)},C=b=>{const _=(b||e.nodes).map(I=>(I.selected=!1,pn(I.id,!1)));e.hooks.nodesChange.trigger(_)},T=b=>{const _=(b||e.edges).map(I=>(I.selected=!1,pn(I.id,!1)));e.hooks.edgesChange.trigger(_)},v=b=>{if(!b||!b.length)return m([],!1);const x=b.reduce((_,I)=>{const O=pn(I.id,!1);return Ln(I)?_.nodes.push(O):_.edges.push(O),_},{nodes:[],edges:[]});x.nodes.length&&e.hooks.nodesChange.trigger(x.nodes),x.edges.length&&e.hooks.edgesChange.trigger(x.edges)},w=b=>{var x;(x=e.d3Zoom)==null||x.scaleExtent([b,e.maxZoom]),e.minZoom=b},A=b=>{var x;(x=e.d3Zoom)==null||x.scaleExtent([e.minZoom,b]),e.maxZoom=b},R=b=>{var x;(x=e.d3Zoom)==null||x.translateExtent(b),e.translateExtent=b},G=b=>{e.nodeExtent=b,r()},j=b=>{var x;(x=e.d3Zoom)==null||x.clickDistance(b)},V=b=>{e.nodesDraggable=b,e.nodesConnectable=b,e.elementsSelectable=b},X=b=>{const x=b instanceof Function?b(e.nodes):b;!e.initialized&&!x.length||(e.nodes=_u(x,c,e.hooks.error.trigger))},W=b=>{const x=b instanceof Function?b(e.edges):b;if(!e.initialized&&!x.length)return;const _=mi(x,e.isValidConnection,c,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);gi(e.connectionLookup,n.value,_),e.edges=_},$=b=>{const x=b instanceof Function?b([...e.nodes,...e.edges]):b;!e.initialized&&!x.length||(X(x.filter(Ln)),W(x.filter(wn)))},Q=b=>{let x=b instanceof Function?b(e.nodes):b;x=Array.isArray(x)?x:[x];const _=_u(x,c,e.hooks.error.trigger),I=[];for(const O of _)I.push(pu(O));I.length&&e.hooks.nodesChange.trigger(I)},M=b=>{let x=b instanceof Function?b(e.edges):b;x=Array.isArray(x)?x:[x];const _=mi(x,e.isValidConnection,c,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),I=[];for(const O of _)I.push(pu(O));I.length&&e.hooks.edgesChange.trigger(I)},K=(b,x=!0,_=!1)=>{const I=b instanceof Function?b(e.nodes):b,O=Array.isArray(I)?I:[I],U=[],H=[];function F(q){const ee=l(q);for(const re of ee)(!Ge(re.deletable)||re.deletable)&&H.push(gu(re.id,re.source,re.target,re.sourceHandle,re.targetHandle))}function Z(q){const ee=[];for(const re of e.nodes)re.parentNode===q&&ee.push(re);if(ee.length){for(const re of ee)U.push(hu(re.id));x&&F(ee);for(const re of ee)Z(re.id)}}for(const q of O){const ee=typeof q=="string"?c(q):q;ee&&(Ge(ee.deletable)&&!ee.deletable||(U.push(hu(ee.id)),x&&F([ee]),_&&Z(ee.id)))}H.length&&e.hooks.edgesChange.trigger(H),U.length&&e.hooks.nodesChange.trigger(U)},L=b=>{const x=b instanceof Function?b(e.edges):b,_=Array.isArray(x)?x:[x],I=[];for(const O of _){const U=typeof O=="string"?u(O):O;U&&(Ge(U.deletable)&&!U.deletable||I.push(gu(typeof O=="string"?O:O.id,U.source,U.target,U.sourceHandle,U.targetHandle)))}e.hooks.edgesChange.trigger(I)},D=(b,x,_=!0)=>{const I=u(b.id);if(!I)return!1;const O=e.edges.indexOf(I),U=O1(b,x,I,_,e.hooks.error.trigger);if(U){const[H]=mi([U],e.isValidConnection,c,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((F,Z)=>Z===O?H:F),gi(e.connectionLookup,n.value,[H]),H}return!1},P=(b,x,_={replace:!1})=>{const I=u(b);if(!I)return;const O=typeof x=="function"?x(I):x;I.data=_.replace?O:{...I.data,...O}},d=b=>fu(b,e.nodes),h=b=>{const x=fu(b,e.edges);return gi(e.connectionLookup,n.value,x),x},J=(b,x,_={replace:!1})=>{const I=c(b);if(!I)return;const O=typeof x=="function"?x(I):x;_.replace?e.nodes.splice(e.nodes.indexOf(I),1,O):Object.assign(I,O)},ne=(b,x,_={replace:!1})=>{const I=c(b);if(!I)return;const O=typeof x=="function"?x(I):x;I.data=_.replace?O:{...I.data,...O}},he=(b,x,_=!1)=>{_?e.connectionClickStartHandle=b:e.connectionStartHandle=b,e.connectionEndHandle=null,e.connectionStatus=null,x&&(e.connectionPosition=x)},me=(b,x=null,_=null)=>{e.connectionStartHandle&&(e.connectionPosition=b,e.connectionEndHandle=x,e.connectionStatus=_)},ie=(b,x)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,x?e.connectionClickStartHandle=null:e.connectionStartHandle=null},oe=b=>{const x=i1(b),_=x?null:Po(b)?b:c(b.id);return!x&&!_?[null,null,x]:[x?b:us(_),_,x]},ce=(b,x=!0,_=e.nodes)=>{const[I,O,U]=oe(b);if(!I)return[];const H=[];for(const F of _||e.nodes){if(!U&&(F.id===O.id||!F.computedPosition))continue;const Z=us(F),q=cs(Z,I);(x&&q>0||q>=Z.width*Z.height||q>=Number(I.width)*Number(I.height))&&H.push(F)}return H},Ce=(b,x,_=!0)=>{const[I]=oe(b);if(!I)return!1;const O=cs(I,x);return _&&O>0||O>=Number(I.width)*Number(I.height)},Ae=b=>{const{viewport:x,dimensions:_,d3Zoom:I,d3Selection:O,translateExtent:U}=e;if(!I||!O||!b.x&&!b.y)return!1;const H=mo.translate(x.x+b.x,x.y+b.y).scale(x.zoom),F=[[0,0],[_.width,_.height]],Z=I.constrain()(H,F,U),q=e.viewport.x!==Z.x||e.viewport.y!==Z.y||e.viewport.zoom!==Z.k;return I.transform(O,Z),q},ye=b=>{const x=b instanceof Function?b(e):b,_=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Ge(x.defaultEdgeOptions)&&(e.defaultEdgeOptions=x.defaultEdgeOptions);const I=x.modelValue||x.nodes||x.edges?[]:void 0;I&&(x.modelValue&&I.push(...x.modelValue),x.nodes&&I.push(...x.nodes),x.edges&&I.push(...x.edges),$(I));const O=()=>{Ge(x.maxZoom)&&A(x.maxZoom),Ge(x.minZoom)&&w(x.minZoom),Ge(x.translateExtent)&&R(x.translateExtent)};for(const U of Object.keys(x)){const H=U,F=x[H];![...W1,..._].includes(H)&&Ge(F)&&(e[H]=F)}Bi(()=>e.d3Zoom).not.toBeNull().then(O),e.initialized||(e.initialized=!0)};return{updateNodePositions:f,updateNodeDimensions:g,setElements:$,setNodes:X,setEdges:W,addNodes:Q,addEdges:M,removeNodes:K,removeEdges:L,findNode:c,findEdge:u,updateEdge:D,updateEdgeData:P,updateNode:J,updateNodeData:ne,applyEdgeChanges:h,applyNodeChanges:d,addSelectedElements:S,addSelectedNodes:N,addSelectedEdges:y,setMinZoom:w,setMaxZoom:A,setTranslateExtent:R,setNodeExtent:G,setPaneClickDistance:j,removeSelectedElements:v,removeSelectedNodes:C,removeSelectedEdges:T,startConnection:he,updateConnection:me,endConnection:ie,setInteractive:V,setState:ye,getIntersectingNodes:ce,getIncomers:s,getOutgoers:i,getConnectedEdges:l,getHandleConnections:a,isNodeIntersecting:Ce,panBy:Ae,fitView:b=>o.value.fitView(b),zoomIn:b=>o.value.zoomIn(b),zoomOut:b=>o.value.zoomOut(b),zoomTo:(b,x)=>o.value.zoomTo(b,x),setViewport:(b,x)=>o.value.setViewport(b,x),setTransform:(b,x)=>o.value.setTransform(b,x),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(b,x,_)=>o.value.setCenter(b,x,_),fitBounds:(b,x)=>o.value.fitBounds(b,x),project:b=>o.value.project(b),screenToFlowCoordinate:b=>o.value.screenToFlowCoordinate(b),flowToScreenCoordinate:b=>o.value.flowToScreenCoordinate(b),toObject:()=>{const b=[],x=[];for(const _ of e.nodes){const{computedPosition:I,handleBounds:O,selected:U,dimensions:H,isParent:F,resizing:Z,dragging:q,events:ee,...re}=_;b.push(re)}for(const _ of e.edges){const{selected:I,sourceNode:O,targetNode:U,events:H,...F}=_;x.push(F)}return JSON.parse(JSON.stringify({nodes:b,edges:x,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:b=>new Promise(x=>{const{nodes:_,edges:I,position:O,zoom:U,viewport:H}=b;_&&X(_),I&&W(I);const[F,Z]=H?.x&&H?.y?[H.x,H.y]:O??[null,null];if(F&&Z){const q=H?.zoom||U||e.viewport.zoom;return Bi(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:F,y:Z,zoom:q}).then(()=>{x(!0)})})}else x(!0)}),updateNodeInternals:r,viewportHelper:o,$reset:()=>{const b=_f();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const x=mo.translate(b.defaultViewport.x??0,b.defaultViewport.y??0).scale(Gn(b.defaultViewport.zoom??1,b.minZoom,b.maxZoom)),_=e.viewportRef.getBoundingClientRect(),I=[[0,0],[_.width,_.height]],O=e.d3Zoom.constrain()(x,I,b.translateExtent);e.d3Zoom.transform(e.d3Selection,O)}ye(b)},$destroy:()=>{}}}const q1=["data-id","data-handleid","data-nodeid","data-handlepos"],Z1={name:"Handle",compatConfig:{MODE:3}},yo=He({...Z1,props:{id:{default:null},type:{},position:{default:()=>de.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=Up(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Pe(()=>n.type??"source"),r=Pe(()=>n.isValidConnection??null),{id:s,connectionStartHandle:i,connectionClickStartHandle:l,connectionEndHandle:a,vueFlowRef:c,nodesConnectable:u,noDragClassName:f,noPanClassName:g}=Re(),{id:m,node:N,nodeEl:y,connectedEdges:S}=xf(),C=xe(),T=Pe(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),v=Pe(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),w=Pe(()=>{var W,$,Q,M,K,L;return((W=i.value)==null?void 0:W.nodeId)===m&&(($=i.value)==null?void 0:$.id)===e.id&&((Q=i.value)==null?void 0:Q.type)===o.value||((M=a.value)==null?void 0:M.nodeId)===m&&((K=a.value)==null?void 0:K.id)===e.id&&((L=a.value)==null?void 0:L.type)===o.value}),A=Pe(()=>{var W,$,Q;return((W=l.value)==null?void 0:W.nodeId)===m&&(($=l.value)==null?void 0:$.id)===e.id&&((Q=l.value)==null?void 0:Q.type)===o.value}),{handlePointerDown:R,handleClick:G}=bf({nodeId:m,handleId:e.id,isValidConnection:r,type:o}),j=se(()=>typeof e.connectable=="string"&&e.connectable==="single"?!S.value.some(W=>{const $=W[`${o.value}Handle`];return W[o.value]!==m?!1:$?$===e.id:!0}):typeof e.connectable=="number"?S.value.filter(W=>{const $=W[`${o.value}Handle`];return W[o.value]!==m?!1:$?$===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(N,S.value):Ge(e.connectable)?e.connectable:u.value);ct(()=>{var W;if(!N.dimensions.width||!N.dimensions.height)return;const $=(W=N.handleBounds[o.value])==null?void 0:W.find(d=>d.id===e.id);if(!c.value||$)return;const Q=c.value.querySelector(".vue-flow__transformationpane");if(!y.value||!C.value||!Q||!e.id)return;const M=y.value.getBoundingClientRect(),K=C.value.getBoundingClientRect(),L=window.getComputedStyle(Q),{m22:D}=new window.DOMMatrixReadOnly(L.transform),P={id:e.id,position:e.position,x:(K.left-M.left)/D,y:(K.top-M.top)/D,type:o.value,nodeId:m,...Ls(C.value)};N.handleBounds[o.value]=[...N.handleBounds[o.value]??[],P]});function V(W){const $=Tl(W);j.value&&T.value&&($&&W.button===0||!$)&&R(W)}function X(W){!m||!l.value&&!T.value||j.value&&G(W)}return t({handleClick:G,handlePointerDown:R,onClick:X,onPointerDown:V}),(W,$)=>(B(),Y("div",{ref_key:"handle",ref:C,"data-id":`${z(s)}-${z(m)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":z(m),"data-handlepos":W.position,class:ve(["vue-flow__handle",[`vue-flow__handle-${W.position}`,`vue-flow__handle-${e.id}`,z(f),z(g),o.value,{connectable:j.value,connecting:A.value,connectablestart:T.value,connectableend:v.value,connectionindicator:j.value&&(T.value&&!w.value||v.value&&w.value)}]]),onMousedown:V,onTouchstartPassive:V,onClick:X},[Ue(W.$slots,"default",{id:W.id})],42,q1))}}),Fs=function({sourcePosition:e=de.Bottom,targetPosition:t=de.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:s,data:i}){const l=i.label??n;return[$e(yo,{type:"target",position:t,connectable:o,isValidConnection:r}),typeof l!="string"&&l?$e(l):$e(ue,[l]),$e(yo,{type:"source",position:e,connectable:o,isValidConnection:s})]};Fs.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];Fs.inheritAttrs=!1;Fs.compatConfig={MODE:3};const J1=Fs,zs=function({targetPosition:e=de.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:r}){const s=r.label??t;return[$e(yo,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof s!="string"&&s?$e(s):$e(ue,[s])]};zs.props=["targetPosition","label","isValidTargetPos","connectable","data"];zs.inheritAttrs=!1;zs.compatConfig={MODE:3};const Q1=zs,Vs=function({sourcePosition:e=de.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:r}){const s=r.label??t;return[typeof s!="string"&&s?$e(s):$e(ue,[s]),$e(yo,{type:"source",position:e,connectable:n,isValidConnection:o})]};Vs.props=["sourcePosition","label","isValidSourcePos","connectable","data"];Vs.inheritAttrs=!1;Vs.compatConfig={MODE:3};const ex=Vs,tx=["transform"],nx=["width","height","x","y","rx","ry"],ox=["y"],rx={name:"EdgeText",compatConfig:{MODE:3}},sx=He({...rx,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=xe({x:0,y:0,width:0,height:0}),n=xe(null),o=se(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);ct(r),Se([()=>e.x,()=>e.y,n,()=>e.label],r);function r(){if(!n.value)return;const s=n.value.getBBox();(s.width!==t.value.width||s.height!==t.value.height)&&(t.value=s)}return(s,i)=>(B(),Y("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[s.labelShowBg?(B(),Y("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*s.labelBgPadding[0]}px`,height:`${t.value.height+2*s.labelBgPadding[1]}px`,x:-s.labelBgPadding[0],y:-s.labelBgPadding[1],style:Ze(s.labelBgStyle),rx:s.labelBgBorderRadius,ry:s.labelBgBorderRadius},null,12,nx)):pe("",!0),p("text",dl(s.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:s.labelStyle}),[Ue(s.$slots,"default",{},()=>[typeof s.label!="string"?(B(),Ve(Jn(s.label),{key:0})):(B(),Y(ue,{key:1},[We(fe(s.label),1)],64))])],16,ox)],8,tx))}}),ix=["id","d","marker-end","marker-start"],lx=["d","stroke-width"],ax={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},Hs=He({...ax,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=xe(null),o=xe(null),r=xe(null),s=Hp();return t({pathEl:n,interactionEl:o,labelEl:r}),(i,l)=>(B(),Y(ue,null,[p("path",dl(z(s),{id:i.id,ref_key:"pathEl",ref:n,d:i.path,class:"vue-flow__edge-path","marker-end":i.markerEnd,"marker-start":i.markerStart}),null,16,ix),i.interactionWidth?(B(),Y("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:i.path,"stroke-width":i.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,lx)):pe("",!0),i.label&&i.labelX&&i.labelY?(B(),Ve(sx,{key:1,ref_key:"labelEl",ref:r,x:i.labelX,y:i.labelY,label:i.label,"label-show-bg":i.labelShowBg,"label-bg-style":i.labelBgStyle,"label-bg-padding":i.labelBgPadding,"label-bg-border-radius":i.labelBgBorderRadius,"label-style":i.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):pe("",!0)],64))}});function Sf({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,s=n<e?n+r:n-r,i=Math.abs(o-t)/2,l=o<t?o+i:o-i;return[s,l,r,i]}function Ef({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:s,targetControlX:i,targetControlY:l}){const a=e*.125+r*.375+i*.375+n*.125,c=t*.125+s*.375+l*.375+o*.125,u=Math.abs(a-e),f=Math.abs(c-t);return[a,c,u,f]}function Ar(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Nu({pos:e,x1:t,y1:n,x2:o,y2:r,c:s}){let i,l;switch(e){case de.Left:i=t-Ar(t-o,s),l=n;break;case de.Right:i=t+Ar(o-t,s),l=n;break;case de.Top:i=t,l=n-Ar(n-r,s);break;case de.Bottom:i=t,l=n+Ar(r-n,s);break}return[i,l]}function Cf(e){const{sourceX:t,sourceY:n,sourcePosition:o=de.Bottom,targetX:r,targetY:s,targetPosition:i=de.Top,curvature:l=.25}=e,[a,c]=Nu({pos:o,x1:t,y1:n,x2:r,y2:s,c:l}),[u,f]=Nu({pos:i,x1:r,y1:s,x2:t,y2:n,c:l}),[g,m,N,y]=Ef({sourceX:t,sourceY:n,targetX:r,targetY:s,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:f});return[`M${t},${n} C${a},${c} ${u},${f} ${r},${s}`,g,m,N,y]}function Iu({pos:e,x1:t,y1:n,x2:o,y2:r}){let s,i;switch(e){case de.Left:case de.Right:s=.5*(t+o),i=n;break;case de.Top:case de.Bottom:s=t,i=.5*(n+r);break}return[s,i]}function Nf(e){const{sourceX:t,sourceY:n,sourcePosition:o=de.Bottom,targetX:r,targetY:s,targetPosition:i=de.Top}=e,[l,a]=Iu({pos:o,x1:t,y1:n,x2:r,y2:s}),[c,u]=Iu({pos:i,x1:r,y1:s,x2:t,y2:n}),[f,g,m,N]=Ef({sourceX:t,sourceY:n,targetX:r,targetY:s,sourceControlX:l,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${t},${n} C${l},${a} ${c},${u} ${r},${s}`,f,g,m,N]}const Tu={[de.Left]:{x:-1,y:0},[de.Right]:{x:1,y:0},[de.Top]:{x:0,y:-1},[de.Bottom]:{x:0,y:1}};function ux({source:e,sourcePosition:t=de.Bottom,target:n}){return t===de.Left||t===de.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function $u(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function cx({source:e,sourcePosition:t=de.Bottom,target:n,targetPosition:o=de.Top,center:r,offset:s}){const i=Tu[t],l=Tu[o],a={x:e.x+i.x*s,y:e.y+i.y*s},c={x:n.x+l.x*s,y:n.y+l.y*s},u=ux({source:a,sourcePosition:t,target:c}),f=u.x!==0?"x":"y",g=u[f];let m,N,y;const S={x:0,y:0},C={x:0,y:0},[T,v,w,A]=Sf({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[f]*l[f]===-1){N=r.x??T,y=r.y??v;const G=[{x:N,y:a.y},{x:N,y:c.y}],j=[{x:a.x,y},{x:c.x,y}];i[f]===g?m=f==="x"?G:j:m=f==="x"?j:G}else{const G=[{x:a.x,y:c.y}],j=[{x:c.x,y:a.y}];if(f==="x"?m=i.x===g?j:G:m=i.y===g?G:j,t===o){const Q=Math.abs(e[f]-n[f]);if(Q<=s){const M=Math.min(s-1,s-Q);i[f]===g?S[f]=(a[f]>e[f]?-1:1)*M:C[f]=(c[f]>n[f]?-1:1)*M}}if(t!==o){const Q=f==="x"?"y":"x",M=i[f]===l[Q],K=a[Q]>c[Q],L=a[Q]<c[Q];(i[f]===1&&(!M&&K||M&&L)||i[f]!==1&&(!M&&L||M&&K))&&(m=f==="x"?G:j)}const V={x:a.x+S.x,y:a.y+S.y},X={x:c.x+C.x,y:c.y+C.y},W=Math.max(Math.abs(V.x-m[0].x),Math.abs(X.x-m[0].x)),$=Math.max(Math.abs(V.y-m[0].y),Math.abs(X.y-m[0].y));W>=$?(N=(V.x+X.x)/2,y=m[0].y):(N=m[0].x,y=(V.y+X.y)/2)}return[[e,{x:a.x+S.x,y:a.y+S.y},...m,{x:c.x+C.x,y:c.y+C.y},n],N,y,w,A]}function dx(e,t,n,o){const r=Math.min($u(e,t)/2,$u(t,n)/2,o),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const c=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${s+r*c},${i}Q ${s},${i} ${s},${i+r*u}`}const l=e.x<n.x?1:-1,a=e.y<n.y?-1:1;return`L ${s},${i+r*a}Q ${s},${i} ${s+r*l},${i}`}function qi(e){const{sourceX:t,sourceY:n,sourcePosition:o=de.Bottom,targetX:r,targetY:s,targetPosition:i=de.Top,borderRadius:l=5,centerX:a,centerY:c,offset:u=20}=e,[f,g,m,N,y]=cx({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:s},targetPosition:i,center:{x:a,y:c},offset:u});return[f.reduce((C,T,v)=>{let w;return v>0&&v<f.length-1?w=dx(f[v-1],T,f[v+1],l):w=`${v===0?"M":"L"}${T.x} ${T.y}`,C+=w,C},""),g,m,N,y]}function fx(e){const{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,[s,i,l,a]=Sf({sourceX:t,sourceY:n,targetX:o,targetY:r});return[`M ${t},${n}L ${o},${r}`,s,i,l,a]}const px=He({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=fx(e);return $e(Hs,{path:n,labelX:o,labelY:r,...t,...e})}}}),hx=px,gx=He({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=qi({...e,sourcePosition:e.sourcePosition??de.Bottom,targetPosition:e.targetPosition??de.Top});return $e(Hs,{path:n,labelX:o,labelY:r,...t,...e})}}}),If=gx,mx=He({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>$e(If,{...e,...t,borderRadius:0})}}),vx=mx,yx=He({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Cf({...e,sourcePosition:e.sourcePosition??de.Bottom,targetPosition:e.targetPosition??de.Top});return $e(Hs,{path:n,labelX:o,labelY:r,...t,...e})}}}),bx=yx,xx=He({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Nf({...e,sourcePosition:e.sourcePosition??de.Bottom,targetPosition:e.targetPosition??de.Top});return $e(Hs,{path:n,labelX:o,labelY:r,...t,...e})}}}),wx=xx,_x={input:ex,default:J1,output:Q1},Sx={default:bx,straight:hx,step:vx,smoothstep:If,simplebezier:wx};function Ex(e,t,n){const o=se(()=>y=>t.value.get(y)),r=se(()=>y=>n.value.get(y)),s=se(()=>{const y={...Sx,...e.edgeTypes},S=Object.keys(y);for(const C of e.edges)C.type&&!S.includes(C.type)&&(y[C.type]=C.type);return y}),i=se(()=>{const y={..._x,...e.nodeTypes},S=Object.keys(y);for(const C of e.nodes)C.type&&!S.includes(C.type)&&(y[C.type]=C.type);return y}),l=se(()=>e.onlyRenderVisibleElements?af(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),a=se(()=>{if(e.onlyRenderVisibleElements){const y=[];for(const S of e.edges){const C=t.value.get(S.source),T=t.value.get(S.target);x1({sourcePos:C.computedPosition||{x:0,y:0},targetPos:T.computedPosition||{x:0,y:0},sourceWidth:C.dimensions.width,sourceHeight:C.dimensions.height,targetWidth:T.dimensions.width,targetHeight:T.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&y.push(S)}return y}return e.edges}),c=se(()=>[...l.value,...a.value]),u=se(()=>{const y=[];for(const S of e.nodes)S.selected&&y.push(S);return y}),f=se(()=>{const y=[];for(const S of e.edges)S.selected&&y.push(S);return y}),g=se(()=>[...u.value,...f.value]),m=se(()=>{const y=[];for(const S of e.nodes)S.dimensions.width&&S.dimensions.height&&S.handleBounds!==void 0&&y.push(S);return y}),N=se(()=>l.value.length>0&&m.value.length===l.value.length);return{getNode:o,getEdge:r,getElements:c,getEdgeTypes:s,getNodeTypes:i,getEdges:a,getNodes:l,getSelectedElements:g,getSelectedNodes:u,getSelectedEdges:f,getNodesInitialized:m,areNodesInitialized:N}}let Cx=class eo{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=Nt())==null?void 0:t.appContext.app,o=n?.config.globalProperties.$vueFlowStorage??eo.instance;return eo.instance=o??new eo,n&&(n.config.globalProperties.$vueFlowStorage=eo.instance),eo.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=_f(),r=dr(o),s={};for(const[g,m]of Object.entries(r.hooks)){const N=`on${g.charAt(0).toUpperCase()+g.slice(1)}`;s[N]=m.on}const i={};for(const[g,m]of Object.entries(r.hooks))i[g]=m.trigger;const l=se(()=>{const g=new Map;for(const m of r.nodes)g.set(m.id,m);return g}),a=se(()=>{const g=new Map;for(const m of r.edges)g.set(m.id,m);return g}),c=Ex(r,l,a),u=X1(r,l,a);u.setState({...r,...n});const f={...s,...c,...u,...gv(r),nodeLookup:l,edgeLookup:a,emits:i,id:t,vueFlowVersion:"1.48.2",$destroy:()=>{this.remove(t)}};return this.set(t,f),f}getId(){return`vue-flow-${this.currentId++}`}};function Re(e){const t=Cx.getInstance(),n=xs(),o=typeof e=="object",r=o?e:{id:e},s=r.id,i=s??n?.vueFlowId;let l;if(n){const a=_t(Cu,null);typeof a<"u"&&a!==null&&(!i||a.id===i)&&(l=a)}if(l||i&&(l=t.get(i)),!l||i&&l.id!==i){const a=s??t.getId(),c=t.create(a,r);l=c,(n??bs(!0)).run(()=>{Se(c.applyDefault,(f,g,m)=>{const N=S=>{c.applyNodeChanges(S)},y=S=>{c.applyEdgeChanges(S)};f?(c.onNodesChange(N),c.onEdgesChange(y)):(c.hooks.value.nodesChange.off(N),c.hooks.value.edgesChange.off(y)),m(()=>{c.hooks.value.nodesChange.off(N),c.hooks.value.edgesChange.off(y)})},{immediate:!0}),nr(()=>{if(l){const f=t.get(l.id);f?f.$destroy():mr(`No store instance found for id ${l.id} in storage.`)}})})}else o&&l.setState(r);if(n&&(Fn(Cu,l),n.vueFlowId=l.id),o){const a=Nt();a?.type.name!=="VueFlow"&&l.emits.error(new Xe(Ye.USEVUEFLOW_OPTIONS))}return l}function Nx(e){const{emits:t,dimensions:n}=Re();let o;ct(()=>{const r=()=>{var s,i;if(!e.value||!(((i=(s=e.value).checkVisibility)==null?void 0:i.call(s))??!0))return;const l=Ls(e.value);(l.width===0||l.height===0)&&t.error(new Xe(Ye.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:l.width||500,height:l.height||500}};r(),window.addEventListener("resize",r),e.value&&(o=new ResizeObserver(()=>r()),o.observe(e.value)),Ns(()=>{window.removeEventListener("resize",r),o&&e.value&&o.unobserve(e.value)})})}const Ix={name:"UserSelection",compatConfig:{MODE:3}},Tx=He({...Ix,props:{userSelectionRect:{}},setup(e){return(t,n)=>(B(),Y("div",{class:"vue-flow__selection vue-flow__container",style:Ze({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),$x=["tabIndex"],Mx={name:"NodesSelection",compatConfig:{MODE:3}},Ax=He({...Mx,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:r,disableKeyboardA11y:s,userSelectionActive:i}=Re(),l=wf(),a=xe(null),c=yf({el:a,onStart(N){t.selectionDragStart(N),t.nodeDragStart(N)},onDrag(N){t.selectionDrag(N),t.nodeDrag(N)},onStop(N){t.selectionDragStop(N),t.nodeDragStop(N)}});ct(()=>{var N;s.value||(N=a.value)==null||N.focus({preventScroll:!0})});const u=se(()=>lf(o.value)),f=se(()=>({width:`${u.value.width}px`,height:`${u.value.height}px`,top:`${u.value.y}px`,left:`${u.value.x}px`}));function g(N){t.selectionContextMenu({event:N,nodes:o.value})}function m(N){s.value||lo[N.key]&&(N.preventDefault(),l({x:lo[N.key].x,y:lo[N.key].y},N.shiftKey))}return(N,y)=>!z(i)&&u.value.width&&u.value.height?(B(),Y("div",{key:0,class:ve(["vue-flow__nodesselection vue-flow__container",z(r)]),style:Ze({transform:`translate(${z(n).x}px,${z(n).y}px) scale(${z(n).zoom})`})},[p("div",{ref_key:"el",ref:a,class:ve([{dragging:z(c)},"vue-flow__nodesselection-rect"]),style:Ze(f.value),tabIndex:z(s)?void 0:-1,onContextmenu:g,onKeydown:m},null,46,$x)],6)):pe("",!0)}});function Ox(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Dx={name:"Pane",compatConfig:{MODE:3}},kx=He({...Dx,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:r,userSelectionActive:s,removeSelectedElements:i,userSelectionRect:l,elementsSelectable:a,nodesSelectionActive:c,getSelectedEdges:u,getSelectedNodes:f,removeNodes:g,removeEdges:m,selectionMode:N,deleteKeyCode:y,multiSelectionKeyCode:S,multiSelectionActive:C,edgeLookup:T,nodeLookup:v,connectionLookup:w,defaultEdgeOptions:A,connectionStartHandle:R,panOnDrag:G}=Re(),j=qt(null),V=qt(new Set),X=qt(new Set),W=qt(null),$=Pe(()=>a.value&&(e.isSelecting||s.value)),Q=Pe(()=>R.value!==null);let M=!1,K=!1;const L=Wo(y,{actInsideInputWithModifier:!1}),D=Wo(S);Se(L,ie=>{ie&&(g(f.value),m(u.value),c.value=!1)}),Se(D,ie=>{C.value=ie});function P(ie,oe){return ce=>{ce.target===oe&&ie?.(ce)}}function d(ie){if(M||Q.value){M=!1;return}r.paneClick(ie),i(),c.value=!1}function h(ie){var oe;if(Array.isArray(G.value)&&((oe=G.value)!=null&&oe.includes(2))){ie.preventDefault();return}r.paneContextMenu(ie)}function J(ie){r.paneScroll(ie)}function ne(ie){var oe,ce,Ce;if(W.value=((oe=t.value)==null?void 0:oe.getBoundingClientRect())??null,!a.value||!e.isSelecting||ie.button!==0||ie.target!==j.value||!W.value)return;(Ce=(ce=ie.target)==null?void 0:ce.setPointerCapture)==null||Ce.call(ce,ie.pointerId);const{x:Ae,y:ye}=Ox(ie,W.value);K=!0,M=!1,i(),l.value={width:0,height:0,startX:Ae,startY:ye,x:Ae,y:ye},r.selectionStart(ie)}function he(ie){var oe;if(!W.value||!l.value)return;M=!0;const{x:ce,y:Ce}=Rt(ie,W.value),{startX:Ae=0,startY:ye=0}=l.value,Me={startX:Ae,startY:ye,x:ce<Ae?ce:Ae,y:Ce<ye?Ce:ye,width:Math.abs(ce-Ae),height:Math.abs(Ce-ye)},E=V.value,k=X.value;V.value=new Set(af(n.value,Me,o.value,N.value===Nl.Partial,!0).map(x=>x.id)),X.value=new Set;const b=((oe=A.value)==null?void 0:oe.selectable)??!0;for(const x of V.value){const _=w.value.get(x);if(_)for(const{edgeId:I}of _.values()){const O=T.value.get(I);O&&(O.selectable??b)&&X.value.add(I)}}if(!Eu(E,V.value)){const x=vn(v.value,V.value,!0);r.nodesChange(x)}if(!Eu(k,X.value)){const x=vn(T.value,X.value);r.edgesChange(x)}l.value=Me,s.value=!0,c.value=!1}function me(ie){var oe;ie.button!==0||!K||((oe=ie.target)==null||oe.releasePointerCapture(ie.pointerId),!s.value&&l.value&&ie.target===j.value&&d(ie),s.value=!1,l.value=null,c.value=V.value.size>0,r.selectionEnd(ie),e.selectionKeyPressed&&(M=!1),K=!1)}return(ie,oe)=>(B(),Y("div",{ref_key:"container",ref:j,class:ve(["vue-flow__pane vue-flow__container",{selection:ie.isSelecting}]),onClick:oe[0]||(oe[0]=ce=>$.value?void 0:P(d,j.value)(ce)),onContextmenu:oe[1]||(oe[1]=ce=>P(h,j.value)(ce)),onWheelPassive:oe[2]||(oe[2]=ce=>P(J,j.value)(ce)),onPointerenter:oe[3]||(oe[3]=ce=>$.value?void 0:z(r).paneMouseEnter(ce)),onPointerdown:oe[4]||(oe[4]=ce=>$.value?ne(ce):z(r).paneMouseMove(ce)),onPointermove:oe[5]||(oe[5]=ce=>$.value?he(ce):z(r).paneMouseMove(ce)),onPointerup:oe[6]||(oe[6]=ce=>$.value?me(ce):void 0),onPointerleave:oe[7]||(oe[7]=ce=>z(r).paneMouseLeave(ce))},[Ue(ie.$slots,"default"),z(s)&&z(l)?(B(),Ve(Tx,{key:0,"user-selection-rect":z(l)},null,8,["user-selection-rect"])):pe("",!0),z(c)&&z(f).length?(B(),Ve(Ax,{key:1})):pe("",!0)],34))}}),Px={name:"Transform",compatConfig:{MODE:3}},Lx=He({...Px,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=Re(),r=se(()=>n.value?!o.value:!1),s=se(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(i,l)=>(B(),Y("div",{class:"vue-flow__transformationpane vue-flow__container",style:Ze({transform:s.value,opacity:r.value?0:void 0})},[Ue(i.$slots,"default")],4))}}),Rx={name:"Viewport",compatConfig:{MODE:3}},Bx=He({...Rx,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:r,zoomActivationKeyCode:s,selectionKeyCode:i,panActivationKeyCode:l,panOnScroll:a,panOnScrollMode:c,panOnScrollSpeed:u,panOnDrag:f,zoomOnDoubleClick:g,zoomOnPinch:m,zoomOnScroll:N,preventScrolling:y,noWheelClassName:S,noPanClassName:C,emits:T,connectionStartHandle:v,userSelectionActive:w,paneDragging:A,d3Zoom:R,d3Selection:G,d3ZoomHandler:j,viewport:V,viewportRef:X,paneClickDistance:W}=Re();Nx(X);const $=qt(!1),Q=qt(!1);let M=null,K=!1,L=0,D={x:0,y:0,zoom:0};const P=Wo(l),d=Wo(i),h=Wo(s),J=Pe(()=>(!d.value||d.value&&i.value===!0)&&(P.value||f.value)),ne=Pe(()=>P.value||a.value),he=Pe(()=>i.value===!0&&J.value!==!0),me=Pe(()=>d.value&&i.value!==!0||w.value||he.value),ie=Pe(()=>v.value!==null);ct(()=>{if(!X.value){mr("Viewport element is missing");return}const ye=X.value,Me=ye.getBoundingClientRect(),E=Qb().clickDistance(W.value).scaleExtent([t.value,n.value]).translateExtent(r.value),k=bt(ye).call(E),b=k.on("wheel.zoom"),x=mo.translate(o.value.x??0,o.value.y??0).scale(Gn(o.value.zoom??1,t.value,n.value)),_=[[0,0],[Me.width,Me.height]],I=E.constrain()(x,_,r.value);E.transform(k,I),E.wheelDelta(cu),R.value=E,G.value=k,j.value=b,V.value={x:I.x,y:I.y,zoom:I.k},E.on("start",O=>{var U;if(!O.sourceEvent)return null;L=O.sourceEvent.button,$.value=!0;const H=Ce(O.transform);((U=O.sourceEvent)==null?void 0:U.type)==="mousedown"&&(A.value=!0),D=H,T.viewportChangeStart(H),T.moveStart({event:O,flowTransform:H})}),E.on("end",O=>{if(!O.sourceEvent)return null;if($.value=!1,A.value=!1,oe(J.value,L??0)&&!K&&T.paneContextMenu(O.sourceEvent),K=!1,ce(D,O.transform)){const U=Ce(O.transform);D=U,T.viewportChangeEnd(U),T.moveEnd({event:O,flowTransform:U})}}),E.filter(O=>{var U;const H=h.value||N.value,F=m.value&&O.ctrlKey,Z=O.button,q=O.type==="wheel";if(Z===1&&O.type==="mousedown"&&(Ae(O,"vue-flow__node")||Ae(O,"vue-flow__edge")))return!0;if(!J.value&&!H&&!ne.value&&!g.value&&!m.value||w.value||ie.value&&!q||!g.value&&O.type==="dblclick"||Ae(O,S.value)&&q||Ae(O,C.value)&&(!q||ne.value&&q&&!h.value)||!m.value&&O.ctrlKey&&q||!H&&!ne.value&&!F&&q)return!1;if(!m&&O.type==="touchstart"&&((U=O.touches)==null?void 0:U.length)>1)return O.preventDefault(),!1;if(!J.value&&(O.type==="mousedown"||O.type==="touchstart")||he.value&&Array.isArray(f.value)&&f.value.includes(0)&&Z===0||Array.isArray(f.value)&&!f.value.includes(Z)&&(O.type==="mousedown"||O.type==="touchstart"))return!1;const ee=Array.isArray(f.value)&&f.value.includes(Z)||i.value===!0&&Array.isArray(f.value)&&!f.value.includes(0)||!Z||Z<=1;return(!O.ctrlKey||P.value||q)&&ee}),Se([w,J],()=>{w.value&&!$.value?E.on("zoom",null):w.value||E.on("zoom",O=>{V.value={x:O.transform.x,y:O.transform.y,zoom:O.transform.k};const U=Ce(O.transform);K=oe(J.value,L??0),T.viewportChange(U),T.move({event:O,flowTransform:U})})},{immediate:!0}),Se([w,ne,c,h,m,y,S],()=>{ne.value&&!h.value&&!w.value?k.on("wheel.zoom",O=>{if(Ae(O,S.value))return!1;const U=h.value||N.value,H=m.value&&O.ctrlKey;if(!(!y.value||ne.value||U||H))return!1;O.preventDefault(),O.stopImmediatePropagation();const Z=k.property("__zoom").k||1,q=ds();if(!P.value&&O.ctrlKey&&m.value&&q){const Oe=kt(O),Qe=cu(O),et=Z*2**Qe;E.scaleTo(k,et,Oe,O);return}const ee=O.deltaMode===1?20:1;let re=c.value===Ko.Vertical?0:O.deltaX*ee,we=c.value===Ko.Horizontal?0:O.deltaY*ee;!q&&O.shiftKey&&c.value!==Ko.Vertical&&!re&&we&&(re=we,we=0),E.translateBy(k,-(re/Z)*u.value,-(we/Z)*u.value);const Ne=Ce(k.property("__zoom"));M&&clearTimeout(M),Q.value?(T.move({event:O,flowTransform:Ne}),T.viewportChange(Ne),M=setTimeout(()=>{T.moveEnd({event:O,flowTransform:Ne}),T.viewportChangeEnd(Ne),Q.value=!1},150)):(Q.value=!0,T.moveStart({event:O,flowTransform:Ne}),T.viewportChangeStart(Ne))},{passive:!1}):typeof b<"u"&&k.on("wheel.zoom",function(O,U){const H=!y.value&&O.type==="wheel"&&!O.ctrlKey,F=h.value||N.value,Z=m.value&&O.ctrlKey;if(!F&&!a.value&&!Z&&O.type==="wheel"||H||Ae(O,S.value))return null;O.preventDefault(),b.call(this,O,U)},{passive:!1})},{immediate:!0})});function oe(ye,Me){return Me===2&&Array.isArray(ye)&&ye.includes(2)}function ce(ye,Me){return ye.x!==Me.x&&!Number.isNaN(Me.x)||ye.y!==Me.y&&!Number.isNaN(Me.y)||ye.zoom!==Me.k&&!Number.isNaN(Me.k)}function Ce(ye){return{x:ye.x,y:ye.y,zoom:ye.k}}function Ae(ye,Me){return ye.target.closest(`.${Me}`)}return(ye,Me)=>(B(),Y("div",{ref_key:"viewportRef",ref:X,class:"vue-flow__viewport vue-flow__container"},[le(kx,{"is-selecting":me.value,"selection-key-pressed":z(d),class:ve({connecting:ie.value,dragging:z(A),draggable:z(f)===!0||Array.isArray(z(f))&&z(f).includes(0)})},{default:ht(()=>[le(Lx,null,{default:ht(()=>[Ue(ye.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Fx=["id"],zx=["id"],Vx=["id"],Hx={name:"A11yDescriptions",compatConfig:{MODE:3}},Ux=He({...Hx,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Re();return(r,s)=>(B(),Y(ue,null,[p("div",{id:`${z(Jd)}-${z(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+fe(z(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Fx),p("div",{id:`${z(Qd)}-${z(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,zx),z(n)?pe("",!0):(B(),Y("div",{key:0,id:`${z(s1)}-${z(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},fe(z(o)),9,Vx))],64))}});function jx(){const e=Re();Se(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function Gx(e,t,n){return n===de.Left?e-t:n===de.Right?e+t:e}function Yx(e,t,n){return n===de.Top?e-t:n===de.Bottom?e+t:e}const $l=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=de.Top,type:r}){return $e("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${r}`,cx:Gx(t,e,o),cy:Yx(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};$l.props=["radius","centerX","centerY","position","type"];$l.compatConfig={MODE:3};const Mu=$l,Kx=He({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:r,emits:s,nodesSelectionActive:i,noPanClassName:l,getEdgeTypes:a,removeSelectedEdges:c,findEdge:u,findNode:f,isValidConnection:g,multiSelectionActive:m,disableKeyboardA11y:N,elementsSelectable:y,edgesUpdatable:S,edgesFocusable:C,hooks:T}=Re(),v=se(()=>u(e.id)),{emit:w,on:A}=L1(v.value,s),R=_t(Bs),G=Nt(),j=xe(!1),V=xe(!1),X=xe(""),W=xe(null),$=xe("source"),Q=xe(null),M=Pe(()=>typeof v.value.selectable>"u"?y.value:v.value.selectable),K=Pe(()=>typeof v.value.updatable>"u"?S.value:v.value.updatable),L=Pe(()=>typeof v.value.focusable>"u"?C.value:v.value.focusable);Fn(D1,e.id),Fn(k1,Q);const D=se(()=>v.value.class instanceof Function?v.value.class(v.value):v.value.class),P=se(()=>v.value.style instanceof Function?v.value.style(v.value):v.value.style),d=se(()=>{const x=v.value.type||"default",_=R?.[`edge-${x}`];if(_)return _;let I=v.value.template??a.value[x];if(typeof I=="string"&&G){const O=Object.keys(G.appContext.components);O&&O.includes(x)&&(I=il(x,!1))}return I&&typeof I!="string"?I:(s.error(new Xe(Ye.EDGE_TYPE_MISSING,I)),!1)}),{handlePointerDown:h}=bf({nodeId:X,handleId:W,type:$,isValidConnection:g,edgeUpdaterType:$,onEdgeUpdate:he,onEdgeUpdateEnd:me});return()=>{const x=f(v.value.source),_=f(v.value.target),I="pathOptions"in v.value?v.value.pathOptions:{};if(!x&&!_)return s.error(new Xe(Ye.EDGE_SOURCE_TARGET_MISSING,v.value.id,v.value.source,v.value.target)),null;if(!x)return s.error(new Xe(Ye.EDGE_SOURCE_MISSING,v.value.id,v.value.source)),null;if(!_)return s.error(new Xe(Ye.EDGE_TARGET_MISSING,v.value.id,v.value.target)),null;if(!v.value||v.value.hidden||x.hidden||_.hidden)return null;let O;o.value===xn.Strict?O=x.handleBounds.source:O=[...x.handleBounds.source||[],...x.handleBounds.target||[]];const U=yu(O,v.value.sourceHandle);let H;o.value===xn.Strict?H=_.handleBounds.target:H=[..._.handleBounds.target||[],..._.handleBounds.source||[]];const F=yu(H,v.value.targetHandle),Z=U?.position||de.Bottom,q=F?.position||de.Top,{x:ee,y:re}=vo(x,U,Z),{x:we,y:Ne}=vo(_,F,q);return v.value.sourceX=ee,v.value.sourceY=re,v.value.targetX=we,v.value.targetY=Ne,$e("g",{ref:Q,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${d.value===!1?"default":v.value.type||"default"}`,l.value,D.value,{updating:j.value,selected:v.value.selected,animated:v.value.animated,inactive:!M.value&&!T.value.edgeClick.hasListeners()}],tabIndex:L.value?0:void 0,"aria-label":v.value.ariaLabel===null?void 0:v.value.ariaLabel??`Edge from ${v.value.source} to ${v.value.target}`,"aria-describedby":L.value?`${Qd}-${t}`:void 0,"aria-roledescription":"edge",role:L.value?"group":"img",...v.value.domAttributes,onClick:oe,onContextmenu:ce,onDblclick:Ce,onMouseenter:Ae,onMousemove:ye,onMouseleave:Me,onKeyDown:L.value?b:void 0},[V.value?null:$e(d.value===!1?a.value.default:d.value,{id:e.id,sourceNode:x,targetNode:_,source:v.value.source,target:v.value.target,type:v.value.type,updatable:K.value,selected:v.value.selected,animated:v.value.animated,label:v.value.label,labelStyle:v.value.labelStyle,labelShowBg:v.value.labelShowBg,labelBgStyle:v.value.labelBgStyle,labelBgPadding:v.value.labelBgPadding,labelBgBorderRadius:v.value.labelBgBorderRadius,data:v.value.data,events:{...v.value.events,...A},style:P.value,markerStart:`url('#${ur(v.value.markerStart,t)}')`,markerEnd:`url('#${ur(v.value.markerEnd,t)}')`,sourcePosition:Z,targetPosition:q,sourceX:ee,sourceY:re,targetX:we,targetY:Ne,sourceHandleId:v.value.sourceHandle,targetHandleId:v.value.targetHandle,interactionWidth:v.value.interactionWidth,...I}),[K.value==="source"||K.value===!0?[$e("g",{onMousedown:E,onMouseenter:J,onMouseout:ne},$e(Mu,{position:Z,centerX:ee,centerY:re,radius:r.value,type:"source","data-type":"source"}))]:null,K.value==="target"||K.value===!0?[$e("g",{onMousedown:k,onMouseenter:J,onMouseout:ne},$e(Mu,{position:q,centerX:we,centerY:Ne,radius:r.value,type:"target","data-type":"target"}))]:null]])};function J(){j.value=!0}function ne(){j.value=!1}function he(x,_){w.update({event:x,edge:v.value,connection:_})}function me(x){w.updateEnd({event:x,edge:v.value}),V.value=!1}function ie(x,_){x.button===0&&(V.value=!0,X.value=_?v.value.target:v.value.source,W.value=(_?v.value.targetHandle:v.value.sourceHandle)??null,$.value=_?"target":"source",w.updateStart({event:x,edge:v.value}),h(x))}function oe(x){var _;const I={event:x,edge:v.value};M.value&&(i.value=!1,v.value.selected&&m.value?(c([v.value]),(_=Q.value)==null||_.blur()):n([v.value])),w.click(I)}function ce(x){w.contextMenu({event:x,edge:v.value})}function Ce(x){w.doubleClick({event:x,edge:v.value})}function Ae(x){w.mouseEnter({event:x,edge:v.value})}function ye(x){w.mouseMove({event:x,edge:v.value})}function Me(x){w.mouseLeave({event:x,edge:v.value})}function E(x){ie(x,!0)}function k(x){ie(x,!1)}function b(x){var _;!N.value&&ef.includes(x.key)&&M.value&&(x.key==="Escape"?((_=Q.value)==null||_.blur(),c([u(e.id)])):n([u(e.id)]))}}}),Wx=Kx,Xx=He({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:r,connectionPosition:s,connectionLineType:i,connectionLineStyle:l,connectionLineOptions:a,connectionStatus:c,viewport:u,findNode:f}=Re(),g=(e=_t(Bs))==null?void 0:e["connection-line"],m=se(()=>{var T;return f((T=o.value)==null?void 0:T.nodeId)}),N=se(()=>{var T;return f((T=r.value)==null?void 0:T.nodeId)??null}),y=se(()=>({x:(s.value.x-u.value.x)/u.value.zoom,y:(s.value.y-u.value.y)/u.value.zoom})),S=se(()=>a.value.markerStart?`url(#${ur(a.value.markerStart,t)})`:""),C=se(()=>a.value.markerEnd?`url(#${ur(a.value.markerEnd,t)})`:"");return()=>{var T,v,w;if(!m.value||!o.value)return null;const A=o.value.id,R=o.value.type,G=m.value.handleBounds;let j=G?.[R]??[];if(n.value===xn.Loose){const P=G?.[R==="source"?"target":"source"]??[];j=[...j,...P]}if(!j)return null;const V=(A?j.find(P=>P.id===A):j[0])??null,X=V?.position??de.Top,{x:W,y:$}=vo(m.value,V,X);let Q=null;N.value&&(n.value===xn.Strict?Q=((T=N.value.handleBounds[R==="source"?"target":"source"])==null?void 0:T.find(P=>{var d;return P.id===((d=r.value)==null?void 0:d.id)}))||null:Q=((v=[...N.value.handleBounds.source??[],...N.value.handleBounds.target??[]])==null?void 0:v.find(P=>{var d;return P.id===((d=r.value)==null?void 0:d.id)}))||null);const M=((w=r.value)==null?void 0:w.position)??(X?Wi[X]:null);if(!X||!M)return null;const K=i.value??a.value.type??Mn.Bezier;let L="";const D={sourceX:W,sourceY:$,sourcePosition:X,targetX:y.value.x,targetY:y.value.y,targetPosition:M};return K===Mn.Bezier?[L]=Cf(D):K===Mn.Step?[L]=qi({...D,borderRadius:0}):K===Mn.SmoothStep?[L]=qi(D):K===Mn.SimpleBezier?[L]=Nf(D):L=`M${W},${$} ${y.value.x},${y.value.y}`,$e("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},$e("g",{class:"vue-flow__connection"},g?$e(g,{sourceX:W,sourceY:$,sourcePosition:X,targetX:y.value.x,targetY:y.value.y,targetPosition:M,sourceNode:m.value,sourceHandle:V,targetNode:N.value,targetHandle:Q,markerEnd:C.value,markerStart:S.value,connectionStatus:c.value}):$e("path",{d:L,class:[a.value.class,c.value,"vue-flow__connection-path"],style:{...l.value,...a.value.style},"marker-end":C.value,"marker-start":S.value})))}}}),qx=Xx,Zx=["id","markerWidth","markerHeight","markerUnits","orient"],Jx={name:"MarkerType",compatConfig:{MODE:3}},Qx=He({...Jx,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(B(),Y("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===z(Yt).ArrowClosed?(B(),Y("polyline",{key:0,style:Ze({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):pe("",!0),t.type===z(Yt).Arrow?(B(),Y("polyline",{key:1,style:Ze({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):pe("",!0)],8,Zx))}}),ew={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},tw={name:"MarkerDefinitions",compatConfig:{MODE:3}},nw=He({...tw,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:r}=Re(),s=se(()=>{const i=new Set,l=[],a=c=>{if(c){const u=ur(c,t);i.has(u)||(typeof c=="object"?l.push({...c,id:u,color:c.color||r.value}):l.push({id:u,color:r.value,type:c}),i.add(u))}};for(const c of[o.value.markerEnd,o.value.markerStart])a(c);for(const c of n.value)for(const u of[c.markerStart,c.markerEnd])a(u);return l.sort((c,u)=>c.id.localeCompare(u.id))});return(i,l)=>(B(),Y("svg",ew,[p("defs",null,[(B(!0),Y(ue,null,Ee(s.value,a=>(B(),Ve(Qx,{id:a.id,key:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,"stroke-width":a.strokeWidth,orient:a.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),ow={name:"Edges",compatConfig:{MODE:3}},rw=He({...ow,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=Re();return(r,s)=>(B(),Y(ue,null,[le(nw),(B(!0),Y(ue,null,Ee(z(n),i=>(B(),Y("svg",{key:i.id,class:"vue-flow__edges vue-flow__container",style:Ze({zIndex:z(w1)(i,z(t),z(o))})},[le(z(Wx),{id:i.id},null,8,["id"])],4))),128)),le(z(qx))],64))}}),sw=He({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:r,multiSelectionActive:s,emits:i,removeSelectedNodes:l,addSelectedNodes:a,updateNodeDimensions:c,onUpdateNodeInternals:u,getNodeTypes:f,nodeExtent:g,elevateNodesOnSelect:m,disableKeyboardA11y:N,ariaLiveMessage:y,snapToGrid:S,snapGrid:C,nodeDragThreshold:T,nodesDraggable:v,elementsSelectable:w,nodesConnectable:A,nodesFocusable:R,hooks:G}=Re(),j=xe(null);Fn(vf,j),Fn(mf,e.id);const V=_t(Bs),X=Nt(),W=wf(),{node:$,parentNode:Q}=xf(e.id),{emit:M,on:K}=z1($,i),L=Pe(()=>typeof $.draggable>"u"?v.value:$.draggable),D=Pe(()=>typeof $.selectable>"u"?w.value:$.selectable),P=Pe(()=>typeof $.connectable>"u"?A.value:$.connectable),d=Pe(()=>typeof $.focusable>"u"?R.value:$.focusable),h=se(()=>D.value||L.value||G.value.nodeClick.hasListeners()||G.value.nodeDoubleClick.hasListeners()||G.value.nodeMouseEnter.hasListeners()||G.value.nodeMouseMove.hasListeners()||G.value.nodeMouseLeave.hasListeners()),J=Pe(()=>!!$.dimensions.width&&!!$.dimensions.height),ne=se(()=>{const _=$.type||"default",I=V?.[`node-${_}`];if(I)return I;let O=$.template||f.value[_];if(typeof O=="string"&&X){const U=Object.keys(X.appContext.components);U&&U.includes(_)&&(O=il(_,!1))}return O&&typeof O!="string"?O:(i.error(new Xe(Ye.NODE_TYPE_MISSING,O)),!1)}),he=yf({id:e.id,el:j,disabled:()=>!L.value,selectable:D,dragHandle:()=>$.dragHandle,onStart(_){M.dragStart(_)},onDrag(_){M.drag(_)},onStop(_){M.dragStop(_)},onClick(_){b(_)}}),me=se(()=>$.class instanceof Function?$.class($):$.class),ie=se(()=>{const _=($.style instanceof Function?$.style($):$.style)||{},I=$.width instanceof Function?$.width($):$.width,O=$.height instanceof Function?$.height($):$.height;return!_.width&&I&&(_.width=typeof I=="string"?I:`${I}px`),!_.height&&O&&(_.height=typeof O=="string"?O:`${O}px`),_}),oe=Pe(()=>Number($.zIndex??ie.value.zIndex??0));return u(_=>{(_.includes(e.id)||!_.length)&&Ce()}),ct(()=>{Se(()=>$.hidden,(_=!1,I,O)=>{!_&&j.value&&(e.resizeObserver.observe(j.value),O(()=>{j.value&&e.resizeObserver.unobserve(j.value)}))},{immediate:!0,flush:"post"})}),Se([()=>$.type,()=>$.sourcePosition,()=>$.targetPosition],()=>{ut(()=>{c([{id:e.id,nodeElement:j.value,forceUpdate:!0}])})}),Se([()=>$.position.x,()=>$.position.y,()=>{var _;return(_=Q.value)==null?void 0:_.computedPosition.x},()=>{var _;return(_=Q.value)==null?void 0:_.computedPosition.y},()=>{var _;return(_=Q.value)==null?void 0:_.computedPosition.z},oe,()=>$.selected,()=>$.dimensions.height,()=>$.dimensions.width,()=>{var _;return(_=Q.value)==null?void 0:_.dimensions.height},()=>{var _;return(_=Q.value)==null?void 0:_.dimensions.width}],([_,I,O,U,H,F])=>{const Z={x:_,y:I,z:F+(m.value&&$.selected?1e3:0)};typeof O<"u"&&typeof U<"u"?$.computedPosition=g1({x:O,y:U,z:H},Z):$.computedPosition=Z},{flush:"post",immediate:!0}),Se([()=>$.extent,g],([_,I],[O,U])=>{(_!==O||I!==U)&&ce()}),$.extent==="parent"||typeof $.extent=="object"&&"range"in $.extent&&$.extent.range==="parent"?Bi(()=>J).toBe(!0).then(ce):ce(),()=>$.hidden?null:$e("div",{ref:j,"data-id":$.id,class:["vue-flow__node",`vue-flow__node-${ne.value===!1?"default":$.type||"default"}`,{[n.value]:L.value,dragging:he?.value,draggable:L.value,selected:$.selected,selectable:D.value,parent:$.isParent},me.value],style:{visibility:J.value?"visible":"hidden",zIndex:$.computedPosition.z??oe.value,transform:`translate(${$.computedPosition.x}px,${$.computedPosition.y}px)`,pointerEvents:h.value?"all":"none",...ie.value},tabIndex:d.value?0:void 0,role:d.value?"group":void 0,"aria-describedby":N.value?void 0:`${Jd}-${t}`,"aria-label":$.ariaLabel,"aria-roledescription":"node",...$.domAttributes,onMouseenter:Ae,onMousemove:ye,onMouseleave:Me,onContextmenu:E,onClick:b,onDblclick:k,onKeydown:x},[$e(ne.value===!1?f.value.default:ne.value,{id:$.id,type:$.type,data:$.data,events:{...$.events,...K},selected:$.selected,resizing:$.resizing,dragging:he.value,connectable:P.value,position:$.computedPosition,dimensions:$.dimensions,isValidTargetPos:$.isValidTargetPos,isValidSourcePos:$.isValidSourcePos,parent:$.parentNode,parentNodeId:$.parentNode,zIndex:$.computedPosition.z??oe.value,targetPosition:$.targetPosition,sourcePosition:$.sourcePosition,label:$.label,dragHandle:$.dragHandle,onUpdateNodeInternals:Ce})]);function ce(){const _=$.computedPosition,{computedPosition:I,position:O}=Il($,S.value?Rs(_,C.value):_,i.error,g.value,Q.value);($.computedPosition.x!==I.x||$.computedPosition.y!==I.y)&&($.computedPosition={...$.computedPosition,...I}),($.position.x!==O.x||$.position.y!==O.y)&&($.position=O)}function Ce(){j.value&&c([{id:e.id,nodeElement:j.value,forceUpdate:!0}])}function Ae(_){he?.value||M.mouseEnter({event:_,node:$})}function ye(_){he?.value||M.mouseMove({event:_,node:$})}function Me(_){he?.value||M.mouseLeave({event:_,node:$})}function E(_){return M.contextMenu({event:_,node:$})}function k(_){return M.doubleClick({event:_,node:$})}function b(_){D.value&&(!o.value||!L.value||T.value>0)&&Xi($,s.value,a,l,r,!1,j.value),M.click({event:_,node:$})}function x(_){if(!(Ki(_)||N.value))if(ef.includes(_.key)&&D.value){const I=_.key==="Escape";Xi($,s.value,a,l,r,I,j.value)}else L.value&&$.selected&&lo[_.key]&&(_.preventDefault(),y.value=`Moved selected node ${_.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~$.position.x}, y: ${~~$.position.y}`,W({x:lo[_.key].x,y:lo[_.key].y},_.shiftKey))}}}),iw=sw;function lw(e={includeHiddenNodes:!1}){const{nodes:t}=Re();return se(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&(n?.handleBounds===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const aw={class:"vue-flow__nodes vue-flow__container"},uw={name:"Nodes",compatConfig:{MODE:3}},cw=He({...uw,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=Re(),r=lw(),s=xe();return Se(r,i=>{i&&ut(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),ct(()=>{s.value=new ResizeObserver(i=>{const l=i.map(a=>({id:a.target.getAttribute("data-id"),nodeElement:a.target,forceUpdate:!0}));ut(()=>n(l))})}),Ns(()=>{var i;return(i=s.value)==null?void 0:i.disconnect()}),(i,l)=>(B(),Y("div",aw,[s.value?(B(!0),Y(ue,{key:0},Ee(z(t),(a,c,u,f)=>{const g=[a.id];if(f&&f.key===a.id&&Ih(f,g))return f;const m=(B(),Ve(z(iw),{id:a.id,key:a.id,"resize-observer":s.value},null,8,["id","resize-observer"]));return m.memo=g,m},l,0),128)):pe("",!0)]))}});function dw(){const{emits:e}=Re();ct(()=>{if(gf()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new Xe(Ye.MISSING_STYLES))}})}const fw=p("div",{class:"vue-flow__edge-labels"},null,-1),pw={name:"VueFlow",compatConfig:{MODE:3}},hw=He({...pw,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,r=Vp(),s=li(o,"modelValue",n),i=li(o,"nodes",n),l=li(o,"edges",n),a=Re(o),c=j1({modelValue:s,nodes:i,edges:l},o,a);return Y1(n,a.hooks),jx(),dw(),Fn(Bs,r),Sn(c),t(a),(u,f)=>(B(),Y("div",{ref:z(a).vueFlowRef,class:"vue-flow"},[le(Bx,null,{default:ht(()=>[le(rw),fw,le(cw),Ue(u.$slots,"zoom-pane")]),_:3}),Ue(u.$slots,"default"),le(Ux)],512))}}),gw={name:"Panel",compatConfig:{MODE:3}},mw=He({...gw,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Re(),o=se(()=>`${t.position}`.split("-"));return(r,s)=>(B(),Y("div",{class:ve(["vue-flow__panel",o.value]),style:Ze({pointerEvents:z(n)?"none":"all"})},[Ue(r.$slots,"default")],6))}});var Jt=(e=>(e.Lines="lines",e.Dots="dots",e))(Jt||{});const Tf=function({dimensions:e,size:t,color:n}){return $e("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},$f=function({radius:e,color:t}){return $e("circle",{cx:e,cy:e,r:e,fill:t})};Jt.Lines+"",Jt.Dots+"";const vw={[Jt.Dots]:"#81818a",[Jt.Lines]:"#eee"},yw=["id","x","y","width","height","patternTransform"],bw={key:2,height:"100",width:"100"},xw=["fill"],ww=["x","y","fill"],_w={name:"Background",compatConfig:{MODE:3}},Sw=He({..._w,props:{id:{},variant:{default:()=>Jt.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(e){const{id:t,viewport:n}=Re(),o=se(()=>{const i=n.value.zoom,[l,a]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],c=[l*i||1,a*i||1],u=e.size*i,[f,g]=Array.isArray(e.offset)?e.offset:[e.offset,e.offset],m=[f*i||1+c[0]/2,g*i||1+c[1]/2];return{scaledGap:c,offset:m,size:u}}),r=Pe(()=>`pattern-${t}${e.id?`-${e.id}`:""}`),s=Pe(()=>e.color||e.patternColor||vw[e.variant||Jt.Dots]);return(i,l)=>(B(),Y("svg",{class:"vue-flow__background vue-flow__container",style:Ze({height:`${i.height>100?100:i.height}%`,width:`${i.width>100?100:i.width}%`})},[Ue(i.$slots,"pattern-container",{id:r.value},()=>[p("pattern",{id:r.value,x:z(n).x%o.value.scaledGap[0],y:z(n).y%o.value.scaledGap[1],width:o.value.scaledGap[0],height:o.value.scaledGap[1],patternTransform:`translate(-${o.value.offset[0]},-${o.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[Ue(i.$slots,"pattern",{},()=>[i.variant===z(Jt).Lines?(B(),Ve(z(Tf),{key:0,size:i.lineWidth,color:s.value,dimensions:o.value.scaledGap},null,8,["size","color","dimensions"])):i.variant===z(Jt).Dots?(B(),Ve(z($f),{key:1,color:s.value,radius:o.value.size/2},null,8,["color","radius"])):pe("",!0),i.bgColor?(B(),Y("svg",bw,[p("rect",{width:"100%",height:"100%",fill:i.bgColor},null,8,xw)])):pe("",!0)])],8,yw)]),p("rect",{x:i.x,y:i.y,width:"100%",height:"100%",fill:`url(#${r.value})`},null,8,ww),Ue(i.$slots,"default",{id:r.value})],4))}}),Ew={name:"ControlButton",compatConfig:{MODE:3}},Cw=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},Nw={type:"button",class:"vue-flow__controls-button"};function Iw(e,t,n,o,r,s){return B(),Y("button",Nw,[Ue(e.$slots,"default")])}const Or=Cw(Ew,[["render",Iw]]),Tw={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},$w=p("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),Mw=[$w];function Aw(e,t){return B(),Y("svg",Tw,Mw)}const Ow={render:Aw},Dw={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},kw=p("path",{d:"M0 0h32v4.2H0z"},null,-1),Pw=[kw];function Lw(e,t){return B(),Y("svg",Dw,Pw)}const Rw={render:Lw},Bw={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Fw=p("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),zw=[Fw];function Vw(e,t){return B(),Y("svg",Bw,zw)}const Hw={render:Vw},Uw={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},jw=p("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),Gw=[jw];function Yw(e,t){return B(),Y("svg",Uw,Gw)}const Kw={render:Yw},Ww={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Xw=p("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),qw=[Xw];function Zw(e,t){return B(),Y("svg",Ww,qw)}const Jw={render:Zw},Qw={name:"Controls",compatConfig:{MODE:3}},e_=He({...Qw,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>Zd.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:o,elementsSelectable:r,setInteractive:s,zoomIn:i,zoomOut:l,fitView:a,viewport:c,minZoom:u,maxZoom:f}=Re(),g=Pe(()=>n.value||o.value||r.value),m=Pe(()=>c.value.zoom<=u.value),N=Pe(()=>c.value.zoom>=f.value);function y(){i(),t("zoomIn")}function S(){l(),t("zoomOut")}function C(){a(e.fitViewParams),t("fitView")}function T(){s(!g.value),t("interactionChange",!g.value)}return(v,w)=>(B(),Ve(z(mw),{class:"vue-flow__controls",position:v.position},{default:ht(()=>[Ue(v.$slots,"top"),v.showZoom?(B(),Y(ue,{key:0},[Ue(v.$slots,"control-zoom-in",{},()=>[le(Or,{class:"vue-flow__controls-zoomin",disabled:N.value,onClick:y},{default:ht(()=>[Ue(v.$slots,"icon-zoom-in",{},()=>[(B(),Ve(Jn(z(Ow))))])]),_:3},8,["disabled"])]),Ue(v.$slots,"control-zoom-out",{},()=>[le(Or,{class:"vue-flow__controls-zoomout",disabled:m.value,onClick:S},{default:ht(()=>[Ue(v.$slots,"icon-zoom-out",{},()=>[(B(),Ve(Jn(z(Rw))))])]),_:3},8,["disabled"])])],64)):pe("",!0),v.showFitView?Ue(v.$slots,"control-fit-view",{key:1},()=>[le(Or,{class:"vue-flow__controls-fitview",onClick:C},{default:ht(()=>[Ue(v.$slots,"icon-fit-view",{},()=>[(B(),Ve(Jn(z(Hw))))])]),_:3})]):pe("",!0),v.showInteractive?Ue(v.$slots,"control-interactive",{key:2},()=>[v.showInteractive?(B(),Ve(Or,{key:0,class:"vue-flow__controls-interactive",onClick:T},{default:ht(()=>[g.value?Ue(v.$slots,"icon-unlock",{key:0},()=>[(B(),Ve(Jn(z(Jw))))]):pe("",!0),g.value?pe("",!0):Ue(v.$slots,"icon-lock",{key:1},()=>[(B(),Ve(Jn(z(Kw))))])]),_:3})):pe("",!0)]):pe("",!0),Ue(v.$slots,"default")]),_:3},8,["position"]))}}),Ml=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},t_={class:"nodrag"},n_=["draggable"],o_={class:"text-gray-500/80 group-hover/field:text-gray-300 transition-colors cursor-grab active:cursor-grabbing",title:"Drag to reorder field"},r_={key:0,class:"text-xs text-yellow-500 font-mono"},s_={key:1,class:"flex-1 mr-2"},i_={key:2,class:"text-[13px] text-gray-100 truncate select-none"},l_={key:3,class:"text-[10px] text-red-500 font-bold"},a_={class:"flex items-center gap-2 ml-2"},u_={key:0,class:"relative"},Dr=16,c_={__name:"FieldItem",props:{field:Object,collectionId:String,parentId:{type:String,default:null},index:{type:Number,default:0},isLast:{type:Boolean,default:!1},level:{type:Number,default:0},ancestorLastFlags:{type:Array,default:()=>[]}},setup(e){const t=e,n=En(),o=se(()=>n.selectedItemId===t.field.id),r=se(()=>`${t.level*Dr+16}px`),s=se(()=>{const A=String(t.field?.type||"").trim().toUpperCase(),R=new Set(["NUMBER","INT","INTEGER","BIGINT","TINYINT","SMALLINT","DECIMAL","FLOAT","DOUBLE","REAL","DOUBLE PRECISION","SERIAL","BIGSERIAL"]),G=new Set(["STRING","VARCHAR","TEXT","CHAR","LONGTEXT"]),j=new Set(["DATE","DATETIME","TIMESTAMP","TIME","YEAR","INTERVAL"]),V=new Set(["BOOLEAN"]),X=new Set(["ARRAY","OBJECT","MAP","MIXED","JSON","JSONB","XML"]),W=new Set(["BUFFER","BLOB","BYTEA"]),$=new Set(["OBJECTID","UUID"]),Q=new Set(["ENUM"]);return $.has(A)?"text-amber-400":G.has(A)?"text-blue-400":R.has(A)?"text-violet-400":j.has(A)?"text-emerald-400":V.has(A)?"text-pink-400":X.has(A)?"text-cyan-300":W.has(A)?"text-orange-300":Q.has(A)?"text-fuchsia-300":"text-gray-300"}),i=xe(!1),l=xe(""),a=xe(null),c=xe(!1),u=xe(!1),f=()=>{i.value=!0,l.value=t.field.name,setTimeout(()=>{a.value?.focus()},0)},g=()=>{l.value.trim()&&n.updateFieldProps(t.collectionId,t.field.id,{name:l.value.trim()}),i.value=!1},m=()=>{n.selectItem(t.field.id,"field",t.collectionId)},N=()=>{const A=`f-${Date.now()}`,R=xd(n.activeDatabaseType);n.addChildField(t.collectionId,t.field.id,{id:A,name:"childField",type:R}),n.selectItem(A,"field",t.collectionId)},y=A=>{if(u.value){A.preventDefault();return}A.dataTransfer.effectAllowed="move",A.dataTransfer.setData("application/json",JSON.stringify({fieldId:t.field.id,index:t.index,parentId:t.parentId,collectionId:t.collectionId})),A.stopPropagation()},S=A=>{A.preventDefault(),A.dataTransfer.dropEffect="move",c.value=!0},C=A=>{c.value=!1},T=A=>{A.preventDefault(),A.stopPropagation(),c.value=!1;try{const R=JSON.parse(A.dataTransfer.getData("application/json"));R.collectionId===t.collectionId&&R.parentId===t.parentId&&R.index!==t.index&&n.reorderField(t.collectionId,t.parentId,R.index,t.index)}catch(R){console.error("Drop error:",R)}},v=()=>{u.value=!0},w=()=>{requestAnimationFrame(()=>{u.value=!1})};return ct(()=>{window.addEventListener("mouseup",w),window.addEventListener("touchend",w)}),Sn(()=>{window.removeEventListener("mouseup",w),window.removeEventListener("touchend",w)}),(A,R)=>{const G=il("FieldItem",!0);return B(),Y("div",t_,[p("div",{onClick:dt(m,["stop"]),class:ve(["relative group/field flex items-center justify-between text-sm py-1.5 pr-2.5 rounded cursor-pointer border-2 transition-all duration-150",[o.value?"bg-[#2a2a2a] border-emerald-500":"border-transparent hover:bg-[#2a2a2a]",c.value?"border-t-emerald-500 bg-[#2a2a2a]/50 scale-[1.02]":""]]),style:Ze({paddingLeft:r.value}),draggable:!u.value,onDragstart:y,onDragover:S,onDragleave:C,onDrop:T},[(B(!0),Y(ue,null,Ee(e.ancestorLastFlags,(j,V)=>Bn((B(),Y("div",{key:V,class:"absolute top-0 bottom-0 w-px bg-[#404040]",style:Ze({left:`${V*Dr+22}px`})},null,4)),[[qc,!j]])),128)),e.level>0?(B(),Y(ue,{key:0},[p("div",{class:"absolute w-px bg-[#404040]",style:Ze({left:`${(e.level-1)*Dr+22}px`,top:"0",height:e.isLast?"50%":"100%"})},null,4),p("div",{class:"absolute h-px bg-[#404040]",style:Ze({left:`${(e.level-1)*Dr+22}px`,top:"50%",width:"8px"})},null,4)],64)):pe("",!0),le(z(yo),{type:"target",position:z(de).Left,id:e.field.id,onMousedown:dt(v,["stop"]),onTouchstart:dt(v,["stop"]),class:"!w-2 !h-2 !bg-gray-500 !-left-2.5 opacity-0 group-hover/field:opacity-100 transition-opacity"},null,8,["position","id"]),p("div",{class:"flex items-center gap-2 flex-1 min-w-0",onDblclick:dt(f,["stop"])},[p("span",o_,[le(z(tm),{size:13})]),e.field.key?(B(),Y("span",r_,"PK")):pe("",!0),i.value?(B(),Y("div",s_,[Bn(p("input",{ref_key:"nameInput",ref:a,"onUpdate:modelValue":R[0]||(R[0]=j=>l.value=j),onBlur:g,onKeydown:Ms(g,["enter"]),onClick:R[1]||(R[1]=dt(()=>{},["stop"])),class:"w-full bg-[#1e1e1e] text-gray-200 font-bold px-1 py-0.5 rounded border border-emerald-500 focus:outline-none text-xs"},null,544),[[pl,l.value]])])):(B(),Y("span",i_,fe(e.field.name),1)),e.field.required?(B(),Y("span",l_,"*")):pe("",!0)],32),p("div",a_,[p("span",{class:ve(["w-[82px] text-right text-[11px] font-semibold font-mono uppercase tracking-wider",s.value])},fe(e.field.type),3),e.field.type==="Object"||e.field.type==="Array"?(B(),Y("button",{key:0,onClick:dt(N,["stop"]),class:"p-0.5 rounded hover:bg-emerald-600/20 text-gray-400 hover:text-emerald-400 opacity-0 group-hover/field:opacity-100 transition-opacity"},[le(z(ts),{size:13})])):pe("",!0)]),le(z(yo),{type:"source",position:z(de).Right,id:e.field.id,onMousedown:dt(v,["stop"]),onTouchstart:dt(v,["stop"]),class:"!w-2 !h-2 !bg-emerald-500 !-right-2.5 opacity-0 group-hover/field:opacity-100 transition-opacity"},null,8,["position","id"])],46,n_),e.field.children&&e.field.children.length>0?(B(),Y("div",u_,[le(fl,{name:"field-list"},{default:ht(()=>[(B(!0),Y(ue,null,Ee(e.field.children,(j,V)=>(B(),Ve(G,{key:j.id,field:j,collectionId:e.collectionId,parentId:e.field.id,index:V,isLast:V===e.field.children.length-1,level:e.level+1,ancestorLastFlags:[...e.ancestorLastFlags,e.isLast]},null,8,["field","collectionId","parentId","index","isLast","level","ancestorLastFlags"]))),128))]),_:1})])):pe("",!0)])}}},d_=Ml(c_,[["__scopeId","data-v-a677c2d1"]]),f_={class:"flex items-center gap-2 min-w-0 flex-1 mr-2"},p_={class:"w-6 h-6 rounded-md bg-emerald-500/15 border border-emerald-500/30 flex items-center justify-center text-emerald-400"},h_={key:0,class:"flex-1 min-w-0"},g_={key:1,class:"min-w-0 flex-1"},m_={class:"font-bold text-emerald-300 truncate block leading-tight select-none"},v_={class:"text-[10px] text-gray-500"},y_={key:0,class:"flex gap-1"},b_={class:"p-1 rounded text-gray-500 hover:text-white hover:bg-gray-700/70 transition-colors"},x_={class:"px-2.5 py-2.5 space-y-1.5 nodrag bg-[#1a1a1f]"},w_={class:"p-2 border-t border-gray-700/80 bg-[#212127]"},__={__name:"CollectionNode",props:{data:{type:Object,required:!0},id:{type:String,required:!0},selected:{type:Boolean,default:!1}},setup(e){const t=e,n=En(),{updateNodeInternals:o,findNode:r,addSelectedNodes:s,removeSelectedNodes:i}=Re(),l=xe(!1),a=xe(""),c=xe(null);let u=null;const f=()=>{l.value=!0,a.value=t.data.label,setTimeout(()=>{c.value?.focus()},0)},g=()=>{a.value.trim()&&n.updateCollectionProps(t.id,{label:a.value.trim()}),l.value=!1},m=()=>{const C=new Set(n.activeCollections.filter(w=>w.selected).map(w=>w.id)),T=[],v=[];n.activeCollections.forEach(w=>{const A=r(w.id);if(A){if(C.has(w.id)){A.selected||T.push(A);return}A.selected&&v.push(A)}}),v.length>0&&i(v),T.length>0&&s(T)},N=C=>{const T=C.shiftKey||C.metaKey||C.ctrlKey;if(r(t.id)){if(T){const w=n.activeCollections.filter(R=>R.selected).length;if(!!n.activeCollections.find(R=>R.id===t.id)?.selected&&w===1){n.selectItem(t.id,"collection"),m();return}n.setCollectionSelection(t.id,!0),m();return}n.setCollectionSelection(t.id,!1),m()}},y=()=>{const C=`f-${Date.now()}`,T=xd(n.activeDatabaseType);n.addField(t.id,{id:C,name:"newField",type:T}),n.selectItem(C,"field",t.id)},S=()=>{u&&(cancelAnimationFrame(u),u=null);const C=180,T=performance.now(),v=()=>{o([t.id]),performance.now()-T<C?u=requestAnimationFrame(v):u=null};u=requestAnimationFrame(v)};return Se(()=>t.data.fields,async()=>{await ut(),S()},{deep:!0}),Sn(()=>{u&&cancelAnimationFrame(u)}),(C,T)=>(B(),Y("div",{onClick:dt(N,["stop"]),class:ve(["min-w-[276px] bg-gradient-to-b from-[#1f1f23] to-[#17171a] rounded-xl border shadow-[0_8px_28px_rgba(0,0,0,0.35)] overflow-hidden transition-all duration-200 group",e.selected||z(n).selectedItemId===e.id&&z(n).selectedItemType==="collection"?"border-emerald-400 ring-1 ring-emerald-400/90 shadow-[0_8px_28px_rgba(16,185,129,0.16)]":"border-gray-700/90 hover:border-gray-500"])},[T[2]||(T[2]=p("div",{class:"h-0.5 bg-gradient-to-r from-emerald-400/80 via-cyan-400/70 to-blue-400/60"},null,-1)),p("div",{class:"px-3 py-2 bg-[#27272d] border-b border-gray-700/80 flex justify-between items-center handle drag-handle cursor-grab active:cursor-grabbing",onDblclick:dt(f,["stop"])},[p("div",f_,[p("div",p_,[le(z(cd),{size:13})]),l.value?(B(),Y("div",h_,[Bn(p("input",{ref_key:"titleInput",ref:c,"onUpdate:modelValue":T[0]||(T[0]=v=>a.value=v),onBlur:g,onKeydown:Ms(g,["enter"]),class:"w-full bg-[#1e1e1e] text-emerald-300 font-bold px-2 py-1 rounded border border-emerald-500 focus:outline-none text-sm"},null,544),[[pl,a.value]])])):(B(),Y("div",g_,[p("span",m_,fe(e.data.label),1),p("span",v_,fe(e.data.fields.length)+" fields",1)]))]),l.value?pe("",!0):(B(),Y("div",y_,[p("button",b_,[le(z(em),{size:14})])]))],32),p("div",x_,[le(fl,{name:"field-list"},{default:ht(()=>[(B(!0),Y(ue,null,Ee(e.data.fields,(v,w)=>(B(),Ve(d_,{key:v.id,field:v,collectionId:e.id,parentId:null,index:w,isLast:w===e.data.fields.length-1,level:0},null,8,["field","collectionId","index","isLast"]))),128))]),_:1})]),p("div",w_,[p("button",{onClick:dt(y,["stop"]),class:"w-full flex items-center justify-center gap-1 py-1.5 text-xs font-medium text-gray-300 hover:text-emerald-200 bg-[#2a2a33] hover:bg-[#30303a] border border-gray-600/60 rounded-md transition-colors"},[le(z(ts),{size:14}),T[1]||(T[1]=We(" Add Field ",-1))])])],2))}},S_=Ml(__,[["__scopeId","data-v-5d8c1a09"]]),E_={key:0,class:"px-2 py-1 text-xs font-bold text-gray-500 uppercase border-b border-gray-700 mb-1"},C_={key:1,class:"px-2 py-1 text-xs font-bold text-gray-500 uppercase border-b border-gray-700 mb-1"},N_={key:2,class:"px-2 py-1 text-xs font-bold text-gray-500 uppercase border-b border-gray-700 mb-1"},I_={__name:"ContextMenu",props:{x:{type:Number,required:!0},y:{type:Number,required:!0},type:{type:String,required:!0},id:{type:String,default:null}},emits:["close","delete","duplicate"],setup(e,{emit:t}){const n=t,o=xe(null),r=En(),s=se(()=>Cn(r.activeDatabaseType)),i=l=>{o.value&&!o.value.contains(l.target)&&n("close")};return ct(()=>{console.log("[ContextMenu] Component Mounted"),setTimeout(()=>{console.log("[ContextMenu] Adding global listeners"),document.addEventListener("click",i),document.addEventListener("contextmenu",i)},100)}),Sn(()=>{console.log("[ContextMenu] Component Unmounted"),document.removeEventListener("click",i),document.removeEventListener("contextmenu",i)}),(l,a)=>(B(),Ve(Tp,{to:"body"},[(B(),Y("div",{key:0,ref_key:"menuRef",ref:o,class:"fixed z-[9999] bg-[#1e1e1e] border border-gray-700 rounded-lg shadow-xl py-1 w-48 text-sm",style:Ze({top:`${e.y}px`,left:`${e.x}px`})},[e.type==="collection"?(B(),Y("div",E_,fe(s.value.singular)+" Actions ",1)):e.type==="edge"?(B(),Y("div",C_," Relation Actions ")):e.type==="canvas"?(B(),Y("div",N_," Canvas Actions ")):pe("",!0),e.type==="canvas"?(B(),Y("button",{key:3,onClick:a[0]||(a[0]=c=>l.$emit("create")),class:"w-full text-left px-3 py-2 hover:bg-[#2a2a2a] text-emerald-400 hover:text-emerald-300 flex items-center gap-2 transition-colors"},[le(z(ud),{size:14}),We(" Create "+fe(s.value.singular),1)])):pe("",!0),e.type!=="canvas"?(B(),Y("button",{key:4,onClick:a[1]||(a[1]=c=>l.$emit("delete",e.id)),class:"w-full text-left px-3 py-2 hover:bg-red-900/30 text-red-400 hover:text-red-300 flex items-center gap-2 transition-colors"},[le(z(kn),{size:14}),a[2]||(a[2]=We(" Delete ",-1))])):pe("",!0)],4))]))}},T_={class:"relative h-full w-full bg-[#1a1a1a]"},$_="#64748b",M_={__name:"DiagramCanvas",setup(e){const t=En(),{onConnect:n,addEdges:o,onPaneClick:r,onEdgeClick:s,onNodeContextMenu:i,onEdgeContextMenu:l,onPaneContextMenu:a,project:c,getSelectedNodes:u,getSelectedEdges:f,findEdge:g,addSelectedEdges:m,removeSelectedEdges:N}=Re(),y={collection:bn(S_)},S=se({get:()=>t.activeCollections,set:D=>{const P=t.activeDatabaseId,d=t.collections.filter(J=>J.databaseId!==P),h=(D||[]).map(J=>J?.databaseId===P?J:{...J,databaseId:P});t.collections=[...d,...h]}}),C=(D=[])=>{const P=t.activeDatabaseId,d=new Set(t.activeCollections.map(h=>h.id));return(D||[]).filter(h=>h&&h.source&&h.target&&h.sourceHandle&&h.targetHandle).filter(h=>d.has(h.source)&&d.has(h.target)).filter(h=>j(h.source,h.sourceHandle)).filter(h=>j(h.target,h.targetHandle)).map(h=>h?.databaseId===P?h:{...h,databaseId:P})},T=se({get:()=>t.activeEdges,set:D=>{const P=t.activeDatabaseId,d=t.edges.filter(J=>J.databaseId!==P),h=C(D);t.edges=[...d,...h]}}),v={id:"#fbbf24",string:"#60a5fa",number:"#a78bfa",date:"#34d399",boolean:"#f472b6",json:"#67e8f9",binary:"#fdba74",enum:"#e879f9",default:"#64748b"},w={ONE_TO_ONE:"one_to_one",ONE_TO_MANY:"one_to_many",MANY_TO_MANY:"many_to_many"},A=(D,P)=>{for(const d of D||[]){if(d.id===P)return d;if(d.children?.length){const h=A(d.children,P);if(h)return h}}return null},R=(D,P)=>{const d=t.collections.find(J=>J.id===D);return!d||!P?null:A(d.data?.fields||[],P)?.type||null},G=D=>{const P=String(D||"").trim().toUpperCase(),d=new Set(["NUMBER","INT","INTEGER","BIGINT","TINYINT","SMALLINT","DECIMAL","FLOAT","DOUBLE","REAL","DOUBLE PRECISION","SERIAL","BIGSERIAL"]),h=new Set(["STRING","VARCHAR","TEXT","CHAR","LONGTEXT"]),J=new Set(["DATE","DATETIME","TIMESTAMP","TIME","YEAR","INTERVAL"]),ne=new Set(["BOOLEAN"]),he=new Set(["ARRAY","OBJECT","MAP","MIXED","JSON","JSONB","XML"]),me=new Set(["BUFFER","BLOB","BYTEA"]),ie=new Set(["OBJECTID","UUID"]),oe=new Set(["ENUM"]);return ie.has(P)?v.id:h.has(P)?v.string:d.has(P)?v.number:J.has(P)?v.date:ne.has(P)?v.boolean:he.has(P)?v.json:me.has(P)?v.binary:oe.has(P)?v.enum:v.default},j=(D,P)=>P?!!R(D,P):!1,V=D=>{const P=R(D.source,D.sourceHandle),d=G(P)||$_,h=D.relationType||w.ONE_TO_MANY;return h===w.ONE_TO_ONE?{label:"1-1",style:{stroke:d,strokeWidth:2,strokeDasharray:"0"},markerStart:{type:Yt.Arrow,color:d,width:14,height:14},markerEnd:{type:Yt.Arrow,color:d,width:14,height:14}}:h===w.MANY_TO_MANY?{label:"N-N",style:{stroke:d,strokeWidth:2,strokeDasharray:"3 3"},markerStart:{type:Yt.ArrowClosed,color:d,width:18,height:18},markerEnd:{type:Yt.ArrowClosed,color:d,width:18,height:18}}:{label:"1-N",style:{stroke:d,strokeWidth:2,strokeDasharray:"6 4"},markerStart:{type:Yt.Arrow,color:d,width:14,height:14},markerEnd:{type:Yt.ArrowClosed,color:d,width:18,height:18}}},X=()=>{t.edges.forEach(D=>{const P=V(D),d=P.style,h=D.style||{};(h.stroke!==d.stroke||h.strokeWidth!==d.strokeWidth||h.strokeDasharray!==d.strokeDasharray)&&(D.style={...h,...d}),D.label!==P.label&&(D.label=P.label),(D.labelStyle?.color!=="#e5e7eb"||D.labelStyle?.fontSize!==11||D.labelStyle?.fontWeight!==700)&&(D.labelStyle={color:"#e5e7eb",fontSize:11,fontWeight:700}),(D.labelBgStyle?.fill!=="#1f2937"||D.labelBgStyle?.fillOpacity!==.95)&&(D.labelBgStyle={fill:"#1f2937",fillOpacity:.95}),(D.labelBgPadding?.[0]!==4||D.labelBgPadding?.[1]!==2)&&(D.labelBgPadding=[4,2]);const ne=D.markerStart?.type||null,he=D.markerEnd?.type||null;P.markerStart?(ne!==P.markerStart.type||D.markerStart?.color!==P.markerStart.color)&&(D.markerStart=P.markerStart):D.markerStart&&(D.markerStart=void 0),(he!==P.markerEnd.type||D.markerEnd?.color!==P.markerEnd.color)&&(D.markerEnd=P.markerEnd),D.animated!==!1&&(D.animated=!1)})},W=xe({visible:!1,x:0,y:0,type:null,id:null}),$=xe({id:null,ts:0}),Q=(D,P,d)=>{D.preventDefault(),D.stopPropagation(),W.value={visible:!0,x:D.clientX,y:D.clientY,type:P,id:d}},M=()=>{W.value.visible=!1},K=(D,P)=>{if(D==="delete")W.value.type==="collection"?t.removeCollection(P):W.value.type==="edge"&&t.removeEdge(P);else if(D==="create"){const{x:d,y:h}=c({x:W.value.x,y:W.value.y}),J=`col-${Date.now()}`,he={...yl(t.activeDatabaseType).getDefaultField(),id:`f-${Date.now()}-1`},me=bd(t.activeDatabaseType,t.activeCollections.map(oe=>oe?.data?.label)),ie={id:J,type:"collection",position:{x:d,y:h},data:{label:me,fields:[he]}};t.addCollection(ie)}M()};n(D=>{!D.source||!D.target||!D.sourceHandle||!D.targetHandle||j(D.source,D.sourceHandle)&&j(D.target,D.targetHandle)&&o([{...D,databaseId:t.activeDatabaseId,relationType:w.ONE_TO_MANY,onDelete:"",onUpdate:"",constraintName:"",animated:!1}])}),r(()=>{t.clearSelections(),M()}),s(D=>{if(D.event.shiftKey||D.event.metaKey||D.event.ctrlKey){const J=g(D.edge.id);if(J){const ne=f.value.some(me=>me.id===J.id),he=f.value.length;if(ne&&he===1){t.selectItem(J.id,"edge"),M();return}ne?N([J]):m([J])}M();return}const d=Date.now(),h=$.value.id===D.edge.id&&d-$.value.ts<320;if($.value={id:D.edge.id,ts:d},h){const J=D.edge.relationType||w.ONE_TO_MANY,ne=J===w.ONE_TO_MANY?w.ONE_TO_ONE:J===w.ONE_TO_ONE?w.MANY_TO_MANY:w.ONE_TO_MANY;t.updateEdgeProps(D.edge.id,{relationType:ne})}t.selectItem(D.edge.id,"edge"),M()}),i(D=>{Q(D.event,"collection",D.node.id)}),l(D=>{Q(D.event,"edge",D.edge.id)}),a(D=>{Q(D,"canvas",null)}),Se([u,f],([D,P])=>{if(t.selectedItemType==="field"){if(t.activeCollections.some(J=>J.id===t.selectedCollectionId))return;t.selectItem(null,null,null);return}if(D.length+P.length!==1){t.selectItem(null,null,null);return}if(D.length===1){t.selectItem(D[0].id,"collection");return}P.length===1&&t.selectItem(P[0].id,"edge")},{deep:!0}),Se(()=>t.collections,()=>{t.pruneInvalidEdges(t.activeDatabaseId),X()},{deep:!0}),Se(()=>t.edges,()=>{X()},{deep:!0});const L=D=>{if(!(["INPUT","TEXTAREA"].includes(document.activeElement.tagName)||document.activeElement.isContentEditable)){if(D.key==="Delete"||D.key==="Backspace"){const P=u.value.map(h=>h.id),d=f.value.map(h=>h.id);if(P.length||d.length){P.forEach(h=>t.removeCollection(h)),d.forEach(h=>t.removeEdge(h));return}t.selectedItemId&&(t.selectedItemType==="collection"?t.removeCollection(t.selectedItemId):t.selectedItemType==="edge"&&t.removeEdge(t.selectedItemId))}if(D.ctrlKey||D.metaKey){const P=D.key.toLowerCase();if(P==="z"){D.preventDefault(),D.shiftKey?t.redo():t.undo();return}if(P==="y"){D.preventDefault(),t.redo();return}P==="c"?t.selectedItemId&&t.selectedItemType==="collection"&&t.copyNode(t.selectedItemId):P==="v"&&t.pasteNode()}}};return ct(()=>{t.pruneInvalidEdges(t.activeDatabaseId),X(),window.addEventListener("keydown",L)}),Sn(()=>{window.removeEventListener("keydown",L)}),(D,P)=>(B(),Y("div",T_,[P[4]||(P[4]=yh('<div class="absolute bottom-4 left-4 z-20 w-52 rounded-lg border border-gray-700 bg-[#1e1e1e]/90 p-3 backdrop-blur"><p class="mb-2 text-[10px] font-semibold uppercase tracking-wide text-gray-400">Relationship Legend</p><div class="space-y-1.5 text-xs text-gray-300"><div class="flex items-center gap-2"><span class="inline-block h-px w-8 bg-gray-300"></span><span>1-1</span></div><div class="flex items-center gap-2"><span class="inline-block h-px w-8 border-t border-dashed border-gray-300"></span><span>1-N</span></div><div class="flex items-center gap-2"><span class="inline-block h-px w-8 border-t border-dotted border-gray-300"></span><span>N-N</span></div></div></div>',1)),(B(),Ve(z(hw),{key:z(t).activeDatabaseId,nodes:S.value,"onUpdate:nodes":P[2]||(P[2]=d=>S.value=d),edges:T.value,"onUpdate:edges":P[3]||(P[3]=d=>T.value=d),"node-types":y,"multi-selection-key-code":["Meta","Control","Shift"],class:"h-full w-full","default-viewport":{zoom:1},"min-zoom":.2,"max-zoom":4},{default:ht(()=>[le(z(Sw),{"pattern-color":"#333",gap:20}),le(z(e_)),W.value.visible?(B(),Ve(I_,{key:0,x:W.value.x,y:W.value.y,type:W.value.type,id:W.value.id,onClose:M,onDelete:P[0]||(P[0]=d=>K("delete",d)),onCreate:P[1]||(P[1]=()=>K("create"))},null,8,["x","y","type","id"])):pe("",!0)]),_:1},8,["nodes","edges"]))]))}},A_={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4"},O_={class:"bg-[#1e1e1e] border border-gray-700 rounded-lg shadow-2xl w-full max-w-4xl h-[80vh] flex flex-col overflow-hidden"},D_={class:"px-6 py-4 border-b border-gray-700 flex justify-between items-center gap-3 bg-[#252525]"},k_={class:"flex min-w-0 items-center gap-3"},P_={key:0,class:"flex items-center gap-2"},L_=["value"],R_={class:"flex-1 bg-[#1e1e1e] overflow-hidden relative"},B_={class:"absolute inset-0 flex flex-col items-center justify-center z-10 bg-[#1e1e1e]"},F_={class:"px-6 py-4 border-t border-gray-700 bg-[#252525] flex justify-end gap-3"},z_={__name:"CodeExport",props:{isOpen:Boolean,collectionId:{type:String,default:null},collectionIds:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:t}){const n=e,o=En(),r=bo(),s=se(()=>yl(o.activeDatabaseType)),i=se(()=>s.value.getExportTargets()),l=xe(s.value.getDefaultExportTarget()),a=()=>{const S=o.activeDatabaseId,C=o.collections.filter(T=>T.databaseId===S);if(n.collectionIds.length>0){const T=new Set(n.collectionIds);return C.filter(v=>T.has(v.id))}return n.collectionId?C.filter(T=>T.id===n.collectionId):C},c=se(()=>s.value.generateCode({target:l.value,store:o,collectionId:n.collectionId,collectionIds:n.collectionIds,collections:a()})),u=xe(null),f=xe(!0),g=se(()=>s.value.getLanguage(l.value));let m=null;Se([s,i],()=>{new Set(i.value.map(C=>C.value)).has(l.value)||(l.value=s.value.getDefaultExportTarget())},{immediate:!0});const N=async()=>{try{await navigator.clipboard.writeText(c.value),r.showToast("Code copied to clipboard.","success")}catch{r.showToast("Failed to copy code.","error")}},y=()=>{if(m)return;f.value=!0;const S=()=>{require.config({paths:{vs:"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs"}}),require(["vs/editor/editor.main"],function(){f.value=!1,u.value&&(m&&m.dispose(),m=monaco.editor.create(u.value,{value:c.value,language:g.value,theme:"vs-dark",readOnly:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,padding:{top:16}}))})};if(window.monaco&&window.monaco.editor){S();return}if(document.getElementById("monaco-loader")){if(window.require)S();else{const T=setInterval(()=>{window.require&&(clearInterval(T),S())},100)}return}const C=document.createElement("script");C.id="monaco-loader",C.src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js",C.onload=S,document.body.appendChild(C)};return Se(()=>n.isOpen,S=>{S?setTimeout(()=>{y(),m&&m.setValue(c.value)},100):m&&(m.dispose(),m=null)}),Se(c,S=>{m&&(m.setValue(S),monaco.editor.setModelLanguage(m.getModel(),g.value))}),Sn(()=>{m&&m.dispose()}),(S,C)=>e.isOpen?(B(),Y("div",A_,[p("div",O_,[p("div",D_,[p("div",k_,[C[4]||(C[4]=p("h2",{class:"text-xl font-bold text-white"},"Export Schema",-1)),i.value.length>1?(B(),Y("div",P_,[C[3]||(C[3]=p("span",{class:"text-xs uppercase tracking-wide text-gray-400"},"Target",-1)),Bn(p("select",{"onUpdate:modelValue":C[0]||(C[0]=T=>l.value=T),class:"min-w-0 bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-xs text-white focus:border-emerald-500 focus:outline-none"},[(B(!0),Y(ue,null,Ee(i.value,T=>(B(),Y("option",{key:T.value,value:T.value},fe(T.label),9,L_))),128))],512),[[rg,l.value]])])):pe("",!0)]),p("button",{onClick:C[1]||(C[1]=T=>S.$emit("close")),class:"text-gray-400 hover:text-white transition-colors"},[le(z(gl),{size:20})])]),p("div",R_,[Bn(p("div",B_,[...C[5]||(C[5]=[p("div",{class:"w-8 h-8 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin mb-2"},null,-1),p("span",{class:"text-gray-400 text-sm"},"Loading Editor...",-1)])],512),[[qc,f.value]]),p("div",{ref_key:"editorContainer",ref:u,class:ve(["w-full h-full",{"opacity-0":f.value}])},null,2)]),p("div",F_,[p("button",{onClick:C[2]||(C[2]=T=>S.$emit("close")),class:"px-4 py-2 rounded bg-gray-700 hover:bg-gray-600 text-white font-medium transition-colors"}," Close "),p("button",{onClick:N,class:"px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-700 text-white font-medium flex items-center gap-2 transition-colors"},[le(z(ud),{size:16}),C[6]||(C[6]=We(" Copy Code ",-1))])])])])):pe("",!0)}},V_={class:"w-80 bg-[#1e1e1e] border-l border-gray-700 flex flex-col h-full overflow-y-auto"},H_={key:0,class:"flex-1 flex flex-col items-center justify-center text-gray-500 p-8 text-center"},U_={class:"text-sm"},j_={key:1,class:"p-4 space-y-6"},G_={class:"p-4 bg-[#2a2a2a] rounded space-y-2"},Y_={class:"text-xs text-gray-400"},K_={class:"space-y-2"},W_=["value"],X_=["value"],q_={key:0,class:"space-y-3"},Z_={class:"grid grid-cols-2 gap-2"},J_=["value"],Q_=["value"],eS=["value"],tS=["value"],nS=["value"],oS={class:"pt-4 border-t border-gray-700"},rS={key:2,class:"p-4 space-y-6"},sS={class:"block text-xs font-bold text-gray-500 uppercase mb-2"},iS=["value"],lS={key:0,class:"space-y-3"},aS={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},uS={key:0,class:"space-y-2 pl-2 border-l-2 border-emerald-500/30"},cS=["value"],dS=["value"],fS={key:1,class:"space-y-3"},pS=["value"],hS={class:"grid grid-cols-2 gap-2"},gS=["value"],mS=["value"],vS=["value"],yS=["value"],bS=["value"],xS=["value"],wS=["value"],_S=["value"],SS=["value"],ES=["value"],CS=["value"],NS=["value"],IS=["value"],TS=["value"],$S=["value"],MS=["value"],AS={class:"grid grid-cols-2 gap-2"},OS=["value"],DS={key:0},kS=["value"],PS={class:"grid grid-cols-2 gap-2"},LS=["value"],RS=["value"],BS=["value"],FS=["value"],zS={class:"space-y-2"},VS={class:"grid grid-cols-3 gap-2"},HS=["value"],US=["value"],jS=["value"],GS=["value"],YS={class:"space-y-2"},KS={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},WS={key:0,class:"grid grid-cols-3 gap-2"},XS=["value"],qS=["value"],ZS=["value"],JS=["value"],QS={class:"space-y-2"},eE={class:"grid grid-cols-2 gap-2"},tE=["value"],nE=["value"],oE=["value"],rE=["value"],sE=["value"],iE=["value"],lE=["value"],aE=["value"],uE={class:"pt-4 border-t border-gray-700"},cE={key:3,class:"p-4 space-y-6"},dE=["value"],fE=["value"],pE=["value"],hE={class:"space-y-3"},gE={key:0,class:"grid grid-cols-2 gap-2"},mE={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},vE={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},yE={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},bE={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},xE={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},wE={key:1,class:"grid grid-cols-2 gap-2"},_E={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},SE={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},EE={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},CE={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},NE={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},IE={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},TE={key:2,class:"grid grid-cols-2 gap-2"},$E=["value"],ME=["value"],AE=["value"],OE={key:3},DE=["value"],kE={key:0,class:"space-y-3"},PE={class:"flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},LE={key:0,class:"grid grid-cols-2 gap-2"},RE=["value"],BE=["value"],FE=["value"],zE=["value"],VE=["value"],HE=["value"],UE=["value"],jE=["value"],GE=["value"],YE={class:"space-y-2"},KE=["value"],WE=["value"],XE={key:1,class:"space-y-1"},qE=["value"],ZE={key:1,class:"space-y-3"},JE={class:"grid grid-cols-1 gap-2"},QE={class:"min-w-0 flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},e2={class:"min-w-0 flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},t2={class:"min-w-0 flex items-center justify-between p-2 bg-[#2a2a2a] rounded"},n2={class:"grid grid-cols-2 gap-2"},o2=["value"],r2=["value"],s2={class:"grid grid-cols-2 gap-2"},i2=["value"],l2=["value"],a2=["value"],u2={class:"space-y-2"},c2=["value","onInput"],d2=["onClick"],f2={key:2,class:"space-y-2"},p2=["value","onInput"],h2=["onClick"],g2={key:3,class:"space-y-2"},m2=["value"],v2={key:4,class:"space-y-3"},y2={class:"grid grid-cols-3 gap-2"},b2=["value"],x2=["value"],w2=["value"],_2={key:5,class:"space-y-3"},S2=["value"],E2=["value"],C2={key:6,class:"space-y-3"},N2={class:"grid grid-cols-2 gap-2"},I2=["value"],T2=["value"],$2={class:"grid grid-cols-3 gap-2"},M2=["value"],A2=["value"],O2=["value"],D2={key:7,class:"space-y-3"},k2=["value"],P2=["value"],L2=["value"],R2={key:8,class:"space-y-3"},B2=["value"],F2=["value"],z2={key:9,class:"space-y-3"},V2=["value"],H2=["value"],U2={class:"pt-4 border-t border-gray-700"},j2={__name:"PropertiesPanel",setup(e){const t=En(),n=bo(),o=se(()=>t.selectedItem),r=se(()=>t.selectedItemType==="collection"),s=se(()=>t.selectedItemType==="field"),i=se(()=>t.selectedItemType==="edge"),l=se(()=>t.activeDatabaseType),a=se(()=>Cn(l.value)),c=se(()=>Bg[l.value]||[]),u=[{value:"",label:"Default"},{value:"true",label:"True"},{value:"false",label:"False"}],f=[{value:"",label:"Default"},{value:"true",label:"True"},{value:"false",label:"False"},{value:"throw",label:"Throw"}],g=[{value:"",label:"Default"},{value:"primary",label:"primary"},{value:"primaryPreferred",label:"primaryPreferred"},{value:"secondary",label:"secondary"},{value:"secondaryPreferred",label:"secondaryPreferred"},{value:"nearest",label:"nearest"}],m=[{value:"",label:"Default"},{value:"upper",label:"upper"},{value:"lower",label:"lower"},{value:"off",label:"off"}],N=["String","Number","Boolean","Date","ObjectId","Object","Mixed"],y=[{value:"",label:"No Action"},{value:"CASCADE",label:"CASCADE"},{value:"RESTRICT",label:"RESTRICT"},{value:"SET NULL",label:"SET NULL"},{value:"NO ACTION",label:"NO ACTION"}],S=[{value:"one_to_one",label:"One-to-One (1:1)"},{value:"one_to_many",label:"One-to-Many (1:N)"},{value:"many_to_many",label:"Many-to-Many (N:N)"}],C=se(()=>t.activeCollections||[]),T=se(()=>{if(!s.value||l.value===te.MONGODB)return null;const P=String(o.value?.referencesTable||"");return C.value.find(d=>d.data?.label===P)||null}),v=se(()=>T.value?.data?.fields||[]),w=(P,d)=>{t.updateCollectionProps(t.selectedItemId,{[P]:d})},A=(P,d)=>{s.value&&t.updateFieldProps(t.selectedCollectionId,t.selectedItemId,{[P]:d})},R=(P,d)=>{!i.value||!o.value||t.updateEdgeProps(t.selectedItemId,{[P]:d})},G=se(()=>{if(!i.value||!o.value)return{sourceName:"-",sourceField:"-",targetName:"-",targetField:"-"};const P=o.value,d=t.collections.find(me=>me.id===P.source),h=t.collections.find(me=>me.id===P.target),J=(me,ie)=>{for(const oe of me||[]){if(oe.id===ie)return oe;const ce=J(oe.children||[],ie);if(ce)return ce}return null},ne=J(d?.data?.fields||[],P.sourceHandle),he=J(h?.data?.fields||[],P.targetHandle);return{sourceName:d?.data?.label||P.source,sourceField:ne?.name||P.sourceHandle||"-",targetName:h?.data?.label||P.target,targetField:he?.name||P.targetHandle||"-"}}),j=P=>{A("referencesTable",P),A("referencesColumnId",""),A("referencesColumn","")},V=P=>{A("referencesColumnId",P);const d=v.value.find(h=>h.id===P);A("referencesColumn",d?.name||"")},X=()=>{if(!s.value||!o.value)return[];if(Array.isArray(o.value.enumValues))return o.value.enumValues;if(typeof o.value.enum=="string"&&o.value.enum.trim()){const P=o.value.enum.split(",").map(d=>d.trim()).filter(Boolean);return t.updateFieldProps(t.selectedCollectionId,t.selectedItemId,{enumValues:P,enum:""}),P}return[]},W=()=>{A("enumValues",[...X(),""])},$=(P,d)=>{const h=[...X()];P<0||P>=h.length||(h[P]=d,A("enumValues",h))},Q=P=>{const d=[...X()];P<0||P>=d.length||(d.splice(P,1),A("enumValues",d))},M=P=>{r.value?t.updateCollectionProps(t.selectedItemId,{label:P.target.value}):s.value&&t.updateFieldProps(t.selectedCollectionId,t.selectedItemId,{name:P.target.value})},K=P=>{s.value&&t.updateFieldProps(t.selectedCollectionId,t.selectedItemId,{type:P.target.value})},L=P=>{if(s.value){const d=o.value[P]||!1;t.updateFieldProps(t.selectedCollectionId,t.selectedItemId,{[P]:!d})}},D=async()=>{await n.openConfirm({title:"Delete Item",message:"Are you sure?",confirmText:"Delete"})&&(r.value?(t.removeCollection(t.selectedItemId),n.showToast(`${a.value.singular} deleted.`,"success")):s.value?(t.removeField(t.selectedCollectionId,t.selectedItemId),n.showToast("Field deleted.","success")):i.value&&(t.removeEdge(t.selectedItemId),n.showToast("Relationship deleted.","success")))};return(P,d)=>(B(),Y("aside",V_,[d[155]||(d[155]=p("div",{class:"p-4 border-b border-gray-700"},[p("h2",{class:"font-bold text-gray-200"},"Properties")],-1)),!o.value&&!i.value?(B(),Y("div",H_,[le(z(Qg),{size:48,class:"mb-4 opacity-50"}),p("p",U_,"Select a "+fe(a.value.singularLower)+", field, or relationship to edit properties",1)])):i.value?(B(),Y("div",j_,[p("div",G_,[d[77]||(d[77]=p("h3",{class:"text-gray-200 font-semibold"},"Relationship",-1)),p("p",Y_,fe(G.value.sourceName)+"."+fe(G.value.sourceField)+" -> "+fe(G.value.targetName)+"."+fe(G.value.targetField),1),d[78]||(d[78]=p("p",{class:"text-[11px] text-gray-500"},"Tip: double-click edge to cycle cardinality quickly.",-1))]),p("div",K_,[d[79]||(d[79]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Cardinality",-1)),p("select",{value:o.value?.relationType||"one_to_many",onChange:d[0]||(d[0]=h=>R("relationType",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-3 py-2 text-white text-sm"},[(B(),Y(ue,null,Ee(S,h=>p("option",{key:h.value,value:h.value},fe(h.label),9,X_)),64))],40,W_)]),l.value!==z(te).MONGODB?(B(),Y("div",q_,[d[83]||(d[83]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Referential Actions",-1)),p("div",Z_,[p("div",null,[d[80]||(d[80]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"On Delete",-1)),p("select",{value:o.value?.onDelete||"",onChange:d[1]||(d[1]=h=>R("onDelete",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(y,h=>p("option",{key:`edge-on-delete-${h.value}`,value:h.value},fe(h.label),9,Q_)),64))],40,J_)]),p("div",null,[d[81]||(d[81]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"On Update",-1)),p("select",{value:o.value?.onUpdate||"",onChange:d[2]||(d[2]=h=>R("onUpdate",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(y,h=>p("option",{key:`edge-on-update-${h.value}`,value:h.value},fe(h.label),9,tS)),64))],40,eS)])]),p("div",null,[d[82]||(d[82]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Constraint Name",-1)),p("input",{value:o.value?.constraintName||"",onInput:d[3]||(d[3]=h=>R("constraintName",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"optional"},null,40,nS)])])):pe("",!0),p("div",oS,[p("button",{onClick:D,class:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-900/30 hover:bg-red-900/50 text-red-500 border border-red-900/50 rounded transition-colors text-sm"},[le(z(kn),{size:16}),d[84]||(d[84]=We(" Delete Relationship ",-1))])])])):r.value?(B(),Y("div",rS,[p("div",null,[p("label",sS,fe(a.value.singular)+" Name",1),p("input",{value:o.value.data.label,onInput:M,class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-3 py-2 text-white text-sm focus:border-emerald-500 focus:outline-none transition-colors",type:"text"},null,40,iS)]),l.value===z(te).MONGODB?(B(),Y("div",lS,[d[88]||(d[88]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Schema Options",-1)),p("div",aS,[d[85]||(d[85]=p("span",{class:"text-sm text-gray-300"},"Timestamps",-1)),p("button",{onClick:d[4]||(d[4]=h=>z(t).updateCollectionProps(z(t).selectedItemId,{timestampsEnabled:!o.value.data.timestampsEnabled})),class:ve(["w-10 h-5 rounded-full relative transition-colors",o.value.data.timestampsEnabled?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.data.timestampsEnabled?"translate-x-5":""])},null,2)],2)]),o.value.data.timestampsEnabled?(B(),Y("div",uS,[p("div",null,[d[86]||(d[86]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Created At Field",-1)),p("input",{value:o.value.data.createdAtName,onInput:d[5]||(d[5]=h=>z(t).updateCollectionProps(z(t).selectedItemId,{createdAtName:h.target.value})),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs focus:border-emerald-500 focus:outline-none transition-colors",type:"text",placeholder:"default: createdAt"},null,40,cS)]),p("div",null,[d[87]||(d[87]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Updated At Field",-1)),p("input",{value:o.value.data.updatedAtName,onInput:d[6]||(d[6]=h=>z(t).updateCollectionProps(z(t).selectedItemId,{updatedAtName:h.target.value})),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs focus:border-emerald-500 focus:outline-none transition-colors",type:"text",placeholder:"default: updatedAt"},null,40,dS)])])):pe("",!0)])):pe("",!0),l.value===z(te).MONGODB?(B(),Y("div",fS,[d[106]||(d[106]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Advanced Schema Options",-1)),p("div",null,[d[89]||(d[89]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Collection Name",-1)),p("input",{value:o.value.data.schemaCollectionName||"",onInput:d[7]||(d[7]=h=>w("schemaCollectionName",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs focus:border-emerald-500 focus:outline-none transition-colors",type:"text",placeholder:"default model name plural"},null,40,pS)]),p("div",hS,[p("div",null,[d[90]||(d[90]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Strict",-1)),p("select",{value:o.value.data.schemaStrictMode||"",onChange:d[8]||(d[8]=h=>w("schemaStrictMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(f,h=>p("option",{key:h.value,value:h.value},fe(h.label),9,mS)),64))],40,gS)]),p("div",null,[d[91]||(d[91]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Strict Query",-1)),p("select",{value:o.value.data.schemaStrictQueryMode||"",onChange:d[9]||(d[9]=h=>w("schemaStrictQueryMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(u,h=>p("option",{key:`strict-query-${h.value}`,value:h.value},fe(h.label),9,yS)),64))],40,vS)]),p("div",null,[d[92]||(d[92]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Auto Index",-1)),p("select",{value:o.value.data.schemaAutoIndexMode||"",onChange:d[10]||(d[10]=h=>w("schemaAutoIndexMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(u,h=>p("option",{key:`auto-index-${h.value}`,value:h.value},fe(h.label),9,xS)),64))],40,bS)]),p("div",null,[d[93]||(d[93]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Auto Create",-1)),p("select",{value:o.value.data.schemaAutoCreateMode||"",onChange:d[11]||(d[11]=h=>w("schemaAutoCreateMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(u,h=>p("option",{key:`auto-create-${h.value}`,value:h.value},fe(h.label),9,_S)),64))],40,wS)]),p("div",null,[d[94]||(d[94]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"id Virtual",-1)),p("select",{value:o.value.data.schemaIdVirtualMode||"",onChange:d[12]||(d[12]=h=>w("schemaIdVirtualMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(u,h=>p("option",{key:`id-virtual-${h.value}`,value:h.value},fe(h.label),9,ES)),64))],40,SS)]),p("div",null,[d[95]||(d[95]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"_id Field",-1)),p("select",{value:o.value.data.schemaUnderscoreIdMode||"",onChange:d[13]||(d[13]=h=>w("schemaUnderscoreIdMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(u,h=>p("option",{key:`id-field-${h.value}`,value:h.value},fe(h.label),9,NS)),64))],40,CS)]),p("div",null,[d[96]||(d[96]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Minimize",-1)),p("select",{value:o.value.data.schemaMinimizeMode||"",onChange:d[14]||(d[14]=h=>w("schemaMinimizeMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(u,h=>p("option",{key:`minimize-${h.value}`,value:h.value},fe(h.label),9,TS)),64))],40,IS)]),p("div",null,[d[97]||(d[97]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Optimistic Concurrency",-1)),p("select",{value:o.value.data.schemaOptimisticConcurrencyMode||"",onChange:d[15]||(d[15]=h=>w("schemaOptimisticConcurrencyMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(u,h=>p("option",{key:`optimistic-${h.value}`,value:h.value},fe(h.label),9,MS)),64))],40,$S)])]),p("div",AS,[p("div",null,[d[99]||(d[99]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Version Key",-1)),p("select",{value:o.value.data.schemaVersionKeyMode||"",onChange:d[16]||(d[16]=h=>w("schemaVersionKeyMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[...d[98]||(d[98]=[p("option",{value:""},"Default",-1),p("option",{value:"disable"},"Disable",-1),p("option",{value:"custom"},"Custom",-1)])],40,OS)]),o.value.data.schemaVersionKeyMode==="custom"?(B(),Y("div",DS,[d[100]||(d[100]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Version Key Name",-1)),p("input",{value:o.value.data.schemaVersionKeyName||"",onInput:d[17]||(d[17]=h=>w("schemaVersionKeyName",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"e.g. version"},null,40,kS)])):pe("",!0)]),p("div",PS,[p("div",null,[d[101]||(d[101]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Read Preference",-1)),p("select",{value:o.value.data.schemaReadPreference||"",onChange:d[18]||(d[18]=h=>w("schemaReadPreference",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(g,h=>p("option",{key:`read-${h.value}`,value:h.value},fe(h.label),9,RS)),64))],40,LS)]),p("div",null,[d[102]||(d[102]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"skipVersioning",-1)),p("select",{value:o.value.data.schemaSkipVersioningMode||"",onChange:d[19]||(d[19]=h=>w("schemaSkipVersioningMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(u,h=>p("option",{key:`skip-version-${h.value}`,value:h.value},fe(h.label),9,FS)),64))],40,BS)])]),p("div",zS,[d[103]||(d[103]=p("label",{class:"block text-[10px] text-gray-400 uppercase"},"Write Concern",-1)),p("div",VS,[p("input",{value:o.value.data.schemaWriteConcernW||"",onInput:d[20]||(d[20]=h=>w("schemaWriteConcernW",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"w (1/majority)"},null,40,HS),p("select",{value:o.value.data.schemaWriteConcernJMode||"",onChange:d[21]||(d[21]=h=>w("schemaWriteConcernJMode",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(u,h=>p("option",{key:`write-j-${h.value}`,value:h.value},"j: "+fe(h.label),9,jS)),64))],40,US),p("input",{value:o.value.data.schemaWriteConcernWtimeout||"",onInput:d[22]||(d[22]=h=>w("schemaWriteConcernWtimeout",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",min:"0",placeholder:"wtimeout ms"},null,40,GS)])]),p("div",YS,[p("div",KS,[d[104]||(d[104]=p("span",{class:"text-sm text-gray-300"},"Capped Collection",-1)),p("button",{onClick:d[23]||(d[23]=h=>w("schemaCappedEnabled",!o.value.data.schemaCappedEnabled)),class:ve(["w-10 h-5 rounded-full relative transition-colors",o.value.data.schemaCappedEnabled?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.data.schemaCappedEnabled?"translate-x-5":""])},null,2)],2)]),o.value.data.schemaCappedEnabled?(B(),Y("div",WS,[p("input",{value:o.value.data.schemaCappedSize||"",onInput:d[24]||(d[24]=h=>w("schemaCappedSize",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",min:"1",placeholder:"size bytes"},null,40,XS),p("input",{value:o.value.data.schemaCappedMax||"",onInput:d[25]||(d[25]=h=>w("schemaCappedMax",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",min:"1",placeholder:"max docs"},null,40,qS),p("select",{value:o.value.data.schemaCappedAutoIndexIdMode||"",onChange:d[26]||(d[26]=h=>w("schemaCappedAutoIndexIdMode",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(u,h=>p("option",{key:`capped-id-${h.value}`,value:h.value},"autoIndexId: "+fe(h.label),9,JS)),64))],40,ZS)])):pe("",!0)]),p("div",QS,[d[105]||(d[105]=p("label",{class:"block text-[10px] text-gray-400 uppercase"},"Collation",-1)),p("div",eE,[p("input",{value:o.value.data.schemaCollationLocale||"",onInput:d[27]||(d[27]=h=>w("schemaCollationLocale",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"locale (e.g. en)"},null,40,tE),p("input",{value:o.value.data.schemaCollationStrength||"",onInput:d[28]||(d[28]=h=>w("schemaCollationStrength",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",min:"1",max:"5",placeholder:"strength 1-5"},null,40,nE),p("select",{value:o.value.data.schemaCollationCaseLevelMode||"",onChange:d[29]||(d[29]=h=>w("schemaCollationCaseLevelMode",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(u,h=>p("option",{key:`collation-case-level-${h.value}`,value:h.value},"caseLevel: "+fe(h.label),9,rE)),64))],40,oE),p("select",{value:o.value.data.schemaCollationCaseFirst||"",onChange:d[30]||(d[30]=h=>w("schemaCollationCaseFirst",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(m,h=>p("option",{key:`collation-case-first-${h.value}`,value:h.value},"caseFirst: "+fe(h.label),9,iE)),64))],40,sE),p("select",{value:o.value.data.schemaCollationNumericOrderingMode||"",onChange:d[31]||(d[31]=h=>w("schemaCollationNumericOrderingMode",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs col-span-2"},[(B(),Y(ue,null,Ee(u,h=>p("option",{key:`collation-numeric-${h.value}`,value:h.value},"numericOrdering: "+fe(h.label),9,aE)),64))],40,lE)])])])):pe("",!0),p("div",uE,[p("button",{onClick:D,class:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-900/30 hover:bg-red-900/50 text-red-500 border border-red-900/50 rounded transition-colors text-sm"},[le(z(kn),{size:16}),We(" Delete "+fe(a.value.singular),1)])])])):s.value?(B(),Y("div",cE,[p("div",null,[d[107]||(d[107]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-2"},"Field Name",-1)),p("input",{value:o.value.name,onInput:M,class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-3 py-2 text-white text-sm focus:border-emerald-500 focus:outline-none transition-colors",type:"text"},null,40,dE)]),p("div",null,[d[108]||(d[108]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-2"},"Type",-1)),p("select",{value:o.value.type,onChange:K,class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-3 py-2 text-white text-sm focus:border-emerald-500 focus:outline-none transition-colors appearance-none"},[(B(!0),Y(ue,null,Ee(c.value,h=>(B(),Y("option",{key:h,value:h},fe(h),9,pE))),128))],40,fE)]),p("div",hE,[d[123]||(d[123]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Field Options",-1)),l.value===z(te).MONGODB?(B(),Y("div",gE,[p("div",mE,[d[109]||(d[109]=p("span",{class:"text-sm text-gray-300"},"Required",-1)),p("button",{onClick:d[32]||(d[32]=h=>L("required")),class:ve(["w-10 h-5 rounded-full relative transition-colors",o.value.required?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.required?"translate-x-5":""])},null,2)],2)]),p("div",vE,[d[110]||(d[110]=p("span",{class:"text-sm text-gray-300"},"Unique",-1)),p("button",{onClick:d[33]||(d[33]=h=>L("unique")),class:ve(["w-10 h-5 rounded-full relative transition-colors",o.value.unique?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.unique?"translate-x-5":""])},null,2)],2)]),p("div",yE,[d[111]||(d[111]=p("span",{class:"text-sm text-gray-300"},"Index",-1)),p("button",{onClick:d[34]||(d[34]=h=>L("index")),class:ve(["w-10 h-5 rounded-full relative transition-colors",o.value.index?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.index?"translate-x-5":""])},null,2)],2)]),p("div",bE,[d[112]||(d[112]=p("span",{class:"text-sm text-gray-300"},"Sparse",-1)),p("button",{onClick:d[35]||(d[35]=h=>L("sparse")),class:ve(["w-10 h-5 rounded-full relative transition-colors",o.value.sparse?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.sparse?"translate-x-5":""])},null,2)],2)]),p("div",xE,[d[113]||(d[113]=p("span",{class:"text-sm text-gray-300"},"Immutable",-1)),p("button",{onClick:d[36]||(d[36]=h=>L("immutable")),class:ve(["w-10 h-5 rounded-full relative transition-colors",o.value.immutable?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.immutable?"translate-x-5":""])},null,2)],2)])])):(B(),Y("div",wE,[p("div",_E,[d[114]||(d[114]=p("span",{class:"text-sm text-gray-300"},"Primary Key",-1)),p("button",{onClick:d[37]||(d[37]=h=>L("primaryKey")),class:ve(["w-10 h-5 rounded-full relative transition-colors",o.value.primaryKey?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.primaryKey?"translate-x-5":""])},null,2)],2)]),p("div",SE,[d[115]||(d[115]=p("span",{class:"text-sm text-gray-300"},"Auto Increment",-1)),p("button",{onClick:d[38]||(d[38]=h=>L("autoIncrement")),class:ve(["w-10 h-5 rounded-full relative transition-colors",o.value.autoIncrement?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.autoIncrement?"translate-x-5":""])},null,2)],2)]),p("div",EE,[d[116]||(d[116]=p("span",{class:"text-sm text-gray-300"},"Nullable",-1)),p("button",{onClick:d[39]||(d[39]=h=>L("nullable")),class:ve(["w-10 h-5 rounded-full relative transition-colors",o.value.nullable?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.nullable?"translate-x-5":""])},null,2)],2)]),p("div",CE,[d[117]||(d[117]=p("span",{class:"text-sm text-gray-300"},"Unique",-1)),p("button",{onClick:d[40]||(d[40]=h=>L("unique")),class:ve(["w-10 h-5 rounded-full relative transition-colors",o.value.unique?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.unique?"translate-x-5":""])},null,2)],2)]),p("div",NE,[d[118]||(d[118]=p("span",{class:"text-sm text-gray-300"},"Index",-1)),p("button",{onClick:d[41]||(d[41]=h=>L("index")),class:ve(["w-10 h-5 rounded-full relative transition-colors",o.value.index?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.index?"translate-x-5":""])},null,2)],2)]),p("div",IE,[d[119]||(d[119]=p("span",{class:"text-sm text-gray-300"},"Unsigned",-1)),p("button",{onClick:d[42]||(d[42]=h=>L("unsigned")),class:ve(["w-10 h-5 rounded-full relative transition-colors",o.value.unsigned?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.unsigned?"translate-x-5":""])},null,2)],2)])])),l.value===z(te).MONGODB?(B(),Y("div",TE,[p("div",null,[d[120]||(d[120]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Alias",-1)),p("input",{value:o.value.alias||"",onInput:d[43]||(d[43]=h=>A("alias",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"optional alias"},null,40,$E)]),p("div",null,[d[121]||(d[121]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Select",-1)),p("select",{value:o.value.selectMode||"",onChange:d[44]||(d[44]=h=>A("selectMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(u,h=>p("option",{key:`field-select-${h.value}`,value:h.value},fe(h.label),9,AE)),64))],40,ME)])])):(B(),Y("div",OE,[d[122]||(d[122]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Default Value",-1)),p("input",{value:o.value.defaultValue||"",onInput:d[45]||(d[45]=h=>A("defaultValue",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"default value"},null,40,DE)]))]),l.value!==z(te).MONGODB?(B(),Y("div",kE,[d[134]||(d[134]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"SQL Constraints",-1)),p("div",PE,[d[124]||(d[124]=p("span",{class:"text-sm text-gray-300"},"Foreign Key",-1)),p("button",{onClick:d[46]||(d[46]=h=>L("foreignKey")),class:ve(["w-10 h-5 rounded-full relative transition-colors",o.value.foreignKey?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform",o.value.foreignKey?"translate-x-5":""])},null,2)],2)]),o.value.foreignKey?(B(),Y("div",LE,[p("div",null,[d[126]||(d[126]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Reference Table",-1)),p("select",{value:o.value.referencesTable||"",onChange:d[47]||(d[47]=h=>j(h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[d[125]||(d[125]=p("option",{value:""},"Select table...",-1)),(B(!0),Y(ue,null,Ee(C.value,h=>(B(),Y("option",{key:h.id,value:h.data.label},fe(h.data.label),9,BE))),128))],40,RE)]),p("div",null,[d[128]||(d[128]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Reference Column",-1)),p("select",{value:o.value.referencesColumnId||"",onChange:d[48]||(d[48]=h=>V(h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[d[127]||(d[127]=p("option",{value:""},"Select column...",-1)),(B(!0),Y(ue,null,Ee(v.value,h=>(B(),Y("option",{key:h.id,value:h.id},fe(h.name),9,zE))),128))],40,FE)]),p("div",null,[d[129]||(d[129]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"FK Constraint Name",-1)),p("input",{value:o.value.fkConstraintName||"",onInput:d[49]||(d[49]=h=>A("fkConstraintName",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"optional"},null,40,VE)]),p("div",null,[d[130]||(d[130]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"On Delete",-1)),p("select",{value:o.value.onDelete||"",onChange:d[50]||(d[50]=h=>A("onDelete",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(y,h=>p("option",{key:`on-delete-${h.value}`,value:h.value},fe(h.label),9,UE)),64))],40,HE)]),p("div",null,[d[131]||(d[131]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"On Update",-1)),p("select",{value:o.value.onUpdate||"",onChange:d[51]||(d[51]=h=>A("onUpdate",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(y,h=>p("option",{key:`on-update-${h.value}`,value:h.value},fe(h.label),9,GE)),64))],40,jE)])])):pe("",!0),p("div",YE,[d[132]||(d[132]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Check Constraint Expression",-1)),p("input",{value:o.value.checkExpression||"",onInput:d[52]||(d[52]=h=>A("checkExpression",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"e.g. amount > 0"},null,40,KE),p("input",{value:o.value.checkConstraintName||"",onInput:d[53]||(d[53]=h=>A("checkConstraintName",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"check constraint name (optional)"},null,40,WE)]),o.value.index?(B(),Y("div",XE,[d[133]||(d[133]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Index Name",-1)),p("input",{value:o.value.indexName||"",onInput:d[54]||(d[54]=h=>A("indexName",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"optional"},null,40,qE)])):pe("",!0)])):pe("",!0),o.value.type==="String"&&l.value===z(te).MONGODB?(B(),Y("div",ZE,[d[140]||(d[140]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"String Options",-1)),p("div",JE,[p("div",QE,[d[135]||(d[135]=p("span",{class:"truncate text-xs text-gray-300"},"Trim",-1)),p("button",{onClick:d[55]||(d[55]=h=>L("trim")),class:ve(["shrink-0 w-8 h-4 rounded-full relative transition-colors",o.value.trim?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-0.5 left-0.5 bg-white w-3 h-3 rounded-full transition-transform",o.value.trim?"translate-x-4":""])},null,2)],2)]),p("div",e2,[d[136]||(d[136]=p("span",{class:"truncate text-xs text-gray-300"},"Lowercase",-1)),p("button",{onClick:d[56]||(d[56]=h=>L("lowercase")),class:ve(["shrink-0 w-8 h-4 rounded-full relative transition-colors",o.value.lowercase?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-0.5 left-0.5 bg-white w-3 h-3 rounded-full transition-transform",o.value.lowercase?"translate-x-4":""])},null,2)],2)]),p("div",t2,[d[137]||(d[137]=p("span",{class:"truncate text-xs text-gray-300"},"Uppercase",-1)),p("button",{onClick:d[57]||(d[57]=h=>L("uppercase")),class:ve(["shrink-0 w-8 h-4 rounded-full relative transition-colors",o.value.uppercase?"bg-emerald-500":"bg-gray-600"])},[p("div",{class:ve(["absolute top-0.5 left-0.5 bg-white w-3 h-3 rounded-full transition-transform",o.value.uppercase?"translate-x-4":""])},null,2)],2)])]),p("div",n2,[p("input",{value:o.value.minLength||"",onInput:d[58]||(d[58]=h=>A("minLength",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",min:"0",placeholder:"minLength"},null,40,o2),p("input",{value:o.value.maxLength||"",onInput:d[59]||(d[59]=h=>A("maxLength",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",min:"0",placeholder:"maxLength"},null,40,r2)]),p("div",s2,[p("input",{value:o.value.matchPattern||"",onInput:d[60]||(d[60]=h=>A("matchPattern",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"regex pattern"},null,40,i2),p("input",{value:o.value.matchFlags||"",onInput:d[61]||(d[61]=h=>A("matchFlags",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"flags (e.g. i)"},null,40,l2)]),p("div",null,[d[138]||(d[138]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Default",-1)),p("input",{value:o.value.defaultString||"",onInput:d[62]||(d[62]=h=>A("defaultString",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"default string"},null,40,a2)]),p("div",u2,[p("div",{class:"flex items-center justify-between"},[d[139]||(d[139]=p("label",{class:"block text-[10px] text-gray-400 uppercase"},"Enum Values",-1)),p("button",{onClick:W,class:"px-2 py-1 text-xs rounded bg-[#2d2d2d] hover:bg-[#3d3d3d] text-gray-300"},"Add")]),(B(!0),Y(ue,null,Ee(X(),(h,J)=>(B(),Y("div",{key:`enum-${J}`,class:"flex gap-2"},[p("input",{value:h,onInput:ne=>$(J,ne.target.value),class:"flex-1 bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"enum value"},null,40,c2),p("button",{onClick:ne=>Q(J),class:"px-2 py-1 text-xs rounded bg-red-900/30 hover:bg-red-900/50 text-red-300"},"Remove",8,d2)]))),128))])])):pe("",!0),o.value.type==="ENUM"&&l.value===z(te).MYSQL?(B(),Y("div",f2,[p("div",{class:"flex items-center justify-between"},[d[141]||(d[141]=p("label",{class:"block text-[10px] text-gray-400 uppercase"},"Enum Values",-1)),p("button",{onClick:W,class:"px-2 py-1 text-xs rounded bg-[#2d2d2d] hover:bg-[#3d3d3d] text-gray-300"},"Add")]),(B(!0),Y(ue,null,Ee(X(),(h,J)=>(B(),Y("div",{key:`enum-${J}`,class:"flex gap-2"},[p("input",{value:h,onInput:ne=>$(J,ne.target.value),class:"flex-1 bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"value"},null,40,p2),p("button",{onClick:ne=>Q(J),class:"px-2 py-1 text-xs rounded bg-red-900/30 hover:bg-red-900/50 text-red-300"},"Remove",8,h2)]))),128))])):pe("",!0),l.value!==z(te).MONGODB&&["VARCHAR","CHAR","DECIMAL","FLOAT"].includes(o.value.type)?(B(),Y("div",g2,[d[142]||(d[142]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Length / Parameters",-1)),p("input",{value:o.value.typeParams||"",onInput:d[63]||(d[63]=h=>A("typeParams",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"e.g. 255 or 10,2"},null,40,m2)])):pe("",!0),o.value.type==="Number"&&l.value===z(te).MONGODB?(B(),Y("div",v2,[d[143]||(d[143]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Number Options",-1)),p("div",y2,[p("input",{value:o.value.min||"",onInput:d[64]||(d[64]=h=>A("min",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",placeholder:"min"},null,40,b2),p("input",{value:o.value.max||"",onInput:d[65]||(d[65]=h=>A("max",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",placeholder:"max"},null,40,x2),p("input",{value:o.value.defaultNumber||"",onInput:d[66]||(d[66]=h=>A("defaultNumber",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",placeholder:"default"},null,40,w2)])])):pe("",!0),o.value.type==="Boolean"&&l.value===z(te).MONGODB?(B(),Y("div",_2,[d[145]||(d[145]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Boolean Options",-1)),p("div",null,[d[144]||(d[144]=p("label",{class:"block text-[10px] text-gray-400 uppercase mb-1"},"Default",-1)),p("select",{value:o.value.defaultBooleanMode||"",onChange:d[67]||(d[67]=h=>A("defaultBooleanMode",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[(B(),Y(ue,null,Ee(u,h=>p("option",{key:`bool-default-${h.value}`,value:h.value},fe(h.label),9,E2)),64))],40,S2)])])):pe("",!0),o.value.type==="Date"&&l.value===z(te).MONGODB?(B(),Y("div",C2,[d[147]||(d[147]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Date Options",-1)),p("div",N2,[p("select",{value:o.value.defaultDateMode||"",onChange:d[68]||(d[68]=h=>A("defaultDateMode",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[...d[146]||(d[146]=[p("option",{value:""},"Default: none",-1),p("option",{value:"now"},"Default: Date.now",-1),p("option",{value:"custom"},"Default: custom date",-1)])],40,I2),o.value.defaultDateMode==="custom"?(B(),Y("input",{key:0,value:o.value.defaultDateValue||"",onInput:d[69]||(d[69]=h=>A("defaultDateValue",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"datetime-local"},null,40,T2)):pe("",!0)]),p("div",$2,[p("input",{value:o.value.minDate||"",onInput:d[70]||(d[70]=h=>A("minDate",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"datetime-local",placeholder:"min date"},null,40,M2),p("input",{value:o.value.maxDate||"",onInput:d[71]||(d[71]=h=>A("maxDate",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"datetime-local",placeholder:"max date"},null,40,A2),p("input",{value:o.value.expiresSeconds||"",onInput:d[72]||(d[72]=h=>A("expiresSeconds",h.target.value)),class:"bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"number",min:"0",placeholder:"expires sec"},null,40,O2)])])):pe("",!0),o.value.type==="ObjectId"&&l.value===z(te).MONGODB?(B(),Y("div",D2,[d[149]||(d[149]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"ObjectId Options",-1)),p("select",{value:o.value.ref||"",onChange:d[73]||(d[73]=h=>A("ref",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-3 py-2 text-white text-sm"},[d[148]||(d[148]=p("option",{value:""},"Reference collection...",-1)),(B(!0),Y(ue,null,Ee(z(t).collections,h=>(B(),Y("option",{key:h.id,value:h.data.label},fe(h.data.label),9,P2))),128))],40,k2),p("input",{value:o.value.defaultObjectId||"",onInput:d[74]||(d[74]=h=>A("defaultObjectId",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs",type:"text",placeholder:"default objectId (optional)"},null,40,L2)])):pe("",!0),o.value.type==="Map"&&l.value===z(te).MONGODB?(B(),Y("div",R2,[d[151]||(d[151]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Map Options",-1)),p("select",{value:o.value.mapOfType||"",onChange:d[75]||(d[75]=h=>A("mapOfType",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[d[150]||(d[150]=p("option",{value:""},"Map value type (default Mixed)",-1)),(B(),Y(ue,null,Ee(N,h=>p("option",{key:`map-${h}`,value:h},fe(h),9,F2)),64))],40,B2)])):pe("",!0),o.value.type==="Array"&&l.value===z(te).MONGODB?(B(),Y("div",z2,[d[153]||(d[153]=p("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Array Options",-1)),p("select",{value:o.value.arrayOfType||"",onChange:d[76]||(d[76]=h=>A("arrayOfType",h.target.value)),class:"w-full bg-[#2a2a2a] border border-gray-600 rounded px-2 py-1 text-white text-xs"},[d[152]||(d[152]=p("option",{value:""},"Array item type (default Mixed)",-1)),(B(),Y(ue,null,Ee(N,h=>p("option",{key:`arr-${h}`,value:h},fe(h),9,H2)),64))],40,V2)])):pe("",!0),p("div",U2,[p("button",{onClick:D,class:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-900/30 hover:bg-red-900/50 text-red-500 border border-red-900/50 rounded transition-colors text-sm"},[le(z(kn),{size:16}),d[154]||(d[154]=We(" Delete Field ",-1))])])])):pe("",!0)]))}},G2={class:"pointer-events-none fixed inset-0 z-[120]"},Y2={class:"absolute top-4 right-4 space-y-2"},K2={class:"w-full max-w-md rounded-xl border border-gray-700 bg-[#1e1e1e] text-gray-100 shadow-2xl"},W2={class:"flex items-center justify-between border-b border-gray-700 px-4 py-3"},X2={class:"font-semibold"},q2={class:"space-y-3 px-4 py-4"},Z2={class:"text-sm text-gray-300"},J2=["value","placeholder"],Q2={class:"flex justify-end gap-2 border-t border-gray-700 px-4 py-3"},eC=["disabled"],tC={__name:"UiLayer",setup(e){const t=bo(),n=se(()=>t.modal.kind==="prompt"&&t.modal.inputRequired&&!String(t.modal.inputValue||"").trim()),o=()=>{t.modal.kind==="alert"?t.resolveModal(!0):t.resolveModal(t.modal.kind==="prompt"?null:!1)},r=()=>{if(t.modal.kind==="prompt"){t.resolveModal(String(t.modal.inputValue||"").trim());return}t.resolveModal(!0)},s=()=>{t.resolveModal(t.modal.kind==="prompt"?null:!1)};return(i,l)=>(B(),Y("div",G2,[p("div",Y2,[le(fl,{name:"toast"},{default:ht(()=>[(B(!0),Y(ue,null,Ee(z(t).toasts,a=>(B(),Y("div",{key:a.id,class:ve(["pointer-events-auto min-w-[260px] max-w-[360px] rounded-lg border px-3 py-2 text-sm shadow-lg backdrop-blur",a.type==="error"?"bg-red-900/40 border-red-700 text-red-200":a.type==="success"?"bg-emerald-900/35 border-emerald-700 text-emerald-200":"bg-[#1e1e1e]/95 border-gray-700 text-gray-200"])},fe(a.message),3))),128))]),_:1})]),z(t).modal.isOpen?(B(),Y("div",{key:0,class:"pointer-events-auto absolute inset-0 bg-black/50 flex items-center justify-center p-4",onClick:dt(o,["self"])},[p("div",K2,[p("div",W2,[p("h3",X2,fe(z(t).modal.title),1),p("button",{class:"rounded p-1 text-gray-400 hover:bg-[#2a2a2a] hover:text-white",onClick:s},[le(z(gl),{size:16})])]),p("div",q2,[p("p",Z2,fe(z(t).modal.message),1),z(t).modal.kind==="prompt"?(B(),Y("input",{key:0,value:z(t).modal.inputValue,onInput:l[0]||(l[0]=a=>z(t).setModalInputValue(a.target.value)),placeholder:z(t).modal.inputPlaceholder,class:"w-full rounded border border-gray-600 bg-[#2a2a2a] px-3 py-2 text-sm text-white focus:border-emerald-500 focus:outline-none",type:"text",onKeydown:l[1]||(l[1]=Ms(a=>!n.value&&r(),["enter"]))},null,40,J2)):pe("",!0)]),p("div",Q2,[z(t).modal.kind!=="alert"?(B(),Y("button",{key:0,class:"rounded border border-gray-600 bg-[#2d2d2d] px-3 py-1.5 text-sm text-gray-200 hover:bg-[#3a3a3a]",onClick:s},fe(z(t).modal.cancelText),1)):pe("",!0),p("button",{class:"rounded border border-emerald-700 bg-emerald-600 px-3 py-1.5 text-sm text-white hover:bg-emerald-700 disabled:cursor-not-allowed disabled:opacity-60",disabled:n.value,onClick:r},fe(z(t).modal.confirmText),9,eC)])])])):pe("",!0)]))}},nC=Ml(tC,[["__scopeId","data-v-9c87af23"]]),oC={class:"flex h-screen w-screen overflow-hidden bg-[#1a1a1a] text-white font-sans antialiased"},rC={class:"flex-1 h-full w-full relative flex"},sC={class:"flex-1 relative h-full"},iC={class:"absolute top-4 right-4 bg-[#1e1e1e]/90 backdrop-blur border border-gray-700 rounded-lg shadow-2xl p-2 flex gap-2 z-10"},lC=["disabled"],aC=["disabled"],uC={class:"flex items-center gap-2 px-3 py-1.5 bg-[#2d2d2d] hover:bg-[#3d3d3d] text-gray-300 hover:text-white rounded text-sm font-medium transition-colors border border-gray-600/50"},cC={__name:"App",setup(e){const t=xe(!1),n=xe(null),o=xe([]),r=xe(!0),s=En(),i=bo(),l=se(()=>Cn(s.activeDatabaseType)),a=se(()=>s.selectedItemType==="collection"||s.selectedItemType==="field"||s.selectedItemType==="edge"),c=se(()=>s.activeCollections.filter(R=>R.selected)),u=se(()=>c.value.length>1),f=se(()=>r.value?"left-[1.05rem] top-4":"left-4 top-16"),g=()=>{i.showToast("AI Assistant: Analysis complete! Consider indexing 'email' in Users.","success")},m=()=>{n.value=null,o.value=[],t.value=!0},N=R=>{o.value=[],n.value=R,t.value=!0},y=R=>{n.value=null,o.value=R,t.value=!0},S=()=>{const R=c.value.map(G=>G.id);R.length<2||y(R)},C=async()=>{const R=c.value.map(j=>j.id);R.length<2||!await i.openConfirm({title:`Delete Selected ${l.value.plural}`,message:`Delete ${R.length} selected ${l.value.pluralLower}? This action cannot be undone immediately.`,confirmText:"Delete"})||(s.removeCollections(R),i.showToast(`${R.length} ${l.value.pluralLower} deleted.`,"success"))},T=()=>{s.undo()},v=()=>{s.redo()},w=()=>{if(s.autoArrangeActiveDatabase()){i.showToast(`${l.value.plural} arranged automatically.`,"success");return}i.showToast(`Need at least 2 ${l.value.pluralLower} to arrange.`,"error")},A=()=>{r.value=!r.value};return ct(()=>{s.initializeDatabases(),s.clearSelections(),s.initializeHistory()}),(R,G)=>(B(),Y("div",oC,[r.value?(B(),Ve(iv,{key:0,onToggleSidebar:A,onExportCollection:N})):pe("",!0),p("main",rC,[p("div",sC,[le(M_),r.value?pe("",!0):(B(),Y("button",{key:0,onClick:A,class:"absolute top-4 left-4 z-20 flex items-center gap-2 px-3 py-1.5 bg-[#1e1e1e]/90 backdrop-blur border border-gray-700 rounded-lg text-gray-300 hover:text-white hover:bg-[#2a2a2a] transition-colors",title:"Show Sidebar"},[le(z(sm),{size:16}),G[1]||(G[1]=We(" Menu ",-1))])),u.value?(B(),Y("div",{key:1,class:ve([f.value,"absolute z-20 bg-[#1e1e1e]/90 backdrop-blur border border-gray-700 rounded-lg shadow-2xl p-2 flex gap-2"])},[p("button",{onClick:S,class:"flex items-center gap-2 px-3 py-1.5 bg-[#2d2d2d] hover:bg-[#3d3d3d] text-gray-300 hover:text-white rounded text-sm font-medium transition-colors border border-gray-600/50"},[le(z(ad),{size:16}),We(" Export Selected "+fe(l.value.plural),1)]),p("button",{onClick:C,class:"flex items-center gap-2 px-3 py-1.5 bg-red-900/25 hover:bg-red-900/40 text-red-300 hover:text-red-200 rounded text-sm font-medium transition-colors border border-red-800/60"},[le(z(kn),{size:16}),We(" Delete Selected "+fe(l.value.plural),1)])],2)):pe("",!0),p("div",iC,[p("button",{onClick:T,disabled:!z(s).canUndo||!z(s).isDirty,class:"flex items-center gap-2 px-3 py-1.5 bg-[#2d2d2d] hover:bg-[#3d3d3d] disabled:hover:bg-[#2d2d2d] text-gray-300 hover:text-white disabled:text-gray-500 rounded text-sm font-medium transition-colors border border-gray-600/50 disabled:opacity-60 disabled:cursor-not-allowed",title:"Undo (Ctrl/Cmd+Z)"},[le(z(um),{size:16}),G[2]||(G[2]=We(" Undo ",-1))],8,lC),p("button",{onClick:v,disabled:!z(s).canRedo||!z(s).isDirty,class:"flex items-center gap-2 px-3 py-1.5 bg-[#2d2d2d] hover:bg-[#3d3d3d] disabled:hover:bg-[#2d2d2d] text-gray-300 hover:text-white disabled:text-gray-500 rounded text-sm font-medium transition-colors border border-gray-600/50 disabled:opacity-60 disabled:cursor-not-allowed",title:"Redo (Ctrl/Cmd+Shift+Z / Ctrl+Y)"},[le(z(im),{size:16}),G[3]||(G[3]=We(" Redo ",-1))],8,aC),G[8]||(G[8]=p("div",{class:"w-px bg-gray-700 mx-1"},null,-1)),p("button",{onClick:w,class:"flex items-center gap-2 px-3 py-1.5 bg-[#2d2d2d] hover:bg-[#3d3d3d] text-gray-300 hover:text-white rounded text-sm font-medium transition-colors border border-gray-600/50",title:"Auto Arrange"},[le(z(om),{size:16}),G[4]||(G[4]=We(" Auto Arrange ",-1))]),G[9]||(G[9]=p("div",{class:"w-px bg-gray-700 mx-1"},null,-1)),p("button",{onClick:g,class:"flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white rounded text-sm font-medium transition-all shadow-lg shadow-purple-900/20"},[le(z(am),{size:16}),G[5]||(G[5]=We(" AI Analyze ",-1))]),G[10]||(G[10]=p("div",{class:"w-px bg-gray-700 mx-1"},null,-1)),p("button",{onClick:m,class:"flex items-center gap-2 px-3 py-1.5 bg-[#2d2d2d] hover:bg-[#3d3d3d] text-gray-300 hover:text-white rounded text-sm font-medium transition-colors border border-gray-600/50"},[le(z(dd),{size:16}),G[6]||(G[6]=We(" Export ",-1))]),p("button",uC,[le(z(lm),{size:16}),G[7]||(G[7]=We(" Share ",-1))])])]),a.value?(B(),Ve(j2,{key:0})):pe("",!0),le(z_,{isOpen:t.value,collectionId:n.value,collectionIds:o.value,onClose:G[0]||(G[0]=j=>t.value=!1)},null,8,["isOpen","collectionId","collectionIds"]),le(nC)])]))}},Mf=cg(cC),dC=pg();Mf.use(dC);Mf.mount("#app");
